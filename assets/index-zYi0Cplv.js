const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-Wui27zwE.js","assets/webworkerAll-DNVsVB5l.js","assets/WebGPURenderer-CenFx7v_.js","assets/BufferResource-BvUQxcnF.js","assets/RenderTargetSystem-BB54FXLq.js","assets/WebGLRenderer-DZVlCGLZ.js","assets/CanvasRenderer-Dw4gBYCm.js"])))=>i.map(i=>d[i]);
var l2=Object.defineProperty;var c2=(n,e,t)=>e in n?l2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Q=(n,e,t)=>c2(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Em(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vf={exports:{}},Wa={},Lf={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function u2(){if(tx)return Ee;tx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function v(I,$,le){this.props=I,this.context=$,this.refs=w,this.updater=le||y}v.prototype.isReactComponent={},v.prototype.setState=function(I,$){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,$,"setState")},v.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function S(){}S.prototype=v.prototype;function T(I,$,le){this.props=I,this.context=$,this.refs=w,this.updater=le||y}var C=T.prototype=new S;C.constructor=T,x(C,v.prototype),C.isPureReactComponent=!0;var P=Array.isArray,k=Object.prototype.hasOwnProperty,M={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function R(I,$,le){var ue,oe={},ce=null,ge=null;if($!=null)for(ue in $.ref!==void 0&&(ge=$.ref),$.key!==void 0&&(ce=""+$.key),$)k.call($,ue)&&!E.hasOwnProperty(ue)&&(oe[ue]=$[ue]);var re=arguments.length-2;if(re===1)oe.children=le;else if(1<re){for(var ke=Array(re),$e=0;$e<re;$e++)ke[$e]=arguments[$e+2];oe.children=ke}if(I&&I.defaultProps)for(ue in re=I.defaultProps,re)oe[ue]===void 0&&(oe[ue]=re[ue]);return{$$typeof:n,type:I,key:ce,ref:ge,props:oe,_owner:M.current}}function O(I,$){return{$$typeof:n,type:I.type,key:$,ref:I.ref,props:I.props,_owner:I._owner}}function D(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function F(I){var $={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(le){return $[le]})}var L=/\/+/g;function X(I,$){return typeof I=="object"&&I!==null&&I.key!=null?F(""+I.key):$.toString(36)}function Z(I,$,le,ue,oe){var ce=typeof I;(ce==="undefined"||ce==="boolean")&&(I=null);var ge=!1;if(I===null)ge=!0;else switch(ce){case"string":case"number":ge=!0;break;case"object":switch(I.$$typeof){case n:case e:ge=!0}}if(ge)return ge=I,oe=oe(ge),I=ue===""?"."+X(ge,0):ue,P(oe)?(le="",I!=null&&(le=I.replace(L,"$&/")+"/"),Z(oe,$,le,"",function($e){return $e})):oe!=null&&(D(oe)&&(oe=O(oe,le+(!oe.key||ge&&ge.key===oe.key?"":(""+oe.key).replace(L,"$&/")+"/")+I)),$.push(oe)),1;if(ge=0,ue=ue===""?".":ue+":",P(I))for(var re=0;re<I.length;re++){ce=I[re];var ke=ue+X(ce,re);ge+=Z(ce,$,le,ke,oe)}else if(ke=g(I),typeof ke=="function")for(I=ke.call(I),re=0;!(ce=I.next()).done;)ce=ce.value,ke=ue+X(ce,re++),ge+=Z(ce,$,le,ke,oe);else if(ce==="object")throw $=String(I),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ge}function ne(I,$,le){if(I==null)return I;var ue=[],oe=0;return Z(I,ue,"","",function(ce){return $.call(le,ce,oe++)}),ue}function W(I){if(I._status===-1){var $=I._result;$=$(),$.then(function(le){(I._status===0||I._status===-1)&&(I._status=1,I._result=le)},function(le){(I._status===0||I._status===-1)&&(I._status=2,I._result=le)}),I._status===-1&&(I._status=0,I._result=$)}if(I._status===1)return I._result.default;throw I._result}var j={current:null},H={transition:null},U={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:H,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:ne,forEach:function(I,$,le){ne(I,function(){$.apply(this,arguments)},le)},count:function(I){var $=0;return ne(I,function(){$++}),$},toArray:function(I){return ne(I,function($){return $})||[]},only:function(I){if(!D(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ee.Component=v,Ee.Fragment=t,Ee.Profiler=r,Ee.PureComponent=T,Ee.StrictMode=s,Ee.Suspense=u,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Ee.act=Y,Ee.cloneElement=function(I,$,le){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ue=x({},I.props),oe=I.key,ce=I.ref,ge=I._owner;if($!=null){if($.ref!==void 0&&(ce=$.ref,ge=M.current),$.key!==void 0&&(oe=""+$.key),I.type&&I.type.defaultProps)var re=I.type.defaultProps;for(ke in $)k.call($,ke)&&!E.hasOwnProperty(ke)&&(ue[ke]=$[ke]===void 0&&re!==void 0?re[ke]:$[ke])}var ke=arguments.length-2;if(ke===1)ue.children=le;else if(1<ke){re=Array(ke);for(var $e=0;$e<ke;$e++)re[$e]=arguments[$e+2];ue.children=re}return{$$typeof:n,type:I.type,key:oe,ref:ce,props:ue,_owner:ge}},Ee.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},Ee.createElement=R,Ee.createFactory=function(I){var $=R.bind(null,I);return $.type=I,$},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(I){return{$$typeof:c,render:I}},Ee.isValidElement=D,Ee.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:W}},Ee.memo=function(I,$){return{$$typeof:h,type:I,compare:$===void 0?null:$}},Ee.startTransition=function(I){var $=H.transition;H.transition={};try{I()}finally{H.transition=$}},Ee.unstable_act=Y,Ee.useCallback=function(I,$){return j.current.useCallback(I,$)},Ee.useContext=function(I){return j.current.useContext(I)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(I){return j.current.useDeferredValue(I)},Ee.useEffect=function(I,$){return j.current.useEffect(I,$)},Ee.useId=function(){return j.current.useId()},Ee.useImperativeHandle=function(I,$,le){return j.current.useImperativeHandle(I,$,le)},Ee.useInsertionEffect=function(I,$){return j.current.useInsertionEffect(I,$)},Ee.useLayoutEffect=function(I,$){return j.current.useLayoutEffect(I,$)},Ee.useMemo=function(I,$){return j.current.useMemo(I,$)},Ee.useReducer=function(I,$,le){return j.current.useReducer(I,$,le)},Ee.useRef=function(I){return j.current.useRef(I)},Ee.useState=function(I){return j.current.useState(I)},Ee.useSyncExternalStore=function(I,$,le){return j.current.useSyncExternalStore(I,$,le)},Ee.useTransition=function(){return j.current.useTransition()},Ee.version="18.3.1",Ee}var nx;function Rm(){return nx||(nx=1,Lf.exports=u2()),Lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx;function h2(){if(sx)return Wa;sx=1;var n=Rm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,h){var f,p={},g=null,y=null;h!==void 0&&(g=""+h),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(f in u)s.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:c,key:g,ref:y,props:p,_owner:r.current}}return Wa.Fragment=t,Wa.jsx=a,Wa.jsxs=a,Wa}var rx;function d2(){return rx||(rx=1,Vf.exports=h2()),Vf.exports}var z=d2();const f2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ro=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=f2[t[n]&63];return e};const uu=2e3,ix={debug:0,info:1,warn:2,error:3};function p2(n){if(n!=null){if(n instanceof Error){const e=n.cause;return{name:n.name,message:n.message,stack:n.stack,cause:e!=null?String(e):void 0}}return{message:String(n)}}}class m2{constructor(){Q(this,"_sessionId",Ro());Q(this,"_flowId",null);Q(this,"_gameSnap",{});Q(this,"_analysisSnap",{});Q(this,"_buffer",new Array(uu));Q(this,"_head",0);Q(this,"_count",0);Q(this,"_isDev",!1);Q(this,"_minLevel","info")}setFlowId(e){this._flowId=e}resetFlowId(){this._flowId=null}setGameSnapshot(e){this._gameSnap={...this._gameSnap,...e}}setAnalysisSnapshot(e){this._analysisSnap={...this._analysisSnap,...e}}_push(e){this._buffer[this._head]=e,this._head=(this._head+1)%uu,this._count<uu&&this._count++}_getEntries(){return this._count<uu?this._buffer.slice(0,this._count):[...this._buffer.slice(this._head),...this._buffer.slice(0,this._head)]}_write(e,t,s,r){if(ix[e]<ix[this._minLevel])return;const i={ts:new Date().toISOString(),level:e,event:t,sessionId:this._sessionId,...this._flowId!=null?{flowId:this._flowId}:{},...this._gameSnap.phase!=null?{phase:this._gameSnap.phase}:{},...s!=null?{data:s}:{},...r!==void 0?{error:p2(r)}:{}};this._push(i),this._isDev&&(e==="error"?console.error:e==="warn"?console.warn:e==="info"?console.info:console.debug)(`[${t}]`,i)}debug(e,t){this._write("debug",e,t)}info(e,t){this._write("info",e,t)}warn(e,t,s){this._write("warn",e,t,s)}error(e,t,s){this._write("error",e,t,s)}getDebugLogPackage(){var i,a;const e=this._getEntries(),t=e.filter(c=>c.level==="error"),s=e.filter(c=>c.level==="warn");let r="unknown";try{r=((a=(i=window.Tone)==null?void 0:i.context)==null?void 0:a.state)??"unknown"}catch{}return{meta:{app:"pixel-beat",version:"0.0.0",exportedAt:new Date().toISOString(),sessionId:this._sessionId,flowId:this._flowId??void 0,userAgent:navigator.userAgent,screen:{w:window.innerWidth,h:window.innerHeight},phase:this._gameSnap.phase,audioContextState:r},summary:{errorCount:t.length,warnCount:s.length,lastError:t.length>0?t[t.length-1]:null,analysis:{...this._analysisSnap},game:{score:this._gameSnap.score,maxCombo:this._gameSnap.maxCombo}},logs:e}}async copyDebugLogs(){const e=this.getDebugLogPackage(),t=JSON.stringify(e,null,2);try{await navigator.clipboard.writeText(t),console.info("[PixelBeat] Debug logs copied to clipboard âœ“")}catch{console.warn("[PixelBeat] Clipboard write failed. Dumping to console:"),console.log(t)}}}const Hr=new m2,Re=(n,e)=>Hr.info(n,e),ph=(n,e,t)=>Hr.warn(n,e,t),Xn=(n,e,t)=>Hr.error(n,e,t),g2=n=>Hr.setFlowId(n),y2=()=>Hr.resetFlowId(),di=n=>Hr.setGameSnapshot(n),_2=n=>Hr.setAnalysisSnapshot(n),v1=()=>Hr.copyDebugLogs(),ox=n=>{let e;const t=new Set,s=(h,f)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const g=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},r=()=>e,c={setState:s,getState:r,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=n(s,r,c);return c},x2=(n=>n?ox(n):ox);var J=Rm();const hu=Em(J),v2=n=>n;function w2(n,e=v2){const t=hu.useSyncExternalStore(n.subscribe,hu.useCallback(()=>e(n.getState()),[n,e]),hu.useCallback(()=>e(n.getInitialState()),[n,e]));return hu.useDebugValue(t),t}const b2=n=>{const e=x2(n),t=s=>w2(e,s);return Object.assign(t,e),t},S2=(n=>b2);function T2(n,e){let t;try{t=n()}catch{return}return{getItem:r=>{var i;const a=u=>u===null?null:JSON.parse(u,void 0),c=(i=t.getItem(r))!=null?i:null;return c instanceof Promise?c.then(a):a(c)},setItem:(r,i)=>t.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>t.removeItem(r)}}const Dp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return Dp(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Dp(s)(t)}}}},C2=(n,e)=>(t,s,r)=>{let i={storage:T2(()=>window.localStorage),partialize:v=>v,version:0,merge:(v,S)=>({...S,...v}),...e},a=!1,c=0;const u=new Set,h=new Set;let f=i.storage;if(!f)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...v)},s,r);const p=()=>{const v=i.partialize({...s()});return f.setItem(i.name,{state:v,version:i.version})},g=r.setState;r.setState=(v,S)=>(g(v,S),p());const y=n((...v)=>(t(...v),p()),s,r);r.getInitialState=()=>y;let x;const w=()=>{var v,S;if(!f)return;const T=++c;a=!1,u.forEach(P=>{var k;return P((k=s())!=null?k:y)});const C=((S=i.onRehydrateStorage)==null?void 0:S.call(i,(v=s())!=null?v:y))||void 0;return Dp(f.getItem.bind(f))(i.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==i.version){if(i.migrate){const k=i.migrate(P.state,P.version);return k instanceof Promise?k.then(M=>[!0,M]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var k;if(T!==c)return;const[M,E]=P;if(x=i.merge(E,(k=s())!=null?k:y),t(x,!0),M)return p()}).then(()=>{T===c&&(C==null||C(x,void 0),x=s(),a=!0,h.forEach(P=>P(x)))}).catch(P=>{T===c&&(C==null||C(void 0,P))})};return r.persist={setOptions:v=>{i={...i,...v},v.storage&&(f=v.storage)},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>a,onHydrate:v=>(u.add(v),()=>{u.delete(v)}),onFinishHydration:v=>(h.add(v),()=>{h.delete(v)})},i.skipHydration||w(),x||y},k2=C2,ax={phase:"idle",mode:"trackpad",difficulty:"easy",song:null,beatMap:null,currentTime:0,combo:0,multiplier:1,score:0,hitResults:[],finalScore:null,highScores:[],musicVolume:-6,sfxVolume:-8,masterVolume:0},Se=S2()(k2(n=>({...ax,setPhase:e=>{Re("app.phase.changed",{to:e,from:Se.getState().phase}),n({phase:e})},setMode:e=>{Re("app.mode.changed",{mode:e}),n({mode:e})},setDifficulty:e=>{Re("app.difficulty.changed",{difficulty:e}),n({difficulty:e})},setSong:e=>{Re("app.song.selected",{songId:e.id,title:e.name}),n({song:e})},setBeatMap:e=>{Re("app.beatmap.set",{bpm:e.bpm,noteCount:e.notes.length}),n({beatMap:e})},setCurrentTime:e=>n({currentTime:e}),updateScoreAndCombo:(e,t,s)=>n({score:e,combo:t,multiplier:s}),addHitResult:e=>n(t=>({hitResults:[...t.hitResults,e]})),setFinalScore:e=>n({finalScore:e}),setHighScores:e=>n({highScores:e}),clearAudioBuffer:()=>{Re("app.audiobuffer.cleared",{}),n(e=>({song:e.song?{...e.song,audioBuffer:null}:null}))},setMusicVolume:e=>n({musicVolume:e}),setSfxVolume:e=>n({sfxVolume:e}),setMasterVolume:e=>n({masterVolume:e}),reset:()=>{Re("app.state.reset",{}),n(e=>({...ax,mode:e.mode,difficulty:e.difficulty,musicVolume:e.musicVolume,sfxVolume:e.sfxVolume,masterVolume:e.masterVolume,highScores:e.highScores}))}}),{name:"pixelbeat-storage",partialize:n=>({mode:n.mode,difficulty:n.difficulty,musicVolume:n.musicVolume,sfxVolume:n.sfxVolume,masterVolume:n.masterVolume,highScores:n.highScores})}));function A2(){Se.subscribe((n,e)=>{n.phase!==e.phase&&(Re("app.phase.changed",{from:e.phase,to:n.phase}),di({phase:n.phase}),n.phase==="idle"&&e.phase!=="idle"&&y2())})}class M2 extends J.Component{constructor(){super(...arguments);Q(this,"state",{hasError:!1,errorMessage:""})}static getDerivedStateFromError(t){return{hasError:!0,errorMessage:t.message}}componentDidCatch(t,s){Xn("app.render.error",{componentStack:s.componentStack??void 0},t)}render(){return this.state.hasError?z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#0a0a1a",color:"#fff",fontFamily:"monospace",padding:24,textAlign:"center"},children:[z.jsx("h1",{style:{color:"#ff00ff",fontSize:28,marginBottom:16},children:"CRITICAL ERROR"}),z.jsx("p",{style:{color:"#ff6b6b",marginBottom:24,maxWidth:480},children:this.state.errorMessage}),z.jsx("button",{onClick:()=>{v1()},style:{background:"#00ffff",color:"#000",border:"none",padding:"12px 24px",cursor:"pointer",fontSize:16,fontWeight:"bold",fontFamily:"monospace",marginBottom:12},children:"COPY DEBUG LOGS"}),z.jsx("button",{onClick:()=>window.location.reload(),style:{background:"transparent",color:"#888",border:"1px solid #444",padding:"10px 20px",cursor:"pointer",fontSize:14,fontFamily:"monospace"},children:"RELOAD APP"})]}):this.props.children}}var du={},Bf={exports:{}},_n={},zf={exports:{}},jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function P2(){return lx||(lx=1,(function(n){function e(H,U){var Y=H.length;H.push(U);e:for(;0<Y;){var I=Y-1>>>1,$=H[I];if(0<r($,U))H[I]=U,H[Y]=$,Y=I;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var U=H[0],Y=H.pop();if(Y!==U){H[0]=Y;e:for(var I=0,$=H.length,le=$>>>1;I<le;){var ue=2*(I+1)-1,oe=H[ue],ce=ue+1,ge=H[ce];if(0>r(oe,Y))ce<$&&0>r(ge,oe)?(H[I]=ge,H[ce]=Y,I=ce):(H[I]=oe,H[ue]=Y,I=ue);else if(ce<$&&0>r(ge,Y))H[I]=ge,H[ce]=Y,I=ce;else break e}}return U}function r(H,U){var Y=H.sortIndex-U.sortIndex;return Y!==0?Y:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var u=[],h=[],f=1,p=null,g=3,y=!1,x=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var U=t(h);U!==null;){if(U.callback===null)s(h);else if(U.startTime<=H)s(h),U.sortIndex=U.expirationTime,e(u,U);else break;U=t(h)}}function P(H){if(w=!1,C(H),!x)if(t(u)!==null)x=!0,W(k);else{var U=t(h);U!==null&&j(P,U.startTime-H)}}function k(H,U){x=!1,w&&(w=!1,S(R),R=-1),y=!0;var Y=g;try{for(C(U),p=t(u);p!==null&&(!(p.expirationTime>U)||H&&!F());){var I=p.callback;if(typeof I=="function"){p.callback=null,g=p.priorityLevel;var $=I(p.expirationTime<=U);U=n.unstable_now(),typeof $=="function"?p.callback=$:p===t(u)&&s(u),C(U)}else s(u);p=t(u)}if(p!==null)var le=!0;else{var ue=t(h);ue!==null&&j(P,ue.startTime-U),le=!1}return le}finally{p=null,g=Y,y=!1}}var M=!1,E=null,R=-1,O=5,D=-1;function F(){return!(n.unstable_now()-D<O)}function L(){if(E!==null){var H=n.unstable_now();D=H;var U=!0;try{U=E(!0,H)}finally{U?X():(M=!1,E=null)}}else M=!1}var X;if(typeof T=="function")X=function(){T(L)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ne=Z.port2;Z.port1.onmessage=L,X=function(){ne.postMessage(null)}}else X=function(){v(L,0)};function W(H){E=H,M||(M=!0,X())}function j(H,U){R=v(function(){H(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){x||y||(x=!0,W(k))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(H){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var Y=g;g=U;try{return H()}finally{g=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=g;g=H;try{return U()}finally{g=Y}},n.unstable_scheduleCallback=function(H,U,Y){var I=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?I+Y:I):Y=I,H){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,H={id:f++,callback:U,priorityLevel:H,startTime:Y,expirationTime:$,sortIndex:-1},Y>I?(H.sortIndex=Y,e(h,H),t(u)===null&&H===t(h)&&(w?(S(R),R=-1):w=!0,j(P,Y-I))):(H.sortIndex=$,e(u,H),x||y||(x=!0,W(k))),H},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(H){var U=g;return function(){var Y=g;g=U;try{return H.apply(this,arguments)}finally{g=Y}}}})(jf)),jf}var cx;function E2(){return cx||(cx=1,zf.exports=P2()),zf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function R2(){if(ux)return _n;ux=1;var n=Rm(),e=E2();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,r={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(r[o]=l,o=0;o<l.length;o++)s.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(o){return u.call(p,o)?!0:u.call(f,o)?!1:h.test(o)?p[o]=!0:(f[o]=!0,!1)}function y(o,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function x(o,l,d,m){if(l===null||typeof l>"u"||y(o,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(o,l,d,m,_,b,A){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=_,this.mustUseProperty=d,this.propertyName=o,this.type=l,this.sanitizeURL=b,this.removeEmptyString=A}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){v[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];v[l]=new w(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){v[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){v[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){v[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){v[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){v[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){v[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){v[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(S,T);v[l]=new w(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(S,T);v[l]=new w(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(S,T);v[l]=new w(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){v[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){v[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,l,d,m){var _=v.hasOwnProperty(l)?v[l]:null;(_!==null?_.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,d,_,m)&&(d=null),m||_===null?g(l)&&(d===null?o.removeAttribute(l):o.setAttribute(l,""+d)):_.mustUseProperty?o[_.propertyName]=d===null?_.type===3?!1:"":d:(l=_.attributeName,m=_.attributeNamespace,d===null?o.removeAttribute(l):(_=_.type,d=_===3||_===4&&d===!0?"":""+d,m?o.setAttributeNS(m,l,d):o.setAttribute(l,d))))}var P=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),M=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),H=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var Y=Object.assign,I;function $(o){if(I===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);I=l&&l[1]||""}return`
`+I+o}var le=!1;function ue(o,l){if(!o||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(K){var m=K}Reflect.construct(o,[],l)}else{try{l.call()}catch(K){m=K}o.call(l.prototype)}else{try{throw Error()}catch(K){m=K}o()}}catch(K){if(K&&m&&typeof K.stack=="string"){for(var _=K.stack.split(`
`),b=m.stack.split(`
`),A=_.length-1,N=b.length-1;1<=A&&0<=N&&_[A]!==b[N];)N--;for(;1<=A&&0<=N;A--,N--)if(_[A]!==b[N]){if(A!==1||N!==1)do if(A--,N--,0>N||_[A]!==b[N]){var V=`
`+_[A].replace(" at new "," at ");return o.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",o.displayName)),V}while(1<=A&&0<=N);break}}}finally{le=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?$(o):""}function oe(o){switch(o.tag){case 5:return $(o.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return o=ue(o.type,!1),o;case 11:return o=ue(o.type.render,!1),o;case 1:return o=ue(o.type,!0),o;default:return""}}function ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case M:return"Portal";case O:return"Profiler";case R:return"StrictMode";case X:return"Suspense";case Z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case F:return(o.displayName||"Context")+".Consumer";case D:return(o._context.displayName||"Context")+".Provider";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ne:return l=o.displayName||null,l!==null?l:ce(o.type)||"Memo";case W:l=o._payload,o=o._init;try{return ce(o(l))}catch{}}return null}function ge(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function re(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ke(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function $e(o){var l=ke(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,b=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return _.call(this)},set:function(A){m=""+A,b.call(this,A)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function tn(o){o._valueTracker||(o._valueTracker=$e(o))}function zt(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return o&&(m=ke(o)?o.checked?"true":"false":o.value),o=m,o!==d?(l.setValue(o),!0):!1}function dn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Tn(o,l){var d=l.checked;return Y({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function ae(o,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=re(l.value!=null?l.value:d),o._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ye(o,l){l=l.checked,l!=null&&C(o,"checked",l,!1)}function qe(o,l){ye(o,l);var d=re(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ie(o,l.type,d):l.hasOwnProperty("defaultValue")&&Ie(o,l.type,re(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function ze(o,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,d||l===o.value||(o.value=l),o.defaultValue=l}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function Ie(o,l,d){(l!=="number"||dn(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var je=Array.isArray;function Ct(o,l,d,m){if(o=o.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<o.length;d++)_=l.hasOwnProperty("$"+o[d].value),o[d].selected!==_&&(o[d].selected=_),_&&m&&(o[d].defaultSelected=!0)}else{for(d=""+re(d),l=null,_=0;_<o.length;_++){if(o[_].value===d){o[_].selected=!0,m&&(o[_].defaultSelected=!0);return}l!==null||o[_].disabled||(l=o[_])}l!==null&&(l.selected=!0)}}function Ln(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function cr(o,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(je(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}o._wrapperState={initialValue:re(d)}}function zi(o,l){var d=re(l.value),m=re(l.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),l.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),m!=null&&(o.defaultValue=""+m)}function ec(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function tc(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qh(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?tc(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var nc,my=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,_){MSApp.execUnsafeLocalFunction(function(){return o(l,d,m,_)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(nc=nc||document.createElement("div"),nc.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=nc.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function ia(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dk=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(o){dk.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),oa[l]=oa[o]})});function gy(o,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||oa.hasOwnProperty(o)&&oa[o]?(""+l).trim():l+"px"}function yy(o,l){o=o.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,_=gy(d,l[d],m);d==="float"&&(d="cssFloat"),m?o.setProperty(d,_):o[d]=_}}var fk=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yh(o,l){if(l){if(fk[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Xh(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kh=null;function Zh(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qh=null,ji=null,Ui=null;function _y(o){if(o=Ma(o)){if(typeof Qh!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Cc(l),Qh(o.stateNode,o.type,l))}}function xy(o){ji?Ui?Ui.push(o):Ui=[o]:ji=o}function vy(){if(ji){var o=ji,l=Ui;if(Ui=ji=null,_y(o),l)for(o=0;o<l.length;o++)_y(l[o])}}function wy(o,l){return o(l)}function by(){}var Jh=!1;function Sy(o,l,d){if(Jh)return o(l,d);Jh=!0;try{return wy(o,l,d)}finally{Jh=!1,(ji!==null||Ui!==null)&&(by(),vy())}}function aa(o,l){var d=o.stateNode;if(d===null)return null;var m=Cc(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var ed=!1;if(c)try{var la={};Object.defineProperty(la,"passive",{get:function(){ed=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{ed=!1}function pk(o,l,d,m,_,b,A,N,V){var K=Array.prototype.slice.call(arguments,3);try{l.apply(d,K)}catch(te){this.onError(te)}}var ca=!1,sc=null,rc=!1,td=null,mk={onError:function(o){ca=!0,sc=o}};function gk(o,l,d,m,_,b,A,N,V){ca=!1,sc=null,pk.apply(mk,arguments)}function yk(o,l,d,m,_,b,A,N,V){if(gk.apply(this,arguments),ca){if(ca){var K=sc;ca=!1,sc=null}else throw Error(t(198));rc||(rc=!0,td=K)}}function Kr(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function Ty(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Cy(o){if(Kr(o)!==o)throw Error(t(188))}function _k(o){var l=o.alternate;if(!l){if(l=Kr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var d=o,m=l;;){var _=d.return;if(_===null)break;var b=_.alternate;if(b===null){if(m=_.return,m!==null){d=m;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===d)return Cy(_),o;if(b===m)return Cy(_),l;b=b.sibling}throw Error(t(188))}if(d.return!==m.return)d=_,m=b;else{for(var A=!1,N=_.child;N;){if(N===d){A=!0,d=_,m=b;break}if(N===m){A=!0,m=_,d=b;break}N=N.sibling}if(!A){for(N=b.child;N;){if(N===d){A=!0,d=b,m=_;break}if(N===m){A=!0,m=b,d=_;break}N=N.sibling}if(!A)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?o:l}function ky(o){return o=_k(o),o!==null?Ay(o):null}function Ay(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Ay(o);if(l!==null)return l;o=o.sibling}return null}var My=e.unstable_scheduleCallback,Py=e.unstable_cancelCallback,xk=e.unstable_shouldYield,vk=e.unstable_requestPaint,gt=e.unstable_now,wk=e.unstable_getCurrentPriorityLevel,nd=e.unstable_ImmediatePriority,Ey=e.unstable_UserBlockingPriority,ic=e.unstable_NormalPriority,bk=e.unstable_LowPriority,Ry=e.unstable_IdlePriority,oc=null,vs=null;function Sk(o){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(oc,o,void 0,(o.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:kk,Tk=Math.log,Ck=Math.LN2;function kk(o){return o>>>=0,o===0?32:31-(Tk(o)/Ck|0)|0}var ac=64,lc=4194304;function ua(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function cc(o,l){var d=o.pendingLanes;if(d===0)return 0;var m=0,_=o.suspendedLanes,b=o.pingedLanes,A=d&268435455;if(A!==0){var N=A&~_;N!==0?m=ua(N):(b&=A,b!==0&&(m=ua(b)))}else A=d&~_,A!==0?m=ua(A):b!==0&&(m=ua(b));if(m===0)return 0;if(l!==0&&l!==m&&(l&_)===0&&(_=m&-m,b=l&-l,_>=b||_===16&&(b&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=m;0<l;)d=31-Jn(l),_=1<<d,m|=o[d],l&=~_;return m}function Ak(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mk(o,l){for(var d=o.suspendedLanes,m=o.pingedLanes,_=o.expirationTimes,b=o.pendingLanes;0<b;){var A=31-Jn(b),N=1<<A,V=_[A];V===-1?((N&d)===0||(N&m)!==0)&&(_[A]=Ak(N,l)):V<=l&&(o.expiredLanes|=N),b&=~N}}function sd(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Iy(){var o=ac;return ac<<=1,(ac&4194240)===0&&(ac=64),o}function rd(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function ha(o,l,d){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Jn(l),o[l]=d}function Pk(o,l){var d=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<d;){var _=31-Jn(d),b=1<<_;l[_]=0,m[_]=-1,o[_]=-1,d&=~b}}function id(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var m=31-Jn(d),_=1<<m;_&l|o[m]&l&&(o[m]|=l),d&=~_}}var Be=0;function Ny(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Dy,od,Oy,Fy,Vy,ad=!1,uc=[],ur=null,hr=null,dr=null,da=new Map,fa=new Map,fr=[],Ek="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ly(o,l){switch(o){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":da.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":fa.delete(l.pointerId)}}function pa(o,l,d,m,_,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:b,targetContainers:[_]},l!==null&&(l=Ma(l),l!==null&&od(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),o)}function Rk(o,l,d,m,_){switch(l){case"focusin":return ur=pa(ur,o,l,d,m,_),!0;case"dragenter":return hr=pa(hr,o,l,d,m,_),!0;case"mouseover":return dr=pa(dr,o,l,d,m,_),!0;case"pointerover":var b=_.pointerId;return da.set(b,pa(da.get(b)||null,o,l,d,m,_)),!0;case"gotpointercapture":return b=_.pointerId,fa.set(b,pa(fa.get(b)||null,o,l,d,m,_)),!0}return!1}function By(o){var l=Zr(o.target);if(l!==null){var d=Kr(l);if(d!==null){if(l=d.tag,l===13){if(l=Ty(d),l!==null){o.blockedOn=l,Vy(o.priority,function(){Oy(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function hc(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=cd(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);Kh=m,d.target.dispatchEvent(m),Kh=null}else return l=Ma(d),l!==null&&od(l),o.blockedOn=d,!1;l.shift()}return!0}function zy(o,l,d){hc(o)&&d.delete(l)}function Ik(){ad=!1,ur!==null&&hc(ur)&&(ur=null),hr!==null&&hc(hr)&&(hr=null),dr!==null&&hc(dr)&&(dr=null),da.forEach(zy),fa.forEach(zy)}function ma(o,l){o.blockedOn===l&&(o.blockedOn=null,ad||(ad=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ik)))}function ga(o){function l(_){return ma(_,o)}if(0<uc.length){ma(uc[0],o);for(var d=1;d<uc.length;d++){var m=uc[d];m.blockedOn===o&&(m.blockedOn=null)}}for(ur!==null&&ma(ur,o),hr!==null&&ma(hr,o),dr!==null&&ma(dr,o),da.forEach(l),fa.forEach(l),d=0;d<fr.length;d++)m=fr[d],m.blockedOn===o&&(m.blockedOn=null);for(;0<fr.length&&(d=fr[0],d.blockedOn===null);)By(d),d.blockedOn===null&&fr.shift()}var Wi=P.ReactCurrentBatchConfig,dc=!0;function Nk(o,l,d,m){var _=Be,b=Wi.transition;Wi.transition=null;try{Be=1,ld(o,l,d,m)}finally{Be=_,Wi.transition=b}}function Dk(o,l,d,m){var _=Be,b=Wi.transition;Wi.transition=null;try{Be=4,ld(o,l,d,m)}finally{Be=_,Wi.transition=b}}function ld(o,l,d,m){if(dc){var _=cd(o,l,d,m);if(_===null)kd(o,l,m,fc,d),Ly(o,m);else if(Rk(_,o,l,d,m))m.stopPropagation();else if(Ly(o,m),l&4&&-1<Ek.indexOf(o)){for(;_!==null;){var b=Ma(_);if(b!==null&&Dy(b),b=cd(o,l,d,m),b===null&&kd(o,l,m,fc,d),b===_)break;_=b}_!==null&&m.stopPropagation()}else kd(o,l,m,null,d)}}var fc=null;function cd(o,l,d,m){if(fc=null,o=Zh(m),o=Zr(o),o!==null)if(l=Kr(o),l===null)o=null;else if(d=l.tag,d===13){if(o=Ty(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return fc=o,null}function jy(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wk()){case nd:return 1;case Ey:return 4;case ic:case bk:return 16;case Ry:return 536870912;default:return 16}default:return 16}}var pr=null,ud=null,pc=null;function Uy(){if(pc)return pc;var o,l=ud,d=l.length,m,_="value"in pr?pr.value:pr.textContent,b=_.length;for(o=0;o<d&&l[o]===_[o];o++);var A=d-o;for(m=1;m<=A&&l[d-m]===_[b-m];m++);return pc=_.slice(o,1<m?1-m:void 0)}function mc(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function gc(){return!0}function Wy(){return!1}function Cn(o){function l(d,m,_,b,A){this._reactName=d,this._targetInst=_,this.type=m,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(d=o[N],this[N]=d?d(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gc:Wy,this.isPropagationStopped=Wy,this}return Y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),l}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=Cn(Gi),ya=Y({},Gi,{view:0,detail:0}),Ok=Cn(ya),dd,fd,_a,yc=Y({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==_a&&(_a&&o.type==="mousemove"?(dd=o.screenX-_a.screenX,fd=o.screenY-_a.screenY):fd=dd=0,_a=o),dd)},movementY:function(o){return"movementY"in o?o.movementY:fd}}),Gy=Cn(yc),Fk=Y({},yc,{dataTransfer:0}),Vk=Cn(Fk),Lk=Y({},ya,{relatedTarget:0}),pd=Cn(Lk),Bk=Y({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),zk=Cn(Bk),jk=Y({},Gi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Uk=Cn(jk),Wk=Y({},Gi,{data:0}),Hy=Cn(Wk),Gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qk(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=$k[o])?!!l[o]:!1}function md(){return qk}var Yk=Y({},ya,{key:function(o){if(o.key){var l=Gk[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=mc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hk[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(o){return o.type==="keypress"?mc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?mc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Xk=Cn(Yk),Kk=Y({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$y=Cn(Kk),Zk=Y({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),Qk=Cn(Zk),Jk=Y({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),eA=Cn(Jk),tA=Y({},yc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),nA=Cn(tA),sA=[9,13,27,32],gd=c&&"CompositionEvent"in window,xa=null;c&&"documentMode"in document&&(xa=document.documentMode);var rA=c&&"TextEvent"in window&&!xa,qy=c&&(!gd||xa&&8<xa&&11>=xa),Yy=" ",Xy=!1;function Ky(o,l){switch(o){case"keyup":return sA.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Hi=!1;function iA(o,l){switch(o){case"compositionend":return Zy(l);case"keypress":return l.which!==32?null:(Xy=!0,Yy);case"textInput":return o=l.data,o===Yy&&Xy?null:o;default:return null}}function oA(o,l){if(Hi)return o==="compositionend"||!gd&&Ky(o,l)?(o=Uy(),pc=ud=pr=null,Hi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return qy&&l.locale!=="ko"?null:l.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!aA[o.type]:l==="textarea"}function Jy(o,l,d,m){xy(m),l=bc(l,"onChange"),0<l.length&&(d=new hd("onChange","change",null,d,m),o.push({event:d,listeners:l}))}var va=null,wa=null;function lA(o){y0(o,0)}function _c(o){var l=Ki(o);if(zt(l))return o}function cA(o,l){if(o==="change")return l}var e0=!1;if(c){var yd;if(c){var _d="oninput"in document;if(!_d){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),_d=typeof t0.oninput=="function"}yd=_d}else yd=!1;e0=yd&&(!document.documentMode||9<document.documentMode)}function n0(){va&&(va.detachEvent("onpropertychange",s0),wa=va=null)}function s0(o){if(o.propertyName==="value"&&_c(wa)){var l=[];Jy(l,wa,o,Zh(o)),Sy(lA,l)}}function uA(o,l,d){o==="focusin"?(n0(),va=l,wa=d,va.attachEvent("onpropertychange",s0)):o==="focusout"&&n0()}function hA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return _c(wa)}function dA(o,l){if(o==="click")return _c(l)}function fA(o,l){if(o==="input"||o==="change")return _c(l)}function pA(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var es=typeof Object.is=="function"?Object.is:pA;function ba(o,l){if(es(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var _=d[m];if(!u.call(l,_)||!es(o[_],l[_]))return!1}return!0}function r0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function i0(o,l){var d=r0(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=l&&m>=l)return{node:d,offset:l-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=r0(d)}}function o0(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?o0(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function a0(){for(var o=window,l=dn();l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=dn(o.document)}return l}function xd(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function mA(o){var l=a0(),d=o.focusedElem,m=o.selectionRange;if(l!==d&&d&&d.ownerDocument&&o0(d.ownerDocument.documentElement,d)){if(m!==null&&xd(d)){if(l=m.start,o=m.end,o===void 0&&(o=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(o,d.value.length);else if(o=(l=d.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var _=d.textContent.length,b=Math.min(m.start,_);m=m.end===void 0?b:Math.min(m.end,_),!o.extend&&b>m&&(_=m,m=b,b=_),_=i0(d,b);var A=i0(d,m);_&&A&&(o.rangeCount!==1||o.anchorNode!==_.node||o.anchorOffset!==_.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),o.removeAllRanges(),b>m?(o.addRange(l),o.extend(A.node,A.offset)):(l.setEnd(A.node,A.offset),o.addRange(l)))}}for(l=[],o=d;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)o=l[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var gA=c&&"documentMode"in document&&11>=document.documentMode,$i=null,vd=null,Sa=null,wd=!1;function l0(o,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;wd||$i==null||$i!==dn(m)||(m=$i,"selectionStart"in m&&xd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Sa&&ba(Sa,m)||(Sa=m,m=bc(vd,"onSelect"),0<m.length&&(l=new hd("onSelect","select",null,l,d),o.push({event:l,listeners:m}),l.target=$i)))}function xc(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var qi={animationend:xc("Animation","AnimationEnd"),animationiteration:xc("Animation","AnimationIteration"),animationstart:xc("Animation","AnimationStart"),transitionend:xc("Transition","TransitionEnd")},bd={},c0={};c&&(c0=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function vc(o){if(bd[o])return bd[o];if(!qi[o])return o;var l=qi[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in c0)return bd[o]=l[d];return o}var u0=vc("animationend"),h0=vc("animationiteration"),d0=vc("animationstart"),f0=vc("transitionend"),p0=new Map,m0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(o,l){p0.set(o,l),i(l,[o])}for(var Sd=0;Sd<m0.length;Sd++){var Td=m0[Sd],yA=Td.toLowerCase(),_A=Td[0].toUpperCase()+Td.slice(1);mr(yA,"on"+_A)}mr(u0,"onAnimationEnd"),mr(h0,"onAnimationIteration"),mr(d0,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(f0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function g0(o,l,d){var m=o.type||"unknown-event";o.currentTarget=d,yk(m,l,void 0,o),o.currentTarget=null}function y0(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],_=m.event;m=m.listeners;e:{var b=void 0;if(l)for(var A=m.length-1;0<=A;A--){var N=m[A],V=N.instance,K=N.currentTarget;if(N=N.listener,V!==b&&_.isPropagationStopped())break e;g0(_,N,K),b=V}else for(A=0;A<m.length;A++){if(N=m[A],V=N.instance,K=N.currentTarget,N=N.listener,V!==b&&_.isPropagationStopped())break e;g0(_,N,K),b=V}}}if(rc)throw o=td,rc=!1,td=null,o}function Ke(o,l){var d=l[Id];d===void 0&&(d=l[Id]=new Set);var m=o+"__bubble";d.has(m)||(_0(l,o,2,!1),d.add(m))}function Cd(o,l,d){var m=0;l&&(m|=4),_0(d,o,m,l)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Ca(o){if(!o[wc]){o[wc]=!0,s.forEach(function(d){d!=="selectionchange"&&(xA.has(d)||Cd(d,!1,o),Cd(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[wc]||(l[wc]=!0,Cd("selectionchange",!1,l))}}function _0(o,l,d,m){switch(jy(l)){case 1:var _=Nk;break;case 4:_=Dk;break;default:_=ld}d=_.bind(null,l,d,o),_=void 0,!ed||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),m?_!==void 0?o.addEventListener(l,d,{capture:!0,passive:_}):o.addEventListener(l,d,!0):_!==void 0?o.addEventListener(l,d,{passive:_}):o.addEventListener(l,d,!1)}function kd(o,l,d,m,_){var b=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var N=m.stateNode.containerInfo;if(N===_||N.nodeType===8&&N.parentNode===_)break;if(A===4)for(A=m.return;A!==null;){var V=A.tag;if((V===3||V===4)&&(V=A.stateNode.containerInfo,V===_||V.nodeType===8&&V.parentNode===_))return;A=A.return}for(;N!==null;){if(A=Zr(N),A===null)return;if(V=A.tag,V===5||V===6){m=b=A;continue e}N=N.parentNode}}m=m.return}Sy(function(){var K=b,te=Zh(d),se=[];e:{var ee=p0.get(o);if(ee!==void 0){var he=hd,fe=o;switch(o){case"keypress":if(mc(d)===0)break e;case"keydown":case"keyup":he=Xk;break;case"focusin":fe="focus",he=pd;break;case"focusout":fe="blur",he=pd;break;case"beforeblur":case"afterblur":he=pd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Vk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Qk;break;case u0:case h0:case d0:he=zk;break;case f0:he=eA;break;case"scroll":he=Ok;break;case"wheel":he=nA;break;case"copy":case"cut":case"paste":he=Uk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=$y}var pe=(l&4)!==0,yt=!pe&&o==="scroll",G=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var B=K,q;B!==null;){q=B;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,G!==null&&(ie=aa(B,G),ie!=null&&pe.push(ka(B,ie,q)))),yt)break;B=B.return}0<pe.length&&(ee=new he(ee,fe,null,d,te),se.push({event:ee,listeners:pe}))}}if((l&7)===0){e:{if(ee=o==="mouseover"||o==="pointerover",he=o==="mouseout"||o==="pointerout",ee&&d!==Kh&&(fe=d.relatedTarget||d.fromElement)&&(Zr(fe)||fe[Bs]))break e;if((he||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,he?(fe=d.relatedTarget||d.toElement,he=K,fe=fe?Zr(fe):null,fe!==null&&(yt=Kr(fe),fe!==yt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(he=null,fe=K),he!==fe)){if(pe=Gy,ie="onMouseLeave",G="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(pe=$y,ie="onPointerLeave",G="onPointerEnter",B="pointer"),yt=he==null?ee:Ki(he),q=fe==null?ee:Ki(fe),ee=new pe(ie,B+"leave",he,d,te),ee.target=yt,ee.relatedTarget=q,ie=null,Zr(te)===K&&(pe=new pe(G,B+"enter",fe,d,te),pe.target=q,pe.relatedTarget=yt,ie=pe),yt=ie,he&&fe)t:{for(pe=he,G=fe,B=0,q=pe;q;q=Yi(q))B++;for(q=0,ie=G;ie;ie=Yi(ie))q++;for(;0<B-q;)pe=Yi(pe),B--;for(;0<q-B;)G=Yi(G),q--;for(;B--;){if(pe===G||G!==null&&pe===G.alternate)break t;pe=Yi(pe),G=Yi(G)}pe=null}else pe=null;he!==null&&x0(se,ee,he,pe,!1),fe!==null&&yt!==null&&x0(se,yt,fe,pe,!0)}}e:{if(ee=K?Ki(K):window,he=ee.nodeName&&ee.nodeName.toLowerCase(),he==="select"||he==="input"&&ee.type==="file")var me=cA;else if(Qy(ee))if(e0)me=fA;else{me=hA;var _e=uA}else(he=ee.nodeName)&&he.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(me=dA);if(me&&(me=me(o,K))){Jy(se,me,d,te);break e}_e&&_e(o,ee,K),o==="focusout"&&(_e=ee._wrapperState)&&_e.controlled&&ee.type==="number"&&Ie(ee,"number",ee.value)}switch(_e=K?Ki(K):window,o){case"focusin":(Qy(_e)||_e.contentEditable==="true")&&($i=_e,vd=K,Sa=null);break;case"focusout":Sa=vd=$i=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,l0(se,d,te);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":l0(se,d,te)}var xe;if(gd)e:{switch(o){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Hi?Ky(o,d)&&(we="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(we="onCompositionStart");we&&(qy&&d.locale!=="ko"&&(Hi||we!=="onCompositionStart"?we==="onCompositionEnd"&&Hi&&(xe=Uy()):(pr=te,ud="value"in pr?pr.value:pr.textContent,Hi=!0)),_e=bc(K,we),0<_e.length&&(we=new Hy(we,o,null,d,te),se.push({event:we,listeners:_e}),xe?we.data=xe:(xe=Zy(d),xe!==null&&(we.data=xe)))),(xe=rA?iA(o,d):oA(o,d))&&(K=bc(K,"onBeforeInput"),0<K.length&&(te=new Hy("onBeforeInput","beforeinput",null,d,te),se.push({event:te,listeners:K}),te.data=xe))}y0(se,l)})}function ka(o,l,d){return{instance:o,listener:l,currentTarget:d}}function bc(o,l){for(var d=l+"Capture",m=[];o!==null;){var _=o,b=_.stateNode;_.tag===5&&b!==null&&(_=b,b=aa(o,d),b!=null&&m.unshift(ka(o,b,_)),b=aa(o,l),b!=null&&m.push(ka(o,b,_))),o=o.return}return m}function Yi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function x0(o,l,d,m,_){for(var b=l._reactName,A=[];d!==null&&d!==m;){var N=d,V=N.alternate,K=N.stateNode;if(V!==null&&V===m)break;N.tag===5&&K!==null&&(N=K,_?(V=aa(d,b),V!=null&&A.unshift(ka(d,V,N))):_||(V=aa(d,b),V!=null&&A.push(ka(d,V,N)))),d=d.return}A.length!==0&&o.push({event:l,listeners:A})}var vA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function v0(o){return(typeof o=="string"?o:""+o).replace(vA,`
`).replace(wA,"")}function Sc(o,l,d){if(l=v0(l),v0(o)!==l&&d)throw Error(t(425))}function Tc(){}var Ad=null,Md=null;function Pd(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,bA=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,SA=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(o){return w0.resolve(null).then(o).catch(TA)}:Ed;function TA(o){setTimeout(function(){throw o})}function Rd(o,l){var d=l,m=0;do{var _=d.nextSibling;if(o.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(m===0){o.removeChild(_),ga(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=_}while(d);ga(l)}function gr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function b0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),ws="__reactFiber$"+Xi,Aa="__reactProps$"+Xi,Bs="__reactContainer$"+Xi,Id="__reactEvents$"+Xi,CA="__reactListeners$"+Xi,kA="__reactHandles$"+Xi;function Zr(o){var l=o[ws];if(l)return l;for(var d=o.parentNode;d;){if(l=d[Bs]||d[ws]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=b0(o);o!==null;){if(d=o[ws])return d;o=b0(o)}return l}o=d,d=o.parentNode}return null}function Ma(o){return o=o[ws]||o[Bs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ki(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Cc(o){return o[Aa]||null}var Nd=[],Zi=-1;function yr(o){return{current:o}}function Ze(o){0>Zi||(o.current=Nd[Zi],Nd[Zi]=null,Zi--)}function Ye(o,l){Zi++,Nd[Zi]=o.current,o.current=l}var _r={},qt=yr(_r),fn=yr(!1),Qr=_r;function Qi(o,l){var d=o.type.contextTypes;if(!d)return _r;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var _={},b;for(b in d)_[b]=l[b];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=_),_}function pn(o){return o=o.childContextTypes,o!=null}function kc(){Ze(fn),Ze(qt)}function S0(o,l,d){if(qt.current!==_r)throw Error(t(168));Ye(qt,l),Ye(fn,d)}function T0(o,l,d){var m=o.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var _ in m)if(!(_ in l))throw Error(t(108,ge(o)||"Unknown",_));return Y({},d,m)}function Ac(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||_r,Qr=qt.current,Ye(qt,o),Ye(fn,fn.current),!0}function C0(o,l,d){var m=o.stateNode;if(!m)throw Error(t(169));d?(o=T0(o,l,Qr),m.__reactInternalMemoizedMergedChildContext=o,Ze(fn),Ze(qt),Ye(qt,o)):Ze(fn),Ye(fn,d)}var zs=null,Mc=!1,Dd=!1;function k0(o){zs===null?zs=[o]:zs.push(o)}function AA(o){Mc=!0,k0(o)}function xr(){if(!Dd&&zs!==null){Dd=!0;var o=0,l=Be;try{var d=zs;for(Be=1;o<d.length;o++){var m=d[o];do m=m(!0);while(m!==null)}zs=null,Mc=!1}catch(_){throw zs!==null&&(zs=zs.slice(o+1)),My(nd,xr),_}finally{Be=l,Dd=!1}}return null}var Ji=[],eo=0,Pc=null,Ec=0,Bn=[],zn=0,Jr=null,js=1,Us="";function ei(o,l){Ji[eo++]=Ec,Ji[eo++]=Pc,Pc=o,Ec=l}function A0(o,l,d){Bn[zn++]=js,Bn[zn++]=Us,Bn[zn++]=Jr,Jr=o;var m=js;o=Us;var _=32-Jn(m)-1;m&=~(1<<_),d+=1;var b=32-Jn(l)+_;if(30<b){var A=_-_%5;b=(m&(1<<A)-1).toString(32),m>>=A,_-=A,js=1<<32-Jn(l)+_|d<<_|m,Us=b+o}else js=1<<b|d<<_|m,Us=o}function Od(o){o.return!==null&&(ei(o,1),A0(o,1,0))}function Fd(o){for(;o===Pc;)Pc=Ji[--eo],Ji[eo]=null,Ec=Ji[--eo],Ji[eo]=null;for(;o===Jr;)Jr=Bn[--zn],Bn[zn]=null,Us=Bn[--zn],Bn[zn]=null,js=Bn[--zn],Bn[zn]=null}var kn=null,An=null,nt=!1,ts=null;function M0(o,l){var d=Gn(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=o,l=o.deletions,l===null?(o.deletions=[d],o.flags|=16):l.push(d)}function P0(o,l){switch(o.tag){case 5:var d=o.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,kn=o,An=gr(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,kn=o,An=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Jr!==null?{id:js,overflow:Us}:null,o.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Gn(18,null,null,0),d.stateNode=l,d.return=o,o.child=d,kn=o,An=null,!0):!1;default:return!1}}function Vd(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Ld(o){if(nt){var l=An;if(l){var d=l;if(!P0(o,l)){if(Vd(o))throw Error(t(418));l=gr(d.nextSibling);var m=kn;l&&P0(o,l)?M0(m,d):(o.flags=o.flags&-4097|2,nt=!1,kn=o)}}else{if(Vd(o))throw Error(t(418));o.flags=o.flags&-4097|2,nt=!1,kn=o}}}function E0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;kn=o}function Rc(o){if(o!==kn)return!1;if(!nt)return E0(o),nt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Pd(o.type,o.memoizedProps)),l&&(l=An)){if(Vd(o))throw R0(),Error(t(418));for(;l;)M0(o,l),l=gr(l.nextSibling)}if(E0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(l===0){An=gr(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}o=o.nextSibling}An=null}}else An=kn?gr(o.stateNode.nextSibling):null;return!0}function R0(){for(var o=An;o;)o=gr(o.nextSibling)}function to(){An=kn=null,nt=!1}function Bd(o){ts===null?ts=[o]:ts.push(o)}var MA=P.ReactCurrentBatchConfig;function Pa(o,l,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,o));var _=m,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(A){var N=_.refs;A===null?delete N[b]:N[b]=A},l._stringRef=b,l)}if(typeof o!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,o))}return o}function Ic(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function I0(o){var l=o._init;return l(o._payload)}function N0(o){function l(G,B){if(o){var q=G.deletions;q===null?(G.deletions=[B],G.flags|=16):q.push(B)}}function d(G,B){if(!o)return null;for(;B!==null;)l(G,B),B=B.sibling;return null}function m(G,B){for(G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function _(G,B){return G=Ar(G,B),G.index=0,G.sibling=null,G}function b(G,B,q){return G.index=q,o?(q=G.alternate,q!==null?(q=q.index,q<B?(G.flags|=2,B):q):(G.flags|=2,B)):(G.flags|=1048576,B)}function A(G){return o&&G.alternate===null&&(G.flags|=2),G}function N(G,B,q,ie){return B===null||B.tag!==6?(B=Rf(q,G.mode,ie),B.return=G,B):(B=_(B,q),B.return=G,B)}function V(G,B,q,ie){var me=q.type;return me===E?te(G,B,q.props.children,ie,q.key):B!==null&&(B.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===W&&I0(me)===B.type)?(ie=_(B,q.props),ie.ref=Pa(G,B,q),ie.return=G,ie):(ie=nu(q.type,q.key,q.props,null,G.mode,ie),ie.ref=Pa(G,B,q),ie.return=G,ie)}function K(G,B,q,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=If(q,G.mode,ie),B.return=G,B):(B=_(B,q.children||[]),B.return=G,B)}function te(G,B,q,ie,me){return B===null||B.tag!==7?(B=li(q,G.mode,ie,me),B.return=G,B):(B=_(B,q),B.return=G,B)}function se(G,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Rf(""+B,G.mode,q),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case k:return q=nu(B.type,B.key,B.props,null,G.mode,q),q.ref=Pa(G,null,B),q.return=G,q;case M:return B=If(B,G.mode,q),B.return=G,B;case W:var ie=B._init;return se(G,ie(B._payload),q)}if(je(B)||U(B))return B=li(B,G.mode,q,null),B.return=G,B;Ic(G,B)}return null}function ee(G,B,q,ie){var me=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return me!==null?null:N(G,B,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return q.key===me?V(G,B,q,ie):null;case M:return q.key===me?K(G,B,q,ie):null;case W:return me=q._init,ee(G,B,me(q._payload),ie)}if(je(q)||U(q))return me!==null?null:te(G,B,q,ie,null);Ic(G,q)}return null}function he(G,B,q,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return G=G.get(q)||null,N(B,G,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case k:return G=G.get(ie.key===null?q:ie.key)||null,V(B,G,ie,me);case M:return G=G.get(ie.key===null?q:ie.key)||null,K(B,G,ie,me);case W:var _e=ie._init;return he(G,B,q,_e(ie._payload),me)}if(je(ie)||U(ie))return G=G.get(q)||null,te(B,G,ie,me,null);Ic(B,ie)}return null}function fe(G,B,q,ie){for(var me=null,_e=null,xe=B,we=B=0,Nt=null;xe!==null&&we<q.length;we++){xe.index>we?(Nt=xe,xe=null):Nt=xe.sibling;var Ve=ee(G,xe,q[we],ie);if(Ve===null){xe===null&&(xe=Nt);break}o&&xe&&Ve.alternate===null&&l(G,xe),B=b(Ve,B,we),_e===null?me=Ve:_e.sibling=Ve,_e=Ve,xe=Nt}if(we===q.length)return d(G,xe),nt&&ei(G,we),me;if(xe===null){for(;we<q.length;we++)xe=se(G,q[we],ie),xe!==null&&(B=b(xe,B,we),_e===null?me=xe:_e.sibling=xe,_e=xe);return nt&&ei(G,we),me}for(xe=m(G,xe);we<q.length;we++)Nt=he(xe,G,we,q[we],ie),Nt!==null&&(o&&Nt.alternate!==null&&xe.delete(Nt.key===null?we:Nt.key),B=b(Nt,B,we),_e===null?me=Nt:_e.sibling=Nt,_e=Nt);return o&&xe.forEach(function(Mr){return l(G,Mr)}),nt&&ei(G,we),me}function pe(G,B,q,ie){var me=U(q);if(typeof me!="function")throw Error(t(150));if(q=me.call(q),q==null)throw Error(t(151));for(var _e=me=null,xe=B,we=B=0,Nt=null,Ve=q.next();xe!==null&&!Ve.done;we++,Ve=q.next()){xe.index>we?(Nt=xe,xe=null):Nt=xe.sibling;var Mr=ee(G,xe,Ve.value,ie);if(Mr===null){xe===null&&(xe=Nt);break}o&&xe&&Mr.alternate===null&&l(G,xe),B=b(Mr,B,we),_e===null?me=Mr:_e.sibling=Mr,_e=Mr,xe=Nt}if(Ve.done)return d(G,xe),nt&&ei(G,we),me;if(xe===null){for(;!Ve.done;we++,Ve=q.next())Ve=se(G,Ve.value,ie),Ve!==null&&(B=b(Ve,B,we),_e===null?me=Ve:_e.sibling=Ve,_e=Ve);return nt&&ei(G,we),me}for(xe=m(G,xe);!Ve.done;we++,Ve=q.next())Ve=he(xe,G,we,Ve.value,ie),Ve!==null&&(o&&Ve.alternate!==null&&xe.delete(Ve.key===null?we:Ve.key),B=b(Ve,B,we),_e===null?me=Ve:_e.sibling=Ve,_e=Ve);return o&&xe.forEach(function(a2){return l(G,a2)}),nt&&ei(G,we),me}function yt(G,B,q,ie){if(typeof q=="object"&&q!==null&&q.type===E&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case k:e:{for(var me=q.key,_e=B;_e!==null;){if(_e.key===me){if(me=q.type,me===E){if(_e.tag===7){d(G,_e.sibling),B=_(_e,q.props.children),B.return=G,G=B;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===W&&I0(me)===_e.type){d(G,_e.sibling),B=_(_e,q.props),B.ref=Pa(G,_e,q),B.return=G,G=B;break e}d(G,_e);break}else l(G,_e);_e=_e.sibling}q.type===E?(B=li(q.props.children,G.mode,ie,q.key),B.return=G,G=B):(ie=nu(q.type,q.key,q.props,null,G.mode,ie),ie.ref=Pa(G,B,q),ie.return=G,G=ie)}return A(G);case M:e:{for(_e=q.key;B!==null;){if(B.key===_e)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){d(G,B.sibling),B=_(B,q.children||[]),B.return=G,G=B;break e}else{d(G,B);break}else l(G,B);B=B.sibling}B=If(q,G.mode,ie),B.return=G,G=B}return A(G);case W:return _e=q._init,yt(G,B,_e(q._payload),ie)}if(je(q))return fe(G,B,q,ie);if(U(q))return pe(G,B,q,ie);Ic(G,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,B!==null&&B.tag===6?(d(G,B.sibling),B=_(B,q),B.return=G,G=B):(d(G,B),B=Rf(q,G.mode,ie),B.return=G,G=B),A(G)):d(G,B)}return yt}var no=N0(!0),D0=N0(!1),Nc=yr(null),Dc=null,so=null,zd=null;function jd(){zd=so=Dc=null}function Ud(o){var l=Nc.current;Ze(Nc),o._currentValue=l}function Wd(o,l,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===d)break;o=o.return}}function ro(o,l){Dc=o,zd=so=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(mn=!0),o.firstContext=null)}function jn(o){var l=o._currentValue;if(zd!==o)if(o={context:o,memoizedValue:l,next:null},so===null){if(Dc===null)throw Error(t(308));so=o,Dc.dependencies={lanes:0,firstContext:o}}else so=so.next=o;return l}var ti=null;function Gd(o){ti===null?ti=[o]:ti.push(o)}function O0(o,l,d,m){var _=l.interleaved;return _===null?(d.next=d,Gd(l)):(d.next=_.next,_.next=d),l.interleaved=d,Ws(o,m)}function Ws(o,l){o.lanes|=l;var d=o.alternate;for(d!==null&&(d.lanes|=l),d=o,o=o.return;o!==null;)o.childLanes|=l,d=o.alternate,d!==null&&(d.childLanes|=l),d=o,o=o.return;return d.tag===3?d.stateNode:null}var vr=!1;function Hd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Gs(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function wr(o,l,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Fe&2)!==0){var _=m.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),m.pending=l,Ws(o,d)}return _=m.interleaved,_===null?(l.next=l,Gd(m)):(l.next=_.next,_.next=l),m.interleaved=l,Ws(o,d)}function Oc(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,id(o,d)}}function V0(o,l){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var _=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var A={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?_=b=A:b=b.next=A,d=d.next}while(d!==null);b===null?_=b=l:b=b.next=l}else _=b=l;d={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:m.shared,effects:m.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}function Fc(o,l,d,m){var _=o.updateQueue;vr=!1;var b=_.firstBaseUpdate,A=_.lastBaseUpdate,N=_.shared.pending;if(N!==null){_.shared.pending=null;var V=N,K=V.next;V.next=null,A===null?b=K:A.next=K,A=V;var te=o.alternate;te!==null&&(te=te.updateQueue,N=te.lastBaseUpdate,N!==A&&(N===null?te.firstBaseUpdate=K:N.next=K,te.lastBaseUpdate=V))}if(b!==null){var se=_.baseState;A=0,te=K=V=null,N=b;do{var ee=N.lane,he=N.eventTime;if((m&ee)===ee){te!==null&&(te=te.next={eventTime:he,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var fe=o,pe=N;switch(ee=l,he=d,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){se=fe.call(he,se,ee);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,ee=typeof fe=="function"?fe.call(he,se,ee):fe,ee==null)break e;se=Y({},se,ee);break e;case 2:vr=!0}}N.callback!==null&&N.lane!==0&&(o.flags|=64,ee=_.effects,ee===null?_.effects=[N]:ee.push(N))}else he={eventTime:he,lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},te===null?(K=te=he,V=se):te=te.next=he,A|=ee;if(N=N.next,N===null){if(N=_.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,_.lastBaseUpdate=ee,_.shared.pending=null}}while(!0);if(te===null&&(V=se),_.baseState=V,_.firstBaseUpdate=K,_.lastBaseUpdate=te,l=_.shared.interleaved,l!==null){_=l;do A|=_.lane,_=_.next;while(_!==l)}else b===null&&(_.shared.lanes=0);ri|=A,o.lanes=A,o.memoizedState=se}}function L0(o,l,d){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var m=o[l],_=m.callback;if(_!==null){if(m.callback=null,m=d,typeof _!="function")throw Error(t(191,_));_.call(m)}}}var Ea={},bs=yr(Ea),Ra=yr(Ea),Ia=yr(Ea);function ni(o){if(o===Ea)throw Error(t(174));return o}function $d(o,l){switch(Ye(Ia,l),Ye(Ra,o),Ye(bs,Ea),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:qh(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=qh(l,o)}Ze(bs),Ye(bs,l)}function io(){Ze(bs),Ze(Ra),Ze(Ia)}function B0(o){ni(Ia.current);var l=ni(bs.current),d=qh(l,o.type);l!==d&&(Ye(Ra,o),Ye(bs,d))}function qd(o){Ra.current===o&&(Ze(bs),Ze(Ra))}var ot=yr(0);function Vc(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Yd=[];function Xd(){for(var o=0;o<Yd.length;o++)Yd[o]._workInProgressVersionPrimary=null;Yd.length=0}var Lc=P.ReactCurrentDispatcher,Kd=P.ReactCurrentBatchConfig,si=0,at=null,kt=null,Rt=null,Bc=!1,Na=!1,Da=0,PA=0;function Yt(){throw Error(t(321))}function Zd(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!es(o[d],l[d]))return!1;return!0}function Qd(o,l,d,m,_,b){if(si=b,at=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Lc.current=o===null||o.memoizedState===null?NA:DA,o=d(m,_),Na){b=0;do{if(Na=!1,Da=0,25<=b)throw Error(t(301));b+=1,Rt=kt=null,l.updateQueue=null,Lc.current=OA,o=d(m,_)}while(Na)}if(Lc.current=Uc,l=kt!==null&&kt.next!==null,si=0,Rt=kt=at=null,Bc=!1,l)throw Error(t(300));return o}function Jd(){var o=Da!==0;return Da=0,o}function Ss(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?at.memoizedState=Rt=o:Rt=Rt.next=o,Rt}function Un(){if(kt===null){var o=at.alternate;o=o!==null?o.memoizedState:null}else o=kt.next;var l=Rt===null?at.memoizedState:Rt.next;if(l!==null)Rt=l,kt=o;else{if(o===null)throw Error(t(310));kt=o,o={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Rt===null?at.memoizedState=Rt=o:Rt=Rt.next=o}return Rt}function Oa(o,l){return typeof l=="function"?l(o):l}function ef(o){var l=Un(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=kt,_=m.baseQueue,b=d.pending;if(b!==null){if(_!==null){var A=_.next;_.next=b.next,b.next=A}m.baseQueue=_=b,d.pending=null}if(_!==null){b=_.next,m=m.baseState;var N=A=null,V=null,K=b;do{var te=K.lane;if((si&te)===te)V!==null&&(V=V.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),m=K.hasEagerState?K.eagerState:o(m,K.action);else{var se={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};V===null?(N=V=se,A=m):V=V.next=se,at.lanes|=te,ri|=te}K=K.next}while(K!==null&&K!==b);V===null?A=m:V.next=N,es(m,l.memoizedState)||(mn=!0),l.memoizedState=m,l.baseState=A,l.baseQueue=V,d.lastRenderedState=m}if(o=d.interleaved,o!==null){_=o;do b=_.lane,at.lanes|=b,ri|=b,_=_.next;while(_!==o)}else _===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function tf(o){var l=Un(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var m=d.dispatch,_=d.pending,b=l.memoizedState;if(_!==null){d.pending=null;var A=_=_.next;do b=o(b,A.action),A=A.next;while(A!==_);es(b,l.memoizedState)||(mn=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,m]}function z0(){}function j0(o,l){var d=at,m=Un(),_=l(),b=!es(m.memoizedState,_);if(b&&(m.memoizedState=_,mn=!0),m=m.queue,nf(G0.bind(null,d,m,o),[o]),m.getSnapshot!==l||b||Rt!==null&&Rt.memoizedState.tag&1){if(d.flags|=2048,Fa(9,W0.bind(null,d,m,_,l),void 0,null),It===null)throw Error(t(349));(si&30)!==0||U0(d,l,_)}return _}function U0(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=at.updateQueue,l===null?(l={lastEffect:null,stores:null},at.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function W0(o,l,d,m){l.value=d,l.getSnapshot=m,H0(l)&&$0(o)}function G0(o,l,d){return d(function(){H0(l)&&$0(o)})}function H0(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!es(o,d)}catch{return!0}}function $0(o){var l=Ws(o,1);l!==null&&is(l,o,1,-1)}function q0(o){var l=Ss();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:o},l.queue=o,o=o.dispatch=IA.bind(null,at,o),[l.memoizedState,o]}function Fa(o,l,d,m){return o={tag:o,create:l,destroy:d,deps:m,next:null},l=at.updateQueue,l===null?(l={lastEffect:null,stores:null},at.updateQueue=l,l.lastEffect=o.next=o):(d=l.lastEffect,d===null?l.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,l.lastEffect=o)),o}function Y0(){return Un().memoizedState}function zc(o,l,d,m){var _=Ss();at.flags|=o,_.memoizedState=Fa(1|l,d,void 0,m===void 0?null:m)}function jc(o,l,d,m){var _=Un();m=m===void 0?null:m;var b=void 0;if(kt!==null){var A=kt.memoizedState;if(b=A.destroy,m!==null&&Zd(m,A.deps)){_.memoizedState=Fa(l,d,b,m);return}}at.flags|=o,_.memoizedState=Fa(1|l,d,b,m)}function X0(o,l){return zc(8390656,8,o,l)}function nf(o,l){return jc(2048,8,o,l)}function K0(o,l){return jc(4,2,o,l)}function Z0(o,l){return jc(4,4,o,l)}function Q0(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function J0(o,l,d){return d=d!=null?d.concat([o]):null,jc(4,4,Q0.bind(null,l,o),d)}function sf(){}function e_(o,l){var d=Un();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Zd(l,m[1])?m[0]:(d.memoizedState=[o,l],o)}function t_(o,l){var d=Un();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Zd(l,m[1])?m[0]:(o=o(),d.memoizedState=[o,l],o)}function n_(o,l,d){return(si&21)===0?(o.baseState&&(o.baseState=!1,mn=!0),o.memoizedState=d):(es(d,l)||(d=Iy(),at.lanes|=d,ri|=d,o.baseState=!0),l)}function EA(o,l){var d=Be;Be=d!==0&&4>d?d:4,o(!0);var m=Kd.transition;Kd.transition={};try{o(!1),l()}finally{Be=d,Kd.transition=m}}function s_(){return Un().memoizedState}function RA(o,l,d){var m=Cr(o);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},r_(o))i_(l,d);else if(d=O0(o,l,d,m),d!==null){var _=sn();is(d,o,m,_),o_(d,l,m)}}function IA(o,l,d){var m=Cr(o),_={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(r_(o))i_(l,_);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var A=l.lastRenderedState,N=b(A,d);if(_.hasEagerState=!0,_.eagerState=N,es(N,A)){var V=l.interleaved;V===null?(_.next=_,Gd(l)):(_.next=V.next,V.next=_),l.interleaved=_;return}}catch{}finally{}d=O0(o,l,_,m),d!==null&&(_=sn(),is(d,o,m,_),o_(d,l,m))}}function r_(o){var l=o.alternate;return o===at||l!==null&&l===at}function i_(o,l){Na=Bc=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function o_(o,l,d){if((d&4194240)!==0){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,id(o,d)}}var Uc={readContext:jn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},NA={readContext:jn,useCallback:function(o,l){return Ss().memoizedState=[o,l===void 0?null:l],o},useContext:jn,useEffect:X0,useImperativeHandle:function(o,l,d){return d=d!=null?d.concat([o]):null,zc(4194308,4,Q0.bind(null,l,o),d)},useLayoutEffect:function(o,l){return zc(4194308,4,o,l)},useInsertionEffect:function(o,l){return zc(4,2,o,l)},useMemo:function(o,l){var d=Ss();return l=l===void 0?null:l,o=o(),d.memoizedState=[o,l],o},useReducer:function(o,l,d){var m=Ss();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},m.queue=o,o=o.dispatch=RA.bind(null,at,o),[m.memoizedState,o]},useRef:function(o){var l=Ss();return o={current:o},l.memoizedState=o},useState:q0,useDebugValue:sf,useDeferredValue:function(o){return Ss().memoizedState=o},useTransition:function(){var o=q0(!1),l=o[0];return o=EA.bind(null,o[1]),Ss().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,d){var m=at,_=Ss();if(nt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),It===null)throw Error(t(349));(si&30)!==0||U0(m,l,d)}_.memoizedState=d;var b={value:d,getSnapshot:l};return _.queue=b,X0(G0.bind(null,m,b,o),[o]),m.flags|=2048,Fa(9,W0.bind(null,m,b,d,l),void 0,null),d},useId:function(){var o=Ss(),l=It.identifierPrefix;if(nt){var d=Us,m=js;d=(m&~(1<<32-Jn(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=Da++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=PA++,l=":"+l+"r"+d.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},DA={readContext:jn,useCallback:e_,useContext:jn,useEffect:nf,useImperativeHandle:J0,useInsertionEffect:K0,useLayoutEffect:Z0,useMemo:t_,useReducer:ef,useRef:Y0,useState:function(){return ef(Oa)},useDebugValue:sf,useDeferredValue:function(o){var l=Un();return n_(l,kt.memoizedState,o)},useTransition:function(){var o=ef(Oa)[0],l=Un().memoizedState;return[o,l]},useMutableSource:z0,useSyncExternalStore:j0,useId:s_,unstable_isNewReconciler:!1},OA={readContext:jn,useCallback:e_,useContext:jn,useEffect:nf,useImperativeHandle:J0,useInsertionEffect:K0,useLayoutEffect:Z0,useMemo:t_,useReducer:tf,useRef:Y0,useState:function(){return tf(Oa)},useDebugValue:sf,useDeferredValue:function(o){var l=Un();return kt===null?l.memoizedState=o:n_(l,kt.memoizedState,o)},useTransition:function(){var o=tf(Oa)[0],l=Un().memoizedState;return[o,l]},useMutableSource:z0,useSyncExternalStore:j0,useId:s_,unstable_isNewReconciler:!1};function ns(o,l){if(o&&o.defaultProps){l=Y({},l),o=o.defaultProps;for(var d in o)l[d]===void 0&&(l[d]=o[d]);return l}return l}function rf(o,l,d,m){l=o.memoizedState,d=d(m,l),d=d==null?l:Y({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Wc={isMounted:function(o){return(o=o._reactInternals)?Kr(o)===o:!1},enqueueSetState:function(o,l,d){o=o._reactInternals;var m=sn(),_=Cr(o),b=Gs(m,_);b.payload=l,d!=null&&(b.callback=d),l=wr(o,b,_),l!==null&&(is(l,o,_,m),Oc(l,o,_))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var m=sn(),_=Cr(o),b=Gs(m,_);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=wr(o,b,_),l!==null&&(is(l,o,_,m),Oc(l,o,_))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=sn(),m=Cr(o),_=Gs(d,m);_.tag=2,l!=null&&(_.callback=l),l=wr(o,_,m),l!==null&&(is(l,o,m,d),Oc(l,o,m))}};function a_(o,l,d,m,_,b,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,b,A):l.prototype&&l.prototype.isPureReactComponent?!ba(d,m)||!ba(_,b):!0}function l_(o,l,d){var m=!1,_=_r,b=l.contextType;return typeof b=="object"&&b!==null?b=jn(b):(_=pn(l)?Qr:qt.current,m=l.contextTypes,b=(m=m!=null)?Qi(o,_):_r),l=new l(d,b),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Wc,o.stateNode=l,l._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_,o.__reactInternalMemoizedMaskedChildContext=b),l}function c_(o,l,d,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==o&&Wc.enqueueReplaceState(l,l.state,null)}function of(o,l,d,m){var _=o.stateNode;_.props=d,_.state=o.memoizedState,_.refs={},Hd(o);var b=l.contextType;typeof b=="object"&&b!==null?_.context=jn(b):(b=pn(l)?Qr:qt.current,_.context=Qi(o,b)),_.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(rf(o,l,b,d),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&Wc.enqueueReplaceState(_,_.state,null),Fc(o,d,_,m),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308)}function oo(o,l){try{var d="",m=l;do d+=oe(m),m=m.return;while(m);var _=d}catch(b){_=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:l,stack:_,digest:null}}function af(o,l,d){return{value:o,source:null,stack:d??null,digest:l??null}}function lf(o,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var FA=typeof WeakMap=="function"?WeakMap:Map;function u_(o,l,d){d=Gs(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){Kc||(Kc=!0,Sf=m),lf(o,l)},d}function h_(o,l,d){d=Gs(-1,d),d.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var _=l.value;d.payload=function(){return m(_)},d.callback=function(){lf(o,l)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){lf(o,l),typeof m!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})}),d}function d_(o,l,d){var m=o.pingCache;if(m===null){m=o.pingCache=new FA;var _=new Set;m.set(l,_)}else _=m.get(l),_===void 0&&(_=new Set,m.set(l,_));_.has(d)||(_.add(d),o=KA.bind(null,o,l,d),l.then(o,o))}function f_(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function p_(o,l,d,m,_){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Gs(-1,1),l.tag=2,wr(d,l,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=_,o)}var VA=P.ReactCurrentOwner,mn=!1;function nn(o,l,d,m){l.child=o===null?D0(l,null,d,m):no(l,o.child,d,m)}function m_(o,l,d,m,_){d=d.render;var b=l.ref;return ro(l,_),m=Qd(o,l,d,m,b,_),d=Jd(),o!==null&&!mn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~_,Hs(o,l,_)):(nt&&d&&Od(l),l.flags|=1,nn(o,l,m,_),l.child)}function g_(o,l,d,m,_){if(o===null){var b=d.type;return typeof b=="function"&&!Ef(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=b,y_(o,l,b,m,_)):(o=nu(d.type,null,m,l,l.mode,_),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,(o.lanes&_)===0){var A=b.memoizedProps;if(d=d.compare,d=d!==null?d:ba,d(A,m)&&o.ref===l.ref)return Hs(o,l,_)}return l.flags|=1,o=Ar(b,m),o.ref=l.ref,o.return=l,l.child=o}function y_(o,l,d,m,_){if(o!==null){var b=o.memoizedProps;if(ba(b,m)&&o.ref===l.ref)if(mn=!1,l.pendingProps=m=b,(o.lanes&_)!==0)(o.flags&131072)!==0&&(mn=!0);else return l.lanes=o.lanes,Hs(o,l,_)}return cf(o,l,d,m,_)}function __(o,l,d){var m=l.pendingProps,_=m.children,b=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(lo,Mn),Mn|=d;else{if((d&1073741824)===0)return o=b!==null?b.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Ye(lo,Mn),Mn|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:d,Ye(lo,Mn),Mn|=m}else b!==null?(m=b.baseLanes|d,l.memoizedState=null):m=d,Ye(lo,Mn),Mn|=m;return nn(o,l,_,d),l.child}function x_(o,l){var d=l.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function cf(o,l,d,m,_){var b=pn(d)?Qr:qt.current;return b=Qi(l,b),ro(l,_),d=Qd(o,l,d,m,b,_),m=Jd(),o!==null&&!mn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~_,Hs(o,l,_)):(nt&&m&&Od(l),l.flags|=1,nn(o,l,d,_),l.child)}function v_(o,l,d,m,_){if(pn(d)){var b=!0;Ac(l)}else b=!1;if(ro(l,_),l.stateNode===null)Hc(o,l),l_(l,d,m),of(l,d,m,_),m=!0;else if(o===null){var A=l.stateNode,N=l.memoizedProps;A.props=N;var V=A.context,K=d.contextType;typeof K=="object"&&K!==null?K=jn(K):(K=pn(d)?Qr:qt.current,K=Qi(l,K));var te=d.getDerivedStateFromProps,se=typeof te=="function"||typeof A.getSnapshotBeforeUpdate=="function";se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==m||V!==K)&&c_(l,A,m,K),vr=!1;var ee=l.memoizedState;A.state=ee,Fc(l,m,A,_),V=l.memoizedState,N!==m||ee!==V||fn.current||vr?(typeof te=="function"&&(rf(l,d,te,m),V=l.memoizedState),(N=vr||a_(l,d,N,m,ee,V,K))?(se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=V),A.props=m,A.state=V,A.context=K,m=N):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{A=l.stateNode,F0(o,l),N=l.memoizedProps,K=l.type===l.elementType?N:ns(l.type,N),A.props=K,se=l.pendingProps,ee=A.context,V=d.contextType,typeof V=="object"&&V!==null?V=jn(V):(V=pn(d)?Qr:qt.current,V=Qi(l,V));var he=d.getDerivedStateFromProps;(te=typeof he=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==se||ee!==V)&&c_(l,A,m,V),vr=!1,ee=l.memoizedState,A.state=ee,Fc(l,m,A,_);var fe=l.memoizedState;N!==se||ee!==fe||fn.current||vr?(typeof he=="function"&&(rf(l,d,he,m),fe=l.memoizedState),(K=vr||a_(l,d,K,m,ee,fe,V)||!1)?(te||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,fe,V),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,fe,V)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||N===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=fe),A.props=m,A.state=fe,A.context=V,m=K):(typeof A.componentDidUpdate!="function"||N===o.memoizedProps&&ee===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===o.memoizedProps&&ee===o.memoizedState||(l.flags|=1024),m=!1)}return uf(o,l,d,m,b,_)}function uf(o,l,d,m,_,b){x_(o,l);var A=(l.flags&128)!==0;if(!m&&!A)return _&&C0(l,d,!1),Hs(o,l,b);m=l.stateNode,VA.current=l;var N=A&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,o!==null&&A?(l.child=no(l,o.child,null,b),l.child=no(l,null,N,b)):nn(o,l,N,b),l.memoizedState=m.state,_&&C0(l,d,!0),l.child}function w_(o){var l=o.stateNode;l.pendingContext?S0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&S0(o,l.context,!1),$d(o,l.containerInfo)}function b_(o,l,d,m,_){return to(),Bd(_),l.flags|=256,nn(o,l,d,m),l.child}var hf={dehydrated:null,treeContext:null,retryLane:0};function df(o){return{baseLanes:o,cachePool:null,transitions:null}}function S_(o,l,d){var m=l.pendingProps,_=ot.current,b=!1,A=(l.flags&128)!==0,N;if((N=A)||(N=o!==null&&o.memoizedState===null?!1:(_&2)!==0),N?(b=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(_|=1),Ye(ot,_&1),o===null)return Ld(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(A=m.children,o=m.fallback,b?(m=l.mode,b=l.child,A={mode:"hidden",children:A},(m&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=A):b=su(A,m,0,null),o=li(o,m,d,null),b.return=l,o.return=l,b.sibling=o,l.child=b,l.child.memoizedState=df(d),l.memoizedState=hf,o):ff(l,A));if(_=o.memoizedState,_!==null&&(N=_.dehydrated,N!==null))return LA(o,l,A,m,N,_,d);if(b){b=m.fallback,A=l.mode,_=o.child,N=_.sibling;var V={mode:"hidden",children:m.children};return(A&1)===0&&l.child!==_?(m=l.child,m.childLanes=0,m.pendingProps=V,l.deletions=null):(m=Ar(_,V),m.subtreeFlags=_.subtreeFlags&14680064),N!==null?b=Ar(N,b):(b=li(b,A,d,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,A=o.child.memoizedState,A=A===null?df(d):{baseLanes:A.baseLanes|d,cachePool:null,transitions:A.transitions},b.memoizedState=A,b.childLanes=o.childLanes&~d,l.memoizedState=hf,m}return b=o.child,o=b.sibling,m=Ar(b,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,o!==null&&(d=l.deletions,d===null?(l.deletions=[o],l.flags|=16):d.push(o)),l.child=m,l.memoizedState=null,m}function ff(o,l){return l=su({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Gc(o,l,d,m){return m!==null&&Bd(m),no(l,o.child,null,d),o=ff(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function LA(o,l,d,m,_,b,A){if(d)return l.flags&256?(l.flags&=-257,m=af(Error(t(422))),Gc(o,l,A,m)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(b=m.fallback,_=l.mode,m=su({mode:"visible",children:m.children},_,0,null),b=li(b,_,A,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,(l.mode&1)!==0&&no(l,o.child,null,A),l.child.memoizedState=df(A),l.memoizedState=hf,b);if((l.mode&1)===0)return Gc(o,l,A,null);if(_.data==="$!"){if(m=_.nextSibling&&_.nextSibling.dataset,m)var N=m.dgst;return m=N,b=Error(t(419)),m=af(b,m,void 0),Gc(o,l,A,m)}if(N=(A&o.childLanes)!==0,mn||N){if(m=It,m!==null){switch(A&-A){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(m.suspendedLanes|A))!==0?0:_,_!==0&&_!==b.retryLane&&(b.retryLane=_,Ws(o,_),is(m,o,_,-1))}return Pf(),m=af(Error(t(421))),Gc(o,l,A,m)}return _.data==="$?"?(l.flags|=128,l.child=o.child,l=ZA.bind(null,o),_._reactRetry=l,null):(o=b.treeContext,An=gr(_.nextSibling),kn=l,nt=!0,ts=null,o!==null&&(Bn[zn++]=js,Bn[zn++]=Us,Bn[zn++]=Jr,js=o.id,Us=o.overflow,Jr=l),l=ff(l,m.children),l.flags|=4096,l)}function T_(o,l,d){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),Wd(o.return,l,d)}function pf(o,l,d,m,_){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:_}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=d,b.tailMode=_)}function C_(o,l,d){var m=l.pendingProps,_=m.revealOrder,b=m.tail;if(nn(o,l,m.children,d),m=ot.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&T_(o,d,l);else if(o.tag===19)T_(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(Ye(ot,m),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(d=l.child,_=null;d!==null;)o=d.alternate,o!==null&&Vc(o)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),pf(l,!1,_,d,b);break;case"backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(o=_.alternate,o!==null&&Vc(o)===null){l.child=_;break}o=_.sibling,_.sibling=d,d=_,_=o}pf(l,!0,d,null,b);break;case"together":pf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hc(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Hs(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),ri|=l.lanes,(d&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,d=Ar(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=Ar(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function BA(o,l,d){switch(l.tag){case 3:w_(l),to();break;case 5:B0(l);break;case 1:pn(l.type)&&Ac(l);break;case 4:$d(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,_=l.memoizedProps.value;Ye(Nc,m._currentValue),m._currentValue=_;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(Ye(ot,ot.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?S_(o,l,d):(Ye(ot,ot.current&1),o=Hs(o,l,d),o!==null?o.sibling:null);Ye(ot,ot.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(o.flags&128)!==0){if(m)return C_(o,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ye(ot,ot.current),m)break;return null;case 22:case 23:return l.lanes=0,__(o,l,d)}return Hs(o,l,d)}var k_,mf,A_,M_;k_=function(o,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},mf=function(){},A_=function(o,l,d,m){var _=o.memoizedProps;if(_!==m){o=l.stateNode,ni(bs.current);var b=null;switch(d){case"input":_=Tn(o,_),m=Tn(o,m),b=[];break;case"select":_=Y({},_,{value:void 0}),m=Y({},m,{value:void 0}),b=[];break;case"textarea":_=Ln(o,_),m=Ln(o,m),b=[];break;default:typeof _.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=Tc)}Yh(d,m);var A;d=null;for(K in _)if(!m.hasOwnProperty(K)&&_.hasOwnProperty(K)&&_[K]!=null)if(K==="style"){var N=_[K];for(A in N)N.hasOwnProperty(A)&&(d||(d={}),d[A]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(r.hasOwnProperty(K)?b||(b=[]):(b=b||[]).push(K,null));for(K in m){var V=m[K];if(N=_!=null?_[K]:void 0,m.hasOwnProperty(K)&&V!==N&&(V!=null||N!=null))if(K==="style")if(N){for(A in N)!N.hasOwnProperty(A)||V&&V.hasOwnProperty(A)||(d||(d={}),d[A]="");for(A in V)V.hasOwnProperty(A)&&N[A]!==V[A]&&(d||(d={}),d[A]=V[A])}else d||(b||(b=[]),b.push(K,d)),d=V;else K==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,N=N?N.__html:void 0,V!=null&&N!==V&&(b=b||[]).push(K,V)):K==="children"?typeof V!="string"&&typeof V!="number"||(b=b||[]).push(K,""+V):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(r.hasOwnProperty(K)?(V!=null&&K==="onScroll"&&Ke("scroll",o),b||N===V||(b=[])):(b=b||[]).push(K,V))}d&&(b=b||[]).push("style",d);var K=b;(l.updateQueue=K)&&(l.flags|=4)}},M_=function(o,l,d,m){d!==m&&(l.flags|=4)};function Va(o,l){if(!nt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Xt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(l)for(var _=o.child;_!==null;)d|=_.lanes|_.childLanes,m|=_.subtreeFlags&14680064,m|=_.flags&14680064,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)d|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=m,o.childLanes=d,l}function zA(o,l,d){var m=l.pendingProps;switch(Fd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(l),null;case 1:return pn(l.type)&&kc(),Xt(l),null;case 3:return m=l.stateNode,io(),Ze(fn),Ze(qt),Xd(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Rc(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ts!==null&&(kf(ts),ts=null))),mf(o,l),Xt(l),null;case 5:qd(l);var _=ni(Ia.current);if(d=l.type,o!==null&&l.stateNode!=null)A_(o,l,d,m,_),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(t(166));return Xt(l),null}if(o=ni(bs.current),Rc(l)){m=l.stateNode,d=l.type;var b=l.memoizedProps;switch(m[ws]=l,m[Aa]=b,o=(l.mode&1)!==0,d){case"dialog":Ke("cancel",m),Ke("close",m);break;case"iframe":case"object":case"embed":Ke("load",m);break;case"video":case"audio":for(_=0;_<Ta.length;_++)Ke(Ta[_],m);break;case"source":Ke("error",m);break;case"img":case"image":case"link":Ke("error",m),Ke("load",m);break;case"details":Ke("toggle",m);break;case"input":ae(m,b),Ke("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},Ke("invalid",m);break;case"textarea":cr(m,b),Ke("invalid",m)}Yh(d,b),_=null;for(var A in b)if(b.hasOwnProperty(A)){var N=b[A];A==="children"?typeof N=="string"?m.textContent!==N&&(b.suppressHydrationWarning!==!0&&Sc(m.textContent,N,o),_=["children",N]):typeof N=="number"&&m.textContent!==""+N&&(b.suppressHydrationWarning!==!0&&Sc(m.textContent,N,o),_=["children",""+N]):r.hasOwnProperty(A)&&N!=null&&A==="onScroll"&&Ke("scroll",m)}switch(d){case"input":tn(m),ze(m,b,!0);break;case"textarea":tn(m),ec(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=Tc)}m=_,l.updateQueue=m,m!==null&&(l.flags|=4)}else{A=_.nodeType===9?_:_.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=tc(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=A.createElement(d,{is:m.is}):(o=A.createElement(d),d==="select"&&(A=o,m.multiple?A.multiple=!0:m.size&&(A.size=m.size))):o=A.createElementNS(o,d),o[ws]=l,o[Aa]=m,k_(o,l,!1,!1),l.stateNode=o;e:{switch(A=Xh(d,m),d){case"dialog":Ke("cancel",o),Ke("close",o),_=m;break;case"iframe":case"object":case"embed":Ke("load",o),_=m;break;case"video":case"audio":for(_=0;_<Ta.length;_++)Ke(Ta[_],o);_=m;break;case"source":Ke("error",o),_=m;break;case"img":case"image":case"link":Ke("error",o),Ke("load",o),_=m;break;case"details":Ke("toggle",o),_=m;break;case"input":ae(o,m),_=Tn(o,m),Ke("invalid",o);break;case"option":_=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},_=Y({},m,{value:void 0}),Ke("invalid",o);break;case"textarea":cr(o,m),_=Ln(o,m),Ke("invalid",o);break;default:_=m}Yh(d,_),N=_;for(b in N)if(N.hasOwnProperty(b)){var V=N[b];b==="style"?yy(o,V):b==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&my(o,V)):b==="children"?typeof V=="string"?(d!=="textarea"||V!=="")&&ia(o,V):typeof V=="number"&&ia(o,""+V):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(r.hasOwnProperty(b)?V!=null&&b==="onScroll"&&Ke("scroll",o):V!=null&&C(o,b,V,A))}switch(d){case"input":tn(o),ze(o,m,!1);break;case"textarea":tn(o),ec(o);break;case"option":m.value!=null&&o.setAttribute("value",""+re(m.value));break;case"select":o.multiple=!!m.multiple,b=m.value,b!=null?Ct(o,!!m.multiple,b,!1):m.defaultValue!=null&&Ct(o,!!m.multiple,m.defaultValue,!0);break;default:typeof _.onClick=="function"&&(o.onclick=Tc)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Xt(l),null;case 6:if(o&&l.stateNode!=null)M_(o,l,o.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(t(166));if(d=ni(Ia.current),ni(bs.current),Rc(l)){if(m=l.stateNode,d=l.memoizedProps,m[ws]=l,(b=m.nodeValue!==d)&&(o=kn,o!==null))switch(o.tag){case 3:Sc(m.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Sc(m.nodeValue,d,(o.mode&1)!==0)}b&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[ws]=l,l.stateNode=m}return Xt(l),null;case 13:if(Ze(ot),m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(nt&&An!==null&&(l.mode&1)!==0&&(l.flags&128)===0)R0(),to(),l.flags|=98560,b=!1;else if(b=Rc(l),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[ws]=l}else to(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),b=!1}else ts!==null&&(kf(ts),ts=null),b=!0;if(!b)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(ot.current&1)!==0?At===0&&(At=3):Pf())),l.updateQueue!==null&&(l.flags|=4),Xt(l),null);case 4:return io(),mf(o,l),o===null&&Ca(l.stateNode.containerInfo),Xt(l),null;case 10:return Ud(l.type._context),Xt(l),null;case 17:return pn(l.type)&&kc(),Xt(l),null;case 19:if(Ze(ot),b=l.memoizedState,b===null)return Xt(l),null;if(m=(l.flags&128)!==0,A=b.rendering,A===null)if(m)Va(b,!1);else{if(At!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(A=Vc(o),A!==null){for(l.flags|=128,Va(b,!1),m=A.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)b=d,o=m,b.flags&=14680066,A=b.alternate,A===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,b.type=A.type,o=A.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return Ye(ot,ot.current&1|2),l.child}o=o.sibling}b.tail!==null&&gt()>co&&(l.flags|=128,m=!0,Va(b,!1),l.lanes=4194304)}else{if(!m)if(o=Vc(A),o!==null){if(l.flags|=128,m=!0,d=o.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Va(b,!0),b.tail===null&&b.tailMode==="hidden"&&!A.alternate&&!nt)return Xt(l),null}else 2*gt()-b.renderingStartTime>co&&d!==1073741824&&(l.flags|=128,m=!0,Va(b,!1),l.lanes=4194304);b.isBackwards?(A.sibling=l.child,l.child=A):(d=b.last,d!==null?d.sibling=A:l.child=A,b.last=A)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=gt(),l.sibling=null,d=ot.current,Ye(ot,m?d&1|2:d&1),l):(Xt(l),null);case 22:case 23:return Mf(),m=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(Mn&1073741824)!==0&&(Xt(l),l.subtreeFlags&6&&(l.flags|=8192)):Xt(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function jA(o,l){switch(Fd(l),l.tag){case 1:return pn(l.type)&&kc(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return io(),Ze(fn),Ze(qt),Xd(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return qd(l),null;case 13:if(Ze(ot),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));to()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Ze(ot),null;case 4:return io(),null;case 10:return Ud(l.type._context),null;case 22:case 23:return Mf(),null;case 24:return null;default:return null}}var $c=!1,Kt=!1,UA=typeof WeakSet=="function"?WeakSet:Set,de=null;function ao(o,l){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){ct(o,l,m)}else d.current=null}function gf(o,l,d){try{d()}catch(m){ct(o,l,m)}}var P_=!1;function WA(o,l){if(Ad=dc,o=a0(),xd(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var _=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var A=0,N=-1,V=-1,K=0,te=0,se=o,ee=null;t:for(;;){for(var he;se!==d||_!==0&&se.nodeType!==3||(N=A+_),se!==b||m!==0&&se.nodeType!==3||(V=A+m),se.nodeType===3&&(A+=se.nodeValue.length),(he=se.firstChild)!==null;)ee=se,se=he;for(;;){if(se===o)break t;if(ee===d&&++K===_&&(N=A),ee===b&&++te===m&&(V=A),(he=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=he}d=N===-1||V===-1?null:{start:N,end:V}}else d=null}d=d||{start:0,end:0}}else d=null;for(Md={focusedElem:o,selectionRange:d},dc=!1,de=l;de!==null;)if(l=de,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,de=o;else for(;de!==null;){l=de;try{var fe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,yt=fe.memoizedState,G=l.stateNode,B=G.getSnapshotBeforeUpdate(l.elementType===l.type?pe:ns(l.type,pe),yt);G.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var q=l.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){ct(l,l.return,ie)}if(o=l.sibling,o!==null){o.return=l.return,de=o;break}de=l.return}return fe=P_,P_=!1,fe}function La(o,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var _=m=m.next;do{if((_.tag&o)===o){var b=_.destroy;_.destroy=void 0,b!==void 0&&gf(l,d,b)}_=_.next}while(_!==m)}}function qc(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&o)===o){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function yf(o){var l=o.ref;if(l!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof l=="function"?l(o):l.current=o}}function E_(o){var l=o.alternate;l!==null&&(o.alternate=null,E_(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ws],delete l[Aa],delete l[Id],delete l[CA],delete l[kA])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function R_(o){return o.tag===5||o.tag===3||o.tag===4}function I_(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||R_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _f(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(o,l):d.insertBefore(o,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(o,d)):(l=d,l.appendChild(o)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Tc));else if(m!==4&&(o=o.child,o!==null))for(_f(o,l,d),o=o.sibling;o!==null;)_f(o,l,d),o=o.sibling}function xf(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(xf(o,l,d),o=o.sibling;o!==null;)xf(o,l,d),o=o.sibling}var jt=null,ss=!1;function br(o,l,d){for(d=d.child;d!==null;)N_(o,l,d),d=d.sibling}function N_(o,l,d){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(oc,d)}catch{}switch(d.tag){case 5:Kt||ao(d,l);case 6:var m=jt,_=ss;jt=null,br(o,l,d),jt=m,ss=_,jt!==null&&(ss?(o=jt,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):jt.removeChild(d.stateNode));break;case 18:jt!==null&&(ss?(o=jt,d=d.stateNode,o.nodeType===8?Rd(o.parentNode,d):o.nodeType===1&&Rd(o,d),ga(o)):Rd(jt,d.stateNode));break;case 4:m=jt,_=ss,jt=d.stateNode.containerInfo,ss=!0,br(o,l,d),jt=m,ss=_;break;case 0:case 11:case 14:case 15:if(!Kt&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){_=m=m.next;do{var b=_,A=b.destroy;b=b.tag,A!==void 0&&((b&2)!==0||(b&4)!==0)&&gf(d,l,A),_=_.next}while(_!==m)}br(o,l,d);break;case 1:if(!Kt&&(ao(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(N){ct(d,l,N)}br(o,l,d);break;case 21:br(o,l,d);break;case 22:d.mode&1?(Kt=(m=Kt)||d.memoizedState!==null,br(o,l,d),Kt=m):br(o,l,d);break;default:br(o,l,d)}}function D_(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new UA),l.forEach(function(m){var _=QA.bind(null,o,m);d.has(m)||(d.add(m),m.then(_,_))})}}function rs(o,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var _=d[m];try{var b=o,A=l,N=A;e:for(;N!==null;){switch(N.tag){case 5:jt=N.stateNode,ss=!1;break e;case 3:jt=N.stateNode.containerInfo,ss=!0;break e;case 4:jt=N.stateNode.containerInfo,ss=!0;break e}N=N.return}if(jt===null)throw Error(t(160));N_(b,A,_),jt=null,ss=!1;var V=_.alternate;V!==null&&(V.return=null),_.return=null}catch(K){ct(_,l,K)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)O_(l,o),l=l.sibling}function O_(o,l){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(rs(l,o),Ts(o),m&4){try{La(3,o,o.return),qc(3,o)}catch(pe){ct(o,o.return,pe)}try{La(5,o,o.return)}catch(pe){ct(o,o.return,pe)}}break;case 1:rs(l,o),Ts(o),m&512&&d!==null&&ao(d,d.return);break;case 5:if(rs(l,o),Ts(o),m&512&&d!==null&&ao(d,d.return),o.flags&32){var _=o.stateNode;try{ia(_,"")}catch(pe){ct(o,o.return,pe)}}if(m&4&&(_=o.stateNode,_!=null)){var b=o.memoizedProps,A=d!==null?d.memoizedProps:b,N=o.type,V=o.updateQueue;if(o.updateQueue=null,V!==null)try{N==="input"&&b.type==="radio"&&b.name!=null&&ye(_,b),Xh(N,A);var K=Xh(N,b);for(A=0;A<V.length;A+=2){var te=V[A],se=V[A+1];te==="style"?yy(_,se):te==="dangerouslySetInnerHTML"?my(_,se):te==="children"?ia(_,se):C(_,te,se,K)}switch(N){case"input":qe(_,b);break;case"textarea":zi(_,b);break;case"select":var ee=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!b.multiple;var he=b.value;he!=null?Ct(_,!!b.multiple,he,!1):ee!==!!b.multiple&&(b.defaultValue!=null?Ct(_,!!b.multiple,b.defaultValue,!0):Ct(_,!!b.multiple,b.multiple?[]:"",!1))}_[Aa]=b}catch(pe){ct(o,o.return,pe)}}break;case 6:if(rs(l,o),Ts(o),m&4){if(o.stateNode===null)throw Error(t(162));_=o.stateNode,b=o.memoizedProps;try{_.nodeValue=b}catch(pe){ct(o,o.return,pe)}}break;case 3:if(rs(l,o),Ts(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ga(l.containerInfo)}catch(pe){ct(o,o.return,pe)}break;case 4:rs(l,o),Ts(o);break;case 13:rs(l,o),Ts(o),_=o.child,_.flags&8192&&(b=_.memoizedState!==null,_.stateNode.isHidden=b,!b||_.alternate!==null&&_.alternate.memoizedState!==null||(bf=gt())),m&4&&D_(o);break;case 22:if(te=d!==null&&d.memoizedState!==null,o.mode&1?(Kt=(K=Kt)||te,rs(l,o),Kt=K):rs(l,o),Ts(o),m&8192){if(K=o.memoizedState!==null,(o.stateNode.isHidden=K)&&!te&&(o.mode&1)!==0)for(de=o,te=o.child;te!==null;){for(se=de=te;de!==null;){switch(ee=de,he=ee.child,ee.tag){case 0:case 11:case 14:case 15:La(4,ee,ee.return);break;case 1:ao(ee,ee.return);var fe=ee.stateNode;if(typeof fe.componentWillUnmount=="function"){m=ee,d=ee.return;try{l=m,fe.props=l.memoizedProps,fe.state=l.memoizedState,fe.componentWillUnmount()}catch(pe){ct(m,d,pe)}}break;case 5:ao(ee,ee.return);break;case 22:if(ee.memoizedState!==null){L_(se);continue}}he!==null?(he.return=ee,de=he):L_(se)}te=te.sibling}e:for(te=null,se=o;;){if(se.tag===5){if(te===null){te=se;try{_=se.stateNode,K?(b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(N=se.stateNode,V=se.memoizedProps.style,A=V!=null&&V.hasOwnProperty("display")?V.display:null,N.style.display=gy("display",A))}catch(pe){ct(o,o.return,pe)}}}else if(se.tag===6){if(te===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(pe){ct(o,o.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===o)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===o)break e;for(;se.sibling===null;){if(se.return===null||se.return===o)break e;te===se&&(te=null),se=se.return}te===se&&(te=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:rs(l,o),Ts(o),m&4&&D_(o);break;case 21:break;default:rs(l,o),Ts(o)}}function Ts(o){var l=o.flags;if(l&2){try{e:{for(var d=o.return;d!==null;){if(R_(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var _=m.stateNode;m.flags&32&&(ia(_,""),m.flags&=-33);var b=I_(o);xf(o,b,_);break;case 3:case 4:var A=m.stateNode.containerInfo,N=I_(o);_f(o,N,A);break;default:throw Error(t(161))}}catch(V){ct(o,o.return,V)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function GA(o,l,d){de=o,F_(o)}function F_(o,l,d){for(var m=(o.mode&1)!==0;de!==null;){var _=de,b=_.child;if(_.tag===22&&m){var A=_.memoizedState!==null||$c;if(!A){var N=_.alternate,V=N!==null&&N.memoizedState!==null||Kt;N=$c;var K=Kt;if($c=A,(Kt=V)&&!K)for(de=_;de!==null;)A=de,V=A.child,A.tag===22&&A.memoizedState!==null?B_(_):V!==null?(V.return=A,de=V):B_(_);for(;b!==null;)de=b,F_(b),b=b.sibling;de=_,$c=N,Kt=K}V_(o)}else(_.subtreeFlags&8772)!==0&&b!==null?(b.return=_,de=b):V_(o)}}function V_(o){for(;de!==null;){var l=de;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Kt||qc(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Kt)if(d===null)m.componentDidMount();else{var _=l.elementType===l.type?d.memoizedProps:ns(l.type,d.memoizedProps);m.componentDidUpdate(_,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&L0(l,b,m);break;case 3:var A=l.updateQueue;if(A!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}L0(l,A,d)}break;case 5:var N=l.stateNode;if(d===null&&l.flags&4){d=N;var V=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&d.focus();break;case"img":V.src&&(d.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var K=l.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var se=te.dehydrated;se!==null&&ga(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kt||l.flags&512&&yf(l)}catch(ee){ct(l,l.return,ee)}}if(l===o){de=null;break}if(d=l.sibling,d!==null){d.return=l.return,de=d;break}de=l.return}}function L_(o){for(;de!==null;){var l=de;if(l===o){de=null;break}var d=l.sibling;if(d!==null){d.return=l.return,de=d;break}de=l.return}}function B_(o){for(;de!==null;){var l=de;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{qc(4,l)}catch(V){ct(l,d,V)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var _=l.return;try{m.componentDidMount()}catch(V){ct(l,_,V)}}var b=l.return;try{yf(l)}catch(V){ct(l,b,V)}break;case 5:var A=l.return;try{yf(l)}catch(V){ct(l,A,V)}}}catch(V){ct(l,l.return,V)}if(l===o){de=null;break}var N=l.sibling;if(N!==null){N.return=l.return,de=N;break}de=l.return}}var HA=Math.ceil,Yc=P.ReactCurrentDispatcher,vf=P.ReactCurrentOwner,Wn=P.ReactCurrentBatchConfig,Fe=0,It=null,wt=null,Ut=0,Mn=0,lo=yr(0),At=0,Ba=null,ri=0,Xc=0,wf=0,za=null,gn=null,bf=0,co=1/0,$s=null,Kc=!1,Sf=null,Sr=null,Zc=!1,Tr=null,Qc=0,ja=0,Tf=null,Jc=-1,eu=0;function sn(){return(Fe&6)!==0?gt():Jc!==-1?Jc:Jc=gt()}function Cr(o){return(o.mode&1)===0?1:(Fe&2)!==0&&Ut!==0?Ut&-Ut:MA.transition!==null?(eu===0&&(eu=Iy()),eu):(o=Be,o!==0||(o=window.event,o=o===void 0?16:jy(o.type)),o)}function is(o,l,d,m){if(50<ja)throw ja=0,Tf=null,Error(t(185));ha(o,d,m),((Fe&2)===0||o!==It)&&(o===It&&((Fe&2)===0&&(Xc|=d),At===4&&kr(o,Ut)),yn(o,m),d===1&&Fe===0&&(l.mode&1)===0&&(co=gt()+500,Mc&&xr()))}function yn(o,l){var d=o.callbackNode;Mk(o,l);var m=cc(o,o===It?Ut:0);if(m===0)d!==null&&Py(d),o.callbackNode=null,o.callbackPriority=0;else if(l=m&-m,o.callbackPriority!==l){if(d!=null&&Py(d),l===1)o.tag===0?AA(j_.bind(null,o)):k0(j_.bind(null,o)),SA(function(){(Fe&6)===0&&xr()}),d=null;else{switch(Ny(m)){case 1:d=nd;break;case 4:d=Ey;break;case 16:d=ic;break;case 536870912:d=Ry;break;default:d=ic}d=X_(d,z_.bind(null,o))}o.callbackPriority=l,o.callbackNode=d}}function z_(o,l){if(Jc=-1,eu=0,(Fe&6)!==0)throw Error(t(327));var d=o.callbackNode;if(uo()&&o.callbackNode!==d)return null;var m=cc(o,o===It?Ut:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||l)l=tu(o,m);else{l=m;var _=Fe;Fe|=2;var b=W_();(It!==o||Ut!==l)&&($s=null,co=gt()+500,oi(o,l));do try{YA();break}catch(N){U_(o,N)}while(!0);jd(),Yc.current=b,Fe=_,wt!==null?l=0:(It=null,Ut=0,l=At)}if(l!==0){if(l===2&&(_=sd(o),_!==0&&(m=_,l=Cf(o,_))),l===1)throw d=Ba,oi(o,0),kr(o,m),yn(o,gt()),d;if(l===6)kr(o,m);else{if(_=o.current.alternate,(m&30)===0&&!$A(_)&&(l=tu(o,m),l===2&&(b=sd(o),b!==0&&(m=b,l=Cf(o,b))),l===1))throw d=Ba,oi(o,0),kr(o,m),yn(o,gt()),d;switch(o.finishedWork=_,o.finishedLanes=m,l){case 0:case 1:throw Error(t(345));case 2:ai(o,gn,$s);break;case 3:if(kr(o,m),(m&130023424)===m&&(l=bf+500-gt(),10<l)){if(cc(o,0)!==0)break;if(_=o.suspendedLanes,(_&m)!==m){sn(),o.pingedLanes|=o.suspendedLanes&_;break}o.timeoutHandle=Ed(ai.bind(null,o,gn,$s),l);break}ai(o,gn,$s);break;case 4:if(kr(o,m),(m&4194240)===m)break;for(l=o.eventTimes,_=-1;0<m;){var A=31-Jn(m);b=1<<A,A=l[A],A>_&&(_=A),m&=~b}if(m=_,m=gt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*HA(m/1960))-m,10<m){o.timeoutHandle=Ed(ai.bind(null,o,gn,$s),m);break}ai(o,gn,$s);break;case 5:ai(o,gn,$s);break;default:throw Error(t(329))}}}return yn(o,gt()),o.callbackNode===d?z_.bind(null,o):null}function Cf(o,l){var d=za;return o.current.memoizedState.isDehydrated&&(oi(o,l).flags|=256),o=tu(o,l),o!==2&&(l=gn,gn=d,l!==null&&kf(l)),o}function kf(o){gn===null?gn=o:gn.push.apply(gn,o)}function $A(o){for(var l=o;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var _=d[m],b=_.getSnapshot;_=_.value;try{if(!es(b(),_))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function kr(o,l){for(l&=~wf,l&=~Xc,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var d=31-Jn(l),m=1<<d;o[d]=-1,l&=~m}}function j_(o){if((Fe&6)!==0)throw Error(t(327));uo();var l=cc(o,0);if((l&1)===0)return yn(o,gt()),null;var d=tu(o,l);if(o.tag!==0&&d===2){var m=sd(o);m!==0&&(l=m,d=Cf(o,m))}if(d===1)throw d=Ba,oi(o,0),kr(o,l),yn(o,gt()),d;if(d===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,ai(o,gn,$s),yn(o,gt()),null}function Af(o,l){var d=Fe;Fe|=1;try{return o(l)}finally{Fe=d,Fe===0&&(co=gt()+500,Mc&&xr())}}function ii(o){Tr!==null&&Tr.tag===0&&(Fe&6)===0&&uo();var l=Fe;Fe|=1;var d=Wn.transition,m=Be;try{if(Wn.transition=null,Be=1,o)return o()}finally{Be=m,Wn.transition=d,Fe=l,(Fe&6)===0&&xr()}}function Mf(){Mn=lo.current,Ze(lo)}function oi(o,l){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,bA(d)),wt!==null)for(d=wt.return;d!==null;){var m=d;switch(Fd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&kc();break;case 3:io(),Ze(fn),Ze(qt),Xd();break;case 5:qd(m);break;case 4:io();break;case 13:Ze(ot);break;case 19:Ze(ot);break;case 10:Ud(m.type._context);break;case 22:case 23:Mf()}d=d.return}if(It=o,wt=o=Ar(o.current,null),Ut=Mn=l,At=0,Ba=null,wf=Xc=ri=0,gn=za=null,ti!==null){for(l=0;l<ti.length;l++)if(d=ti[l],m=d.interleaved,m!==null){d.interleaved=null;var _=m.next,b=d.pending;if(b!==null){var A=b.next;b.next=_,m.next=A}d.pending=m}ti=null}return o}function U_(o,l){do{var d=wt;try{if(jd(),Lc.current=Uc,Bc){for(var m=at.memoizedState;m!==null;){var _=m.queue;_!==null&&(_.pending=null),m=m.next}Bc=!1}if(si=0,Rt=kt=at=null,Na=!1,Da=0,vf.current=null,d===null||d.return===null){At=1,Ba=l,wt=null;break}e:{var b=o,A=d.return,N=d,V=l;if(l=Ut,N.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var K=V,te=N,se=te.tag;if((te.mode&1)===0&&(se===0||se===11||se===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var he=f_(A);if(he!==null){he.flags&=-257,p_(he,A,N,b,l),he.mode&1&&d_(b,K,l),l=he,V=K;var fe=l.updateQueue;if(fe===null){var pe=new Set;pe.add(V),l.updateQueue=pe}else fe.add(V);break e}else{if((l&1)===0){d_(b,K,l),Pf();break e}V=Error(t(426))}}else if(nt&&N.mode&1){var yt=f_(A);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),p_(yt,A,N,b,l),Bd(oo(V,N));break e}}b=V=oo(V,N),At!==4&&(At=2),za===null?za=[b]:za.push(b),b=A;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var G=u_(b,V,l);V0(b,G);break e;case 1:N=V;var B=b.type,q=b.stateNode;if((b.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Sr===null||!Sr.has(q)))){b.flags|=65536,l&=-l,b.lanes|=l;var ie=h_(b,N,l);V0(b,ie);break e}}b=b.return}while(b!==null)}H_(d)}catch(me){l=me,wt===d&&d!==null&&(wt=d=d.return);continue}break}while(!0)}function W_(){var o=Yc.current;return Yc.current=Uc,o===null?Uc:o}function Pf(){(At===0||At===3||At===2)&&(At=4),It===null||(ri&268435455)===0&&(Xc&268435455)===0||kr(It,Ut)}function tu(o,l){var d=Fe;Fe|=2;var m=W_();(It!==o||Ut!==l)&&($s=null,oi(o,l));do try{qA();break}catch(_){U_(o,_)}while(!0);if(jd(),Fe=d,Yc.current=m,wt!==null)throw Error(t(261));return It=null,Ut=0,At}function qA(){for(;wt!==null;)G_(wt)}function YA(){for(;wt!==null&&!xk();)G_(wt)}function G_(o){var l=Y_(o.alternate,o,Mn);o.memoizedProps=o.pendingProps,l===null?H_(o):wt=l,vf.current=null}function H_(o){var l=o;do{var d=l.alternate;if(o=l.return,(l.flags&32768)===0){if(d=zA(d,l,Mn),d!==null){wt=d;return}}else{if(d=jA(d,l),d!==null){d.flags&=32767,wt=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{At=6,wt=null;return}}if(l=l.sibling,l!==null){wt=l;return}wt=l=o}while(l!==null);At===0&&(At=5)}function ai(o,l,d){var m=Be,_=Wn.transition;try{Wn.transition=null,Be=1,XA(o,l,d,m)}finally{Wn.transition=_,Be=m}return null}function XA(o,l,d,m){do uo();while(Tr!==null);if((Fe&6)!==0)throw Error(t(327));d=o.finishedWork;var _=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var b=d.lanes|d.childLanes;if(Pk(o,b),o===It&&(wt=It=null,Ut=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Zc||(Zc=!0,X_(ic,function(){return uo(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=Wn.transition,Wn.transition=null;var A=Be;Be=1;var N=Fe;Fe|=4,vf.current=null,WA(o,d),O_(d,o),mA(Md),dc=!!Ad,Md=Ad=null,o.current=d,GA(d),vk(),Fe=N,Be=A,Wn.transition=b}else o.current=d;if(Zc&&(Zc=!1,Tr=o,Qc=_),b=o.pendingLanes,b===0&&(Sr=null),Sk(d.stateNode),yn(o,gt()),l!==null)for(m=o.onRecoverableError,d=0;d<l.length;d++)_=l[d],m(_.value,{componentStack:_.stack,digest:_.digest});if(Kc)throw Kc=!1,o=Sf,Sf=null,o;return(Qc&1)!==0&&o.tag!==0&&uo(),b=o.pendingLanes,(b&1)!==0?o===Tf?ja++:(ja=0,Tf=o):ja=0,xr(),null}function uo(){if(Tr!==null){var o=Ny(Qc),l=Wn.transition,d=Be;try{if(Wn.transition=null,Be=16>o?16:o,Tr===null)var m=!1;else{if(o=Tr,Tr=null,Qc=0,(Fe&6)!==0)throw Error(t(331));var _=Fe;for(Fe|=4,de=o.current;de!==null;){var b=de,A=b.child;if((de.flags&16)!==0){var N=b.deletions;if(N!==null){for(var V=0;V<N.length;V++){var K=N[V];for(de=K;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:La(8,te,b)}var se=te.child;if(se!==null)se.return=te,de=se;else for(;de!==null;){te=de;var ee=te.sibling,he=te.return;if(E_(te),te===K){de=null;break}if(ee!==null){ee.return=he,de=ee;break}de=he}}}var fe=b.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var yt=pe.sibling;pe.sibling=null,pe=yt}while(pe!==null)}}de=b}}if((b.subtreeFlags&2064)!==0&&A!==null)A.return=b,de=A;else e:for(;de!==null;){if(b=de,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:La(9,b,b.return)}var G=b.sibling;if(G!==null){G.return=b.return,de=G;break e}de=b.return}}var B=o.current;for(de=B;de!==null;){A=de;var q=A.child;if((A.subtreeFlags&2064)!==0&&q!==null)q.return=A,de=q;else e:for(A=B;de!==null;){if(N=de,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:qc(9,N)}}catch(me){ct(N,N.return,me)}if(N===A){de=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,de=ie;break e}de=N.return}}if(Fe=_,xr(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(oc,o)}catch{}m=!0}return m}finally{Be=d,Wn.transition=l}}return!1}function $_(o,l,d){l=oo(d,l),l=u_(o,l,1),o=wr(o,l,1),l=sn(),o!==null&&(ha(o,1,l),yn(o,l))}function ct(o,l,d){if(o.tag===3)$_(o,o,d);else for(;l!==null;){if(l.tag===3){$_(l,o,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Sr===null||!Sr.has(m))){o=oo(d,o),o=h_(l,o,1),l=wr(l,o,1),o=sn(),l!==null&&(ha(l,1,o),yn(l,o));break}}l=l.return}}function KA(o,l,d){var m=o.pingCache;m!==null&&m.delete(l),l=sn(),o.pingedLanes|=o.suspendedLanes&d,It===o&&(Ut&d)===d&&(At===4||At===3&&(Ut&130023424)===Ut&&500>gt()-bf?oi(o,0):wf|=d),yn(o,l)}function q_(o,l){l===0&&((o.mode&1)===0?l=1:(l=lc,lc<<=1,(lc&130023424)===0&&(lc=4194304)));var d=sn();o=Ws(o,l),o!==null&&(ha(o,l,d),yn(o,d))}function ZA(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),q_(o,d)}function QA(o,l){var d=0;switch(o.tag){case 13:var m=o.stateNode,_=o.memoizedState;_!==null&&(d=_.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(l),q_(o,d)}var Y_;Y_=function(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps||fn.current)mn=!0;else{if((o.lanes&d)===0&&(l.flags&128)===0)return mn=!1,BA(o,l,d);mn=(o.flags&131072)!==0}else mn=!1,nt&&(l.flags&1048576)!==0&&A0(l,Ec,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;Hc(o,l),o=l.pendingProps;var _=Qi(l,qt.current);ro(l,d),_=Qd(null,l,m,o,_,d);var b=Jd();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,pn(m)?(b=!0,Ac(l)):b=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Hd(l),_.updater=Wc,l.stateNode=_,_._reactInternals=l,of(l,m,o,d),l=uf(null,l,m,!0,b,d)):(l.tag=0,nt&&b&&Od(l),nn(null,l,_,d),l=l.child),l;case 16:m=l.elementType;e:{switch(Hc(o,l),o=l.pendingProps,_=m._init,m=_(m._payload),l.type=m,_=l.tag=e2(m),o=ns(m,o),_){case 0:l=cf(null,l,m,o,d);break e;case 1:l=v_(null,l,m,o,d);break e;case 11:l=m_(null,l,m,o,d);break e;case 14:l=g_(null,l,m,ns(m.type,o),d);break e}throw Error(t(306,m,""))}return l;case 0:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:ns(m,_),cf(o,l,m,_,d);case 1:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:ns(m,_),v_(o,l,m,_,d);case 3:e:{if(w_(l),o===null)throw Error(t(387));m=l.pendingProps,b=l.memoizedState,_=b.element,F0(o,l),Fc(l,m,null,d);var A=l.memoizedState;if(m=A.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){_=oo(Error(t(423)),l),l=b_(o,l,m,d,_);break e}else if(m!==_){_=oo(Error(t(424)),l),l=b_(o,l,m,d,_);break e}else for(An=gr(l.stateNode.containerInfo.firstChild),kn=l,nt=!0,ts=null,d=D0(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(to(),m===_){l=Hs(o,l,d);break e}nn(o,l,m,d)}l=l.child}return l;case 5:return B0(l),o===null&&Ld(l),m=l.type,_=l.pendingProps,b=o!==null?o.memoizedProps:null,A=_.children,Pd(m,_)?A=null:b!==null&&Pd(m,b)&&(l.flags|=32),x_(o,l),nn(o,l,A,d),l.child;case 6:return o===null&&Ld(l),null;case 13:return S_(o,l,d);case 4:return $d(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=no(l,null,m,d):nn(o,l,m,d),l.child;case 11:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:ns(m,_),m_(o,l,m,_,d);case 7:return nn(o,l,l.pendingProps,d),l.child;case 8:return nn(o,l,l.pendingProps.children,d),l.child;case 12:return nn(o,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,_=l.pendingProps,b=l.memoizedProps,A=_.value,Ye(Nc,m._currentValue),m._currentValue=A,b!==null)if(es(b.value,A)){if(b.children===_.children&&!fn.current){l=Hs(o,l,d);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var N=b.dependencies;if(N!==null){A=b.child;for(var V=N.firstContext;V!==null;){if(V.context===m){if(b.tag===1){V=Gs(-1,d&-d),V.tag=2;var K=b.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?V.next=V:(V.next=te.next,te.next=V),K.pending=V}}b.lanes|=d,V=b.alternate,V!==null&&(V.lanes|=d),Wd(b.return,d,l),N.lanes|=d;break}V=V.next}}else if(b.tag===10)A=b.type===l.type?null:b.child;else if(b.tag===18){if(A=b.return,A===null)throw Error(t(341));A.lanes|=d,N=A.alternate,N!==null&&(N.lanes|=d),Wd(A,d,l),A=b.sibling}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===l){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}nn(o,l,_.children,d),l=l.child}return l;case 9:return _=l.type,m=l.pendingProps.children,ro(l,d),_=jn(_),m=m(_),l.flags|=1,nn(o,l,m,d),l.child;case 14:return m=l.type,_=ns(m,l.pendingProps),_=ns(m.type,_),g_(o,l,m,_,d);case 15:return y_(o,l,l.type,l.pendingProps,d);case 17:return m=l.type,_=l.pendingProps,_=l.elementType===m?_:ns(m,_),Hc(o,l),l.tag=1,pn(m)?(o=!0,Ac(l)):o=!1,ro(l,d),l_(l,m,_),of(l,m,_,d),uf(null,l,m,!0,o,d);case 19:return C_(o,l,d);case 22:return __(o,l,d)}throw Error(t(156,l.tag))};function X_(o,l){return My(o,l)}function JA(o,l,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(o,l,d,m){return new JA(o,l,d,m)}function Ef(o){return o=o.prototype,!(!o||!o.isReactComponent)}function e2(o){if(typeof o=="function")return Ef(o)?1:0;if(o!=null){if(o=o.$$typeof,o===L)return 11;if(o===ne)return 14}return 2}function Ar(o,l){var d=o.alternate;return d===null?(d=Gn(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function nu(o,l,d,m,_,b){var A=2;if(m=o,typeof o=="function")Ef(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case E:return li(d.children,_,b,l);case R:A=8,_|=8;break;case O:return o=Gn(12,d,l,_|2),o.elementType=O,o.lanes=b,o;case X:return o=Gn(13,d,l,_),o.elementType=X,o.lanes=b,o;case Z:return o=Gn(19,d,l,_),o.elementType=Z,o.lanes=b,o;case j:return su(d,_,b,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:A=10;break e;case F:A=9;break e;case L:A=11;break e;case ne:A=14;break e;case W:A=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Gn(A,d,l,_),l.elementType=o,l.type=m,l.lanes=b,l}function li(o,l,d,m){return o=Gn(7,o,m,l),o.lanes=d,o}function su(o,l,d,m){return o=Gn(22,o,m,l),o.elementType=j,o.lanes=d,o.stateNode={isHidden:!1},o}function Rf(o,l,d){return o=Gn(6,o,null,l),o.lanes=d,o}function If(o,l,d){return l=Gn(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function t2(o,l,d,m,_){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=m,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Nf(o,l,d,m,_,b,A,N,V){return o=new t2(o,l,d,N,V),l===1?(l=1,b===!0&&(l|=8)):l=0,b=Gn(3,null,null,l),o.current=b,b.stateNode=o,b.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hd(b),o}function n2(o,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:m==null?null:""+m,children:o,containerInfo:l,implementation:d}}function K_(o){if(!o)return _r;o=o._reactInternals;e:{if(Kr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(pn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var d=o.type;if(pn(d))return T0(o,d,l)}return l}function Z_(o,l,d,m,_,b,A,N,V){return o=Nf(d,m,!0,o,_,b,A,N,V),o.context=K_(null),d=o.current,m=sn(),_=Cr(d),b=Gs(m,_),b.callback=l??null,wr(d,b,_),o.current.lanes=_,ha(o,_,m),yn(o,m),o}function ru(o,l,d,m){var _=l.current,b=sn(),A=Cr(_);return d=K_(d),l.context===null?l.context=d:l.pendingContext=d,l=Gs(b,A),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=wr(_,l,A),o!==null&&(is(o,_,A,b),Oc(o,_,A)),A}function iu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Q_(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function Df(o,l){Q_(o,l),(o=o.alternate)&&Q_(o,l)}function s2(){return null}var J_=typeof reportError=="function"?reportError:function(o){console.error(o)};function Of(o){this._internalRoot=o}ou.prototype.render=Of.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));ru(o,l,null,null)},ou.prototype.unmount=Of.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;ii(function(){ru(null,o,null,null)}),l[Bs]=null}};function ou(o){this._internalRoot=o}ou.prototype.unstable_scheduleHydration=function(o){if(o){var l=Fy();o={blockedOn:null,target:o,priority:l};for(var d=0;d<fr.length&&l!==0&&l<fr[d].priority;d++);fr.splice(d,0,o),d===0&&By(o)}};function Ff(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function au(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ex(){}function r2(o,l,d,m,_){if(_){if(typeof m=="function"){var b=m;m=function(){var K=iu(A);b.call(K)}}var A=Z_(l,m,o,0,null,!1,!1,"",ex);return o._reactRootContainer=A,o[Bs]=A.current,Ca(o.nodeType===8?o.parentNode:o),ii(),A}for(;_=o.lastChild;)o.removeChild(_);if(typeof m=="function"){var N=m;m=function(){var K=iu(V);N.call(K)}}var V=Nf(o,0,!1,null,null,!1,!1,"",ex);return o._reactRootContainer=V,o[Bs]=V.current,Ca(o.nodeType===8?o.parentNode:o),ii(function(){ru(l,V,d,m)}),V}function lu(o,l,d,m,_){var b=d._reactRootContainer;if(b){var A=b;if(typeof _=="function"){var N=_;_=function(){var V=iu(A);N.call(V)}}ru(l,A,o,_)}else A=r2(d,l,o,_,m);return iu(A)}Dy=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var d=ua(l.pendingLanes);d!==0&&(id(l,d|1),yn(l,gt()),(Fe&6)===0&&(co=gt()+500,xr()))}break;case 13:ii(function(){var m=Ws(o,1);if(m!==null){var _=sn();is(m,o,1,_)}}),Df(o,1)}},od=function(o){if(o.tag===13){var l=Ws(o,134217728);if(l!==null){var d=sn();is(l,o,134217728,d)}Df(o,134217728)}},Oy=function(o){if(o.tag===13){var l=Cr(o),d=Ws(o,l);if(d!==null){var m=sn();is(d,o,l,m)}Df(o,l)}},Fy=function(){return Be},Vy=function(o,l){var d=Be;try{return Be=o,l()}finally{Be=d}},Qh=function(o,l,d){switch(l){case"input":if(qe(o,d),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==o&&m.form===o.form){var _=Cc(m);if(!_)throw Error(t(90));zt(m),qe(m,_)}}}break;case"textarea":zi(o,d);break;case"select":l=d.value,l!=null&&Ct(o,!!d.multiple,l,!1)}},wy=Af,by=ii;var i2={usingClientEntryPoint:!1,Events:[Ma,Ki,Cc,xy,vy,Af]},Ua={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o2={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ky(o),o===null?null:o.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||s2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{oc=cu.inject(o2),vs=cu}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i2,_n.createPortal=function(o,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(l))throw Error(t(200));return n2(o,l,null,d)},_n.createRoot=function(o,l){if(!Ff(o))throw Error(t(299));var d=!1,m="",_=J_;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=Nf(o,1,!1,null,null,d,!1,m,_),o[Bs]=l.current,Ca(o.nodeType===8?o.parentNode:o),new Of(l)},_n.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ky(l),o=o===null?null:o.stateNode,o},_n.flushSync=function(o){return ii(o)},_n.hydrate=function(o,l,d){if(!au(l))throw Error(t(200));return lu(null,o,l,!0,d)},_n.hydrateRoot=function(o,l,d){if(!Ff(o))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,_=!1,b="",A=J_;if(d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),l=Z_(l,null,o,1,d??null,_,!1,b,A),o[Bs]=l.current,Ca(o),m)for(o=0;o<m.length;o++)d=m[o],_=d._getVersion,_=_(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,_]:l.mutableSourceEagerHydrationData.push(d,_);return new ou(l)},_n.render=function(o,l,d){if(!au(l))throw Error(t(200));return lu(null,o,l,!1,d)},_n.unmountComponentAtNode=function(o){if(!au(o))throw Error(t(40));return o._reactRootContainer?(ii(function(){lu(null,null,o,!1,function(){o._reactRootContainer=null,o[Bs]=null})}),!0):!1},_n.unstable_batchedUpdates=Af,_n.unstable_renderSubtreeIntoContainer=function(o,l,d,m){if(!au(d))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return lu(o,l,d,!1,m)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var hx;function I2(){if(hx)return Bf.exports;hx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bf.exports=R2(),Bf.exports}var dx;function N2(){if(dx)return du;dx=1;var n=I2();return du.createRoot=n.createRoot,du.hydrateRoot=n.hydrateRoot,du}var D2=N2();const Im=J.createContext({});function Nm(n){const e=J.useRef(null);return e.current===null&&(e.current=n()),e.current}const mh=J.createContext(null),Dm=J.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class O2 extends J.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function F2({children:n,isPresent:e}){const t=J.useId(),s=J.useRef(null),r=J.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=J.useContext(Dm);return J.useInsertionEffect(()=>{const{width:a,height:c,top:u,left:h}=r.current;if(e||!s.current||!a||!c)return;s.current.dataset.motionPopId=t;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),z.jsx(O2,{isPresent:e,childRef:s,sizeRef:r,children:J.cloneElement(n,{ref:s})})}const V2=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const c=Nm(L2),u=J.useId(),h=J.useCallback(p=>{c.set(p,!0);for(const g of c.values())if(!g)return;s&&s()},[c,s]),f=J.useMemo(()=>({id:u,initial:e,isPresent:t,custom:r,onExitComplete:h,register:p=>(c.set(p,!1),()=>c.delete(p))}),i?[Math.random(),h]:[t,h]);return J.useMemo(()=>{c.forEach((p,g)=>c.set(g,!1))},[t]),J.useEffect(()=>{!t&&!c.size&&s&&s()},[t]),a==="popLayout"&&(n=z.jsx(F2,{isPresent:t,children:n})),z.jsx(mh.Provider,{value:f,children:n})};function L2(){return new Map}function w1(n=!0){const e=J.useContext(mh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,i=J.useId();J.useEffect(()=>{n&&r(i)},[n]);const a=J.useCallback(()=>n&&s&&s(i),[i,s,n]);return!t&&s?[!1,a]:[!0]}const fu=n=>n.key||"";function fx(n){const e=[];return J.Children.forEach(n,t=>{J.isValidElement(t)&&e.push(t)}),e}const Om=typeof window<"u",b1=Om?J.useLayoutEffect:J.useEffect,Ga=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1})=>{const[c,u]=w1(a),h=J.useMemo(()=>fx(n),[n]),f=a&&!c?[]:h.map(fu),p=J.useRef(!0),g=J.useRef(h),y=Nm(()=>new Map),[x,w]=J.useState(h),[v,S]=J.useState(h);b1(()=>{p.current=!1,g.current=h;for(let P=0;P<v.length;P++){const k=fu(v[P]);f.includes(k)?y.delete(k):y.get(k)!==!0&&y.set(k,!1)}},[v,f.length,f.join("-")]);const T=[];if(h!==x){let P=[...h];for(let k=0;k<v.length;k++){const M=v[k],E=fu(M);f.includes(E)||(P.splice(k,0,M),T.push(M))}i==="wait"&&T.length&&(P=T),S(fx(P)),w(h);return}const{forceRender:C}=J.useContext(Im);return z.jsx(z.Fragment,{children:v.map(P=>{const k=fu(P),M=a&&!c?!1:h===v||f.includes(k),E=()=>{if(y.has(k))y.set(k,!0);else return;let R=!0;y.forEach(O=>{O||(R=!1)}),R&&(C==null||C(),S(g.current),a&&(u==null||u()),s&&s())};return z.jsx(V2,{isPresent:M,initial:!p.current||t?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:M?void 0:E,children:P},k)})})},Nn=n=>n;let S1=Nn;function Fm(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ri=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},Es=n=>n*1e3,Rs=n=>n/1e3,B2={useManualTiming:!1};function z2(n){let e=new Set,t=new Set,s=!1,r=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(h){i.has(h)&&(u.schedule(h),n()),h(a)}const u={schedule:(h,f=!1,p=!1)=>{const y=p&&s?e:t;return f&&i.add(h),y.has(h)||y.add(h),h},cancel:h=>{t.delete(h),i.delete(h)},process:h=>{if(a=h,s){r=!0;return}s=!0,[e,t]=[t,e],e.forEach(c),e.clear(),s=!1,r&&(r=!1,u.process(h))}};return u}const pu=["read","resolveKeyframes","update","preRender","render","postRender"],j2=40;function T1(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,a=pu.reduce((S,T)=>(S[T]=z2(i),S),{}),{read:c,resolveKeyframes:u,update:h,preRender:f,render:p,postRender:g}=a,y=()=>{const S=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(S-r.timestamp,j2),1),r.timestamp=S,r.isProcessing=!0,c.process(r),u.process(r),h.process(r),f.process(r),p.process(r),g.process(r),r.isProcessing=!1,t&&e&&(s=!1,n(y))},x=()=>{t=!0,s=!0,r.isProcessing||n(y)};return{schedule:pu.reduce((S,T)=>{const C=a[T];return S[T]=(P,k=!1,M=!1)=>(t||x(),C.schedule(P,k,M)),S},{}),cancel:S=>{for(let T=0;T<pu.length;T++)a[pu[T]].cancel(S)},state:r,steps:a}}const{schedule:et,cancel:Br,state:Wt,steps:Uf}=T1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0),C1=J.createContext({strict:!1}),px={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Io={};for(const n in px)Io[n]={isEnabled:e=>px[n].some(t=>!!e[t])};function U2(n){for(const e in n)Io[e]={...Io[e],...n[e]}}const W2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hu(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||W2.has(n)}let k1=n=>!Hu(n);function G2(n){n&&(k1=e=>e.startsWith("on")?!Hu(e):n(e))}try{G2(require("@emotion/is-prop-valid").default)}catch{}function H2(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(k1(r)||t===!0&&Hu(r)||!e&&!Hu(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function $2(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const gh=J.createContext({});function yl(n){return typeof n=="string"||Array.isArray(n)}function yh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lm=["initial",...Vm];function _h(n){return yh(n.animate)||Lm.some(e=>yl(n[e]))}function A1(n){return!!(_h(n)||n.variants)}function q2(n,e){if(_h(n)){const{initial:t,animate:s}=n;return{initial:t===!1||yl(t)?t:void 0,animate:yl(s)?s:void 0}}return n.inherit!==!1?e:{}}function Y2(n){const{initial:e,animate:t}=q2(n,J.useContext(gh));return J.useMemo(()=>({initial:e,animate:t}),[mx(e),mx(t)])}function mx(n){return Array.isArray(n)?n.join(" "):n}const X2=Symbol.for("motionComponentSymbol");function _o(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function K2(n,e,t){return J.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):_o(t)&&(t.current=s))},[e])}const Bm=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z2="framerAppearId",M1="data-"+Bm(Z2),{schedule:zm}=T1(queueMicrotask,!1),P1=J.createContext({});function Q2(n,e,t,s,r){var i,a;const{visualElement:c}=J.useContext(gh),u=J.useContext(C1),h=J.useContext(mh),f=J.useContext(Dm).reducedMotion,p=J.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(n,{visualState:e,parent:c,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,y=J.useContext(P1);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&J2(p.current,t,r,y);const x=J.useRef(!1);J.useInsertionEffect(()=>{g&&x.current&&g.update(t,h)});const w=t[M1],v=J.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,w)));return b1(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),zm.render(g.render),v.current&&g.animationState&&g.animationState.animateChanges())}),J.useEffect(()=>{g&&(!v.current&&g.animationState&&g.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,w)}),v.current=!1))}),g}function J2(n,e,t,s){const{layoutId:r,layout:i,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:E1(n.parent)),n.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||c&&_o(c),visualElement:n,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:h})}function E1(n){if(n)return n.options.allowProjection!==!1?n.projection:E1(n.parent)}function eM({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){var i,a;n&&U2(n);function c(h,f){let p;const g={...J.useContext(Dm),...h,layoutId:tM(h)},{isStatic:y}=g,x=Y2(h),w=s(h,y);if(!y&&Om){nM();const v=sM(g);p=v.MeasureLayout,x.visualElement=Q2(r,w,g,e,v.ProjectionNode)}return z.jsxs(gh.Provider,{value:x,children:[p&&x.visualElement?z.jsx(p,{visualElement:x.visualElement,...g}):null,t(r,h,K2(w,x.visualElement,f),w,y,x.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(a=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&a!==void 0?a:""})`}`;const u=J.forwardRef(c);return u[X2]=r,u}function tM({layoutId:n}){const e=J.useContext(Im).id;return e&&n!==void 0?e+"-"+n:n}function nM(n,e){J.useContext(C1).strict}function sM(n){const{drag:e,layout:t}=Io;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const rM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jm(n){return typeof n!="string"||n.includes("-")?!1:!!(rM.indexOf(n)>-1||/[A-Z]/u.test(n))}function gx(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function Um(n,e,t,s){if(typeof e=="function"){const[r,i]=gx(s);e=e(t!==void 0?t:n.custom,r,i)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,i]=gx(s);e=e(t!==void 0?t:n.custom,r,i)}return e}const Op=n=>Array.isArray(n),iM=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),oM=n=>Op(n)?n[n.length-1]||0:n,Vt=n=>!!(n&&n.getVelocity);function Vu(n){const e=Vt(n)?n.get():n;return iM(e)?e.toValue():e}function aM({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},s,r,i){const a={latestValues:lM(s,r,i,n),renderState:e()};return t&&(a.onMount=c=>t({props:s,current:c,...a}),a.onUpdate=c=>t(c)),a}const R1=n=>(e,t)=>{const s=J.useContext(gh),r=J.useContext(mh),i=()=>aM(n,e,s,r);return t?i():Nm(i)};function lM(n,e,t,s){const r={},i=s(n,{});for(const g in i)r[g]=Vu(i[g]);let{initial:a,animate:c}=n;const u=_h(n),h=A1(n);e&&h&&!u&&n.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const p=f?c:a;if(p&&typeof p!="boolean"&&!yh(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const x=Um(n,g[y]);if(x){const{transitionEnd:w,transition:v,...S}=x;for(const T in S){let C=S[T];if(Array.isArray(C)){const P=f?C.length-1:0;C=C[P]}C!==null&&(r[T]=C)}for(const T in w)r[T]=w[T]}}}return r}const $o=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fi=new Set($o),I1=n=>e=>typeof e=="string"&&e.startsWith(n),N1=I1("--"),cM=I1("var(--"),Wm=n=>cM(n)?uM.test(n.split("/*")[0].trim()):!1,uM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,D1=(n,e)=>e&&typeof n=="number"?e.transform(n):n,nr=(n,e,t)=>t>e?e:t<n?n:t,qo={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},_l={...qo,transform:n=>nr(0,1,n)},mu={...qo,default:1},Dl=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ir=Dl("deg"),Is=Dl("%"),ve=Dl("px"),hM=Dl("vh"),dM=Dl("vw"),yx={...Is,parse:n=>Is.parse(n)/100,transform:n=>Is.transform(n*100)},fM={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,backgroundPositionX:ve,backgroundPositionY:ve},pM={rotate:Ir,rotateX:Ir,rotateY:Ir,rotateZ:Ir,scale:mu,scaleX:mu,scaleY:mu,scaleZ:mu,skew:Ir,skewX:Ir,skewY:Ir,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:_l,originX:yx,originY:yx,originZ:ve},_x={...qo,transform:Math.round},Gm={...fM,...pM,zIndex:_x,size:ve,fillOpacity:_l,strokeOpacity:_l,numOctaves:_x},mM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gM=$o.length;function yM(n,e,t){let s="",r=!0;for(let i=0;i<gM;i++){const a=$o[i],c=n[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const h=D1(c,Gm[a]);if(!u){r=!1;const f=mM[a]||a;s+=`${f}(${h}) `}t&&(e[a]=h)}}return s=s.trim(),t?s=t(e,r?"":s):r&&(s="none"),s}function Hm(n,e,t){const{style:s,vars:r,transformOrigin:i}=n;let a=!1,c=!1;for(const u in e){const h=e[u];if(Fi.has(u)){a=!0;continue}else if(N1(u)){r[u]=h;continue}else{const f=D1(h,Gm[u]);u.startsWith("origin")?(c=!0,i[u]=f):s[u]=f}}if(e.transform||(a||t?s.transform=yM(e,n.transform,t):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;s.transformOrigin=`${u} ${h} ${f}`}}const _M={offset:"stroke-dashoffset",array:"stroke-dasharray"},xM={offset:"strokeDashoffset",array:"strokeDasharray"};function vM(n,e,t=1,s=0,r=!0){n.pathLength=1;const i=r?_M:xM;n[i.offset]=ve.transform(-s);const a=ve.transform(e),c=ve.transform(t);n[i.array]=`${a} ${c}`}function xx(n,e,t){return typeof n=="string"?n:ve.transform(e+t*n)}function wM(n,e,t){const s=xx(e,n.x,n.width),r=xx(t,n.y,n.height);return`${s} ${r}`}function $m(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...h},f,p){if(Hm(n,h,p),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:y,dimensions:x}=n;g.transform&&(x&&(y.transform=g.transform),delete g.transform),x&&(r!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=wM(x,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),s!==void 0&&(g.scale=s),a!==void 0&&vM(g,a,c,u,!1)}const qm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),O1=()=>({...qm(),attrs:{}}),Ym=n=>typeof n=="string"&&n.toLowerCase()==="svg";function F1(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const i in t)n.style.setProperty(i,t[i])}const V1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L1(n,e,t,s){F1(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(V1.has(r)?r:Bm(r),e.attrs[r])}const $u={};function bM(n){Object.assign($u,n)}function B1(n,{layout:e,layoutId:t}){return Fi.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!$u[n]||n==="opacity")}function Xm(n,e,t){var s;const{style:r}=n,i={};for(const a in r)(Vt(r[a])||e.style&&Vt(e.style[a])||B1(a,n)||((s=t==null?void 0:t.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}function z1(n,e,t){const s=Xm(n,e,t);for(const r in n)if(Vt(n[r])||Vt(e[r])){const i=$o.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=n[r]}return s}function SM(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const vx=["x","y","width","height","cx","cy","r"],TM={useVisualState:R1({scrapeMotionValuesFromProps:z1,createRenderState:O1,onUpdate:({props:n,prevProps:e,current:t,renderState:s,latestValues:r})=>{if(!t)return;let i=!!n.drag;if(!i){for(const c in r)if(Fi.has(c)){i=!0;break}}if(!i)return;let a=!e;if(e)for(let c=0;c<vx.length;c++){const u=vx[c];n[u]!==e[u]&&(a=!0)}a&&et.read(()=>{SM(t,s),et.render(()=>{$m(s,r,Ym(t.tagName),n.transformTemplate),L1(t,s)})})}})},CM={useVisualState:R1({scrapeMotionValuesFromProps:Xm,createRenderState:qm})};function j1(n,e,t){for(const s in e)!Vt(e[s])&&!B1(s,t)&&(n[s]=e[s])}function kM({transformTemplate:n},e){return J.useMemo(()=>{const t=qm();return Hm(t,e,n),Object.assign({},t.vars,t.style)},[e])}function AM(n,e){const t=n.style||{},s={};return j1(s,t,n),Object.assign(s,kM(n,e)),s}function MM(n,e){const t={},s=AM(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}function PM(n,e,t,s){const r=J.useMemo(()=>{const i=O1();return $m(i,e,Ym(s),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};j1(i,n.style,n),r.style={...i,...r.style}}return r}function EM(n=!1){return(t,s,r,{latestValues:i},a)=>{const u=(jm(t)?PM:MM)(s,i,a,t),h=H2(s,typeof t=="string",n),f=t!==J.Fragment?{...h,...u,ref:r}:{},{children:p}=s,g=J.useMemo(()=>Vt(p)?p.get():p,[p]);return J.createElement(t,{...f,children:g})}}function RM(n,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...jm(s)?TM:CM,preloadedFeatures:n,useRender:EM(r),createVisualElement:e,Component:s};return eM(a)}}function U1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function xh(n,e,t){const s=n.getProps();return Um(s,e,t!==void 0?t:s.custom,n)}const IM=Fm(()=>window.ScrollTimeline!==void 0);class NM{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=t}attachTimeline(e,t){const s=this.animations.map(r=>{if(IM()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{s.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class W1 extends NM{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Km(n,e){return n?n[e]||n.default||n:void 0}const qu=2e4;function Zm(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<qu;)e+=t,s=n.next(e);return e>=qu?1/0:e}function DM(n,e=100,t){const s=t({...n,keyframes:[0,e]}),r=Math.min(Zm(s),qu);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:Rs(r)}}function vh(n){return typeof n=="function"}function wx(n,e){n.timeline=e,n.onfinish=null}const Qm=n=>Array.isArray(n)&&typeof n[0]=="number",OM={linearEasing:void 0};function FM(n,e){const t=Fm(n);return()=>{var s;return(s=OM[e])!==null&&s!==void 0?s:t()}}const Yu=FM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),G1=(n,e,t=10)=>{let s="";const r=Math.max(Math.round(e/t),2);for(let i=0;i<r;i++)s+=n(Ri(0,r-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function H1(n){return!!(typeof n=="function"&&Yu()||!n||typeof n=="string"&&(n in Fp||Yu())||Qm(n)||Array.isArray(n)&&n.every(H1))}const tl=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,Fp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tl([0,.65,.55,1]),circOut:tl([.55,0,1,.45]),backIn:tl([.31,.01,.66,-.59]),backOut:tl([.33,1.53,.69,.99])};function $1(n,e){if(n)return typeof n=="function"&&Yu()?G1(n,e):Qm(n)?tl(n):Array.isArray(n)?n.map(t=>$1(t,e)||Fp.easeOut):Fp[n]}const as={x:!1,y:!1};function q1(){return as.x||as.y}function Y1(n,e,t){var s;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const i=(s=t==null?void 0:t[n])!==null&&s!==void 0?s:r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}function X1(n,e){const t=Y1(n),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[t,r,()=>s.abort()]}function bx(n){return e=>{e.pointerType==="touch"||q1()||n(e)}}function VM(n,e,t={}){const[s,r,i]=X1(n,t),a=bx(c=>{const{target:u}=c,h=e(c);if(typeof h!="function"||!u)return;const f=bx(p=>{h(p),u.removeEventListener("pointerleave",f)});u.addEventListener("pointerleave",f,r)});return s.forEach(c=>{c.addEventListener("pointerenter",a,r)}),i}const K1=(n,e)=>e?n===e?!0:K1(n,e.parentElement):!1,Jm=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,LM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BM(n){return LM.has(n.tagName)||n.tabIndex!==-1}const nl=new WeakSet;function Sx(n){return e=>{e.key==="Enter"&&n(e)}}function Wf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zM=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=Sx(()=>{if(nl.has(t))return;Wf(t,"down");const r=Sx(()=>{Wf(t,"up")}),i=()=>Wf(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function Tx(n){return Jm(n)&&!q1()}function jM(n,e,t={}){const[s,r,i]=X1(n,t),a=c=>{const u=c.currentTarget;if(!Tx(c)||nl.has(u))return;nl.add(u);const h=e(c),f=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!Tx(y)||!nl.has(u))&&(nl.delete(u),typeof h=="function"&&h(y,{success:x}))},p=y=>{f(y,t.useGlobalTarget||K1(u,y.target))},g=y=>{f(y,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",g,r)};return s.forEach(c=>{!BM(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(t.useGlobalTarget?window:c).addEventListener("pointerdown",a,r),c.addEventListener("focus",h=>zM(h,r),r)}),i}function UM(n){return n==="x"||n==="y"?as[n]?null:(as[n]=!0,()=>{as[n]=!1}):as.x||as.y?null:(as.x=as.y=!0,()=>{as.x=as.y=!1})}const Z1=new Set(["width","height","top","left","right","bottom",...$o]);let Lu;function WM(){Lu=void 0}const Ns={now:()=>(Lu===void 0&&Ns.set(Wt.isProcessing||B2.useManualTiming?Wt.timestamp:performance.now()),Lu),set:n=>{Lu=n,queueMicrotask(WM)}};function eg(n,e){n.indexOf(e)===-1&&n.push(e)}function wh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class tg{constructor(){this.subscriptions=[]}add(e){return eg(this.subscriptions,e),()=>wh(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Q1(n,e){return e?n*(1e3/e):0}const Cx=30,GM=n=>!isNaN(parseFloat(n));class HM{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const i=Ns.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ns.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tg);const s=this.events[e].add(t);return e==="change"?()=>{s(),et.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ns.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Cx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Cx);return Q1(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xl(n,e){return new HM(n,e)}function $M(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xl(t))}function qM(n,e){const t=xh(n,e);let{transitionEnd:s={},transition:r={},...i}=t||{};i={...i,...s};for(const a in i){const c=oM(i[a]);$M(n,a,c)}}function YM(n){return!!(Vt(n)&&n.add)}function Vp(n,e){const t=n.getValue("willChange");if(YM(t))return t.add(e)}function J1(n){return n.props[M1]}const eb=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,XM=1e-7,KM=12;function ZM(n,e,t,s,r){let i,a,c=0;do a=e+(t-e)/2,i=eb(a,s,r)-n,i>0?t=a:e=a;while(Math.abs(i)>XM&&++c<KM);return a}function Ol(n,e,t,s){if(n===e&&t===s)return Nn;const r=i=>ZM(i,0,1,n,t);return i=>i===0||i===1?i:eb(r(i),e,s)}const tb=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nb=n=>e=>1-n(1-e),sb=Ol(.33,1.53,.69,.99),ng=nb(sb),rb=tb(ng),ib=n=>(n*=2)<1?.5*ng(n):.5*(2-Math.pow(2,-10*(n-1))),sg=n=>1-Math.sin(Math.acos(n)),ob=nb(sg),ab=tb(sg),lb=n=>/^0[^.\s]+$/u.test(n);function QM(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lb(n):!0}const al=n=>Math.round(n*1e5)/1e5,rg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JM(n){return n==null}const eP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ig=(n,e)=>t=>!!(typeof t=="string"&&eP.test(t)&&t.startsWith(n)||e&&!JM(t)&&Object.prototype.hasOwnProperty.call(t,e)),cb=(n,e,t)=>s=>{if(typeof s!="string")return s;const[r,i,a,c]=s.match(rg);return{[n]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},tP=n=>nr(0,255,n),Gf={...qo,transform:n=>Math.round(tP(n))},bi={test:ig("rgb","red"),parse:cb("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+Gf.transform(n)+", "+Gf.transform(e)+", "+Gf.transform(t)+", "+al(_l.transform(s))+")"};function nP(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Lp={test:ig("#"),parse:nP,transform:bi.transform},xo={test:ig("hsl","hue"),parse:cb("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Is.transform(al(e))+", "+Is.transform(al(t))+", "+al(_l.transform(s))+")"},Zt={test:n=>bi.test(n)||Lp.test(n)||xo.test(n),parse:n=>bi.test(n)?bi.parse(n):xo.test(n)?xo.parse(n):Lp.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?bi.transform(n):xo.transform(n)},sP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rP(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(rg))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(sP))===null||t===void 0?void 0:t.length)||0)>0}const ub="number",hb="color",iP="var",oP="var(",kx="${}",aP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vl(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},r=[];let i=0;const c=e.replace(aP,u=>(Zt.test(u)?(s.color.push(i),r.push(hb),t.push(Zt.parse(u))):u.startsWith(oP)?(s.var.push(i),r.push(iP),t.push(u)):(s.number.push(i),r.push(ub),t.push(parseFloat(u))),++i,kx)).split(kx);return{values:t,split:c,indexes:s,types:r}}function db(n){return vl(n).values}function fb(n){const{split:e,types:t}=vl(n),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const c=t[a];c===ub?i+=al(r[a]):c===hb?i+=Zt.transform(r[a]):i+=r[a]}return i}}const lP=n=>typeof n=="number"?0:n;function cP(n){const e=db(n);return fb(n)(e.map(lP))}const zr={test:rP,parse:db,createTransformer:fb,getAnimatableNone:cP},uP=new Set(["brightness","contrast","saturate","opacity"]);function hP(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(rg)||[];if(!s)return n;const r=t.replace(s,"");let i=uP.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+r+")"}const dP=/\b([a-z-]*)\(.*?\)/gu,Bp={...zr,getAnimatableNone:n=>{const e=n.match(dP);return e?e.map(hP).join(" "):n}},fP={...Gm,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:Bp,WebkitFilter:Bp},og=n=>fP[n];function pb(n,e){let t=og(n);return t!==Bp&&(t=zr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const pP=new Set(["auto","none","0"]);function mP(n,e,t){let s=0,r;for(;s<n.length&&!r;){const i=n[s];typeof i=="string"&&!pP.has(i)&&vl(i).values.length&&(r=n[s]),s++}if(r&&t)for(const i of e)n[i]=pb(t,r)}const Ax=n=>n===qo||n===ve,Mx=(n,e)=>parseFloat(n.split(", ")[e]),Px=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return Mx(r[1],e);{const i=s.match(/^matrix\((.+)\)$/u);return i?Mx(i[1],n):0}},gP=new Set(["x","y","z"]),yP=$o.filter(n=>!gP.has(n));function _P(n){const e=[];return yP.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const No={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Px(4,13),y:Px(5,14)};No.translateX=No.x;No.translateY=No.y;const Mi=new Set;let zp=!1,jp=!1;function mb(){if(jp){const n=Array.from(Mi).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const r=_P(s);r.length&&(t.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=t.get(s);r&&r.forEach(([i,a])=>{var c;(c=s.getValue(i))===null||c===void 0||c.set(a)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}jp=!1,zp=!1,Mi.forEach(n=>n.complete()),Mi.clear()}function gb(){Mi.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(jp=!0)})}function xP(){gb(),mb()}class ag{constructor(e,t,s,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mi.add(this),zp||(zp=!0,et.read(gb),et.resolveKeyframes(mb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=r==null?void 0:r.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const u=s.readValue(t,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),r&&a===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const yb=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),vP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wP(n){const e=vP.exec(n);if(!e)return[,];const[,t,s,r]=e;return[`--${t??s}`,r]}function _b(n,e,t=1){const[s,r]=wP(n);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return yb(a)?parseFloat(a):a}return Wm(r)?_b(r,e,t+1):r}const xb=n=>e=>e.test(n),bP={test:n=>n==="auto",parse:n=>n},vb=[qo,ve,Is,Ir,dM,hM,bP],Ex=n=>vb.find(xb(n));class wb extends ag{constructor(e,t,s,r,i){super(e,t,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),Wm(h))){const f=_b(h,t.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Z1.has(s)||e.length!==2)return;const[r,i]=e,a=Ex(r),c=Ex(i);if(a!==c)if(Ax(a)&&Ax(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)QM(e[r])&&s.push(r);s.length&&mP(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=No[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=No[s](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{t.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const Rx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(zr.test(n)||n==="0")&&!n.startsWith("url("));function SP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function TP(n,e,t,s){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=n[n.length-1],a=Rx(r,e),c=Rx(i,e);return!a||!c?!1:SP(n)||(t==="spring"||vh(t))&&s}const CP=n=>n!==null;function bh(n,{repeat:e,repeatType:t="loop"},s){const r=n.filter(CP),i=e&&t!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const kP=40;class bb{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ns.now(),this.options={autoplay:e,delay:t,type:s,repeat:r,repeatDelay:i,repeatType:a,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kP?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xP(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Ns.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:i,delay:a,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!TP(e,s,r,i))if(a)this.options.duration=0;else{u&&u(bh(e,this.options,t)),c&&c(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rt=(n,e,t)=>n+(e-n)*t;function Hf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function AP({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,i=0,a=0;if(!e)r=i=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;r=Hf(u,c,n+1/3),i=Hf(u,c,n),a=Hf(u,c,n-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function Xu(n,e){return t=>t>0?e:n}const $f=(n,e,t)=>{const s=n*n,r=t*(e*e-s)+s;return r<0?0:Math.sqrt(r)},MP=[Lp,bi,xo],PP=n=>MP.find(e=>e.test(n));function Ix(n){const e=PP(n);if(!e)return!1;let t=e.parse(n);return e===xo&&(t=AP(t)),t}const Nx=(n,e)=>{const t=Ix(n),s=Ix(e);if(!t||!s)return Xu(n,e);const r={...t};return i=>(r.red=$f(t.red,s.red,i),r.green=$f(t.green,s.green,i),r.blue=$f(t.blue,s.blue,i),r.alpha=rt(t.alpha,s.alpha,i),bi.transform(r))},EP=(n,e)=>t=>e(n(t)),Fl=(...n)=>n.reduce(EP),Up=new Set(["none","hidden"]);function RP(n,e){return Up.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function IP(n,e){return t=>rt(n,e,t)}function lg(n){return typeof n=="number"?IP:typeof n=="string"?Wm(n)?Xu:Zt.test(n)?Nx:OP:Array.isArray(n)?Sb:typeof n=="object"?Zt.test(n)?Nx:NP:Xu}function Sb(n,e){const t=[...n],s=t.length,r=n.map((i,a)=>lg(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)t[a]=r[a](i);return t}}function NP(n,e){const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=lg(n[r])(n[r],e[r]));return r=>{for(const i in s)t[i]=s[i](r);return t}}function DP(n,e){var t;const s=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],c=n.indexes[a][r[a]],u=(t=n.values[c])!==null&&t!==void 0?t:0;s[i]=u,r[a]++}return s}const OP=(n,e)=>{const t=zr.createTransformer(e),s=vl(n),r=vl(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Up.has(n)&&!r.values.length||Up.has(e)&&!s.values.length?RP(n,e):Fl(Sb(DP(s,r),r.values),t):Xu(n,e)};function Tb(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?rt(n,e,t):lg(n)(n,e)}const FP=5;function Cb(n,e,t){const s=Math.max(e-FP,0);return Q1(t-n(s),e-s)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qf=.001;function VP({duration:n=dt.duration,bounce:e=dt.bounce,velocity:t=dt.velocity,mass:s=dt.mass}){let r,i,a=1-e;a=nr(dt.minDamping,dt.maxDamping,a),n=nr(dt.minDuration,dt.maxDuration,Rs(n)),a<1?(r=h=>{const f=h*a,p=f*n,g=f-t,y=Wp(h,a),x=Math.exp(-p);return qf-g/y*x},i=h=>{const p=h*a*n,g=p*t+t,y=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-p),w=Wp(Math.pow(h,2),a);return(-r(h)+qf>0?-1:1)*((g-y)*x)/w}):(r=h=>{const f=Math.exp(-h*n),p=(h-t)*n+1;return-qf+f*p},i=h=>{const f=Math.exp(-h*n),p=(t-h)*(n*n);return f*p});const c=5/n,u=BP(r,i,c);if(n=Es(n),isNaN(u))return{stiffness:dt.stiffness,damping:dt.damping,duration:n};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:a*2*Math.sqrt(s*h),duration:n}}}const LP=12;function BP(n,e,t){let s=t;for(let r=1;r<LP;r++)s=s-n(s)/e(s);return s}function Wp(n,e){return n*Math.sqrt(1-e*e)}const zP=["duration","bounce"],jP=["stiffness","damping","mass"];function Dx(n,e){return e.some(t=>n[t]!==void 0)}function UP(n){let e={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...n};if(!Dx(n,jP)&&Dx(n,zP))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),r=s*s,i=2*nr(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:dt.mass,stiffness:r,damping:i}}else{const t=VP(n);e={...e,...t,mass:dt.mass},e.isResolvedFromDuration=!0}return e}function cg(n=dt.visualDuration,e=dt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:r}=t;const i=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:g,isResolvedFromDuration:y}=UP({...t,velocity:-Rs(t.velocity||0)}),x=g||0,w=h/(2*Math.sqrt(u*f)),v=a-i,S=Rs(Math.sqrt(u/f)),T=Math.abs(v)<5;s||(s=T?dt.restSpeed.granular:dt.restSpeed.default),r||(r=T?dt.restDelta.granular:dt.restDelta.default);let C;if(w<1){const k=Wp(S,w);C=M=>{const E=Math.exp(-w*S*M);return a-E*((x+w*S*v)/k*Math.sin(k*M)+v*Math.cos(k*M))}}else if(w===1)C=k=>a-Math.exp(-S*k)*(v+(x+S*v)*k);else{const k=S*Math.sqrt(w*w-1);C=M=>{const E=Math.exp(-w*S*M),R=Math.min(k*M,300);return a-E*((x+w*S*v)*Math.sinh(R)+k*v*Math.cosh(R))/k}}const P={calculatedDuration:y&&p||null,next:k=>{const M=C(k);if(y)c.done=k>=p;else{let E=0;w<1&&(E=k===0?Es(x):Cb(C,k,M));const R=Math.abs(E)<=s,O=Math.abs(a-M)<=r;c.done=R&&O}return c.value=c.done?a:M,c},toString:()=>{const k=Math.min(Zm(P),qu),M=G1(E=>P.next(k*E).value,k,30);return k+"ms "+M}};return P}function Ox({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:f}){const p=n[0],g={done:!1,value:p},y=R=>c!==void 0&&R<c||u!==void 0&&R>u,x=R=>c===void 0?u:u===void 0||Math.abs(c-R)<Math.abs(u-R)?c:u;let w=t*e;const v=p+w,S=a===void 0?v:a(v);S!==v&&(w=S-p);const T=R=>-w*Math.exp(-R/s),C=R=>S+T(R),P=R=>{const O=T(R),D=C(R);g.done=Math.abs(O)<=h,g.value=g.done?S:D};let k,M;const E=R=>{y(g.value)&&(k=R,M=cg({keyframes:[g.value,x(g.value)],velocity:Cb(C,R,g.value),damping:r,stiffness:i,restDelta:h,restSpeed:f}))};return E(0),{calculatedDuration:null,next:R=>{let O=!1;return!M&&k===void 0&&(O=!0,P(R),E(R)),k!==void 0&&R>=k?M.next(R-k):(!O&&P(R),g)}}}const WP=Ol(.42,0,1,1),GP=Ol(0,0,.58,1),kb=Ol(.42,0,.58,1),Ab=n=>Array.isArray(n)&&typeof n[0]!="number",HP={linear:Nn,easeIn:WP,easeInOut:kb,easeOut:GP,circIn:sg,circInOut:ab,circOut:ob,backIn:ng,backInOut:rb,backOut:sb,anticipate:ib},Fx=n=>{if(Qm(n)){S1(n.length===4);const[e,t,s,r]=n;return Ol(e,t,s,r)}else if(typeof n=="string")return HP[n];return n};function $P(n,e,t){const s=[],r=t||Tb,i=n.length-1;for(let a=0;a<i;a++){let c=r(n[a],n[a+1]);if(e){const u=Array.isArray(e)?e[a]||Nn:e;c=Fl(u,c)}s.push(c)}return s}function qP(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const i=n.length;if(S1(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=$P(e,s,r),u=c.length,h=f=>{if(a&&f<n[0])return e[0];let p=0;if(u>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const g=Ri(n[p],n[p+1],f);return c[p](g)};return t?f=>h(nr(n[0],n[i-1],f)):h}function Mb(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=Ri(0,e,s);n.push(rt(t,1,r))}}function Pb(n){const e=[0];return Mb(e,n.length-1),e}function YP(n,e){return n.map(t=>t*e)}function XP(n,e){return n.map(()=>e||kb).splice(0,n.length-1)}function Ku({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=Ab(s)?s.map(Fx):Fx(s),i={done:!1,value:e[0]},a=YP(t&&t.length===e.length?t:Pb(e),n),c=qP(a,e,{ease:Array.isArray(r)?r:XP(e,r)});return{calculatedDuration:n,next:u=>(i.value=c(u),i.done=u>=n,i)}}const KP=n=>{const e=({timestamp:t})=>n(t);return{start:()=>et.update(e,!0),stop:()=>Br(e),now:()=>Wt.isProcessing?Wt.timestamp:Ns.now()}},ZP={decay:Ox,inertia:Ox,tween:Ku,keyframes:Ku,spring:cg},QP=n=>n/100;class ug extends bb{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:t,motionValue:s,element:r,keyframes:i}=this.options,a=(r==null?void 0:r.KeyframeResolver)||ag,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new a(i,c,t,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=this.options,c=vh(t)?t:ZP[t]||Ku;let u,h;c!==Ku&&typeof e[0]!="number"&&(u=Fl(QP,Tb(e[0],e[1])),e=[0,100]);const f=c({...this.options,keyframes:e});i==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Zm(f));const{calculatedDuration:p}=f,g=p+r,y=g*(s+1)-r;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:g,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:s}=this;if(!s){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:f,resolvedDuration:p}=s;if(this.startTime===null)return i.next(0);const{delay:g,repeat:y,repeatType:x,repeatDelay:w,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-g*(this.speed>=0?1:-1),T=this.speed>=0?S<0:S>f;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let C=this.currentTime,P=i;if(y){const R=Math.min(this.currentTime,f)/p;let O=Math.floor(R),D=R%1;!D&&R>=1&&(D=1),D===1&&O--,O=Math.min(O,y+1),!!(O%2)&&(x==="reverse"?(D=1-D,w&&(D-=w/p)):x==="mirror"&&(P=a)),C=nr(0,1,D)*p}const k=T?{done:!1,value:u[0]}:P.next(C);c&&(k.value=c(k.value));let{done:M}=k;!T&&h!==null&&(M=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return E&&r!==void 0&&(k.value=bh(u,this.options,r)),v&&v(k.value),E&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Rs(e.calculatedDuration):0}get time(){return Rs(this.currentTime)}set time(e){e=Es(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Rs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=KP,onPlay:t,startTime:s}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const JP=new Set(["opacity","clipPath","filter","transform"]);function eE(n,e,t,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:c="easeInOut",times:u}={}){const h={[e]:t};u&&(h.offset=u);const f=$1(c,r);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const tE=Fm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Zu=10,nE=2e4;function sE(n){return vh(n.type)||n.type==="spring"||!H1(n.ease)}function rE(n,e){const t=new ug({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const r=[];let i=0;for(;!s.done&&i<nE;)s=t.sample(i),r.push(s.value),i+=Zu;return{times:void 0,keyframes:r,duration:i-Zu,ease:"linear"}}const Eb={anticipate:ib,backInOut:rb,circInOut:ab};function iE(n){return n in Eb}class Vx extends bb{constructor(e){super(e);const{name:t,motionValue:s,element:r,keyframes:i}=this.options;this.resolver=new wb(i,(a,c)=>this.onKeyframesResolved(a,c),t,s,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:s=300,times:r,ease:i,type:a,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof i=="string"&&Yu()&&iE(i)&&(i=Eb[i]),sE(this.options)){const{onComplete:p,onUpdate:g,motionValue:y,element:x,...w}=this.options,v=rE(e,w);e=v.keyframes,e.length===1&&(e[1]=e[0]),s=v.duration,r=v.times,i=v.ease,a="keyframes"}const f=eE(c.owner.current,u,e,{...this.options,duration:s,times:r,ease:i});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(wx(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;c.set(bh(e,this.options,t)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:s,times:r,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Rs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Rs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.currentTime=Es(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Nn;const{animation:s}=t;wx(s,e)}return Nn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:s,duration:r,type:i,ease:a,times:c}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:p,element:g,...y}=this.options,x=new ug({...y,keyframes:s,duration:r,type:i,ease:a,times:c,isGenerator:!0}),w=Es(this.time);h.setWithVelocity(x.sample(w-Zu).value,x.sample(w).value,Zu)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:i,damping:a,type:c}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=t.owner.getProps();return tE()&&s&&JP.has(s)&&!u&&!h&&!r&&i!=="mirror"&&a!==0&&c!=="inertia"}}const oE={type:"spring",stiffness:500,damping:25,restSpeed:10},aE=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),lE={type:"keyframes",duration:.8},cE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uE=(n,{keyframes:e})=>e.length>2?lE:Fi.has(n)?n.startsWith("scale")?aE(e[1]):oE:cE;function hE({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const hg=(n,e,t,s={},r,i)=>a=>{const c=Km(s,n)||{},u=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-Es(u);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:i?void 0:r};hE(c)||(f={...f,...uE(n,f)}),f.duration&&(f.duration=Es(f.duration)),f.repeatDelay&&(f.repeatDelay=Es(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const g=bh(f.keyframes,c);if(g!==void 0)return et.update(()=>{f.onUpdate(g),f.onComplete()}),new W1([])}return!i&&Vx.supports(f)?new Vx(f):new ug(f)};function dE({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function dg(n,e,{delay:t=0,transitionOverride:s,type:r}={}){var i;let{transition:a=n.getDefaultTransition(),transitionEnd:c,...u}=e;s&&(a=s);const h=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const p in u){const g=n.getValue(p,(i=n.latestValues[p])!==null&&i!==void 0?i:null),y=u[p];if(y===void 0||f&&dE(f,p))continue;const x={delay:t,...Km(a||{},p)};let w=!1;if(window.MotionHandoffAnimation){const S=J1(n);if(S){const T=window.MotionHandoffAnimation(S,p,et);T!==null&&(x.startTime=T,w=!0)}}Vp(n,p),g.start(hg(p,g,y,n.shouldReduceMotion&&Z1.has(p)?{type:!1}:x,n,w));const v=g.animation;v&&h.push(v)}return c&&Promise.all(h).then(()=>{et.update(()=>{c&&qM(n,c)})}),h}function Gp(n,e,t={}){var s;const r=xh(n,e,t.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(dg(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=i;return fE(n,e,f+h,p,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[h,f]=u==="beforeChildren"?[a,c]:[c,a];return h().then(()=>f())}else return Promise.all([a(),c(t.delay)])}function fE(n,e,t=0,s=0,r=1,i){const a=[],c=(n.variantChildren.size-1)*s,u=r===1?(h=0)=>h*s:(h=0)=>c-h*s;return Array.from(n.variantChildren).sort(pE).forEach((h,f)=>{h.notify("AnimationStart",e),a.push(Gp(h,e,{...i,delay:t+u(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function pE(n,e){return n.sortNodePosition(e)}function mE(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>Gp(n,i,t));s=Promise.all(r)}else if(typeof e=="string")s=Gp(n,e,t);else{const r=typeof e=="function"?xh(n,e,t.custom):e;s=Promise.all(dg(n,r,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const gE=Lm.length;function Rb(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Rb(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<gE;t++){const s=Lm[t],r=n.props[s];(yl(r)||r===!1)&&(e[s]=r)}return e}const yE=[...Vm].reverse(),_E=Vm.length;function xE(n){return e=>Promise.all(e.map(({animation:t,options:s})=>mE(n,t,s)))}function vE(n){let e=xE(n),t=Lx(),s=!0;const r=u=>(h,f)=>{var p;const g=xh(n,f,u==="exit"?(p=n.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:y,transitionEnd:x,...w}=g;h={...h,...w,...x}}return h};function i(u){e=u(n)}function a(u){const{props:h}=n,f=Rb(n.parent)||{},p=[],g=new Set;let y={},x=1/0;for(let v=0;v<_E;v++){const S=yE[v],T=t[S],C=h[S]!==void 0?h[S]:f[S],P=yl(C),k=S===u?T.isActive:null;k===!1&&(x=v);let M=C===f[S]&&C!==h[S]&&P;if(M&&s&&n.manuallyAnimateOnMount&&(M=!1),T.protectedKeys={...y},!T.isActive&&k===null||!C&&!T.prevProp||yh(C)||typeof C=="boolean")continue;const E=wE(T.prevProp,C);let R=E||S===u&&T.isActive&&!M&&P||v>x&&P,O=!1;const D=Array.isArray(C)?C:[C];let F=D.reduce(r(S),{});k===!1&&(F={});const{prevResolvedValues:L={}}=T,X={...L,...F},Z=j=>{R=!0,g.has(j)&&(O=!0,g.delete(j)),T.needsAnimating[j]=!0;const H=n.getValue(j);H&&(H.liveStyle=!1)};for(const j in X){const H=F[j],U=L[j];if(y.hasOwnProperty(j))continue;let Y=!1;Op(H)&&Op(U)?Y=!U1(H,U):Y=H!==U,Y?H!=null?Z(j):g.add(j):H!==void 0&&g.has(j)?Z(j):T.protectedKeys[j]=!0}T.prevProp=C,T.prevResolvedValues=F,T.isActive&&(y={...y,...F}),s&&n.blockInitialAnimation&&(R=!1),R&&(!(M&&E)||O)&&p.push(...D.map(j=>({animation:j,options:{type:S}})))}if(g.size){const v={};g.forEach(S=>{const T=n.getBaseTarget(S),C=n.getValue(S);C&&(C.liveStyle=!0),v[S]=T??null}),p.push({animation:v})}let w=!!p.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(p):Promise.resolve()}function c(u,h){var f;if(t[u].isActive===h)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(u,h)}),t[u].isActive=h;const p=a(u);for(const g in t)t[g].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:i,getState:()=>t,reset:()=>{t=Lx(),s=!0}}}function wE(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!U1(e,n):!1}function ci(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lx(){return{animate:ci(!0),whileInView:ci(),whileHover:ci(),whileTap:ci(),whileDrag:ci(),whileFocus:ci(),exit:ci()}}class $r{constructor(e){this.isMounted=!1,this.node=e}update(){}}class bE extends $r{constructor(e){super(e),e.animationState||(e.animationState=vE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let SE=0;class TE extends $r{constructor(){super(...arguments),this.id=SE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const CE={animation:{Feature:bE},exit:{Feature:TE}};function wl(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function Vl(n){return{point:{x:n.pageX,y:n.pageY}}}const kE=n=>e=>Jm(e)&&n(e,Vl(e));function ll(n,e,t,s){return wl(n,e,kE(t),s)}const Bx=(n,e)=>Math.abs(n-e);function AE(n,e){const t=Bx(n.x,e.x),s=Bx(n.y,e.y);return Math.sqrt(t**2+s**2)}class Ib{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Xf(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=AE(p.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:x}=p,{timestamp:w}=Wt;this.history.push({...x,timestamp:w});const{onStart:v,onMove:S}=this.handlers;g||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Yf(g,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Xf(p.type==="pointercancel"?this.lastMoveEventInfo:Yf(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,v),x&&x(p,v)},!Jm(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const a=Vl(e),c=Yf(a,this.transformPagePoint),{point:u}=c,{timestamp:h}=Wt;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,Xf(c,this.history)),this.removeListeners=Fl(ll(this.contextWindow,"pointermove",this.handlePointerMove),ll(this.contextWindow,"pointerup",this.handlePointerUp),ll(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Br(this.updatePoint)}}function Yf(n,e){return e?{point:e(n.point)}:n}function zx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Xf({point:n},e){return{point:n,delta:zx(n,Nb(e)),offset:zx(n,ME(e)),velocity:PE(e,.1)}}function ME(n){return n[0]}function Nb(n){return n[n.length-1]}function PE(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=Nb(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Es(e)));)t--;if(!s)return{x:0,y:0};const i=Rs(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const Db=1e-4,EE=1-Db,RE=1+Db,Ob=.01,IE=0-Ob,NE=0+Ob;function Fn(n){return n.max-n.min}function DE(n,e,t){return Math.abs(n-e)<=t}function jx(n,e,t,s=.5){n.origin=s,n.originPoint=rt(e.min,e.max,n.origin),n.scale=Fn(t)/Fn(e),n.translate=rt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=EE&&n.scale<=RE||isNaN(n.scale))&&(n.scale=1),(n.translate>=IE&&n.translate<=NE||isNaN(n.translate))&&(n.translate=0)}function cl(n,e,t,s){jx(n.x,e.x,t.x,s?s.originX:void 0),jx(n.y,e.y,t.y,s?s.originY:void 0)}function Ux(n,e,t){n.min=t.min+e.min,n.max=n.min+Fn(e)}function OE(n,e,t){Ux(n.x,e.x,t.x),Ux(n.y,e.y,t.y)}function Wx(n,e,t){n.min=e.min-t.min,n.max=n.min+Fn(e)}function ul(n,e,t){Wx(n.x,e.x,t.x),Wx(n.y,e.y,t.y)}function FE(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?rt(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?rt(t,n,s.max):Math.min(n,t)),n}function Gx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function VE(n,{top:e,left:t,bottom:s,right:r}){return{x:Gx(n.x,t,r),y:Gx(n.y,e,s)}}function Hx(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function LE(n,e){return{x:Hx(n.x,e.x),y:Hx(n.y,e.y)}}function BE(n,e){let t=.5;const s=Fn(n),r=Fn(e);return r>s?t=Ri(e.min,e.max-s,n.min):s>r&&(t=Ri(n.min,n.max-r,e.min)),nr(0,1,t)}function zE(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Hp=.35;function jE(n=Hp){return n===!1?n=0:n===!0&&(n=Hp),{x:$x(n,"left","right"),y:$x(n,"top","bottom")}}function $x(n,e,t){return{min:qx(n,e),max:qx(n,t)}}function qx(n,e){return typeof n=="number"?n:n[e]||0}const Yx=()=>({translate:0,scale:1,origin:0,originPoint:0}),vo=()=>({x:Yx(),y:Yx()}),Xx=()=>({min:0,max:0}),ht=()=>({x:Xx(),y:Xx()});function $n(n){return[n("x"),n("y")]}function Fb({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function UE({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function WE(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function Kf(n){return n===void 0||n===1}function $p({scale:n,scaleX:e,scaleY:t}){return!Kf(n)||!Kf(e)||!Kf(t)}function fi(n){return $p(n)||Vb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Vb(n){return Kx(n.x)||Kx(n.y)}function Kx(n){return n&&n!=="0%"}function Qu(n,e,t){const s=n-t,r=e*s;return t+r}function Zx(n,e,t,s,r){return r!==void 0&&(n=Qu(n,r,s)),Qu(n,t,s)+e}function qp(n,e=0,t=1,s,r){n.min=Zx(n.min,e,t,s,r),n.max=Zx(n.max,e,t,s,r)}function Lb(n,{x:e,y:t}){qp(n.x,e.translate,e.scale,e.originPoint),qp(n.y,t.translate,t.scale,t.originPoint)}const Qx=.999999999999,Jx=1.0000000000001;function GE(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,a;for(let c=0;c<r;c++){i=t[c],a=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&bo(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Lb(n,a)),s&&fi(i.latestValues)&&bo(n,i.latestValues))}e.x<Jx&&e.x>Qx&&(e.x=1),e.y<Jx&&e.y>Qx&&(e.y=1)}function wo(n,e){n.min=n.min+e,n.max=n.max+e}function ev(n,e,t,s,r=.5){const i=rt(n.min,n.max,r);qp(n,e,t,i,s)}function bo(n,e){ev(n.x,e.x,e.scaleX,e.scale,e.originX),ev(n.y,e.y,e.scaleY,e.scale,e.originY)}function Bb(n,e){return Fb(WE(n.getBoundingClientRect(),e))}function HE(n,e,t){const s=Bb(n,t),{scroll:r}=e;return r&&(wo(s.x,r.offset.x),wo(s.y,r.offset.y)),s}const zb=({current:n})=>n?n.ownerDocument.defaultView:null,$E=new WeakMap;class qE{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Vl(f).point)},i=(f,p)=>{const{drag:g,dragPropagation:y,onDragStart:x}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UM(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(v=>{let S=this.getAxisMotionValue(v).get()||0;if(Is.test(S)){const{projection:T}=this.visualElement;if(T&&T.layout){const C=T.layout.layoutBox[v];C&&(S=Fn(C)*(parseFloat(S)/100))}}this.originPoint[v]=S}),x&&et.postRender(()=>x(f,p)),Vp(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(f,p)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:x,onDrag:w}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=p;if(y&&this.currentDirection===null){this.currentDirection=YE(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),w&&w(f,p)},c=(f,p)=>this.stop(f,p),u=()=>$n(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Ib(e,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:zb(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&et.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!gu(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=FE(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&_o(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=VE(r.layoutBox,t):this.constraints=!1,this.elastic=jE(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=zE(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!_o(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=HE(s,r.root,this.visualElement.getTransformPagePoint());let a=LE(r.layout.layoutBox,i);if(t){const c=t(UE(a));this.hasMutatedConstraints=!!c,c&&(a=Fb(c))}return a}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=$n(f=>{if(!gu(f,t,this.currentDirection))return;let p=u&&u[f]||{};a&&(p={min:0,max:0});const g=r?200:1e6,y=r?40:1e7,x={type:"inertia",velocity:s?e[f]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,x)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Vp(this.visualElement,e),s.start(hg(e,s,0,t,this.visualElement,!1))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){$n(t=>{const{drag:s}=this.getProps();if(!gu(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:c}=r.layout.layoutBox[t];i.set(e[t]-rt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!_o(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$n(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();r[a]=BE({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),$n(a=>{if(!gu(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(rt(u,h,r[a]))})}addListeners(){if(!this.visualElement.current)return;$E.set(this.visualElement,this);const e=this.visualElement.current,t=ll(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();_o(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),et.read(s);const a=wl(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&($n(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())}));return()=>{a(),t(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Hp,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:c}}}function gu(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function YE(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class XE extends $r{constructor(e){super(e),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new qE(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const tv=n=>(e,t)=>{n&&et.postRender(()=>n(e,t))};class KE extends $r{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(e){this.session=new Ib(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:tv(e),onStart:tv(t),onMove:s,onEnd:(i,a)=>{delete this.session,r&&et.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nv(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ha={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ve.test(n))n=parseFloat(n);else return n;const t=nv(n,e.target.x),s=nv(n,e.target.y);return`${t}% ${s}%`}},ZE={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=zr.parse(n);if(r.length>5)return s;const i=zr.createTransformer(n),a=typeof r[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;r[0+a]/=c,r[1+a]/=u;const h=rt(c,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=h),typeof r[3+a]=="number"&&(r[3+a]/=h),i(r)}};class QE extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;bM(JE),i&&(t.group&&t.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||et.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jb(n){const[e,t]=w1(),s=J.useContext(Im);return z.jsx(QE,{...n,layoutGroup:s,switchLayoutGroup:J.useContext(P1),isPresent:e,safeToRemove:t})}const JE={borderRadius:{...Ha,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ha,borderTopRightRadius:Ha,borderBottomLeftRadius:Ha,borderBottomRightRadius:Ha,boxShadow:ZE};function Ub(n,e,t){const s=Vt(n)?n:xl(n);return s.start(hg("",s,e,t)),s.animation}function Wb(n){return n instanceof SVGElement&&n.tagName!=="svg"}const eR=(n,e)=>n.depth-e.depth;class tR{constructor(){this.children=[],this.isDirty=!1}add(e){eg(this.children,e),this.isDirty=!0}remove(e){wh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eR),this.isDirty=!1,this.children.forEach(e)}}function nR(n,e){const t=Ns.now(),s=({timestamp:r})=>{const i=r-t;i>=e&&(Br(s),n(i-e))};return et.read(s,!0),()=>Br(s)}const Gb=["TopLeft","TopRight","BottomLeft","BottomRight"],sR=Gb.length,sv=n=>typeof n=="string"?parseFloat(n):n,rv=n=>typeof n=="number"||ve.test(n);function rR(n,e,t,s,r,i){r?(n.opacity=rt(0,t.opacity!==void 0?t.opacity:1,iR(s)),n.opacityExit=rt(e.opacity!==void 0?e.opacity:1,0,oR(s))):i&&(n.opacity=rt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let a=0;a<sR;a++){const c=`border${Gb[a]}Radius`;let u=iv(e,c),h=iv(t,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||rv(u)===rv(h)?(n[c]=Math.max(rt(sv(u),sv(h),s),0),(Is.test(h)||Is.test(u))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=rt(e.rotate||0,t.rotate||0,s))}function iv(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iR=Hb(0,.5,ob),oR=Hb(.5,.95,Nn);function Hb(n,e,t){return s=>s<n?0:s>e?1:t(Ri(n,e,s))}function ov(n,e){n.min=e.min,n.max=e.max}function Hn(n,e){ov(n.x,e.x),ov(n.y,e.y)}function av(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function lv(n,e,t,s,r){return n-=e,n=Qu(n,1/t,s),r!==void 0&&(n=Qu(n,1/r,s)),n}function aR(n,e=0,t=1,s=.5,r,i=n,a=n){if(Is.test(e)&&(e=parseFloat(e),e=rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=rt(i.min,i.max,s);n===i&&(c-=e),n.min=lv(n.min,e,t,c,r),n.max=lv(n.max,e,t,c,r)}function cv(n,e,[t,s,r],i,a){aR(n,e[t],e[s],e[r],e.scale,i,a)}const lR=["x","scaleX","originX"],cR=["y","scaleY","originY"];function uv(n,e,t,s){cv(n.x,e,lR,t?t.x:void 0,s?s.x:void 0),cv(n.y,e,cR,t?t.y:void 0,s?s.y:void 0)}function hv(n){return n.translate===0&&n.scale===1}function $b(n){return hv(n.x)&&hv(n.y)}function dv(n,e){return n.min===e.min&&n.max===e.max}function uR(n,e){return dv(n.x,e.x)&&dv(n.y,e.y)}function fv(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function qb(n,e){return fv(n.x,e.x)&&fv(n.y,e.y)}function pv(n){return Fn(n.x)/Fn(n.y)}function mv(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class hR{constructor(){this.members=[]}add(e){eg(this.members,e),e.scheduleRender()}remove(e){if(wh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dR(n,e,t){let s="";const r=n.x.translate/e.x,i=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:g,skewX:y,skewY:x}=t;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),p&&(s+=`rotateX(${p}deg) `),g&&(s+=`rotateY(${g}deg) `),y&&(s+=`skewX(${y}deg) `),x&&(s+=`skewY(${x}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const pi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sl=typeof window<"u"&&window.MotionDebug!==void 0,Zf=["","X","Y","Z"],fR={visibility:"hidden"},gv=1e3;let pR=0;function Qf(n,e,t,s){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),s&&(s[n]=0))}function Yb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=J1(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:i}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",et,!(r||i))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&Yb(s)}function Xb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},c=e==null?void 0:e()){this.id=pR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sl&&(pi.totalNodes=pi.resolvedTargetDeltas=pi.recalculatedProjection=0),this.nodes.forEach(yR),this.nodes.forEach(bR),this.nodes.forEach(SR),this.nodes.forEach(_R),sl&&window.MotionDebug.record(pi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new tR)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new tg),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Wb(a),this.instance=a;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),n){let p;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=nR(g,250),Bu.hasAnimatedSinceResize&&(Bu.hasAnimatedSinceResize=!1,this.nodes.forEach(_v))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||MR,{onLayoutAnimationStart:v,onLayoutAnimationComplete:S}=f.getProps(),T=!this.targetLayout||!qb(this.targetLayout,x)||y,C=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const P={...Km(w,"layout"),onPlay:v,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else g||_v(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Br(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TR),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yv);return}this.isUpdating||this.nodes.forEach(vR),this.isUpdating=!1,this.nodes.forEach(wR),this.nodes.forEach(mR),this.nodes.forEach(gR),this.clearAllSnapshots();const c=Ns.now();Wt.delta=nr(0,1e3/60,c-Wt.timestamp),Wt.timestamp=c,Wt.isProcessing=!0,Uf.update.process(Wt),Uf.preRender.process(Wt),Uf.render.process(Wt),Wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xR),this.sharedNodes.forEach(CR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!$b(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(c||fi(this.latestValues)||f)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),PR(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:c}=this.options;if(!c)return ht();const u=c.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(ER))){const{scroll:f}=this.root;f&&(wo(u.x,f.offset.x),wo(u.y,f.offset.y))}return u}removeElementScroll(a){var c;const u=ht();if(Hn(u,a),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Hn(u,a),wo(u.x,p.offset.x),wo(u.y,p.offset.y))}return u}applyTransform(a,c=!1){const u=ht();Hn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&bo(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),fi(f.latestValues)&&bo(u,f.latestValues)}return fi(this.latestValues)&&bo(u,this.latestValues),u}removeTransform(a){const c=ht();Hn(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!fi(h.latestValues))continue;$p(h.latestValues)&&h.updateSnapshot();const f=ht(),p=h.measurePageBox();Hn(f,p),uv(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return fi(this.latestValues)&&uv(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Wt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),ul(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hn(this.target,this.layout.layoutBox),Lb(this.target,this.targetDelta)):Hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),ul(this.relativeTargetOrigin,this.target,y.target),Hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sl&&pi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$p(this.parent.latestValues)||Vb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Wt.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Hn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;GE(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=ht());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(av(this.prevProjectionDelta.x,this.projectionDelta.x),av(this.prevProjectionDelta.y,this.projectionDelta.y)),cl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!mv(this.projectionDelta.x,this.prevProjectionDelta.x)||!mv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),sl&&pi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vo(),this.projectionDelta=vo(),this.projectionDeltaWithTransform=vo()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=vo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=ht(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,w=y!==x,v=this.getStack(),S=!v||v.members.length<=1,T=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(AR));this.animationProgress=0;let C;this.mixTargetDelta=P=>{const k=P/1e3;xv(p.x,a.x,k),xv(p.y,a.y,k),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ul(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kR(this.relativeTarget,this.relativeTargetOrigin,g,k),C&&uR(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=ht()),Hn(C,this.relativeTarget)),w&&(this.animationValues=f,rR(f,h,this.latestValues,k,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Br(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Bu.hasAnimatedSinceResize=!0,this.currentAnimation=Ub(0,gv,{...a,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&Kb(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||ht();const p=Fn(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+p;const g=Fn(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+g}Hn(c,u),bo(c,f),cl(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hR),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&Qf("z",a,h,this.animationValues);for(let f=0;f<Zf.length;f++)Qf(`rotate${Zf[f]}`,a,h,this.animationValues),Qf(`skew${Zf[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}getProjectionStyles(a){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fR;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Vu(a==null?void 0:a.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Vu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!fi(this.latestValues)&&(w.transform=f?f({},""):"none",this.hasProjected=!1),w}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=dR(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:y,y:x}=this.projectionDelta;h.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,p.animationValues?h.opacity=p===this?(u=(c=g.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const w in $u){if(g[w]===void 0)continue;const{correct:v,applyTo:S}=$u[w],T=h.transform==="none"?g[w]:v(g[w],p);if(S){const C=S.length;for(let P=0;P<C;P++)h[S[P]]=T}else h[w]=T}return this.options.layoutId&&(h.pointerEvents=p===this?Vu(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(yv),this.root.sharedNodes.clear()}}}function mR(n){n.updateLayout()}function gR(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:i}=n.options,a=t.source!==n.layout.source;i==="size"?$n(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],y=Fn(g);g.min=s[p].min,g.max=g.min+y}):Kb(i,t.layoutBox,s)&&$n(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],y=Fn(s[p]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+y)});const c=vo();cl(c,s,t.layoutBox);const u=vo();a?cl(u,n.applyTransform(r,!0),t.measuredBox):cl(u,s,t.layoutBox);const h=!$b(c);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const x=ht();ul(x,t.layoutBox,g.layoutBox);const w=ht();ul(w,s,y.layoutBox),qb(x,w)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function yR(n){sl&&pi.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _R(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function xR(n){n.clearSnapshot()}function yv(n){n.clearMeasurements()}function vR(n){n.isLayoutDirty=!1}function wR(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function _v(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function bR(n){n.resolveTargetDelta()}function SR(n){n.calcProjection()}function TR(n){n.resetSkewAndRotation()}function CR(n){n.removeLeadSnapshot()}function xv(n,e,t){n.translate=rt(e.translate,0,t),n.scale=rt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function vv(n,e,t,s){n.min=rt(e.min,t.min,s),n.max=rt(e.max,t.max,s)}function kR(n,e,t,s){vv(n.x,e.x,t.x,s),vv(n.y,e.y,t.y,s)}function AR(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const MR={duration:.45,ease:[.4,0,.1,1]},wv=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),bv=wv("applewebkit/")&&!wv("chrome/")?Math.round:Nn;function Sv(n){n.min=bv(n.min),n.max=bv(n.max)}function PR(n){Sv(n.x),Sv(n.y)}function Kb(n,e,t){return n==="position"||n==="preserve-aspect"&&!DE(pv(e),pv(t),.2)}function ER(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const RR=Xb({attachResizeListener:(n,e)=>wl(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jf={current:void 0},Zb=Xb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Jf.current){const n=new RR({});n.mount(window),n.setOptions({layoutScroll:!0}),Jf.current=n}return Jf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),IR={pan:{Feature:KE},drag:{Feature:XE,ProjectionNode:Zb,MeasureLayout:jb}};function Tv(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,i=s[r];i&&et.postRender(()=>i(e,Vl(e)))}class NR extends $r{mount(){const{current:e}=this.node;e&&(this.unmount=VM(e,t=>(Tv(this.node,t,"Start"),s=>Tv(this.node,s,"End"))))}unmount(){}}class DR extends $r{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fl(wl(this.node.current,"focus",()=>this.onFocus()),wl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Cv(n,e,t){const{props:s}=n;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),i=s[r];i&&et.postRender(()=>i(e,Vl(e)))}class OR extends $r{mount(){const{current:e}=this.node;e&&(this.unmount=jM(e,t=>(Cv(this.node,t,"Start"),(s,{success:r})=>Cv(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yp=new WeakMap,ep=new WeakMap,FR=n=>{const e=Yp.get(n.target);e&&e(n)},VR=n=>{n.forEach(FR)};function LR({root:n,...e}){const t=n||document;ep.has(t)||ep.set(t,{});const s=ep.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(VR,{root:n,...e})),s[r]}function BR(n,e,t){const s=LR(e);return Yp.set(n,t),s.observe(n),()=>{Yp.delete(n),s.unobserve(n)}}const zR={some:0,all:1};class jR extends $r{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:zR[r]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),g=h?f:p;g&&g(u)};return BR(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(UR(e,t))&&this.startObserver()}unmount(){}}function UR({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const WR={inView:{Feature:jR},tap:{Feature:OR},focus:{Feature:DR},hover:{Feature:NR}},GR={layout:{ProjectionNode:Zb,MeasureLayout:jb}},Xp={current:null},Qb={current:!1};function HR(){if(Qb.current=!0,!!Om)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xp.current=n.matches;n.addListener(e),e()}else Xp.current=!1}const $R=[...vb,Zt,zr],qR=n=>$R.find(xb(n)),Do=new WeakMap;function YR(n,e,t){for(const s in e){const r=e[s],i=t[s];if(Vt(r))n.addValue(s,r);else if(Vt(i))n.addValue(s,xl(r,{owner:n}));else if(i!==r)if(n.hasValue(s)){const a=n.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(s);n.addValue(s,xl(a!==void 0?a:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const kv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jb{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ag,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Ns.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,et.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:f}=a;this.onUpdate=f,this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=_h(t),this.isVariantNode=A1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in g){const x=g[y];u[y]!==void 0&&Vt(x)&&x.set(u[y],!1)}}mount(e){this.current=e,Do.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),Qb.current||HR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Do.delete(this.current),this.projection&&this.projection.unmount(),Br(this.notifyUpdate),Br(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Fi.has(e),r=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&et.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Io){const t=Io[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<kv.length;s++){const r=kv[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=YR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=xl(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yb(r)||lb(r))?r=parseFloat(r):!qR(r)&&zr.test(t)&&(r=pb(e,t)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const a=Um(this.props,s,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(r=a[e])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Vt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new tg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class eS extends Jb{constructor(){super(...arguments),this.KeyframeResolver=wb}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function XR(n){return window.getComputedStyle(n)}class tS extends eS{constructor(){super(...arguments),this.type="html",this.renderInstance=F1}readValueFromInstance(e,t){if(Fi.has(t)){const s=og(t);return s&&s.default||0}else{const s=XR(e),r=(N1(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Bb(e,t)}build(e,t,s){Hm(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Xm(e,t,s)}}class nS extends eS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Fi.has(t)){const s=og(t);return s&&s.default||0}return t=V1.has(t)?t:Bm(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return z1(e,t,s)}build(e,t,s){$m(e,t,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,s,r){L1(e,t,s,r)}mount(e){this.isSVGTag=Ym(e.tagName),super.mount(e)}}const KR=(n,e)=>jm(n)?new nS(e):new tS(e,{allowProjection:n!==J.Fragment}),ZR=RM({...CE,...WR,...IR,...GR},KR),Ft=$2(ZR),QR=(n,e,t)=>{const s=e-n;return((t-n)%s+s)%s+n};function sS(n,e){return Ab(n)?n[QR(0,n.length,e)]:n}function fg(n){return typeof n=="object"&&!Array.isArray(n)}function rS(n,e,t,s){return typeof n=="string"&&fg(e)?Y1(n,t,s):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function JR(n,e,t){return n*(e+1)}function Av(n,e,t,s){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(r=s.get(e))!==null&&r!==void 0?r:n}function eI(n,e,t){for(let s=0;s<n.length;s++){const r=n[s];r.at>e&&r.at<t&&(wh(n,r),s--)}}function tI(n,e,t,s,r,i){eI(n,r,i);for(let a=0;a<e.length;a++)n.push({value:e[a],at:rt(r,i,s[a]),easing:sS(t,a)})}function nI(n,e){for(let t=0;t<n.length;t++)n[t]=n[t]/(e+1)}function sI(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const rI="easeInOut";function iI(n,{defaultTransition:e={},...t}={},s,r){const i=e.duration||.3,a=new Map,c=new Map,u={},h=new Map;let f=0,p=0,g=0;for(let y=0;y<n.length;y++){const x=n[y];if(typeof x=="string"){h.set(x,p);continue}else if(!Array.isArray(x)){h.set(x.name,Av(p,x.at,f,h));continue}let[w,v,S={}]=x;S.at!==void 0&&(p=Av(p,S.at,f,h));let T=0;const C=(P,k,M,E=0,R=0)=>{const O=oI(P),{delay:D=0,times:F=Pb(O),type:L="keyframes",repeat:X,repeatType:Z,repeatDelay:ne=0,...W}=k;let{ease:j=e.ease||"easeOut",duration:H}=k;const U=typeof D=="function"?D(E,R):D,Y=O.length,I=vh(L)?L:r==null?void 0:r[L];if(Y<=2&&I){let oe=100;if(Y===2&&cI(O)){const re=O[1]-O[0];oe=Math.abs(re)}const ce={...W};H!==void 0&&(ce.duration=Es(H));const ge=DM(ce,oe,I);j=ge.ease,H=ge.duration}H??(H=i);const $=p+U;F.length===1&&F[0]===0&&(F[1]=1);const le=F.length-O.length;if(le>0&&Mb(F,le),O.length===1&&O.unshift(null),X){H=JR(H,X);const oe=[...O],ce=[...F];j=Array.isArray(j)?[...j]:[j];const ge=[...j];for(let re=0;re<X;re++){O.push(...oe);for(let ke=0;ke<oe.length;ke++)F.push(ce[ke]+(re+1)),j.push(ke===0?"linear":sS(ge,ke-1))}nI(F,X)}const ue=$+H;tI(M,O,j,F,$,ue),T=Math.max(U+H,T),g=Math.max(ue,g)};if(Vt(w)){const P=Mv(w,c);C(v,S,Pv("default",P))}else{const P=rS(w,v,s,u),k=P.length;for(let M=0;M<k;M++){v=v,S=S;const E=P[M],R=Mv(E,c);for(const O in v)C(v[O],aI(S,O),Pv(O,R),M,k)}}f=p,p+=T}return c.forEach((y,x)=>{for(const w in y){const v=y[w];v.sort(sI);const S=[],T=[],C=[];for(let k=0;k<v.length;k++){const{at:M,value:E,easing:R}=v[k];S.push(E),T.push(Ri(0,g,M)),C.push(R||"easeOut")}T[0]!==0&&(T.unshift(0),S.unshift(S[0]),C.unshift(rI)),T[T.length-1]!==1&&(T.push(1),S.push(null)),a.has(x)||a.set(x,{keyframes:{},transition:{}});const P=a.get(x);P.keyframes[w]=S,P.transition[w]={...e,duration:g,ease:C,times:T,...t}}}),a}function Mv(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function Pv(n,e){return e[n]||(e[n]=[]),e[n]}function oI(n){return Array.isArray(n)?n:[n]}function aI(n,e){return n&&n[e]?{...n,...n[e]}:{...n}}const lI=n=>typeof n=="number",cI=n=>n.every(lI);function uI(n,e){return n in e}class hI extends Jb{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(uI(t,e)){const s=e[t];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return ht()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function dI(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=Wb(n)?new nS(e):new tS(e);t.mount(n),Do.set(n,t)}function fI(n){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new hI(e);t.mount(n),Do.set(n,t)}function pI(n,e){return Vt(n)||typeof n=="number"||typeof n=="string"&&!fg(e)}function iS(n,e,t,s){const r=[];if(pI(n,e))r.push(Ub(n,fg(e)&&e.default||e,t&&(t.default||t)));else{const i=rS(n,e,s),a=i.length;for(let c=0;c<a;c++){const u=i[c],h=u instanceof Element?dI:fI;Do.has(u)||h(u);const f=Do.get(u),p={...t};"delay"in p&&typeof p.delay=="function"&&(p.delay=p.delay(c,a)),r.push(...dg(f,{...e,transition:p},{}))}}return r}function mI(n,e,t){const s=[];return iI(n,e,t,{spring:cg}).forEach(({keyframes:i,transition:a},c)=>{s.push(...iS(c,i,a))}),s}function gI(n){return Array.isArray(n)&&n.some(Array.isArray)}function yI(n){function e(t,s,r){let i=[];return gI(t)?i=mI(t,s,n):i=iS(t,s,r,n),new W1(i)}return e}const _I=yI();/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oS=(...n)=>n.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=J.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...c},u)=>J.createElement("svg",{ref:u,...vI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:oS("lucide",r),...c},[...a.map(([h,f])=>J.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=(n,e)=>{const t=J.forwardRef(({className:s,...r},i)=>J.createElement(wI,{ref:i,iconNode:e,className:oS(`lucide-${xI(n)}`,s),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Yo("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Yo("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Yo("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Yo("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Yo("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Yo("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ev=50*1024*1024,AI=["audio/mpeg","audio/wav","audio/ogg","audio/flac","audio/aac","audio/mp4","audio/webm"],MI=[".mp3",".wav",".ogg",".flac",".m4a",".webm",".aac"];class tp extends Error{constructor(e,t){super(t??e),this.code=e,this.name="AudioValidationError"}}function PI(n){if(n.size===0)throw new tp("FILE_EMPTY","File is empty");if(n.size>Ev)throw new tp("FILE_TOO_LARGE",`File exceeds ${Ev/1024/1024} MB limit`);const e=AI.includes(n.type),t=MI.some(s=>n.name.toLowerCase().endsWith(s));if(!e&&!t)throw new tp("FORMAT_UNSUPPORTED","Unsupported audio format")}let yu=null;function lS(){return(!yu||yu.state==="closed")&&(yu=new(window.AudioContext||window.webkitAudioContext)),yu}async function EI(n){const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch audio: ${e.statusText}`);const t=await e.arrayBuffer(),s=lS();try{return await s.decodeAudioData(t)}catch{throw new Error("Failed to decode audio data. Unsupported format?")}}async function RI(n){PI(n);const e=new FileReader;return new Promise((t,s)=>{e.onload=async r=>{var a;const i=(a=r.target)==null?void 0:a.result;if(!i){s(new Error("Failed to read file"));return}try{const c=lS();try{const u=await c.decodeAudioData(i);t(u)}catch{s(new Error("Failed to decode audio data. Unsupported format?"))}}catch{s(new Error("Failed to decode audio data. Unsupported format?"))}},e.onerror=()=>{s(new Error("File read error"))},e.readAsArrayBuffer(n)})}function II(){const[n,e]=J.useState(!1),[t,s]=J.useState(null);return{isDecoding:n,error:t,decode:async a=>{e(!0),s(null);try{Re("audio.decode.started",{fileName:a.name.slice(-40),fileSize:a.size,fileType:a.type});const c=performance.now(),u=await RI(a),h=Math.round(performance.now()-c);return e(!1),Re("audio.decode.succeeded",{duration:u.duration,sampleRate:u.sampleRate,numberOfChannels:u.numberOfChannels,durationMs:h}),Re("perf.decode.duration",{ms:h}),u}catch(c){return Xn("audio.decode.failed",{fileName:a.name.slice(-40)},c),s(c.message||"Failed to decode audio"),e(!1),null}},decodeUrl:async(a,c)=>{e(!0),s(null);try{Re("audio.decode.started",{url:a.slice(-60),name:c});const u=performance.now(),h=await EI(a),f=Math.round(performance.now()-u);return e(!1),Re("audio.decode.succeeded",{duration:h.duration,sampleRate:h.sampleRate,numberOfChannels:h.numberOfChannels,durationMs:f}),Re("perf.decode.duration",{ms:f}),h}catch(u){return Xn("audio.decode.failed",{name:c},u),s(u.message||"Failed to decode audio"),e(!1),null}}}}function NI({onFileAccepted:n}){const[e,t]=J.useState(!1),s=J.useRef(null),r=f=>{f.preventDefault(),f.stopPropagation(),t(!0)},i=f=>{f.preventDefault(),f.stopPropagation(),t(!1)},a=f=>{f.preventDefault(),f.stopPropagation()},c=f=>{if(f.preventDefault(),f.stopPropagation(),t(!1),f.dataTransfer.files&&f.dataTransfer.files.length>0){const p=f.dataTransfer.files[0];p.type.startsWith("audio/")&&n(p)}},u=()=>{var f;(f=s.current)==null||f.click()},h=f=>{if(f.target.files&&f.target.files.length>0){const p=f.target.files[0];p.type.startsWith("audio/")&&n(p)}};return z.jsxs(Ft.div,{className:`relative w-full max-w-xl p-6 sm:p-12 text-center border-4 border-dashed cursor-pointer bg-slate-900/50 backdrop-blur-sm transition-colors duration-300 ${e?"border-neon-cyan shadow-[0_0_30px_rgba(0,255,255,0.3)]":"border-slate-700 hover:border-neon-magenta hover:shadow-[0_0_20px_rgba(255,0,255,0.2)]"}`,onClick:u,onDragEnter:r,onDragLeave:i,onDragOver:a,onDrop:c,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.02},whileTap:{scale:.98},children:[z.jsx("input",{type:"file",ref:s,onChange:h,accept:"audio/*",className:"hidden"}),z.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6 pointer-events-none",children:[z.jsx(Ft.div,{animate:{y:e?-10:0},transition:{type:"spring",stiffness:300,damping:20},children:z.jsx(bI,{size:40,className:`sm:w-16 sm:h-16 ${e?"text-neon-cyan":"text-slate-400"}`})}),z.jsxs("div",{className:"space-y-2 text-shadow-sm font-bold",children:[z.jsx("p",{className:`text-base sm:text-xl md:text-2xl ${e?"text-neon-cyan":"text-white"}`,children:e?"DROP IT!":"TAP TO PICK A TRACK"}),z.jsx("p",{className:"text-sm text-slate-400",children:"or click to browse files"})]}),z.jsx("p",{className:"text-xs text-slate-500 pt-4",children:"Supported: MP3, WAV, OGG, M4A"})]})]})}const Rv="/music-retro-game-react/";async function DI(){try{const n=await fetch(`${Rv}music/manifest.json`);return n.ok?(await n.json()).map(t=>({name:t.name,url:`${Rv}music/${encodeURIComponent(t.file)}`})):[]}catch{return[]}}function OI({selected:n,onSelect:e}){const[t,s]=J.useState([]);return J.useEffect(()=>{DI().then(s)},[]),t.length===0?null:z.jsxs("div",{className:"w-full relative z-10",children:[z.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[z.jsx("div",{className:"flex-1 h-px bg-slate-700"}),z.jsx("span",{className:"text-slate-500 text-xs tracking-widest uppercase",children:"or pick a track"}),z.jsx("div",{className:"flex-1 h-px bg-slate-700"})]}),z.jsx("div",{className:"flex flex-col gap-2",children:t.map(r=>{const i=(n==null?void 0:n.url)===r.url;return z.jsxs("button",{type:"button",onClick:()=>e(r),className:["flex items-center gap-3 w-full px-4 py-3 text-left transition-all","border font-mono text-sm truncate",i?"bg-neon-cyan/10 border-neon-cyan text-neon-cyan shadow-[0_0_12px_rgba(0,255,255,0.3)]":"bg-slate-900/60 border-slate-700 text-slate-300 hover:border-slate-500 hover:text-white hover:bg-slate-800/60"].join(" "),children:[z.jsx(TI,{className:`w-4 h-4 shrink-0 ${i?"text-neon-cyan":"text-slate-500"}`}),z.jsx("span",{className:"truncate",children:r.name}),i&&z.jsx("span",{className:"ml-auto shrink-0 text-xs text-neon-cyan",children:"SELECTED"})]},r.url)})})]})}function cS(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=cS(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function uS(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=cS(n))&&(s&&(s+=" "),s+=e);return s}const Iv=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Nv=uS,FI=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return Nv(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,a=Object.keys(r).map(h=>{const f=t==null?void 0:t[h],p=i==null?void 0:i[h];if(f===null)return null;const g=Iv(f)||Iv(p);return r[h][g]}),c=t&&Object.entries(t).reduce((h,f)=>{let[p,g]=f;return g===void 0||(h[p]=g),h},{}),u=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,f)=>{let{class:p,className:g,...y}=f;return Object.entries(y).every(x=>{let[w,v]=x;return Array.isArray(v)?v.includes({...i,...c}[w]):{...i,...c}[w]===v})?[...h,p,g]:h},[]);return Nv(n,a,u,t==null?void 0:t.class,t==null?void 0:t.className)};function Dv(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function VI(...n){return e=>{let t=!1;const s=n.map(r=>{const i=Dv(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():Dv(n[r],null)}}}}function LI(n){const e=zI(n),t=J.forwardRef((s,r)=>{const{children:i,...a}=s,c=J.Children.toArray(i),u=c.find(UI);if(u){const h=u.props.children,f=c.map(p=>p===u?J.Children.count(h)>1?J.Children.only(null):J.isValidElement(h)?h.props.children:null:p);return z.jsx(e,{...a,ref:r,children:J.isValidElement(h)?J.cloneElement(h,void 0,f):null})}return z.jsx(e,{...a,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var BI=LI("Slot");function zI(n){const e=J.forwardRef((t,s)=>{const{children:r,...i}=t;if(J.isValidElement(r)){const a=GI(r),c=WI(i,r.props);return r.type!==J.Fragment&&(c.ref=s?VI(s,a):a),J.cloneElement(r,c)}return J.Children.count(r)>1?J.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var jI=Symbol("radix.slottable");function UI(n){return J.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===jI}function WI(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...c)=>{const u=i(...c);return r(...c),u}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function GI(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ms(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var c=n.length-1;c>=0;c--)(a=n[c])&&(i=(r<3?a(i):r>3?a(e,t,i):a(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function Tt(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function c(f){try{h(s.next(f))}catch(p){a(p)}}function u(f){try{h(s.throw(f))}catch(p){a(p)}}function h(f){f.done?i(f.value):r(f.value).then(c,u)}h((s=s.apply(n,e||[])).next())})}const pg="-",HI=n=>{const e=qI(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const c=a.split(pg);return c[0]===""&&c.length!==1&&c.shift(),hS(c,e)||$I(a)},getConflictingClassGroupIds:(a,c)=>{const u=t[a]||[];return c&&s[a]?[...u,...s[a]]:u}}},hS=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?hS(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(pg);return(a=e.validators.find(({validator:c})=>c(i)))==null?void 0:a.classGroupId},Ov=/^\[(.+)\]$/,$I=n=>{if(Ov.test(n)){const e=Ov.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},qI=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return XI(Object.entries(n.classGroups),t).forEach(([i,a])=>{Kp(a,s,i,e)}),s},Kp=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:Fv(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(YI(r)){Kp(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,a])=>{Kp(a,Fv(e,i),t,s)})})},Fv=(n,e)=>{let t=n;return e.split(pg).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},YI=n=>n.isThemeGetter,XI=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,c])=>[e+a,c])):i);return[t,r]}):n,KI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){t.has(i)?t.set(i,a):r(i,a)}}},dS="!",ZI=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,a=c=>{const u=[];let h=0,f=0,p;for(let v=0;v<c.length;v++){let S=c[v];if(h===0){if(S===r&&(s||c.slice(v,v+i)===e)){u.push(c.slice(f,v)),f=v+i;continue}if(S==="/"){p=v;continue}}S==="["?h++:S==="]"&&h--}const g=u.length===0?c:c.substring(f),y=g.startsWith(dS),x=y?g.substring(1):g,w=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:w}};return t?c=>t({className:c,parseClassName:a}):a},QI=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},JI=n=>({cache:KI(n.cacheSize),parseClassName:ZI(n),...HI(n)}),eN=/\s+/,tN=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],a=n.trim().split(eN);let c="";for(let u=a.length-1;u>=0;u-=1){const h=a[u],{modifiers:f,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}=t(h);let x=!!y,w=s(x?g.substring(0,y):g);if(!w){if(!x){c=h+(c.length>0?" "+c:c);continue}if(w=s(g),!w){c=h+(c.length>0?" "+c:c);continue}x=!1}const v=QI(f).join(":"),S=p?v+dS:v,T=S+w;if(i.includes(T))continue;i.push(T);const C=r(w,x);for(let P=0;P<C.length;++P){const k=C[P];i.push(S+k)}c=h+(c.length>0?" "+c:c)}return c};function nN(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=fS(e))&&(s&&(s+=" "),s+=t);return s}const fS=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=fS(n[s]))&&(t&&(t+=" "),t+=e);return t};function sN(n,...e){let t,s,r,i=a;function a(u){const h=e.reduce((f,p)=>p(f),n());return t=JI(h),s=t.cache.get,r=t.cache.set,i=c,c(u)}function c(u){const h=s(u);if(h)return h;const f=tN(u,t);return r(u,f),f}return function(){return i(nN.apply(null,arguments))}}const Qe=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},pS=/^\[(?:([a-z-]+):)?(.+)\]$/i,rN=/^\d+\/\d+$/,iN=new Set(["px","full","screen"]),oN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qs=n=>Po(n)||iN.has(n)||rN.test(n),Pr=n=>Xo(n,"length",_N),Po=n=>!!n&&!Number.isNaN(Number(n)),np=n=>Xo(n,"number",Po),$a=n=>!!n&&Number.isInteger(Number(n)),hN=n=>n.endsWith("%")&&Po(n.slice(0,-1)),Ae=n=>pS.test(n),Er=n=>oN.test(n),dN=new Set(["length","size","percentage"]),fN=n=>Xo(n,dN,mS),pN=n=>Xo(n,"position",mS),mN=new Set(["image","url"]),gN=n=>Xo(n,mN,vN),yN=n=>Xo(n,"",xN),qa=()=>!0,Xo=(n,e,t)=>{const s=pS.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},_N=n=>aN.test(n)&&!lN.test(n),mS=()=>!1,xN=n=>cN.test(n),vN=n=>uN.test(n),wN=()=>{const n=Qe("colors"),e=Qe("spacing"),t=Qe("blur"),s=Qe("brightness"),r=Qe("borderColor"),i=Qe("borderRadius"),a=Qe("borderSpacing"),c=Qe("borderWidth"),u=Qe("contrast"),h=Qe("grayscale"),f=Qe("hueRotate"),p=Qe("invert"),g=Qe("gap"),y=Qe("gradientColorStops"),x=Qe("gradientColorStopPositions"),w=Qe("inset"),v=Qe("margin"),S=Qe("opacity"),T=Qe("padding"),C=Qe("saturate"),P=Qe("scale"),k=Qe("sepia"),M=Qe("skew"),E=Qe("space"),R=Qe("translate"),O=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ae,e],L=()=>[Ae,e],X=()=>["",qs,Pr],Z=()=>["auto",Po,Ae],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],j=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Ae],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Po,Ae];return{cacheSize:500,separator:":",theme:{colors:[qa],spacing:[qs,Pr],blur:["none","",Er,Ae],brightness:I(),borderColor:[n],borderRadius:["none","","full",Er,Ae],borderSpacing:L(),borderWidth:X(),contrast:I(),grayscale:U(),hueRotate:I(),invert:U(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[hN,Pr],inset:F(),margin:F(),opacity:I(),padding:L(),saturate:I(),scale:I(),sepia:U(),skew:I(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[Er]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),Ae]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$a,Ae]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",$a,Ae]}],"grid-cols":[{"grid-cols":[qa]}],"col-start-end":[{col:["auto",{span:["full",$a,Ae]},Ae]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[qa]}],"row-start-end":[{row:["auto",{span:[$a,Ae]},Ae]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,e]}],"min-w":[{"min-w":[Ae,e,"min","max","fit"]}],"max-w":[{"max-w":[Ae,e,"none","full","min","max","fit","prose",{screen:[Er]},Er]}],h:[{h:[Ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Er,Pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",np]}],"font-family":[{font:[qa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",Po,np]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qs,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qs,Pr]}],"underline-offset":[{"underline-offset":["auto",qs,Ae]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),pN]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gN]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:W()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[qs,Ae]}],"outline-w":[{outline:[qs,Pr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[qs,Pr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Er,yN]}],"shadow-color":[{shadow:[qa]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...j(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":j()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Er,Ae]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[$a,Ae]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[qs,Pr,np]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bN=sN(wN);function SN(...n){return bN(uS(n))}const TN=FI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all cursor-pointer disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function ls({className:n,variant:e="default",size:t="default",asChild:s=!1,...r}){const i=s?BI:"button";return z.jsx(i,{"data-slot":"button","data-variant":e,"data-size":t,className:SN(TN({variant:e,size:t,className:n})),...r})}function Oo({children:n,fullscreen:e=!1}){return e?z.jsxs("div",{className:"relative w-screen h-[100dvh] overflow-hidden bg-game-bg text-white font-pixel flex flex-col",children:[z.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-900/40 via-game-bg to-game-bg"}),z.jsx("div",{className:"absolute inset-4 pointer-events-none border border-slate-800/50 rounded-xl shadow-[inset_0_0_50px_rgba(0,0,0,0.5)] z-0"}),z.jsx("main",{className:"relative z-10 flex-1 p-4 sm:p-6 lg:p-12 w-full max-w-screen-2xl mx-auto h-full overflow-hidden flex flex-col",children:z.jsx("div",{className:"w-full my-auto flex flex-col items-center justify-center",children:n})})]}):z.jsxs("div",{className:"relative w-full h-[100dvh] overflow-hidden bg-game-bg text-white font-pixel flex flex-col",children:[z.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-900/40 via-game-bg to-game-bg -z-10"}),z.jsx("div",{className:"absolute inset-4 pointer-events-none border border-slate-800/50 rounded-xl shadow-[inset_0_0_50px_rgba(0,0,0,0.5)] z-[1] hidden sm:block"}),z.jsx("main",{className:"relative z-10 flex-1 p-4 sm:p-6 lg:p-12 w-full max-w-screen-2xl mx-auto h-full overflow-y-auto overflow-x-hidden flex flex-col",children:z.jsx("div",{className:"w-full my-auto flex flex-col items-center justify-center pb-12 sm:pb-0",children:n})})]})}function CN(){const n=Se(C=>C.setSong),e=Se(C=>C.setPhase),t=Se(C=>C.mode),s=Se(C=>C.setMode),r=Se(C=>C.difficulty),i=Se(C=>C.setDifficulty),{isDecoding:a,error:c,decode:u,decodeUrl:h}=II(),[f,p]=J.useState(null),[g,y]=J.useState(null),x=C=>{p(C),y(null)},w=C=>{y(C),p(null)},v=async()=>{if(g){const C=await h(g.url,g.name);C&&(n({id:Ro(),name:g.name,file:new File([],g.name),audioBuffer:C,duration:C.duration}),e("analyzing"));return}if(f){const C=await u(f);C&&(n({id:Ro(),name:f.name.replace(/\.[^/.]+$/,""),file:f,audioBuffer:C,duration:C.duration}),e("analyzing"))}},S=(g==null?void 0:g.name)??(f==null?void 0:f.name)??null,T=g!==null||f!==null;return z.jsxs(Oo,{children:[z.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0 opacity-20",children:z.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,255,255,0.3)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,255,0.3)_1px,transparent_1px)] bg-[size:50px_50px]",style:{transform:"perspective(500px) rotateX(60deg) translateY(-100px) translateZ(-200px)",animation:"grid-move 10s linear infinite"}})}),z.jsx("style",{children:`
                @keyframes grid-move {
                    0% { background-position: 0px 0px; }
                    100% { background-position: 0px 50px; }
                }
            `}),z.jsxs(Ft.div,{className:"flex flex-col items-center justify-center space-y-4 sm:space-y-6 max-w-2xl w-full py-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[z.jsxs("div",{className:"text-center space-y-2 relative z-10",children:[z.jsx(Ft.h1,{className:"text-4xl sm:text-5xl md:text-7xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-neon-cyan via-white to-neon-magenta drop-shadow-[0_0_20px_rgba(255,0,255,0.8)] leading-tight",animate:{opacity:[1,.8,1,.5,1]},transition:{repeat:1/0,duration:4,times:[0,.1,.2,.3,1]},children:"PIXELBEAT"}),z.jsx("p",{className:"text-sm sm:text-xl text-slate-300",children:"Synthwave Rhythm Action"})]}),z.jsx(NI,{onFileAccepted:x}),z.jsx(OI,{selected:g,onSelect:w}),z.jsxs("div",{className:"w-full grid grid-cols-2 gap-4 relative z-10",children:[z.jsxs(ls,{type:"button",onClick:()=>s("classic"),className:t==="classic"?"bg-neon-cyan text-black border-b-4 border-r-4 border-cyan-800 scale-105 font-bold shadow-[0_0_15px_rgba(0,255,255,0.6)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 hover:text-white transition-all",children:["CLASSIC",z.jsx("br",{}),z.jsx("span",{className:"text-xs opacity-70",children:"(D/F/J/K)"})]}),z.jsxs(ls,{type:"button",onClick:()=>s("trackpad"),className:t==="trackpad"?"bg-neon-green text-black border-b-4 border-r-4 border-green-800 scale-105 font-bold shadow-[0_0_15px_rgba(0,255,0,0.6)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 hover:text-white transition-all",children:["TRACKPAD",z.jsx("br",{}),z.jsx("span",{className:"text-xs opacity-70",children:"(SPACEBAR)"})]})]}),z.jsxs("div",{className:"w-full grid grid-cols-2 md:grid-cols-4 gap-3 relative z-10",children:[z.jsx(ls,{type:"button",onClick:()=>i("easy"),className:r==="easy"?"bg-neon-green text-black font-bold shadow-[0_0_10px_rgba(0,255,0,0.5)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 transition-all",children:"EASY"}),z.jsx(ls,{type:"button",onClick:()=>i("normal"),className:r==="normal"?"bg-neon-cyan text-black font-bold shadow-[0_0_10px_rgba(0,255,255,0.5)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 transition-all",children:"NORMAL"}),z.jsx(ls,{type:"button",onClick:()=>i("hard"),className:r==="hard"?"bg-neon-magenta text-black font-bold shadow-[0_0_10px_rgba(255,0,255,0.5)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 transition-all",children:"HARD"}),z.jsx(ls,{type:"button",onClick:()=>i("expert"),className:r==="expert"?"bg-neon-yellow text-black font-bold shadow-[0_0_10px_rgba(255,255,0,0.5)]":"bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800 transition-all",children:"EXPERT"})]}),c&&z.jsx("div",{className:"text-red-500 bg-red-950/50 p-4 rounded-md border border-red-500/50 w-full text-center",children:c}),T&&!c&&z.jsxs(Ft.div,{className:"flex flex-col items-center space-y-6 w-full pb-8 sm:pb-0",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[z.jsx("div",{className:"bg-slate-800/80 p-4 rounded-lg border border-neon-green/50 w-full text-center shadow-[0_0_15px_rgba(0,255,0,0.2)]",children:z.jsx("p",{className:"text-neon-green truncate",title:S??"",children:S})}),z.jsx(ls,{size:"lg",onClick:v,disabled:a,className:"bg-neon-magenta hover:bg-neon-magenta/80 text-white font-bold text-lg px-8 py-6 rounded-none border-b-4 border-r-4 border-purple-950 active:border-0 active:translate-y-1 active:translate-x-1 transition-all",children:a?z.jsx("span",{className:"flex items-center space-x-2",children:z.jsx("span",{className:"animate-pulse",children:"DECODING..."})}):z.jsxs("span",{className:"flex items-center space-x-2",children:[z.jsx(aS,{className:"w-5 h-5 fill-current"}),z.jsx("span",{children:"START ANALYSIS"})]})})]})]})]})}class kN{constructor(){Q(this,"MIN_ONSETS",16)}determineBeats(e,t,s,r,i){const a=e.length>=this.MIN_ONSETS;return{beats:a?e:s,bpm:a?r:i,beatStrengths:a?t:void 0,hasEnoughOnsets:a}}}class AN{calculate(e,t,s){return e?Math.min(1,t*.7+s*.3):.35}}function MN(n){const e=n.sampleRate,t=1024,s=256,r=n.numberOfChannels,i=n.length,a=[];for(let T=0;T<r;T++)a.push(n.getChannelData(T));if(i<t||r===0)return{envelope:[],frameRate:e/s};const c=1-Math.exp(-2*Math.PI*200/e),u=new Float32Array(i);{let T=0;for(let C=0;C<i;C++){let P=0;for(let k=0;k<r;k++)P+=a[k][C];P/=r,T+=c*(P-T),u[C]=T}}const h=[];let f=0;for(let T=0;T+t<=i;T+=s){let C=0,P=0;for(let k=0;k<t;k++){const M=T+k;let E=0;for(let D=0;D<r;D++)E+=a[D][M];E/=r;const R=u[M],O=E-R;C+=Math.abs(R),P+=Math.abs(O-f),f=O}h.push((C*.6+P*.4)/t)}if(h.length<3)return{envelope:[],frameRate:e/s};const p=[0];for(let T=1;T<h.length;T++)p.push(Math.max(0,h[T]-h[T-1]));const g=16,y=p.map((T,C)=>{const P=Math.max(0,C-g),k=Math.min(p.length-1,C+g);let M=0;for(let R=P;R<=k;R++)M+=p[R];const E=M/(k-P+1);return Math.max(0,T-E*.9)}),x=y.reduce((T,C)=>T+C,0)/y.length,w=y.reduce((T,C)=>T+(C-x)*(C-x),0)/y.length,v=Math.sqrt(w);return{envelope:v>1e-6?y.map(T=>Math.max(0,(T-x)/v)):y.map(()=>0),frameRate:e/s}}function PN(n,e){if(n.length===0)return{frames:[],strengths:[]};const t=Math.max(1,Math.floor(e*.7)),s=Math.max(t+1,Math.ceil(e*1.4)),r=new Array(n.length).fill(0),i=new Array(n.length).fill(-1);for(let p=0;p<n.length;p++){const g=n[p];let y=g,x=-1;for(let w=t;w<=s;w++){if(w<=0)continue;const v=p-w;if(v<0)continue;const S=-22*Math.pow(Math.log(w/e),2),T=r[v]+g+S;T>y&&(y=T,x=v)}r[p]=y,i[p]=x}let a=0;for(let p=1;p<r.length;p++)r[p]>r[a]&&(a=p);const c=[];for(;a>=0;)c.push(a),a=i[a];c.reverse();const u=[],h=[],f=Math.max(1,Math.floor(e*.45));for(const p of c){const g=n[p]??0,y=u[u.length-1];y===void 0||p-y>=f?(u.push(p),h.push(g)):g>h[h.length-1]&&(u[u.length-1]=p,h[h.length-1]=g)}return{frames:u,strengths:h}}function EN(n){if(n.length<8)return 0;const e=[0,0,0,0];for(let r=0;r<n.length;r++)e[r%4]+=n[r];let t=0,s=-1/0;for(let r=0;r<4;r++){const i=(e[(r+1)%4]+e[(r+3)%4])/2,a=e[r]-i;a>s&&(s=a,t=r)}return t}function RN(n,e,t){if(t<=0)return[];const s=[];let r=n;for(;r<e;)r>=0&&s.push(r),r+=t;return s}function IN(n,e){if(n.length===0||e.length===0)return 0;const t=n.reduce((i,a)=>i+a,0)/n.length;let s=0,r=0;for(const i of e){const a=n[i];a!==void 0&&(s+=a,r++)}return r===0||(s/=r,s<=0)?0:Math.max(0,Math.min(1,(s-t)/Math.max(.25,s)))}class NN{async analyze(e,t){t("Initializing analysis...",10);const s=performance.now();try{t("Extracting rhythm (Essentia DSP Worker)...",20),Re("analysis.worker.started",{numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate,duration:e.duration});const r=new Worker(new URL("/music-retro-game-react/assets/beatAnalysis.worker-lo-bLvXY.js",import.meta.url),{type:"module"}),i=[],a=[];for(let D=0;D<e.numberOfChannels;D++){const F=e.getChannelData(D).slice();i.push(F),a.push(F.buffer)}const c=new Promise((D,F)=>{r.onmessage=L=>D(L.data),r.onerror=L=>F(L),r.postMessage({channelData:i,sampleRate:e.sampleRate,length:e.length},a)}),u=new Promise((D,F)=>setTimeout(()=>F(new Error("Beat analysis timed out after 30s")),3e4)),{beatTimes:h,bpm:f,success:p,error:g}=await Promise.race([c,u]);if(r.terminate(),Re("resource.worker.terminated",{workerName:"beatAnalysis"}),!p)throw Xn("analysis.worker.failed",{reason:g}),new Error("Essentia worker failed: "+g);if(!f||f<=0)throw Xn("analysis.worker.failed",{reason:`Invalid BPM: ${f}`}),new Error(`Invalid BPM from analysis: ${f}. Cannot generate beat map.`);const y=Math.round(performance.now()-s);Re("analysis.worker.succeeded",{bpm:f,beatCount:h.length,durationMs:y}),Re("perf.analysis.duration",{ms:y}),t("Generating beat map...",60);const x=h.length>0?h[0]:0,w=e.duration,v=60/f;t("Aligning downbeats...",80);const S=MN(e);let T=[],C=h,P=0;if(S.envelope.length>0){const D=PN(S.envelope,Math.round(60/f*S.frameRate)),F=EN(D.strengths);if(T=D.strengths.slice(F),P=IN(S.envelope,D.frames),C.length>0){if(T.length>C.length)T=T.slice(0,C.length);else if(T.length<C.length){const L=new Array(C.length-T.length).fill(0);T=T.concat(L)}}}const k=RN(x,w,v),E=new kN().determineBeats(C,T,k,f,f),O=new AN().calculate(E.hasEnoughOnsets,1,Math.max(.5,P));return t("Finalizing...",100),{bpm:E.bpm,beats:E.beats,confidence:O,beatStrengths:E.beatStrengths}}catch(r){throw Xn("analysis.failed",{message:r.message},r),new Error("Analysis failed: "+r.message)}}}const _u={perfect:30,great:70,good:120},gS=[{combo:0,multiplier:1},{combo:10,multiplier:2},{combo:30,multiplier:4},{combo:50,multiplier:8},{combo:100,multiplier:16}],DN={perfect:300,great:200,good:100,miss:0},sp={S:95,A:85,B:70},Si=4,Ti=2,ON=["d","f","j","k"],FN=150,qn=[65535,16711935,16776960,65280],Dr={perfect:16766720,great:65535,good:65280,miss:16724787,close:16750848},VN=.85,LN=.5,BN=.2,zN=.95,jN=.6,UN=.5,rp=.2,Vv=8,WN=.1,yS={easy:{baseStride:2,minGap:.4,offbeatChance:0,allowTriplets:!1,laneJumpChance:.2,strengthPercentile:75},normal:{baseStride:2,minGap:.28,offbeatChance:0,allowTriplets:!1,laneJumpChance:.3,strengthPercentile:55},hard:{baseStride:1,minGap:.14,offbeatChance:.45,allowTriplets:!1,laneJumpChance:.55,strengthPercentile:25},expert:{baseStride:1,minGap:.1,offbeatChance:.75,allowTriplets:!0,laneJumpChance:.75,strengthPercentile:0}};function ip(n,e){return Math.abs(Math.sin(n*12.9898+e*78.233))}function GN(n,e){if(n.length===0)return 0;const t=[...n].sort((a,c)=>a-c),s=e/100*(t.length-1),r=Math.floor(s),i=Math.ceil(s);return t[r]+(t[i]-t[r])*(s-r)}function HN(n,e,t){const s=yS[e];if(n.length===0)return[];const r=t!==void 0&&t.length===n.length,i=r?GN(t,s.strengthPercentile):0,a=[];for(let u=0;u<n.length;u++){const h=n[u],f=u%4,p=Math.floor(u/4),g=r&&t[u]>=i,y=u%s.baseStride===0;if(r?!g:!y)continue;a.push(h);const x=n[u+1];if(x===void 0)continue;const w=x-h,v=w>.22&&w<.9;if(v&&s.offbeatChance>0){let S=!1;e==="normal"?S=f===1&&p%2===0:e==="hard"?S=f===1||f===3:e==="expert"&&(S=!0),S&&a.push(h+w*.5)}if(s.allowTriplets&&v&&w>.36){const S=f===3,T=p%2===1;S&&T&&(a.push(h+w/3),a.push(h+2*w/3))}}a.sort((u,h)=>u-h);const c=[];for(const u of a)(c.length===0||u-c[c.length-1]>=s.minGap)&&c.push(u);return c}function $N(n,e,t,s){const r=[],i=HN(e.beats,s,e.beatStrengths);let a=-1,c=0;const u=yS[s];for(let f=0;f<i.length;f++){const p=i[f];if(t==="trackpad"){r.push({id:Ro(),time:p,lane:0,type:"normal"});continue}const g=ip(f,p);let y;if(a<0)y=Math.floor(g*Si);else if(g<u.laneJumpChance){const w=ip(f+1e3,p)>.5?1:-1;y=(a+w+Si)%Si}else y=a;y===a?(c++,c>=3&&(y=(y+1)%Si,c=1)):c=1,a=y,r.push({id:Ro(),time:p,lane:y,type:"normal"})}let h=r;if(s!=="easy"&&t!=="trackpad"){h=[];const f={};for(const p of r){const g=f[p.lane];if(g){const y=p.time-g.time;if(y>.2&&y<=.8&&ip(p.lane,p.time)<.4){g.type="hold",g.duration=Math.max(.05,y-.1),f[p.lane]=void 0;continue}}f[p.lane]=p,h.push(p)}}return{songId:n,bpm:e.bpm,notes:h}}function qN(){const n=Se(g=>g.song),e=Se(g=>g.mode),t=Se(g=>g.difficulty),s=Se(g=>g.setBeatMap),r=Se(g=>g.setPhase),[i,a]=J.useState(0),[c,u]=J.useState("Initializing..."),[h,f]=J.useState(null),p=J.useRef(!1);return J.useEffect(()=>{if(!n||p.current)return;p.current=!0;let g=!1;const y=new NN;if(!n.audioBuffer){f("Audio buffer is missing.");return}return g2(Ro()),Re("analysis.started",{duration:n.audioBuffer.duration,sampleRate:n.audioBuffer.sampleRate,numberOfChannels:n.audioBuffer.numberOfChannels}),y.analyze(n.audioBuffer,(x,w)=>{g||(u(x),a(w))}).then(x=>{if(!g){Re("analysis.beatmap.generated",{bpm:x.bpm,beatCount:x.beats.length,confidence:x.confidence,mode:e,difficulty:t}),_2({bpm:x.bpm,beatCount:x.beats.length});const w=$N(n.id,x,e,t);s(w),r("ready")}}).catch(x=>{g||(Xn("analysis.failed",{},x),f(x.message))}),()=>{g=!0,p.current=!1}},[n,e,t,s,r]),{progressPercent:i,progressStage:c,error:h}}function YN(){const{progressPercent:n,progressStage:e,error:t}=qN(),s=Se(c=>c.reset),[r,i]=J.useState([]),a=J.useRef(null);return J.useEffect(()=>{e&&!r.includes(e)&&i(c=>[...c.slice(-9),e])},[e]),J.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[r]),z.jsx(Oo,{children:z.jsxs(Ft.div,{className:"flex flex-col items-center justify-center space-y-8 w-full max-w-2xl px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[z.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-neon-cyan drop-shadow-[0_0_10px_rgba(0,255,255,0.8)] tracking-widest uppercase",children:"SYSTEM :: ANALYZING"}),z.jsxs("div",{className:"w-full h-8 bg-slate-900 rounded border border-neon-cyan/50 overflow-hidden relative shadow-[0_0_15px_rgba(0,255,255,0.2)]",children:[z.jsx(Ft.div,{className:"h-full bg-neon-cyan/80",initial:{width:0},animate:{width:`${n}%`},transition:{ease:"easeOut",duration:.2}}),z.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white mix-blend-difference tracking-widest",children:[Math.round(n),"%"]})]}),z.jsxs("div",{className:"w-full h-48 bg-black/80 border-2 border-neon-green/30 rounded p-4 font-mono text-sm md:text-base overflow-hidden flex flex-col justify-end relative shadow-[inset_0_0_20px_rgba(0,255,0,0.1)]",ref:a,children:[z.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[linear-gradient(transparent_50%,rgba(0,0,0,0.25)_50%)] bg-[length:100%_4px] opacity-20"}),t?z.jsxs("div",{className:"text-red-500 font-bold z-10",children:[z.jsxs("p",{className:"mb-2",children:[">"," CRITICAL ERROR ENCOUNTERED"]}),z.jsxs("p",{children:[">"," ",t]}),z.jsxs("p",{className:"mt-4 animate-pulse",children:[">"," _"]})]}):z.jsx("div",{className:"flex flex-col space-y-1 text-neon-green/80 z-10 w-full text-left",children:r.map((c,u)=>z.jsxs(Ft.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:u===r.length-1?"text-neon-green font-bold drop-shadow-[0_0_5px_rgba(0,255,0,0.8)]":"",children:[">"," ",c,u===r.length-1&&z.jsx(Ft.span,{animate:{opacity:[1,0,1]},transition:{repeat:1/0,duration:.8},className:"inline-block ml-1 w-2 h-4 bg-neon-green"})]},c+u))})]}),t&&z.jsx(ls,{onClick:s,className:"bg-red-900 border-2 border-red-500 text-white font-bold hover:bg-red-800 rounded px-8 py-2 uppercase tracking-widest shadow-[0_0_20px_rgba(255,0,0,0.4)]",children:"REBOOT SYSTEM"})]})})}const XN="modulepreload",KN=function(n){return"/music-retro-game-react/"+n},Lv={},hl=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let a=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=a(t.map(h=>{if(h=KN(h),h in Lv)return;Lv[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":XN,f||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((y,x)=>{g.addEventListener("load",y),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};var Pe=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Pe||{});const Zp=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},xu=(n,e)=>Zp(n).priority??e,xt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Zp).forEach(e=>{e.type.forEach(t=>{var s,r;return(r=(s=this._removeHandlers)[t])==null?void 0:r.call(s,e)})}),this},add(...n){return n.map(Zp).forEach(e=>{e.type.forEach(t=>{var i,a;const s=this._addHandlers,r=this._queue;s[t]?(a=s[t])==null||a.call(s,e):(r[t]=r[t]||[],(i=r[t])==null||i.push(e))})}),this},handle(n,e,t){var a;const s=this._addHandlers,r=this._removeHandlers;if(s[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=e,r[n]=t;const i=this._queue;return i[n]&&((a=i[n])==null||a.forEach(c=>e(c)),delete i[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,s=>{e.findIndex(i=>i.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((i,a)=>xu(a.value,t)-xu(i.value,t)))},s=>{const r=e.findIndex(i=>i.name===s.name);r!==-1&&e.splice(r,1)})},handleByList(n,e,t=-1){return this.handle(n,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((r,i)=>xu(i,t)-xu(r,t)))},s=>{const r=e.indexOf(s.ref);r!==-1&&e.splice(r,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},ZN={extension:{type:Pe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await hl(()=>import("./browserAll-Wui27zwE.js"),__vite__mapDeps([0,1]))}},QN={extension:{type:Pe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await hl(()=>import("./webworkerAll-DNVsVB5l.js"),[])}};class Gt{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new Gt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var op={exports:{}},Bv;function JN(){return Bv||(Bv=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function r(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function i(u,h,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new r(f,p||u,g),x=t?t+h:h;return u._events[x]?u._events[x].fn?u._events[x]=[u._events[x],y]:u._events[x].push(y):(u._events[x]=y,u._eventsCount++),u}function a(u,h){--u._eventsCount===0?u._events=new s:delete u._events[h]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],f,p;if(this._eventsCount===0)return h;for(p in f=this._events)e.call(f,p)&&h.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},c.prototype.listeners=function(h){var f=t?t+h:h,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,x=new Array(y);g<y;g++)x[g]=p[g].fn;return x},c.prototype.listenerCount=function(h){var f=t?t+h:h,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,f,p,g,y,x){var w=t?t+h:h;if(!this._events[w])return!1;var v=this._events[w],S=arguments.length,T,C;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),S){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,p),!0;case 4:return v.fn.call(v.context,f,p,g),!0;case 5:return v.fn.call(v.context,f,p,g,y),!0;case 6:return v.fn.call(v.context,f,p,g,y,x),!0}for(C=1,T=new Array(S-1);C<S;C++)T[C-1]=arguments[C];v.fn.apply(v.context,T)}else{var P=v.length,k;for(C=0;C<P;C++)switch(v[C].once&&this.removeListener(h,v[C].fn,void 0,!0),S){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,f);break;case 3:v[C].fn.call(v[C].context,f,p);break;case 4:v[C].fn.call(v[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(S-1);k<S;k++)T[k-1]=arguments[k];v[C].fn.apply(v[C].context,T)}}return!0},c.prototype.on=function(h,f,p){return i(this,h,f,p,!1)},c.prototype.once=function(h,f,p){return i(this,h,f,p,!0)},c.prototype.removeListener=function(h,f,p,g){var y=t?t+h:h;if(!this._events[y])return this;if(!f)return a(this,y),this;var x=this._events[y];if(x.fn)x.fn===f&&(!g||x.once)&&(!p||x.context===p)&&a(this,y);else{for(var w=0,v=[],S=x.length;w<S;w++)(x[w].fn!==f||g&&!x[w].once||p&&x[w].context!==p)&&v.push(x[w]);v.length?this._events[y]=v.length===1?v[0]:v:a(this,y)}return this},c.prototype.removeAllListeners=function(h){var f;return h?(f=t?t+h:h,this._events[f]&&a(this,f)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(op)),op.exports}var eD=JN();const Os=Em(eD),tD=Math.PI*2,nD=180/Math.PI,Qp=Math.PI/180;class Qt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Qt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return ap.x=0,ap.y=0,ap}}const ap=new Qt;class De{constructor(e=1,t=0,s=0,r=1,i=0,a=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=r,this.tx=i,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,r,i,a){return this.a=e,this.b=t,this.c=s,this.d=r,this.tx=i,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new Qt;const s=e.x,r=e.y;return t.x=this.a*s+this.c*r+this.tx,t.y=this.b*s+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Qt;const s=this.a,r=this.b,i=this.c,a=this.d,c=this.tx,u=this.ty,h=1/(s*a+i*-r),f=e.x,p=e.y;return t.x=a*h*f+-i*h*p+(u*i-c*a)*h,t.y=s*h*p+-r*h*f+(-u*s+c*r)*h,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*t-this.b*s,this.b=r*s+this.b*t,this.c=i*t-this.d*s,this.d=i*s+this.d*t,this.tx=a*t-this.ty*s,this.ty=a*s+this.ty*t,this}append(e){const t=this.a,s=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*s+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*s+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*s+e.ty*i+this.ty,this}appendFrom(e,t){const s=e.a,r=e.b,i=e.c,a=e.d,c=e.tx,u=e.ty,h=t.a,f=t.b,p=t.c,g=t.d;return this.a=s*h+r*p,this.b=s*f+r*g,this.c=i*h+a*p,this.d=i*f+a*g,this.tx=c*h+u*p+t.tx,this.ty=c*f+u*g+t.ty,this}setTransform(e,t,s,r,i,a,c,u,h){return this.a=Math.cos(c+h)*i,this.b=Math.sin(c+h)*i,this.c=-Math.sin(c-u)*a,this.d=Math.cos(c-u)*a,this.tx=e-(s*this.a+r*this.c),this.ty=t-(s*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,r=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,r=this.c,i=this.d,a=e.pivot,c=-Math.atan2(-r,i),u=Math.atan2(s,t),h=Math.abs(c+u);return h<1e-5||Math.abs(tD-h)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=u),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*s+a.y*i),e}invert(){const e=this.a,t=this.b,s=this.c,r=this.d,i=this.tx,a=e*r-t*s;return this.a=r/a,this.b=-t/a,this.c=-s/a,this.d=e/a,this.tx=(s*this.ty-r*i)/a,this.ty=-(e*this.ty-t*i)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new De;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return rD.identity()}static get shared(){return sD.identity()}}const sD=new De,rD=new De,mi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],gi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_i=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Jp=[],_S=[],vu=Math.sign;function iD(){for(let n=0;n<16;n++){const e=[];Jp.push(e);for(let t=0;t<16;t++){const s=vu(mi[n]*mi[t]+yi[n]*gi[t]),r=vu(gi[n]*mi[t]+_i[n]*gi[t]),i=vu(mi[n]*yi[t]+yi[n]*_i[t]),a=vu(gi[n]*yi[t]+_i[n]*_i[t]);for(let c=0;c<16;c++)if(mi[c]===s&&gi[c]===r&&yi[c]===i&&_i[c]===a){e.push(c);break}}}for(let n=0;n<16;n++){const e=new De;e.set(mi[n],gi[n],yi[n],_i[n],0,0),_S.push(e)}}iD();const He={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>mi[n],uY:n=>gi[n],vX:n=>yi[n],vY:n=>_i[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Jp[n][e],sub:(n,e)=>Jp[n][He.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?He.S:He.N:Math.abs(e)*2<=Math.abs(n)?n>0?He.E:He.W:e>0?n>0?He.SE:He.SW:n>0?He.NE:He.NW,matrixAppendRotationInv:(n,e,t=0,s=0,r=0,i=0)=>{const a=_S[He.inv(e)],c=a.a,u=a.b,h=a.c,f=a.d,p=t-Math.min(0,c*r,h*i,c*r+h*i),g=s-Math.min(0,u*r,f*i,u*r+f*i),y=n.a,x=n.b,w=n.c,v=n.d;n.a=c*y+u*w,n.b=c*x+u*v,n.c=h*y+f*w,n.d=h*x+f*v,n.tx=p*y+g*w+n.tx,n.ty=p*x+g*v+n.ty},transformRectCoords:(n,e,t,s)=>{const{x:r,y:i,width:a,height:c}=n,{x:u,y:h,width:f,height:p}=e;return t===He.E?(s.set(r+u,i+h,a,c),s):t===He.S?s.set(f-i-c+u,r+h,c,a):t===He.W?s.set(f-r-a+u,p-i-c+h,a,c):t===He.N?s.set(i+u,p-r-a+h,c,a):s.set(r+u,i+h,a,c)}},wu=[new Qt,new Qt,new Qt,new Qt];class _t{constructor(e=0,t=0,s=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new _t(0,0,0,0)}clone(){return new _t(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,r=.5){const{width:i,height:a}=this;if(i<=0||a<=0)return!1;const c=this.x,u=this.y,h=s*(1-r),f=s-h,p=c-h,g=c+i+h,y=u-h,x=u+a+h,w=c+f,v=c+i-f,S=u+f,T=u+a-f;return e>=p&&e<=g&&t>=y&&t<=x&&!(e>w&&e<v&&t>S&&t<T)}intersects(e,t){if(!t){const R=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=R)return!1;const D=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>D}const s=this.left,r=this.right,i=this.top,a=this.bottom;if(r<=s||a<=i)return!1;const c=wu[0].set(e.left,e.top),u=wu[1].set(e.left,e.bottom),h=wu[2].set(e.right,e.top),f=wu[3].set(e.right,e.bottom);if(h.x<=c.x||u.y<=c.y)return!1;const p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(c,c),t.apply(u,u),t.apply(h,h),t.apply(f,f),Math.max(c.x,u.x,h.x,f.x)<=s||Math.min(c.x,u.x,h.x,f.x)>=r||Math.max(c.y,u.y,h.y,f.y)<=i||Math.min(c.y,u.y,h.y,f.y)>=a))return!1;const g=p*(u.y-c.y),y=p*(c.x-u.x),x=g*s+y*i,w=g*r+y*i,v=g*s+y*a,S=g*r+y*a;if(Math.max(x,w,v,S)<=g*c.x+y*c.y||Math.min(x,w,v,S)>=g*f.x+y*f.y)return!1;const T=p*(c.y-h.y),C=p*(h.x-c.x),P=T*s+C*i,k=T*r+C*i,M=T*s+C*a,E=T*r+C*a;return!(Math.max(P,k,M,E)<=T*c.x+C*c.y||Math.min(P,k,M,E)>=T*f.x+C*f.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=r,this.height=Math.max(i-r,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=r-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=r,this.height=i-r,this}getBounds(e){return e||(e=new _t),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,r=e.x+e.width,i=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&r>=this.x&&r<this.x+this.width&&i>=this.y&&i<this.y+this.height}set(e,t,s,r){return this.x=e,this.y=t,this.width=s,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const lp={default:-1};function mt(n="default"){return lp[n]===void 0&&(lp[n]=-1),++lp[n]}const zv=new Set,ft="8.0.0",oD="8.3.4",So={quiet:!1,noColor:!1},Oe=((n,e,t=3)=>{if(So.quiet||zv.has(e))return;let s=new Error().stack;const r=`${e}
Deprecated since v${n}`,i=typeof console.groupCollapsed=="function"&&!So.noColor;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",r):(s=s.split(`
`).splice(t).join(`
`),i?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r),console.warn(s))),zv.add(e)});Object.defineProperties(Oe,{quiet:{get:()=>So.quiet,set:n=>{So.quiet=n},enumerable:!0,configurable:!1},noColor:{get:()=>So.noColor,set:n=>{So.noColor=n},enumerable:!0,configurable:!1}});const xS=()=>{};function Fo(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function jv(n){return!(n&n-1)&&!!n}function vS(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const Uv=Object.create(null);function aD(n){const e=Uv[n];return e===void 0&&(Uv[n]=mt("resource")),e}const wS=class bS extends Os{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...bS.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Oe(ft,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=aD(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};wS.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Vo=wS;const SS=class TS extends Os{constructor(e={}){super(),this.options=e,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=mt("textureSource"),this._resourceType="textureSource",this._resourceId=mt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.viewDimension="2d",this.arrayLayerCount=1,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...TS.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.viewDimension=e.viewDimension??e.dimensions,this.arrayLayerCount=e.arrayLayerCount,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Vo(vS(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){var e,t;this._resourceId=mt("resource"),this.emit("change",this),this.emit("unload",this);for(const s in this._gpuData)(t=(e=this._gpuData[s])==null?void 0:e.destroy)==null||t.call(e);this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const r=Math.round(e*s),i=Math.round(t*s);return this.width=r/s,this.height=i/s,this._resolution=s,this.pixelWidth===r&&this.pixelHeight===i?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=i,this.emit("resize",this),this._resourceId=mt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=jv(this.pixelWidth)&&jv(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};SS.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",viewDimension:"2d",arrayLayerCount:1,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let gs=SS;class mg extends gs{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}mg.extension=Pe.TextureSource;const Wv=new De;class lD{constructor(e,t){this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let r=0;r<e.length;r+=2){const i=e[r],a=e[r+1];t[r]=i*s.a+a*s.c+s.tx,t[r+1]=i*s.b+a*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,r=e.trim;r&&(Wv.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Wv));const i=e.source,a=this.uClampFrame,c=this.clampMargin/i._resolution,u=this.clampOffset/i._resolution;return a[0]=(e.frame.x+c+u)/i.width,a[1]=(e.frame.y+c+u)/i.height,a[2]=(e.frame.x+e.frame.width-c+u)/i.width,a[3]=(e.frame.y+e.frame.height-c+u)/i.height,this.uClampOffset[0]=this.clampOffset/i.pixelWidth,this.uClampOffset[1]=this.clampOffset/i.pixelHeight,this.isSimple=e.frame.width===i.width&&e.frame.height===i.height&&e.rotate===0,!0}}class Le extends Os{constructor({source:e,label:t,frame:s,orig:r,trim:i,defaultAnchor:a,defaultBorders:c,rotate:u,dynamic:h}={}){if(super(),this.uid=mt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new _t,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new gs,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:f,height:p}=this._source;this.frame.width=f,this.frame.height=p}this.orig=r||this.frame,this.trim=i,this.rotate=u??0,this.defaultAnchor=a,this.defaultBorders=c,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new lD(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:r}=this._source,i=t.x/s,a=t.y/r,c=t.width/s,u=t.height/r;let h=this.rotate;if(h){const f=c/2,p=u/2,g=i+f,y=a+p;h=He.add(h,He.NW),e.x0=g+f*He.uX(h),e.y0=y+p*He.uY(h),h=He.add(h,2),e.x1=g+f*He.uX(h),e.y1=y+p*He.uY(h),h=He.add(h,2),e.x2=g+f*He.uX(h),e.y2=y+p*He.uY(h),h=He.add(h,2),e.x3=g+f*He.uX(h),e.y3=y+p*He.uY(h)}else e.x0=i,e.y0=a,e.x1=i+c,e.y1=a,e.x2=i+c,e.y2=a+u,e.x3=i,e.y3=a+u}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Oe(ft,"Texture.baseTexture is now Texture.source"),this._source}}Le.EMPTY=new Le({label:"EMPTY",source:new gs({label:"EMPTY"})});Le.EMPTY.destroy=xS;Le.WHITE=new Le({source:new mg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Le.WHITE.destroy=xS;function CS(n,e,t){const{width:s,height:r}=t.orig,i=t.trim;if(i){const a=i.width,c=i.height;n.minX=i.x-e._x*s,n.maxX=n.minX+a,n.minY=i.y-e._y*r,n.maxY=n.minY+c}else n.minX=-e._x*s,n.maxX=n.minX+s,n.minY=-e._y*r,n.maxY=n.minY+r}const Gv=new De;class Qn{constructor(e=1/0,t=1/0,s=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gv,this.minX=e,this.minY=t,this.maxX=s,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new _t);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gv,this}set(e,t,s,r){this.minX=e,this.minY=t,this.maxX=s,this.maxY=r}addFrame(e,t,s,r,i){i||(i=this.matrix);const a=i.a,c=i.b,u=i.c,h=i.d,f=i.tx,p=i.ty;let g=this.minX,y=this.minY,x=this.maxX,w=this.maxY,v=a*e+u*t+f,S=c*e+h*t+p;v<g&&(g=v),S<y&&(y=S),v>x&&(x=v),S>w&&(w=S),v=a*s+u*t+f,S=c*s+h*t+p,v<g&&(g=v),S<y&&(y=S),v>x&&(x=v),S>w&&(w=S),v=a*e+u*r+f,S=c*e+h*r+p,v<g&&(g=v),S<y&&(y=S),v>x&&(x=v),S>w&&(w=S),v=a*s+u*r+f,S=c*s+h*r+p,v<g&&(g=v),S<y&&(y=S),v>x&&(x=v),S>w&&(w=S),this.minX=g,this.minY=y,this.maxX=x,this.maxY=w}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,r=this.maxX,i=this.maxY,{a,b:c,c:u,d:h,tx:f,ty:p}=e;let g=a*t+u*s+f,y=c*t+h*s+p;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=a*r+u*s+f,y=c*r+h*s+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*t+u*i+f,y=c*t+h*i+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=a*r+u*i+f,y=c*r+h*i+p,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Qn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,r){let i=this.minX,a=this.minY,c=this.maxX,u=this.maxY;r||(r=this.matrix);const h=r.a,f=r.b,p=r.c,g=r.d,y=r.tx,x=r.ty;for(let w=t;w<s;w+=2){const v=e[w],S=e[w+1],T=h*v+p*S+y,C=f*v+g*S+x;i=T<i?T:i,a=C<a?C:a,c=T>c?T:c,u=C>u?C:u}this.minX=i,this.minY=a,this.maxX=c,this.maxY=u}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var cD={grad:.9,turn:360,rad:360/(2*Math.PI)},Ys=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Dt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Yn=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},kS=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Hv=function(n){return{r:Yn(n.r,0,255),g:Yn(n.g,0,255),b:Yn(n.b,0,255),a:Yn(n.a)}},cp=function(n){return{r:Dt(n.r),g:Dt(n.g),b:Dt(n.b),a:Dt(n.a,3)}},uD=/^#([0-9a-f]{3,8})$/i,bu=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},AS=function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=Math.max(e,t,s),a=i-Math.min(e,t,s),c=a?i===e?(t-s)/a:i===t?2+(s-e)/a:4+(e-t)/a:0;return{h:60*(c<0?c+6:c),s:i?a/i*100:0,v:i/255*100,a:r}},MS=function(n){var e=n.h,t=n.s,s=n.v,r=n.a;e=e/360*6,t/=100,s/=100;var i=Math.floor(e),a=s*(1-t),c=s*(1-(e-i)*t),u=s*(1-(1-e+i)*t),h=i%6;return{r:255*[s,c,a,a,u,s][h],g:255*[u,s,s,c,a,a][h],b:255*[a,a,u,s,s,c][h],a:r}},$v=function(n){return{h:kS(n.h),s:Yn(n.s,0,100),l:Yn(n.l,0,100),a:Yn(n.a)}},qv=function(n){return{h:Dt(n.h),s:Dt(n.s),l:Dt(n.l),a:Dt(n.a,3)}},Yv=function(n){return MS((t=(e=n).s,{h:e.h,s:(t*=((s=e.l)<50?s:100-s)/100)>0?2*t/(s+t)*100:0,v:s+t,a:e.a}));var e,t,s},dl=function(n){return{h:(e=AS(n)).h,s:(r=(200-(t=e.s))*(s=e.v)/100)>0&&r<200?t*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,s,r},hD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,em={string:[[function(n){var e=uD.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Dt(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Dt(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=fD.exec(n)||pD.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Hv({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=hD.exec(n)||dD.exec(n);if(!e)return null;var t,s,r=$v({h:(t=e[1],s=e[2],s===void 0&&(s="deg"),Number(t)*(cD[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Yv(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,s=n.b,r=n.a,i=r===void 0?1:r;return Ys(e)&&Ys(t)&&Ys(s)?Hv({r:Number(e),g:Number(t),b:Number(s),a:Number(i)}):null},"rgb"],[function(n){var e=n.h,t=n.s,s=n.l,r=n.a,i=r===void 0?1:r;if(!Ys(e)||!Ys(t)||!Ys(s))return null;var a=$v({h:Number(e),s:Number(t),l:Number(s),a:Number(i)});return Yv(a)},"hsl"],[function(n){var e=n.h,t=n.s,s=n.v,r=n.a,i=r===void 0?1:r;if(!Ys(e)||!Ys(t)||!Ys(s))return null;var a=(function(c){return{h:kS(c.h),s:Yn(c.s,0,100),v:Yn(c.v,0,100),a:Yn(c.a)}})({h:Number(e),s:Number(t),v:Number(s),a:Number(i)});return MS(a)},"hsv"]]},Xv=function(n,e){for(var t=0;t<e.length;t++){var s=e[t][0](n);if(s)return[s,e[t][1]]}return[null,void 0]},mD=function(n){return typeof n=="string"?Xv(n.trim(),em.string):typeof n=="object"&&n!==null?Xv(n,em.object):[null,void 0]},up=function(n,e){var t=dl(n);return{h:t.h,s:Yn(t.s+100*e,0,100),l:t.l,a:t.a}},hp=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Kv=function(n,e){var t=dl(n);return{h:t.h,s:t.s,l:Yn(t.l+100*e,0,100),a:t.a}},tm=(function(){function n(e){this.parsed=mD(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Dt(hp(this.rgba),2)},n.prototype.isDark=function(){return hp(this.rgba)<.5},n.prototype.isLight=function(){return hp(this.rgba)>=.5},n.prototype.toHex=function(){return e=cp(this.rgba),t=e.r,s=e.g,r=e.b,a=(i=e.a)<1?bu(Dt(255*i)):"","#"+bu(t)+bu(s)+bu(r)+a;var e,t,s,r,i,a},n.prototype.toRgb=function(){return cp(this.rgba)},n.prototype.toRgbString=function(){return e=cp(this.rgba),t=e.r,s=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+s+", "+r+", "+i+")":"rgb("+t+", "+s+", "+r+")";var e,t,s,r,i},n.prototype.toHsl=function(){return qv(dl(this.rgba))},n.prototype.toHslString=function(){return e=qv(dl(this.rgba)),t=e.h,s=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+s+"%, "+r+"%, "+i+")":"hsl("+t+", "+s+"%, "+r+"%)";var e,t,s,r,i},n.prototype.toHsv=function(){return e=AS(this.rgba),{h:Dt(e.h),s:Dt(e.s),v:Dt(e.v),a:Dt(e.a,3)};var e},n.prototype.invert=function(){return Cs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Cs(up(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Cs(up(this.rgba,-e))},n.prototype.grayscale=function(){return Cs(up(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Cs(Kv(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Cs(Kv(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Cs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Dt(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=dl(this.rgba);return typeof e=="number"?Cs({h:e,s:t.s,l:t.l,a:t.a}):Dt(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Cs(e).toHex()},n})(),Cs=function(n){return n instanceof tm?n:new tm(n)},Zv=[],gD=function(n){n.forEach(function(e){Zv.indexOf(e)<0&&(e(tm,em),Zv.push(e))})};function yD(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in t)s[t[r]]=r;var i={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,u,h=s[this.toHex()];if(h)return h;if(a!=null&&a.closest){var f=this.toRgb(),p=1/0,g="black";if(!i.length)for(var y in t)i[y]=new n(t[y]).toRgb();for(var x in t){var w=(c=f,u=i[x],Math.pow(c.r-u.r,2)+Math.pow(c.g-u.g,2)+Math.pow(c.b-u.b,2));w<p&&(p=w,g=x)}return g}},e.string.push([function(a){var c=a.toLowerCase(),u=c==="transparent"?"#0000":t[c];return u?new n(u).toRgb():null},"name"])}gD([yD]);const Lo=class rl{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof rl)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,a)=>i===t[a]);if(e!==null&&t!==null){const i=Object.keys(e),a=Object.keys(t);return i.length!==a.length?!1:i.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,s,r]=this._components;return{r:e,g:t,b:s,a:r}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,r,i]=this._components;return e[0]=t,e[1]=s,e[2]=r,e[3]=i,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,r]=this._components;return e[0]=t,e[1]=s,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,r,i]=rl._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=r,this._components[3]*=i,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return t&&(s=s*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(e*255<<24)+(s<<16)+(r<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,r,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,s=(a>>8&255)/255,r=(a&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,r,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,r,i=255]=e,t/=255,s/=255,r/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=rl.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const a=Cs(e);a.isValid()&&({r:t,g:s,b:r,a:i}=a.rgba,t/=255,s/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=r,this._components[3]=i,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((r,i)=>{e[i]=Math.min(Math.max(r,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof rl||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Lo.shared=new Lo;Lo._temp=new Lo;Lo.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Pt=Lo;const _D={cullArea:null,cullable:!1,cullableChildren:!0};let dp=0;const Qv=500;function un(...n){dp!==Qv&&(dp++,dp===Qv?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}const Ll={_registeredResources:new Set,register(n){this._registeredResources.add(n)},unregister(n){this._registeredResources.delete(n)},release(){this._registeredResources.forEach(n=>n.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(n){return this._registeredResources.has(n)},reset(){this._registeredResources.clear()}};class xD{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class vD{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new xD(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const bn=new vD;Ll.register(bn);const wD={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Oe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function bD(n,e,t){const s=n.length;let r;if(e>=s||t===0)return;t=e+t>s?s-e:t;const i=s-t;for(r=e;r<i;++r)n[r]=n[r+t];n.length=i}const SD={allowChildren:!0,removeChildren(n=0,e){var i;const t=e??this.children.length,s=t-n,r=[];if(s>0&&s<=t){for(let c=t-1;c>=n;c--){const u=this.children[c];u&&(r.push(u),u.parent=null)}bD(this.children,n,t);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(r);for(let c=0;c<r.length;++c){const u=r[c];(i=u.parentRenderLayer)==null||i.detach(u),this.emit("childRemoved",u,this,c),r[c].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}else if(s===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||Oe(ft,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const r=n.parent.children.indexOf(n);if(n.parent===this&&r===e)return n;r!==-1&&n.parent.children.splice(r,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=n;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),n.setFromMatrix(t),n},replaceChild(n,e){n.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(n)),e.setFromMatrix(n.localTransform),e.updateLocalTransform(),this.removeChild(n)}},TD={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const s=this.children,r=s.length;for(let i=0;i<r;i++)s[i].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:s}=e;for(let r=0;r<this.effects.length;r++){const i=this.effects[r];s[i.pipe].push(i,this,n)}this.collectRenderablesSimple(n,e,t);for(let r=this.effects.length-1;r>=0;r--){const i=this.effects[r];s[i.pipe].pop(i,this,n)}}};class Jv{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class CD{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return bn.get(s.maskClass,e)}return e}returnMaskEffect(e){bn.return(e)}}const nm=new CD;xt.handleByList(Pe.MaskEffect,nm._effectClasses);const kD={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;(e==null?void 0:e.mask)!==n&&(e&&(this.removeEffect(e),nm.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=nm.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){var i;!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new Jv);n=n;const t=(n==null?void 0:n.length)>0,s=((i=e.filters)==null?void 0:i.length)>0,r=t!==s;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),r&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new Jv),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},AD={label:null,get name(){return Oe(ft,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Oe(ft,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const r=t[s];if(r.label===n||n instanceof RegExp&&n.test(r.label))return r}if(e)for(let s=0;s<t.length;s++){const i=t[s].getChildByLabel(n,!0);if(i)return i}return null},getChildrenByLabel(n,e=!1,t=[]){const s=this.children;for(let r=0;r<s.length;r++){const i=s[r];(i.label===n||n instanceof RegExp&&n.test(i.label))&&t.push(i)}if(e)for(let r=0;r<s.length;r++)s[r].getChildrenByLabel(n,!0,t);return t}},an=bn.getPool(De),Qs=bn.getPool(Qn),MD=new De,PD={getFastGlobalBounds(n,e){e||(e=new Qn),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let s=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(s=Qs.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;s.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const i=this.children;for(let a=0;a<i.length;a++)i[a]._getGlobalBoundsRecursive(n,s,t)}if(r){let i=!1;const a=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(i||(i=!0,s.applyMatrix(a.worldTransform)),this.effects[c].addBounds(s,!0));i&&s.applyMatrix(a.worldTransform.copyTo(MD).invert()),e.addBounds(s),Qs.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),Qs.return(s))}};function PS(n,e,t){t.clear();let s,r;return n.parent?e?s=n.parent.worldTransform:(r=an.get().identity(),s=gg(n,r)):s=De.IDENTITY,ES(n,t,s,e),r&&an.return(r),t.isValid||t.set(0,0,0,0),t}function ES(n,e,t,s){var c,u;if(!n.visible||!n.measurable)return;let r;s?r=n.worldTransform:(n.updateLocalTransform(),r=an.get(),r.appendFrom(n.localTransform,t));const i=e,a=!!n.effects.length;if(a&&(e=Qs.get().clear()),n.boundsArea)e.addRect(n.boundsArea,r);else{const h=n.bounds;h&&!h.isEmpty()&&(e.matrix=r,e.addBounds(h));for(let f=0;f<n.children.length;f++)ES(n.children[f],e,r,s)}if(a){for(let h=0;h<n.effects.length;h++)(u=(c=n.effects[h]).addBounds)==null||u.call(c,e);i.addBounds(e,De.IDENTITY),Qs.return(e)}s||an.return(r)}function gg(n,e){const t=n.parent;return t&&(gg(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function RS(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,s=n>>8&255,r=n&255,i=e>>16&255,a=e>>8&255,c=e&255,u=t*i/255|0,h=s*a/255|0,f=r*c/255|0;return(u<<16)+(h<<8)+f}const ew=16777215;function tw(n,e){return n===ew?e:e===ew?n:RS(n,e)}function zu(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const ED={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n=new De,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=gg(this,an.get().identity());return n.appendFrom(this.localTransform,t),an.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?zu(this.renderGroup.worldColor):this.parentRenderGroup?zu(tw(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=tw(e,t.localColor),t=t.parent;return zu(e)}};function IS(n,e,t){return e.clear(),t||(t=De.IDENTITY),NS(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function NS(n,e,t,s,r){var u,h;let i;if(r)i=an.get(),i=t.copyTo(i);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const f=n.localTransform;i=an.get(),i.appendFrom(f,t)}const a=e,c=!!n.effects.length;if(c&&(e=Qs.get().clear()),n.boundsArea)e.addRect(n.boundsArea,i);else{n.renderPipeId&&(e.matrix=i,e.addBounds(n.bounds));const f=n.children;for(let p=0;p<f.length;p++)NS(f[p],e,i,s,!1)}if(c){for(let f=0;f<n.effects.length;f++)(h=(u=n.effects[f]).addLocalBounds)==null||h.call(u,e,s);a.addBounds(e,De.IDENTITY),Qs.return(e)}an.return(i)}function DS(n,e){const t=n.children;for(let s=0;s<t.length;s++){const r=t[s],i=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,c=e.index;(e.data[c]!==i||e.data[c+1]!==a)&&(e.data[e.index]=i,e.data[e.index+1]=a,e.didChange=!0),e.index=c+2,r.children.length&&DS(r,e)}return e.didChange}const RD=new De,ID={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Qn});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),DS(this,n),n.didChange&&IS(this,n.localBounds,RD),n.localBounds},getBounds(n,e){return PS(this,n,e||new Qn)}},ND={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},DD={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(OD))}};function OD(n,e){return n._zIndex-e._zIndex}const FD={getGlobalPosition(n=new Qt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const s=this.getGlobalTransform(an.get(),t);return e=s.apply(n,e),an.return(s),e},toLocal(n,e,t,s){e&&(n=e.toGlobal(n,t,s));const r=this.getGlobalTransform(an.get(),s);return t=r.applyInverse(n,t),an.return(r),t}};class yg{constructor(){this.uid=mt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let VD=0;class LD{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Vo(this.textureOptions)}createTexture(e,t,s){const r=new gs({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new Le({source:r,label:`texturePool_${VD++}`})}getOptimalTexture(e,t,s=1,r){let i=Math.ceil(e*s-1e-6),a=Math.ceil(t*s-1e-6);i=Fo(i),a=Fo(a);const c=(i<<17)+(a<<1)+(r?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let u=this._texturePool[c].pop();return u||(u=this.createTexture(i,a,r)),u.source._resolution=s,u.source.width=i/s,u.source.height=a/s,u.source.pixelWidth=i,u.source.pixelHeight=a,u.frame.x=0,u.frame.y=0,u.frame.width=e,u.frame.height=t,u.updateUvs(),this._poolKeyHash[u.uid]=c,u}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e,t=!1){const s=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[s].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0)}this._texturePool={}}}const Ps=new LD;Ll.register(Ps);class BD{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new De,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new yg,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const r=t[s];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Ps.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let r=0;r<s.length;r++)this._getChildren(s[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new De),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new De),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new De),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function zD(n,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(n[s]=e[s])}const fp=new Gt(null),Su=new Gt(null),pp=new Gt(null,1,1),Tu=new Gt(null),nw=1,jD=2,mp=4;class Ht extends Os{constructor(e={}){var t,s;super(),this.uid=mt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new De,this.relativeGroupTransform=new De,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Gt(this,0,0),this._scale=pp,this._pivot=Su,this._origin=Tu,this._skew=fp,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],zD(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(r=>this.addChild(r)),(s=e.parent)==null||s.addChild(this)}static mixin(e){Oe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),xt.mixin(Ht,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Oe(ft,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=bn.get(BD,this),this.groupTransform=De.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),bn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new De),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*nD}set angle(e){this.rotation=e*Qp}get pivot(){return this._pivot===Su&&(this._pivot=new Gt(this,0,0)),this._pivot}set pivot(e){this._pivot===Su&&(this._pivot=new Gt(this,0,0),this._origin!==Tu&&un("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===fp&&(this._skew=new Gt(this,0,0)),this._skew}set skew(e){this._skew===fp&&(this._skew=new Gt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===pp&&(this._scale=new Gt(this,1,1)),this._scale}set scale(e){this._scale===pp&&(this._scale=new Gt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Tu&&(this._origin=new Gt(this,0,0)),this._origin}set origin(e){this._origin===Tu&&(this._origin=new Gt(this,0,0),this._pivot!==Su&&un("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,r=this._pivot,i=this._origin,a=this._position,c=s._x,u=s._y,h=r._x,f=r._y,p=-i._x,g=-i._y;t.a=this._cx*c,t.b=this._sx*c,t.c=this._cy*u,t.d=this._sy*u,t.tx=a._x-(h*t.a+f*t.c)+(p*t.a+g*t.c)-p,t.ty=a._y-(h*t.b+f*t.d)+(p*t.b+g*t.d)-g}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=nw,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=Pt.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=nw,this._onUpdate())}get tint(){return zu(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=jD,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mp,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=mp,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=mp,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var r;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let i=0;i<t.length;++i)t[i].destroy(e);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}}xt.mixin(Ht,SD,PD,FD,ND,ID,kD,AD,DD,_D,wD,ED,TD);class _g extends Ht{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Qn(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:r}=e;return s>=t.minX&&s<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){var e;this.emit("unload",this);for(const t in this._gpuData)(e=this._gpuData[t])==null||e.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,s){const{renderPipes:r}=t;r.blendMode.pushBlendMode(this,this.groupBlendMode,e);const a=r[this.renderPipeId];a!=null&&a.addRenderable&&a.addRenderable(this,e),this.didViewUpdate=!1;const c=this.children,u=c.length;for(let h=0;h<u;h++)c[h].collectRenderables(e,t,s);r.blendMode.popBlendMode(e)}}class bl extends _g{constructor(e=Le.EMPTY){e instanceof Le&&(e={texture:e});const{texture:t=Le.EMPTY,anchor:s,roundPixels:r,width:i,height:a,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Gt({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,i!==void 0&&(this.width=i),a!==void 0&&(this.height=a)}static from(e,t=!1){return e instanceof Le?new bl(e):new bl(Le.from(e,t))}set texture(e){e||(e=Le.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return CS(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Oe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:r,height:i}=t.orig;s.minX=-e._x*r,s.maxX=s.minX+r,s.minY=-e._y*i,s.maxY=s.minY+i}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const UD=new Qn;function OS(n,e,t){const s=UD;n.measurable=!0,PS(n,t,s),e.addBoundsMask(s),n.measurable=!1}function FS(n,e,t){const s=Qs.get();n.measurable=!0;const r=an.get().identity(),i=VS(n,t,r);IS(n,s,i),n.measurable=!1,e.addBoundsMask(s),an.return(r),Qs.return(s)}function VS(n,e,t){return n?(n!==e&&(VS(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(un("Mask bounds, renderable is not inside the root container"),t)}class LS{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof bl),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||OS(this.mask,e,t)}addLocalBounds(e,t){FS(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof bl}}LS.extension=Pe.MaskEffect;class BS{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}BS.extension=Pe.MaskEffect;class zS{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){OS(this.mask,e,t)}addLocalBounds(e,t){FS(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof Ht}}zS.extension=Pe.MaskEffect;const WD={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let sw=WD;const Dn={get(){return sw},set(n){sw=n}};class jS extends gs{constructor(e){e.resource||(e.resource=Dn.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const r=super.resize(e,t,s);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}jS.extension=Pe.TextureSource;class Sl extends gs{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Sl.extension=Pe.TextureSource;var Ju=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ju||{});class gp{constructor(e,t=null,s=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const US=class Pn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new gp(null,null,1/0),this.deltaMS=1/Pn.targetFPMS,this.elapsedMS=1/Pn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Ju.NORMAL){return this._addListener(new gp(e,t,s))}addOnce(e,t,s=Ju.NORMAL){return this._addListener(new gp(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Pn.targetFPMS;const s=this._head;let r=s.next;for(;r;)r=r.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,Pn.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Pn._shared){const e=Pn._shared=new Pn;e.autoStart=!0,e._protected=!0}return Pn._shared}static get system(){if(!Pn._system){const e=Pn._system=new Pn;e.autoStart=!0,e._protected=!0}return Pn._system}};US.targetFPMS=.06;let To=US,yp;async function GD(){return yp??(yp=(async()=>{var a;const e=Dn.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(c=>{const u=document.createElement("video");u.onloadeddata=()=>c(u),u.onerror=()=>c(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(r),e.deleteTexture(s),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),i[0]<=i[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),yp}const Sh=class WS extends gs{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...WS.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=To.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await GD(),this._load=new Promise((s,r)=>{this.isValid?s(this):(this._resolve=s,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(To.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(To.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(To.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Sh.extension=Pe.TextureSource;Sh.defaultOptions={...gs.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Sh.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let HD=Sh;const po=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(s=>typeof s=="string"||t?e(s):s):n);class $D{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||un(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=po(e);let r;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.test(t)){r=h.getCacheableAssets(s,t);break}}const i=new Map(Object.entries(r||{}));r||s.forEach(u=>{i.set(u,t)});const a=[...i.keys()],c={cacheKeys:a,keys:s};s.forEach(u=>{this._cacheMap.set(u,c)}),a.forEach(u=>{const h=r?r[u]:t;this._cache.has(u)&&this._cache.get(u)!==h&&un("[Cache] already has key:",u),this._cache.set(u,i.get(u))})}remove(e){if(!this._cacheMap.has(e)){un(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const mo=new $D,sm=[];xt.handleByList(Pe.TextureSource,sm);function GS(n={}){const e=n&&n.resource,t=e?n.resource:n,s=e?n:{resource:n};for(let r=0;r<sm.length;r++){const i=sm[r];if(i.test(t))return new i(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function qD(n={},e=!1){const t=n&&n.resource,s=t?n.resource:n,r=t?n:{resource:n};if(!e&&mo.has(s))return mo.get(s);const i=new Le({source:GS(r)});return i.on("destroy",()=>{mo.has(s)&&mo.remove(s)}),e||mo.set(s,i),i}function YD(n,e=!1){return typeof n=="string"?mo.get(n):n instanceof gs?new Le({source:n}):qD(n,e)}Le.from=YD;gs.from=GS;xt.add(LS,BS,zS,HD,Sl,jS,mg);var HS=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(HS||{});function os(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Ya(n){return n.split("?")[0].split("#")[0]}function XD(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function KD(n,e,t){return n.replace(new RegExp(XD(e),"g"),t)}function ZD(n,e){let t="",s=0,r=-1,i=0,a=-1;for(let c=0;c<=n.length;++c){if(c<n.length)a=n.charCodeAt(c);else{if(a===47)break;a=47}if(a===47){if(!(r===c-1||i===1))if(r!==c-1&&i===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",s=0):(t=t.slice(0,u),s=t.length-1-t.lastIndexOf("/")),r=c,i=0;continue}}else if(t.length===2||t.length===1){t="",s=0,r=c,i=0;continue}}}else t.length>0?t+=`/${n.slice(r+1,c)}`:t=n.slice(r+1,c),s=c-r-1;r=c,i=0}else a===46&&i!==-1?++i:i=-1}return t}const Tl={toPosix(n){return KD(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){os(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(os(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=Ya(this.toPosix(e??Dn.get().getBaseUrl())),r=Ya(this.toPosix(t??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?Tl.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(os(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const s=n.endsWith("/");return n=ZD(n),n.length>0&&s&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return os(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const s=n[t];if(os(s),s.length>0)if(e===void 0)e=s;else{const r=n[t-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(os(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let s=-1,r=!0;const i=this.getProtocol(n),a=n;n=n.slice(i.length);for(let c=n.length-1;c>=1;--c)if(e=n.charCodeAt(c),e===47){if(!r){s=c;break}}else r=!1;return s===-1?t?"/":this.isUrl(a)?i+n:i:t&&s===1?"//":i+n.slice(0,s)},rootname(n){os(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){os(n),e&&os(e),n=Ya(this.toPosix(n));let t=0,s=-1,r=!0,i;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let a=e.length-1,c=-1;for(i=n.length-1;i>=0;--i){const u=n.charCodeAt(i);if(u===47){if(!r){t=i+1;break}}else c===-1&&(r=!1,c=i+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(s=i):(a=-1,s=c))}return t===s?s=c:s===-1&&(s=n.length),n.slice(t,s)}for(i=n.length-1;i>=0;--i)if(n.charCodeAt(i)===47){if(!r){t=i+1;break}}else s===-1&&(r=!1,s=i+1);return s===-1?"":n.slice(t,s)},extname(n){os(n),n=Ya(this.toPosix(n));let e=-1,t=0,s=-1,r=!0,i=0;for(let a=n.length-1;a>=0;--a){const c=n.charCodeAt(a);if(c===47){if(!r){t=a+1;break}continue}s===-1&&(r=!1,s=a+1),c===46?e===-1?e=a:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||s===-1||i===0||i===1&&e===s-1&&e===t+1?"":n.slice(e,s)},parse(n){os(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Ya(this.toPosix(n));let t=n.charCodeAt(0);const s=this.isAbsolute(n);let r;e.root=this.rootname(n),s||this.hasProtocol(n)?r=1:r=0;let i=-1,a=0,c=-1,u=!0,h=n.length-1,f=0;for(;h>=r;--h){if(t=n.charCodeAt(h),t===47){if(!u){a=h+1;break}continue}c===-1&&(u=!1,c=h+1),t===46?i===-1?i=h:f!==1&&(f=1):i!==-1&&(f=-1)}return i===-1||c===-1||f===0||f===1&&i===c-1&&i===a+1?c!==-1&&(a===0&&s?e.base=e.name=n.slice(1,c):e.base=e.name=n.slice(a,c)):(a===0&&s?(e.name=n.slice(1,i),e.base=n.slice(1,c)):(e.name=n.slice(a,i),e.base=n.slice(a,c)),e.ext=n.slice(i,c)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function $S(n,e,t,s,r){const i=e[t];for(let a=0;a<i.length;a++){const c=i[a];t<e.length-1?$S(n.replace(s[t],c),e,t+1,s,r):r.push(n.replace(s[t],c))}}function QD(n){const e=/\{(.*?)\}/g,t=n.match(e),s=[];if(t){const r=[];t.forEach(i=>{const a=i.substring(1,i.length-1).split(",");r.push(a)}),$S(n,r,0,t,s)}else s.push(n);return s}const rw=n=>!Array.isArray(n);class qS{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return po(t||s,i=>typeof i=="string"?i:Array.isArray(i)?i.map(a=>(a==null?void 0:a.src)??a):i!=null&&i.src?i.src:i,!0)}addManifest(e){this._manifest&&un("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let r=t;Array.isArray(t)||(r=Object.entries(t).map(([i,a])=>typeof a=="string"||Array.isArray(a)?{alias:i,src:a}:{alias:i,...a})),r.forEach(i=>{const a=i.src,c=i.alias;let u;if(typeof c=="string"){const h=this._createBundleAssetId(e,c);s.push(h),u=[c,h]}else{const h=c.map(f=>this._createBundleAssetId(e,f));s.push(...h),u=[...c,...h]}this.add({...i,alias:u,src:a})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=i=>{this.hasKey(i)&&un(`[Resolver] already has key: ${i} overwriting`)},po(t).forEach(i=>{const{src:a}=i;let{data:c,format:u,loadParser:h,parser:f}=i;const p=po(a).map(w=>typeof w=="string"?QD(w):Array.isArray(w)?w:[w]),g=this.getAlias(i);Array.isArray(g)?g.forEach(s):s(g);const y=[],x=w=>{const v=this._parsers.find(S=>S.test(w));return{src:w,...v==null?void 0:v.parse(w)}};p.forEach(w=>{w.forEach(v=>{let S={};if(typeof v!="object"?S=x(v):(c=v.data??c,u=v.format??u,(v.loadParser||v.parser)&&(h=v.loadParser??h,f=v.parser??f),S={...x(v.src),...v}),!g)throw new Error(`[Resolver] alias is undefined for this asset: ${S.src}`);S=this._buildResolvedAsset(S,{aliases:g,data:c,format:u,loadParser:h,parser:f,progressSize:i.progressSize}),y.push(S)})}),g.forEach(w=>{this._assetMap[w]=y})})}resolveBundle(e){const t=rw(e);e=po(e);const s={};return e.forEach(r=>{const i=this._bundles[r];if(i){const a=this.resolve(i),c={};for(const u in a){const h=a[u];c[this._extractAssetIdFromBundle(r,u)]=h}s[r]=c}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const r in t)s[r]=t[r].src;return s}return t.src}resolve(e){const t=rw(e);e=po(e);const s={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let i=this._assetMap[r];const a=this._getPreferredOrder(i);a==null||a.priority.forEach(c=>{a.params[c].forEach(u=>{const h=i.filter(f=>f[c]?f[c]===u:!1);h.length&&(i=h)})}),this._resolverHash[r]=i[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});s[r]=this._resolverHash[r]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],r=this._preferredOrder.find(i=>i.params.format.includes(s.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:r,loadParser:i,parser:a,format:c,progressSize:u}=t;return(this._basePath||this._rootPath)&&(e.src=Tl.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=i??e.loadParser,e.parser=a??e.parser,e.format=c??e.format??JD(e.src),u!==void 0&&(e.progressSize=u),e}}qS.RETINA_PREFIX=/@([0-9\.]+)x/;function JD(n){return n.split(".").pop().split("?").shift().split("#").shift()}const iw=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},YS=class il{constructor(e,t){this.linkedSheets=[];let s=e;(e==null?void 0:e.source)instanceof gs&&(s={texture:e,data:t});const{texture:r,data:i,cachePrefix:a=""}=s;this.cachePrefix=a,this._texture=r instanceof Le?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=i;const c=parseFloat(i.meta.scale);c?(this.resolution=c,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=il.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}parseSync(){return this._processFrames(0,!0),this._processAnimations(),this.textures}_processFrames(e,t=!1){let s=e;const r=t?1/0:il.BATCH_SIZE;for(;s-e<r&&s<this._frameKeys.length;){const i=this._frameKeys[s],a=this._frames[i],c=a.frame;if(c){let u=null,h=null;const f=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,p=new _t(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);a.rotated?u=new _t(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):u=new _t(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new _t(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[i]=new Le({source:this.textureSource,frame:u,orig:p,trim:h,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:i.toString()})}s++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const r=e[t][s];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*il.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*il.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};YS.BATCH_SIZE=1e3;let ow=YS;const eO=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function XS(n,e,t){const s={};if(n.forEach(r=>{s[r]=e}),Object.keys(e.textures).forEach(r=>{s[`${e.cachePrefix}${r}`]=e.textures[r]}),!t){const r=Tl.dirname(n[0]);e.linkedSheets.forEach((i,a)=>{const c=XS([`${r}/${e.data.meta.related_multi_packs[a]}`],i,!0);Object.assign(s,c)})}return s}const tO={extension:Pe.Asset,cache:{test:n=>n instanceof ow,getCacheableAssets:(n,e)=>XS(n,e,!1)},resolver:{extension:{type:Pe.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),s=t.pop(),r=t.pop();return s==="json"&&eO.includes(r)},parse:n=>{var t;const e=n.split(".");return{resolution:parseFloat(((t=qS.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Pe.LoadParser,priority:HS.Normal,name:"spritesheetLoader"},async testParse(n,e){return Tl.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){var p,g;const{texture:s,imageFilename:r,textureOptions:i,cachePrefix:a}=(e==null?void 0:e.data)??{};let c=Tl.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let u;if(s instanceof Le)u=s;else{const y=iw(c+(r??n.meta.image),e.src);u=(await t.load([{src:y,data:i}]))[y]}const h=new ow({texture:u.source,data:n,cachePrefix:a});await h.parse();const f=(p=n==null?void 0:n.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(f)){const y=[];for(const w of f){if(typeof w!="string")continue;let v=c+w;(g=e.data)!=null&&g.ignoreMultiPack||(v=iw(v,e.src),y.push(t.load({src:v,data:{textureOptions:i,ignoreMultiPack:!0}})))}const x=await Promise.all(y);h.linkedSheets=x,x.forEach(w=>{w.linkedSheets=[h].concat(h.linkedSheets.filter(v=>v!==w))})}return h},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};xt.add(tO);const _p=Object.create(null),aw=Object.create(null);function xg(n,e){let t=aw[n];return t===void 0&&(_p[e]===void 0&&(_p[e]=1),aw[n]=t=_p[e]++),t}let ho;function KS(){return(!ho||ho!=null&&ho.isContextLost())&&(ho=Dn.get().createCanvas().getContext("webgl",{})),ho}let Cu;function nO(){if(!Cu){Cu="mediump";const n=KS();n&&n.getShaderPrecisionFormat&&(Cu=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Cu}function sO(n,e,t){return e?n:t?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function rO(n,e,t){const s=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let r=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&s!=="highp"&&(r="mediump"),`precision ${r} float;
${n}`}else if(s!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function iO(n,e){return e?`#version 300 es
${n}`:n}const oO={},aO={};function lO(n,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const s=t?oO:aO;return s[e]?(s[e]++,e+=`-${s[e]}`):s[e]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${e}`}
${n}`}function cO(n,e){return e?n.replace("#version 300 es",""):n}const xp={stripVersion:cO,ensurePrecision:rO,addProgramDefines:sO,setProgramName:lO,insertVersion:iO},Xa=Object.create(null),ZS=class rm{constructor(e){e={...rm.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:nO()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let r=e.fragment,i=e.vertex;Object.keys(xp).forEach(a=>{const c=s[a];r=xp[a](r,c,!0),i=xp[a](i,c,!1)}),this.fragment=r,this.vertex=i,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=xg(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Xa[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return Xa[t]||(Xa[t]=new rm(e),Xa[t]._cacheKey=t),Xa[t]}};ZS.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let rr=ZS;const lw={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function uO(n){return lw[n]??lw.float32}const hO={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",vec2i:"sint32x2",vec3i:"sint32x3",vec4i:"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",vec2u:"uint32x2",vec3u:"uint32x3",vec4u:"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"},cw=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|\)|$)/g;function uw(n,e){let t;for(;(t=cw.exec(n))!==null;){const s=hO[t[3]]??"float32";e[t[2]]={location:parseInt(t[1],10),format:s,stride:uO(s).stride,offset:0,instance:!1,start:0}}cw.lastIndex=0}function dO(n){return n.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}function fO({source:n,entryPoint:e}){const t={},s=dO(n),r=s.indexOf(`fn ${e}(`);if(r===-1)return t;const i=s.indexOf("->",r);if(i===-1)return t;const a=s.substring(r,i);if(uw(a,t),Object.keys(t).length===0){const c=a.match(/\(\s*\w+\s*:\s*(\w+)/);if(c){const u=c[1],h=new RegExp(`struct\\s+${u}\\s*\\{([^}]+)\\}`,"s"),f=s.match(h);f&&uw(f[1],t)}}return t}function vp(n){var p,g;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,i=/:\s*([\w<>]+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,h=(p=n.match(e))==null?void 0:p.map(y=>({group:parseInt(y.match(t)[1],10),binding:parseInt(y.match(s)[1],10),name:y.match(r)[2],isUniform:y.match(r)[1]==="<uniform>",type:y.match(i)[1]}));if(!h)return{groups:[],structs:[]};const f=((g=n.match(a))==null?void 0:g.map(y=>{const x=y.match(u)[1],w=y.match(c).reduce((v,S)=>{const[T,C]=S.split(":");return v[T.trim()]=C.trim(),v},{});return w?{name:x,members:w}:null}).filter(({name:y})=>h.some(x=>x.type===y||x.type.includes(`<${y}>`))))??[];return{groups:h,structs:f}}var xi=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(xi||{});function pO({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]=[]),s.isUniform?e[s.group].push({binding:s.binding,visibility:xi.VERTEX|xi.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?e[s.group].push({binding:s.binding,visibility:xi.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"||s.type.startsWith("texture_2d<")?e[s.group].push({binding:s.binding,visibility:xi.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}}):s.type==="texture_2d_array"||s.type.startsWith("texture_2d_array<")?e[s.group].push({binding:s.binding,visibility:xi.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d-array",multisampled:!1}}):(s.type==="texture_cube"||s.type.startsWith("texture_cube<"))&&e[s.group].push({binding:s.binding,visibility:xi.FRAGMENT,texture:{sampleType:"float",viewDimension:"cube",multisampled:!1}})}for(let t=0;t<e.length;t++)e[t]||(e[t]=[]);return e}function mO({groups:n}){const e=[];for(let t=0;t<n.length;t++){const s=n[t];e[s.group]||(e[s.group]={}),e[s.group][s.name]=s.binding}return e}function gO(n,e){const t=new Set,s=new Set,r=[...n.structs,...e.structs].filter(a=>t.has(a.name)?!1:(t.add(a.name),!0)),i=[...n.groups,...e.groups].filter(a=>{const c=`${a.name}-${a.binding}`;return s.has(c)?!1:(s.add(c),!0)});return{structs:r,groups:i}}const Ka=Object.create(null);class ys{constructor(e){var c,u;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:s,layout:r,gpuLayout:i,name:a}=e;if(this.name=a,this.fragment=t,this.vertex=s,t.source===s.source){const h=vp(t.source);this.structsAndGroups=h}else{const h=vp(s.source),f=vp(t.source);this.structsAndGroups=gO(h,f)}this.layout=r??mO(this.structsAndGroups),this.gpuLayout=i??pO(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((u=this.layout[1])==null?void 0:u.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,s=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=xg(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=fO(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Ka[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Ka[t]||(Ka[t]=new ys(e),Ka[t]._cacheKey=t),Ka[t]}}const QS=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],yO=QS.reduce((n,e)=>(n[e]=!0,n),{});function _O(n,e){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const JS=class eT{constructor(e,t){this._touched=0,this.uid=mt("uniform"),this._resourceType="uniformGroup",this._resourceId=mt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...eT.defaultOptions,...t},this.uniformStructures=e;const s={};for(const r in e){const i=e[r];if(i.name=r,i.size=i.size??1,!yO[i.type]){const a=i.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,c,u]=a;throw new Error(`Uniform type ${i.type} is not supported. Use type: '${c}', size: ${u} instead.`)}throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${QS.join(", ")}`)}i.value??(i.value=_O(i.type,i.size)),s[r]=i.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=xg(Object.keys(s).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};JS.defaultOptions={ubo:!1,isStatic:!1};let tT=JS;class ju{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const s in e){const r=e[s];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const s in this.resources)e[t++]=this.resources[s]._resourceId;this._key=e.join("|")}setResource(e,t){var r,i;const s=this.resources[t];e!==s&&(s&&((r=e.off)==null||r.call(e,"change",this.onResourceChange,this)),(i=e.on)==null||i.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,t){const s=this.resources;for(const r in s)s[r]._gcLastUsed=e,s[r]._touched=t}destroy(){var t;const e=this.resources;for(const s in e){const r=e[s];(t=r==null?void 0:r.off)==null||t.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const s in t)t[s]===e&&(t[s]=null)}else this._updateKey()}}var im=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.CANVAS=4]="CANVAS",n[n.BOTH=3]="BOTH",n))(im||{});class Th extends Os{constructor(e){super(),this.uid=mt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:s,groups:r,resources:i,compatibleRenderers:a,groupMap:c}=e;this.gpuProgram=t,this.glProgram=s,a===void 0&&(a=0,t&&(a|=im.WEBGPU),s&&(a|=im.WEBGL)),this.compatibleRenderers=a;const u={};if(!i&&!r&&(i={}),i&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&r&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&r&&c)for(const h in c)for(const f in c[h]){const p=c[h][f];u[p]={group:h,binding:f,name:p}}else if(t&&r&&!c){const h=t.structsAndGroups.groups;c={},h.forEach(f=>{c[f.group]=c[f.group]||{},c[f.group][f.binding]=f.name,u[f.name]=f})}else if(i){r={},c={},t&&t.structsAndGroups.groups.forEach(p=>{c[p.group]=c[p.group]||{},c[p.group][p.binding]=p.name,u[p.name]=p});let h=0;for(const f in i)u[f]||(r[99]||(r[99]=new ju,this._ownedBindGroups.push(r[99])),u[f]={group:99,binding:h,name:f},c[99]=c[99]||{},c[99][h]=f,h++);for(const f in i){const p=f;let g=i[f];!g.source&&!g._resourceType&&(g=new tT(g));const y=u[p];y&&(r[y.group]||(r[y.group]=new ju,this._ownedBindGroups.push(r[y.group])),r[y.group].setResource(g,y.binding))}}this.groups=r,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(r,u)}addResource(e,t,s){var r,i;(r=this._uniformBindMap)[t]||(r[t]={}),(i=this._uniformBindMap[t])[s]||(i[s]=e),this.groups[t]||(this.groups[t]=new ju,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const s={};for(const r in t){const i=t[r];Object.defineProperty(s,i.name,{get(){return e[i.group].getResource(i.binding)},set(a){e[i.group].setResource(a,i.binding)}})}return s}destroy(e=!1){var t,s;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:s,...r}=e;let i,a;return t&&(i=ys.from(t)),s&&(a=rr.from(s)),new Th({gpuProgram:i,glProgram:a,...r})}}const xO={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},wp=0,bp=1,Sp=2,Tp=3,Cp=4,kp=5,om=class nT{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<wp)}set blend(e){!!(this.data&1<<wp)!==e&&(this.data^=1<<wp)}get offsets(){return!!(this.data&1<<bp)}set offsets(e){!!(this.data&1<<bp)!==e&&(this.data^=1<<bp)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Sp)}set culling(e){!!(this.data&1<<Sp)!==e&&(this.data^=1<<Sp)}get depthTest(){return!!(this.data&1<<Tp)}set depthTest(e){!!(this.data&1<<Tp)!==e&&(this.data^=1<<Tp)}get depthMask(){return!!(this.data&1<<kp)}set depthMask(e){!!(this.data&1<<kp)!==e&&(this.data^=1<<kp)}get clockwiseFrontFace(){return!!(this.data&1<<Cp)}set clockwiseFrontFace(e){!!(this.data&1<<Cp)!==e&&(this.data^=1<<Cp)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=xO[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new nT;return e.depthTest=!1,e.blend=!0,e}};om.default2d=om.for2d();let vg=om;const sT=class am extends Th{constructor(e){e={...am.defaultOptions,...e},super(e),this.enabled=!0,this._state=vg.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,t,s,r){e.applyFilter(this,t,s,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:t,gl:s,...r}=e;let i,a;return t&&(i=ys.from(t)),s&&(a=rr.from(s)),new am({gpuProgram:i,glProgram:a,...r})}};sT.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Ko=sT;const lm=[];xt.handleByNamedList(Pe.Environment,lm);async function vO(n){if(!n)for(let e=0;e<lm.length;e++){const t=lm[e];if(t.value.test()){await t.value.load();return}}}let Za;function wO(){if(typeof Za=="boolean")return Za;try{Za=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Za=!1}return Za}function hw(n,e,t=2){const s=e&&e.length,r=s?e[0]*t:n.length;let i=rT(n,0,r,t,!0);const a=[];if(!i||i.next===i.prev)return a;let c,u,h;if(s&&(i=kO(n,e,i,t)),n.length>80*t){c=n[0],u=n[1];let f=c,p=u;for(let g=t;g<r;g+=t){const y=n[g],x=n[g+1];y<c&&(c=y),x<u&&(u=x),y>f&&(f=y),x>p&&(p=x)}h=Math.max(f-c,p-u),h=h!==0?32767/h:0}return Cl(i,a,t,c,u,h,0),a}function rT(n,e,t,s,r){let i;if(r===VO(n,e,t,s)>0)for(let a=e;a<t;a+=s)i=dw(a/s|0,n[a],n[a+1],i);else for(let a=t-s;a>=e;a-=s)i=dw(a/s|0,n[a],n[a+1],i);return i&&Bo(i,i.next)&&(Al(i),i=i.next),i}function Ii(n,e){if(!n)return n;e||(e=n);let t=n,s;do if(s=!1,!t.steiner&&(Bo(t,t.next)||lt(t.prev,t,t.next)===0)){if(Al(t),t=e=t.prev,t===t.next)break;s=!0}else t=t.next;while(s||t!==e);return e}function Cl(n,e,t,s,r,i,a){if(!n)return;!a&&i&&RO(n,s,r,i);let c=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(i?SO(n,s,r,i):bO(n)){e.push(u.i,n.i,h.i),Al(n),n=h.next,c=h.next;continue}if(n=h,n===c){a?a===1?(n=TO(Ii(n),e),Cl(n,e,t,s,r,i,2)):a===2&&CO(n,e,t,s,r,i):Cl(Ii(n),e,t,s,r,i,1);break}}}function bO(n){const e=n.prev,t=n,s=n.next;if(lt(e,t,s)>=0)return!1;const r=e.x,i=t.x,a=s.x,c=e.y,u=t.y,h=s.y,f=Math.min(r,i,a),p=Math.min(c,u,h),g=Math.max(r,i,a),y=Math.max(c,u,h);let x=s.next;for(;x!==e;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=y&&ol(r,c,i,u,a,h,x.x,x.y)&&lt(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function SO(n,e,t,s){const r=n.prev,i=n,a=n.next;if(lt(r,i,a)>=0)return!1;const c=r.x,u=i.x,h=a.x,f=r.y,p=i.y,g=a.y,y=Math.min(c,u,h),x=Math.min(f,p,g),w=Math.max(c,u,h),v=Math.max(f,p,g),S=cm(y,x,e,t,s),T=cm(w,v,e,t,s);let C=n.prevZ,P=n.nextZ;for(;C&&C.z>=S&&P&&P.z<=T;){if(C.x>=y&&C.x<=w&&C.y>=x&&C.y<=v&&C!==r&&C!==a&&ol(c,f,u,p,h,g,C.x,C.y)&&lt(C.prev,C,C.next)>=0||(C=C.prevZ,P.x>=y&&P.x<=w&&P.y>=x&&P.y<=v&&P!==r&&P!==a&&ol(c,f,u,p,h,g,P.x,P.y)&&lt(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;C&&C.z>=S;){if(C.x>=y&&C.x<=w&&C.y>=x&&C.y<=v&&C!==r&&C!==a&&ol(c,f,u,p,h,g,C.x,C.y)&&lt(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;P&&P.z<=T;){if(P.x>=y&&P.x<=w&&P.y>=x&&P.y<=v&&P!==r&&P!==a&&ol(c,f,u,p,h,g,P.x,P.y)&&lt(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function TO(n,e){let t=n;do{const s=t.prev,r=t.next.next;!Bo(s,r)&&oT(s,t,t.next,r)&&kl(s,r)&&kl(r,s)&&(e.push(s.i,t.i,r.i),Al(t),Al(t.next),t=n=r),t=t.next}while(t!==n);return Ii(t)}function CO(n,e,t,s,r,i){let a=n;do{let c=a.next.next;for(;c!==a.prev;){if(a.i!==c.i&&DO(a,c)){let u=aT(a,c);a=Ii(a,a.next),u=Ii(u,u.next),Cl(a,e,t,s,r,i,0),Cl(u,e,t,s,r,i,0);return}c=c.next}a=a.next}while(a!==n)}function kO(n,e,t,s){const r=[];for(let i=0,a=e.length;i<a;i++){const c=e[i]*s,u=i<a-1?e[i+1]*s:n.length,h=rT(n,c,u,s,!1);h===h.next&&(h.steiner=!0),r.push(NO(h))}r.sort(AO);for(let i=0;i<r.length;i++)t=MO(r[i],t);return t}function AO(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const s=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=s-r}return t}function MO(n,e){const t=PO(n,e);if(!t)return e;const s=aT(t,n);return Ii(s,s.next),Ii(t,t.next)}function PO(n,e){let t=e;const s=n.x,r=n.y;let i=-1/0,a;if(Bo(n,t))return t;do{if(Bo(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,a=t.x<t.next.x?t:t.next,p===s))return a}t=t.next}while(t!==e);if(!a)return null;const c=a,u=a.x,h=a.y;let f=1/0;t=a;do{if(s>=t.x&&t.x>=u&&s!==t.x&&iT(r<h?s:i,r,u,h,r<h?i:s,r,t.x,t.y)){const p=Math.abs(r-t.y)/(s-t.x);kl(t,n)&&(p<f||p===f&&(t.x>a.x||t.x===a.x&&EO(a,t)))&&(a=t,f=p)}t=t.next}while(t!==c);return a}function EO(n,e){return lt(n.prev,n,e.prev)<0&&lt(e.next,n,n.next)<0}function RO(n,e,t,s){let r=n;do r.z===0&&(r.z=cm(r.x,r.y,e,t,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,IO(r)}function IO(n){let e,t=1;do{let s=n,r;n=null;let i=null;for(e=0;s;){e++;let a=s,c=0;for(let h=0;h<t&&(c++,a=a.nextZ,!!a);h++);let u=t;for(;c>0||u>0&&a;)c!==0&&(u===0||!a||s.z<=a.z)?(r=s,s=s.nextZ,c--):(r=a,a=a.nextZ,u--),i?i.nextZ=r:n=r,r.prevZ=i,i=r;s=a}i.nextZ=null,t*=2}while(e>1);return n}function cm(n,e,t,s,r){return n=(n-t)*r|0,e=(e-s)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function NO(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function iT(n,e,t,s,r,i,a,c){return(r-a)*(e-c)>=(n-a)*(i-c)&&(n-a)*(s-c)>=(t-a)*(e-c)&&(t-a)*(i-c)>=(r-a)*(s-c)}function ol(n,e,t,s,r,i,a,c){return!(n===a&&e===c)&&iT(n,e,t,s,r,i,a,c)}function DO(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!OO(n,e)&&(kl(n,e)&&kl(e,n)&&FO(n,e)&&(lt(n.prev,n,e.prev)||lt(n,e.prev,e))||Bo(n,e)&&lt(n.prev,n,n.next)>0&&lt(e.prev,e,e.next)>0)}function lt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Bo(n,e){return n.x===e.x&&n.y===e.y}function oT(n,e,t,s){const r=Au(lt(n,e,t)),i=Au(lt(n,e,s)),a=Au(lt(t,s,n)),c=Au(lt(t,s,e));return!!(r!==i&&a!==c||r===0&&ku(n,t,e)||i===0&&ku(n,s,e)||a===0&&ku(t,n,s)||c===0&&ku(t,e,s))}function ku(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Au(n){return n>0?1:n<0?-1:0}function OO(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&oT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function kl(n,e){return lt(n.prev,n,n.next)<0?lt(n,e,n.next)>=0&&lt(n,n.prev,e)>=0:lt(n,e,n.prev)<0||lt(n,n.next,e)<0}function FO(n,e){let t=n,s=!1;const r=(n.x+e.x)/2,i=(n.y+e.y)/2;do t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==n);return s}function aT(n,e){const t=um(n.i,n.x,n.y),s=um(e.i,e.x,e.y),r=n.next,i=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,s.next=t,t.prev=s,i.next=s,s.prev=i,s}function dw(n,e,t,s){const r=um(n,e,t);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Al(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function um(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function VO(n,e,t,s){let r=0;for(let i=e,a=t-s;i<t;i+=s)r+=(n[a]-n[i])*(n[i+1]+n[a+1]),a=i;return r}const LO=hw.default||hw;var lT=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(lT||{});class BO{constructor(e){this.items=[],this._name=e}emit(e,t,s,r,i,a,c,u){const{name:h,items:f}=this;for(let p=0,g=f.length;p<g;p++)f[p][h](e,t,s,r,i,a,c,u);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const zO=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],cT=class uT extends Os{constructor(e){super(),this.tick=0,this.uid=mt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...zO,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await vO(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...uT.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){this.tick++;let s=e;if(s instanceof Ht&&(s={container:s},t&&(Oe(ft,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const r=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=r?s.clearColor:Pt.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.visible&&(s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s))}resize(e,t,s){const r=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==r&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=lT.ALL);const{clear:s,clearColor:r,target:i,mipLevel:a,layer:c}=e;Pt.shared.setValue(r??this.background.colorRgba),t.renderTarget.clear(i,s,Pt.shared.toArray(),a??0,c??0)}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new BO(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const r in this.runners)this.runners[r].add(s);return this}_addPipes(e,t){const s=t.reduce((r,i)=>(r[i.name]=i.value,r),{});e.forEach(r=>{const i=r.value,a=r.name,c=s[a];this.renderPipes[a]=new i(this,c?new c:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Ll.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!wO())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};cT.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let hT=cT,Mu;function jO(n){return Mu!==void 0||(Mu=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:n??hT.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Dn.get().getWebGLRenderingContext())return!1;let r=Dn.get().createCanvas().getContext("webgl",e);const i=!!((t=r==null?void 0:r.getContextAttributes())!=null&&t.stencil);if(r){const a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,i}catch{return!1}})()),Mu}let Pu;async function UO(n={}){return Pu!==void 0||(Pu=await(async()=>{const e=Dn.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Pu}const fw=["webgl","webgpu","canvas"];async function WO(n){let e=[];n.preference?(e.push(n.preference),fw.forEach(i=>{i!==n.preference&&e.push(i)})):e=fw.slice();let t,s={};for(let i=0;i<e.length;i++){const a=e[i];if(a==="webgpu"&&await UO()){const{WebGPURenderer:c}=await hl(async()=>{const{WebGPURenderer:u}=await import("./WebGPURenderer-CenFx7v_.js");return{WebGPURenderer:u}},__vite__mapDeps([2,3,4]));t=c,s={...n,...n.webgpu};break}else if(a==="webgl"&&jO(n.failIfMajorPerformanceCaveat??hT.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await hl(async()=>{const{WebGLRenderer:u}=await import("./WebGLRenderer-DZVlCGLZ.js");return{WebGLRenderer:u}},__vite__mapDeps([5,3,4]));t=c,s={...n,...n.webgl};break}else if(a==="canvas"){const{CanvasRenderer:c}=await hl(async()=>{const{CanvasRenderer:u}=await import("./CanvasRenderer-Dw4gBYCm.js");return{CanvasRenderer:u}},__vite__mapDeps([6,4]));t=c,s={...n,...n.canvasOptions};break}}if(delete s.webgpu,delete s.webgl,delete s.canvasOptions,!t)throw new Error("No available renderer for the current environment");const r=new t;return await r.init(s),r}const dT="8.16.0";class fT{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,dT)}static destroy(){}}fT.extension=Pe.Application;class GO{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,dT)}destroy(){this._renderer=null}}GO.extension={type:[Pe.WebGLSystem,Pe.WebGPUSystem],name:"initHook",priority:-10};class pT{static init(e){Object.defineProperty(this,"resizeTo",{configurable:!0,set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,s;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:i}=this._resizeTo;t=r,s=i}this.renderer.resize(t,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}pT.extension=Pe.Application;class mT{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{configurable:!0,set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ju.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?To.shared:new To,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}mT.extension=Pe.Application;xt.add(pT);xt.add(mT);const gT=class hm{constructor(...e){this.stage=new Ht,e[0]!==void 0&&Oe(ft,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new Ht),this.renderer=await WO(e),hm._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Oe(ft,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=hm._plugins.slice(0);s.reverse(),s.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};gT._plugins=[];let yT=gT;xt.handleByList(Pe.Application,yT._plugins);xt.add(fT);var Ap,pw;function HO(){if(pw)return Ap;pw=1,Ap=t;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(i){var a=[];return i.replace(e,function(c,u,h){var f=u.toLowerCase();for(h=r(h),f=="m"&&h.length>2&&(a.push([u].concat(h.splice(0,2))),f="l",u=u=="m"?"l":"L");;){if(h.length==n[f])return h.unshift(u),a.push(h);if(h.length<n[f])throw new Error("malformed path data");a.push([u].concat(h.splice(0,n[f])))}}),a}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(i){var a=i.match(s);return a?a.map(Number):[]}return Ap}var $O=HO();const qO=Em($O);function YO(n,e){const t=qO(n),s=[];let r=null,i=0,a=0;for(let c=0;c<t.length;c++){const u=t[c],h=u[0],f=u;switch(h){case"M":i=f[1],a=f[2],e.moveTo(i,a);break;case"m":i+=f[1],a+=f[2],e.moveTo(i,a);break;case"H":i=f[1],e.lineTo(i,a);break;case"h":i+=f[1],e.lineTo(i,a);break;case"V":a=f[1],e.lineTo(i,a);break;case"v":a+=f[1],e.lineTo(i,a);break;case"L":i=f[1],a=f[2],e.lineTo(i,a);break;case"l":i+=f[1],a+=f[2],e.lineTo(i,a);break;case"C":i=f[5],a=f[6],e.bezierCurveTo(f[1],f[2],f[3],f[4],i,a);break;case"c":e.bezierCurveTo(i+f[1],a+f[2],i+f[3],a+f[4],i+f[5],a+f[6]),i+=f[5],a+=f[6];break;case"S":i=f[3],a=f[4],e.bezierCurveToShort(f[1],f[2],i,a);break;case"s":e.bezierCurveToShort(i+f[1],a+f[2],i+f[3],a+f[4]),i+=f[3],a+=f[4];break;case"Q":i=f[3],a=f[4],e.quadraticCurveTo(f[1],f[2],i,a);break;case"q":e.quadraticCurveTo(i+f[1],a+f[2],i+f[3],a+f[4]),i+=f[3],a+=f[4];break;case"T":i=f[1],a=f[2],e.quadraticCurveToShort(i,a);break;case"t":i+=f[1],a+=f[2],e.quadraticCurveToShort(i,a);break;case"A":i=f[6],a=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],i,a);break;case"a":i+=f[6],a+=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],i,a);break;case"Z":case"z":e.closePath(),s.length>0&&(r=s.pop(),r?(i=r.startX,a=r.startY):(i=0,a=0)),r=null;break;default:un(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&r===null&&(r={startX:i,startY:a},s.push(r))}return e}class wg{constructor(e=0,t=0,s=0){this.type="circle",this.x=e,this.y=t,this.radius=s}clone(){return new wg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-e,i=this.y-t;return r*=r,i*=i,r+i<=s}strokeContains(e,t,s,r=.5){if(this.radius===0)return!1;const i=this.x-e,a=this.y-t,c=this.radius,u=(1-r)*s,h=Math.sqrt(i*i+a*a);return h<=c+u&&h>c-(s-u)}getBounds(e){return e||(e=new _t),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class bg{constructor(e=0,t=0,s=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=s,this.halfHeight=r}clone(){return new bg(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return s*=s,r*=r,s+r<=1}strokeContains(e,t,s,r=.5){const{halfWidth:i,halfHeight:a}=this;if(i<=0||a<=0)return!1;const c=s*(1-r),u=s-c,h=i-u,f=a-u,p=i+c,g=a+c,y=e-this.x,x=t-this.y,w=y*y/(h*h)+x*x/(f*f),v=y*y/(p*p)+x*x/(g*g);return w>1&&v<=1}getBounds(e){return e||(e=new _t),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function XO(n,e,t,s,r,i){const a=n-t,c=e-s,u=r-t,h=i-s,f=a*u+c*h,p=u*u+h*h;let g=-1;p!==0&&(g=f/p);let y,x;g<0?(y=t,x=s):g>1?(y=r,x=i):(y=t+g*u,x=s+g*h);const w=n-y,v=e-x;return w*w+v*v}let KO,ZO;class fl{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const s=[];for(let r=0,i=t.length;r<i;r++)s.push(t[r].x,t[r].y);t=s}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,s=t.length;for(let r=0;r<s;r+=2){const i=t[r],a=t[r+1],c=t[(r+2)%s],u=t[(r+3)%s];e+=(c-i)*(u+a)}return e<0}containsPolygon(e){const t=this.getBounds(KO),s=e.getBounds(ZO);if(!t.containsRect(s))return!1;const r=e.points;for(let i=0;i<r.length;i+=2){const a=r[i],c=r[i+1];if(!this.contains(a,c))return!1}return!0}clone(){const e=this.points.slice(),t=new fl(e);return t.closePath=this.closePath,t}contains(e,t){let s=!1;const r=this.points.length/2;for(let i=0,a=r-1;i<r;a=i++){const c=this.points[i*2],u=this.points[i*2+1],h=this.points[a*2],f=this.points[a*2+1];u>t!=f>t&&e<(h-c)*((t-u)/(f-u))+c&&(s=!s)}return s}strokeContains(e,t,s,r=.5){const i=s*s,a=i*(1-r),c=i-a,{points:u}=this,h=u.length-(this.closePath?0:2);for(let f=0;f<h;f+=2){const p=u[f],g=u[f+1],y=u[(f+2)%u.length],x=u[(f+3)%u.length],w=XO(e,t,p,g,y,x),v=Math.sign((y-p)*(t-g)-(x-g)*(e-p));if(w<=(v<0?c:a))return!0}return!1}getBounds(e){e||(e=new _t);const t=this.points;let s=1/0,r=-1/0,i=1/0,a=-1/0;for(let c=0,u=t.length;c<u;c+=2){const h=t[c],f=t[c+1];s=h<s?h:s,r=h>r?h:r,i=f<i?f:i,a=f>a?f:a}return e.x=s,e.width=r-s,e.y=i,e.height=a-i,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Oe("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Oe("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Eu=(n,e,t,s,r,i,a)=>{const c=n-t,u=e-s,h=Math.sqrt(c*c+u*u);return h>=r-i&&h<=r+a};class Sg{constructor(e=0,t=0,s=0,r=0,i=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=s,this.height=r,this.radius=i}getBounds(e){return e||(e=new _t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Sg(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+s&&t<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let r=e-(this.x+s),i=t-(this.y+s);const a=s*s;if(r*r+i*i<=a||(r=e-(this.x+this.width-s),r*r+i*i<=a)||(i=t-(this.y+this.height-s),r*r+i*i<=a)||(r=e-(this.x+s),r*r+i*i<=a))return!0}return!1}strokeContains(e,t,s,r=.5){const{x:i,y:a,width:c,height:u,radius:h}=this,f=s*(1-r),p=s-f,g=i+h,y=a+h,x=c-h*2,w=u-h*2,v=i+c,S=a+u;return(e>=i-f&&e<=i+p||e>=v-p&&e<=v+f)&&t>=y&&t<=y+w||(t>=a-f&&t<=a+p||t>=S-p&&t<=S+f)&&e>=g&&e<=g+x?!0:e<g&&t<y&&Eu(e,t,g,y,h,p,f)||e>v-h&&t<y&&Eu(e,t,v-h,y,h,p,f)||e>v-h&&t>S-h&&Eu(e,t,v-h,S-h,h,p,f)||e<g&&t>S-h&&Eu(e,t,g,S-h,h,p,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const _T={};function QO(n,e,t){let s=2166136261;for(let r=0;r<e;r++)s^=n[r].uid,s=Math.imul(s,16777619),s>>>=0;return _T[s]||JO(n,e,s,t)}function JO(n,e,t,s){const r={};let i=0;for(let c=0;c<s;c++){const u=c<e?n[c]:Le.EMPTY.source;r[i++]=u.source,r[i++]=u.style}const a=new ju(r);return _T[t]=a,a}class mw{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function gw(n,e,t,s){if(t??(t=0),s??(s=Math.min(n.byteLength-t,e.byteLength)),!(t&7)&&!(s&7)){const r=s/8;new Float64Array(e,0,r).set(new Float64Array(n,t,r))}else if(!(t&3)&&!(s&3)){const r=s/4;new Float32Array(e,0,r).set(new Float32Array(n,t,r))}else new Uint8Array(e).set(new Uint8Array(n,t,s))}const eF={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var tF=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(tF||{});function yw(n,e){return e.alphaMode==="no-premultiply-alpha"&&eF[n]||n}const nF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function sF(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function rF(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=nF.replace(/%forloop%/gi,sF(n));if(e.shaderSource(t,s),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}}finally{e.deleteShader(t)}return n}let fo=null;function iF(){var e;if(fo)return fo;const n=KS();return fo=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),fo=rF(fo,n),(e=n.getExtension("WEBGL_lose_context"))==null||e.loseContext(),fo}class oF{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class aF{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new oF,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null,this.elements=null}}const pl=[];let eh=0;Ll.register({clear:()=>{if(pl.length>0)for(const n of pl)n&&n.destroy();pl.length=0,eh=0}});function _w(){return eh>0?pl[--eh]:new aF}function xw(n){n.elements=null,pl[eh++]=n}let Qa=0;const xT=class vT{constructor(e){this.uid=mt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...vT.defaultOptions,...e},e.maxTextures||(Oe("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=iF());const{maxTextures:t,attributesInitialSize:s,indicesInitialSize:r}=e;this.attributeBuffer=new mw(s*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)xw(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const s=e._batch.textures.ids[t._source.uid];return!s&&s!==0?!1:(e._textureId=s,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let s=_w(),r=s.textures;r.clear();const i=t[this.elementStart];let a=yw(i.blendMode,i.texture._source),c=i.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,f=this.indexBuffer;let p=this._batchIndexSize,g=this._batchIndexStart,y="startBatch",x=[];const w=this.maxTextures;for(let v=this.elementStart;v<this.elementSize;++v){const S=t[v];t[v]=null;const C=S.texture._source,P=yw(S.blendMode,C),k=a!==P||c!==S.topology;if(C._batchTick===Qa&&!k){S._textureId=C._textureBindLocation,p+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,u,h,S._attributeStart,S._textureId),this.packQuadIndex(f,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,u,h,S._attributeStart,S._textureId),this.packIndex(S,f,S._indexStart,S._attributeStart/this.vertexSize)),S._batch=s,x.push(S);continue}C._batchTick=Qa,(r.count>=w||k)&&(this._finishBatch(s,g,p-g,r,a,c,e,y,x),y="renderBatch",g=p,a=P,c=S.topology,s=_w(),r=s.textures,r.clear(),x=[],++Qa),S._textureId=C._textureBindLocation=r.count,r.ids[C.uid]=r.count,r.textures[r.count++]=C,S._batch=s,x.push(S),p+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,u,h,S._attributeStart,S._textureId),this.packQuadIndex(f,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,u,h,S._attributeStart,S._textureId),this.packIndex(S,f,S._indexStart,S._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(s,g,p-g,r,a,c,e,y,x),g=p,++Qa),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=p}_finishBatch(e,t,s,r,i,a,c,u,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=u,e.batcher=this,e.textures=r,e.blendMode=i,e.topology=a,e.start=t,e.size=s,e.elements=h,++Qa,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),s=new mw(t);gw(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(e){const t=this.indexBuffer;let s=Math.max(e,t.length*1.5);s+=s%2;const r=s>65535?new Uint32Array(s):new Uint16Array(s);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let i=0;i<t.length;i++)r[i]=t[i];else gw(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,s){e[t]=s+0,e[t+1]=s+1,e[t+2]=s+2,e[t+3]=s+0,e[t+4]=s+2,e[t+5]=s+3}packIndex(e,t,s,r){const i=e.indices,a=e.indexSize,c=e.indexOffset,u=e.attributeOffset;for(let h=0;h<a;h++)t[s++]=r+i[h+c]-u}destroy(e={}){var t;if(this.batches!==null){for(let s=0;s<this.batchIndex;s++)xw(this.batches[s]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((t=this.shader)==null||t.destroy(),this.shader=null);for(let s=0;s<this._elements.length;s++)this._elements[s]&&(this._elements[s]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};xT.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let lF=xT;var xn=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(xn||{});class Ml extends Os{constructor(e){let{data:t,size:s}=e;const{usage:r,label:i,shrinkToFit:a}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=mt("buffer"),this._resourceType="buffer",this._resourceId=mt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,s??(s=t==null?void 0:t.byteLength);const c=!!t;this.descriptor={size:s,usage:r,mappedAtCreation:c,label:i},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&xn.STATIC)}set static(e){e?this.descriptor.usage|=xn.STATIC:this.descriptor.usage&=~xn.STATIC}setDataWithSize(e,t,s){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){s&&this.emit("update",this);return}const r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?s&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=mt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){var e;this.emit("unload",this);for(const t in this._gpuData)(e=this._gpuData[t])==null||e.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function wT(n,e){if(!(n instanceof Ml)){let t=e?xn.INDEX:xn.VERTEX;n instanceof Array&&(e?(n=new Uint32Array(n),t=xn.INDEX|xn.COPY_DST):(n=new Float32Array(n),t=xn.VERTEX|xn.COPY_DST)),n=new Ml({data:n,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return n}function cF(n,e,t){const s=n.getAttribute(e);if(!s)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const r=s.buffer.data;let i=1/0,a=1/0,c=-1/0,u=-1/0;const h=r.BYTES_PER_ELEMENT,f=(s.offset||0)/h,p=(s.stride||8)/h;for(let g=f;g<r.length;g+=p){const y=r[g],x=r[g+1];y>c&&(c=y),x>u&&(u=x),y<i&&(i=y),x<a&&(a=x)}return t.minX=i,t.minY=a,t.maxX=c,t.maxY=u,t}function uF(n){return(n instanceof Ml||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=wT(n.buffer,!1),n}class hF extends Os{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=mt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Qn,this._boundsDirty=!0;const{attributes:t,indexBuffer:s,topology:r}=e;if(this.buffers=[],this.attributes={},t)for(const i in t)this.addAttribute(i,t[i]);this.instanceCount=e.instanceCount??1,s&&this.addIndex(s),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const s=uF(t);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=s}addIndex(e){this.indexBuffer=wT(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,cF(this,"aPosition",this._bounds)):this._bounds}unload(){var e;this.emit("unload",this);for(const t in this._gpuData)(e=this._gpuData[t])==null||e.destroy();this._gpuData=Object.create(null)}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(s=>s.destroy()),this.unload(),(t=this.indexBuffer)==null||t.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const dF=new Float32Array(1),fF=new Uint32Array(1);class pF extends hF{constructor(){const t=new Ml({data:dF,label:"attribute-batch-buffer",usage:xn.VERTEX|xn.COPY_DST,shrinkToFit:!1}),s=new Ml({data:fF,label:"index-batch-buffer",usage:xn.INDEX|xn.COPY_DST,shrinkToFit:!1}),r=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:r,offset:0},aUV:{buffer:t,format:"float32x2",stride:r,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:r,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:r,offset:20}},indexBuffer:s})}}function vw(n,e,t){if(n)for(const s in n){const r=s.toLocaleLowerCase(),i=e[r];if(i){let a=n[s];s==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&i.push(`//----${t}----//`),i.push(a)}else un(`${s} placement hook does not exist in shader`)}}const mF=/\{\{(.*?)\}\}/g;function ww(n){var s;const e={};return(((s=n.match(mF))==null?void 0:s.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{e[r]=[]}),e}function bw(n,e){let t;const s=/@in\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function Sw(n,e,t=!1){const s=[];bw(e,s),n.forEach(c=>{c.header&&bw(c.header,s)});const r=s;t&&r.sort();const i=r.map((c,u)=>`       @location(${u}) ${c},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${i}
`),a}function Tw(n,e){let t;const s=/@out\s+([^;]+);/g;for(;(t=s.exec(n))!==null;)e.push(t[1])}function gF(n){const t=/\b(\w+)\s*:/g.exec(n);return t?t[1]:""}function yF(n){const e=/@.*?\s+/g;return n.replace(e,"")}function _F(n,e){const t=[];Tw(e,t),n.forEach(u=>{u.header&&Tw(u.header,t)});let s=0;const r=t.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${s++}) ${u}`).join(`,
`),i=t.sort().map(u=>`       var ${yF(u)};`).join(`
`),a=`return VSOutput(
            ${t.sort().map(u=>` ${gF(u)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${r}
`),c=c.replace("{{start}}",`
${i}
`),c=c.replace("{{return}}",`
${a}
`),c}function Cw(n,e){let t=n;for(const s in e){const r=e[s];r.join(`
`).length?t=t.replace(`{{${s}}}`,`//-----${s} START-----//
${r.join(`
`)}
//----${s} FINISH----//`):t=t.replace(`{{${s}}}`,"")}return t}const Vr=Object.create(null),Mp=new Map;let xF=0;function vF({template:n,bits:e}){const t=bT(n,e);if(Vr[t])return Vr[t];const{vertex:s,fragment:r}=bF(n,e);return Vr[t]=ST(s,r,e),Vr[t]}function wF({template:n,bits:e}){const t=bT(n,e);return Vr[t]||(Vr[t]=ST(n.vertex,n.fragment,e)),Vr[t]}function bF(n,e){const t=e.map(a=>a.vertex).filter(a=>!!a),s=e.map(a=>a.fragment).filter(a=>!!a);let r=Sw(t,n.vertex,!0);r=_F(t,r);const i=Sw(s,n.fragment,!0);return{vertex:r,fragment:i}}function bT(n,e){return e.map(t=>(Mp.has(t)||Mp.set(t,xF++),Mp.get(t))).sort((t,s)=>t-s).join("-")+n.vertex+n.fragment}function ST(n,e,t){const s=ww(n),r=ww(e);return t.forEach(i=>{vw(i.vertex,s,i.name),vw(i.fragment,r,i.name)}),{vertex:Cw(n,s),fragment:Cw(e,r)}}const SF=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,TF=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,CF=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,kF=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,AF={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},MF={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function PF({bits:n,name:e}){const t=vF({template:{fragment:TF,vertex:SF},bits:[AF,...n]});return ys.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function EF({bits:n,name:e}){return new rr({name:e,...wF({template:{vertex:CF,fragment:kF},bits:[MF,...n]})})}const RF={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},IF={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Pp={};function NF(n){const e=[];if(n===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let s=0;s<n;s++)e.push(`@group(1) @binding(${t++}) var textureSource${s+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${s+1}: sampler;`)}return e.join(`
`)}function DF(n){const e=[];if(n===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<n;t++)t===n-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function OF(n){return Pp[n]||(Pp[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${NF(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${DF(n)}
            `}}),Pp[n]}const Ep={};function FF(n){const e=[];for(let t=0;t<n;t++)t>0&&e.push("else"),t<n-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function VF(n){return Ep[n]||(Ep[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${FF(n)}
            `}}),Ep[n]}const LF={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},BF={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},kw={};function zF(n){let e=kw[n];if(e)return e;const t=new Int32Array(n);for(let s=0;s<n;s++)t[s]=s;return e=kw[n]=new tT({uTextures:{value:t,type:"i32",size:n}},{isStatic:!0}),e}class Aw extends Th{constructor(e){const t=EF({name:"batch",bits:[IF,VF(e),BF]}),s=PF({name:"batch",bits:[RF,OF(e),LF]});super({glProgram:t,gpuProgram:s,resources:{batchSamplers:zF(e)}}),this.maxTextures=e}}let Ja=null;const TT=class CT extends lF{constructor(e){super(e),this.geometry=new pF,this.name=CT.extension.name,this.vertexSize=6,Ja??(Ja=new Aw(e.maxTextures)),this.shader=Ja}packAttributes(e,t,s,r,i){const a=i<<16|e.roundPixels&65535,c=e.transform,u=c.a,h=c.b,f=c.c,p=c.d,g=c.tx,y=c.ty,{positions:x,uvs:w}=e,v=e.color,S=e.attributeOffset,T=S+e.attributeSize;for(let C=S;C<T;C++){const P=C*2,k=x[P],M=x[P+1];t[r++]=u*k+f*M+g,t[r++]=p*M+h*k+y,t[r++]=w[P],t[r++]=w[P+1],s[r++]=v,s[r++]=a}}packQuadAttributes(e,t,s,r,i){const a=e.texture,c=e.transform,u=c.a,h=c.b,f=c.c,p=c.d,g=c.tx,y=c.ty,x=e.bounds,w=x.maxX,v=x.minX,S=x.maxY,T=x.minY,C=a.uvs,P=e.color,k=i<<16|e.roundPixels&65535;t[r+0]=u*v+f*T+g,t[r+1]=p*T+h*v+y,t[r+2]=C.x0,t[r+3]=C.y0,s[r+4]=P,s[r+5]=k,t[r+6]=u*w+f*T+g,t[r+7]=p*T+h*w+y,t[r+8]=C.x1,t[r+9]=C.y1,s[r+10]=P,s[r+11]=k,t[r+12]=u*w+f*S+g,t[r+13]=p*S+h*w+y,t[r+14]=C.x2,t[r+15]=C.y2,s[r+16]=P,s[r+17]=k,t[r+18]=u*v+f*S+g,t[r+19]=p*S+h*v+y,t[r+20]=C.x3,t[r+21]=C.y3,s[r+22]=P,s[r+23]=k}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Ja=new Aw(e),this.shader=Ja)}destroy(){this.shader=null,super.destroy()}};TT.extension={type:[Pe.Batcher],name:"default"};let jF=TT;class Bl{constructor(e){this.items=Object.create(null);const{renderer:t,type:s,onUnload:r,priority:i,name:a}=e;this._renderer=t,t.gc.addResourceHash(this,"items",s,i??0),this._onUnload=r,this.name=a}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...t){var r;if(!this.items[e.uid])return;const s=e._gpuData[this._renderer.uid];s&&((r=this._onUnload)==null||r.call(this,e,...t),s.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(t=>t&&this.remove(t,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function UF(n,e,t,s,r,i,a,c=null){let u=0;t*=e,r*=i;const h=c.a,f=c.b,p=c.c,g=c.d,y=c.tx,x=c.ty;for(;u<a;){const w=n[t],v=n[t+1];s[r]=h*w+p*v+y,s[r+1]=f*w+g*v+x,r+=i,t+=e,u++}}function WF(n,e,t,s){let r=0;for(e*=t;r<s;)n[e]=0,n[e+1]=0,e+=t,r++}function kT(n,e,t,s,r){const i=e.a,a=e.b,c=e.c,u=e.d,h=e.tx,f=e.ty;t||(t=0),s||(s=2),r||(r=n.length/s-t);let p=t*s;for(let g=0;g<r;g++){const y=n[p],x=n[p+1];n[p]=i*y+c*x+h,n[p+1]=a*y+u*x+f,p+=s}}const GF=new De;class Tg{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,s=this.renderable;return s?RS(t,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||GF}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Pl={extension:{type:Pe.ShapeBuilder,name:"circle"},build(n,e){let t,s,r,i,a,c;if(n.type==="circle"){const P=n;if(a=c=P.radius,a<=0)return!1;t=P.x,s=P.y,r=i=0}else if(n.type==="ellipse"){const P=n;if(a=P.halfWidth,c=P.halfHeight,a<=0||c<=0)return!1;t=P.x,s=P.y,r=i=0}else{const P=n,k=P.width/2,M=P.height/2;t=P.x+k,s=P.y+M,a=c=Math.max(0,Math.min(P.radius,Math.min(k,M))),r=k-a,i=M-c}if(r<0||i<0)return!1;const u=Math.ceil(2.3*Math.sqrt(a+c)),h=u*8+(r?4:0)+(i?4:0);if(h===0)return!1;if(u===0)return e[0]=e[6]=t+r,e[1]=e[3]=s+i,e[2]=e[4]=t-r,e[5]=e[7]=s-i,!0;let f=0,p=u*4+(r?2:0)+2,g=p,y=h,x=r+a,w=i,v=t+x,S=t-x,T=s+w;if(e[f++]=v,e[f++]=T,e[--p]=T,e[--p]=S,i){const P=s-w;e[g++]=S,e[g++]=P,e[--y]=P,e[--y]=v}for(let P=1;P<u;P++){const k=Math.PI/2*(P/u),M=r+Math.cos(k)*a,E=i+Math.sin(k)*c,R=t+M,O=t-M,D=s+E,F=s-E;e[f++]=R,e[f++]=D,e[--p]=D,e[--p]=O,e[g++]=O,e[g++]=F,e[--y]=F,e[--y]=R}x=r,w=i+c,v=t+x,S=t-x,T=s+w;const C=s-w;return e[f++]=v,e[f++]=T,e[--y]=C,e[--y]=v,r&&(e[f++]=S,e[f++]=T,e[--y]=C,e[--y]=S),!0},triangulate(n,e,t,s,r,i){if(n.length===0)return;let a=0,c=0;for(let f=0;f<n.length;f+=2)a+=n[f],c+=n[f+1];a/=n.length/2,c/=n.length/2;let u=s;e[u*t]=a,e[u*t+1]=c;const h=u++;for(let f=0;f<n.length;f+=2)e[u*t]=n[f],e[u*t+1]=n[f+1],f>0&&(r[i++]=u,r[i++]=h,r[i++]=u-1),u++;r[i++]=h+1,r[i++]=h,r[i++]=u-1}},HF={...Pl,extension:{...Pl.extension,name:"ellipse"}},$F={...Pl,extension:{...Pl.extension,name:"roundedRectangle"}},AT=1e-4,Mw=1e-4;function qF(n){const e=n.length;if(e<6)return 1;let t=0;for(let s=0,r=n[e-2],i=n[e-1];s<e;s+=2){const a=n[s],c=n[s+1];t+=(a-r)*(c+i),r=a,i=c}return t<0?-1:1}function Pw(n,e,t,s,r,i,a,c){const u=n-t*r,h=e-s*r,f=n+t*i,p=e+s*i;let g,y;a?(g=s,y=-t):(g=-s,y=t);const x=u+g,w=h+y,v=f+g,S=p+y;return c.push(x,w),c.push(v,S),2}function ui(n,e,t,s,r,i,a,c){const u=t-n,h=s-e;let f=Math.atan2(u,h),p=Math.atan2(r-n,i-e);c&&f<p?f+=Math.PI*2:!c&&f>p&&(p+=Math.PI*2);let g=f;const y=p-f,x=Math.abs(y),w=Math.sqrt(u*u+h*h),v=(15*x*Math.sqrt(w)/Math.PI>>0)+1,S=y/v;if(g+=S,c){a.push(n,e),a.push(t,s);for(let T=1,C=g;T<v;T++,C+=S)a.push(n,e),a.push(n+Math.sin(C)*w,e+Math.cos(C)*w);a.push(n,e),a.push(r,i)}else{a.push(t,s),a.push(n,e);for(let T=1,C=g;T<v;T++,C+=S)a.push(n+Math.sin(C)*w,e+Math.cos(C)*w),a.push(n,e);a.push(r,i),a.push(n,e)}return v*2}function YF(n,e,t,s,r,i){const a=AT;if(n.length===0)return;const c=e;let u=c.alignment;if(e.alignment!==.5){let U=qF(n);u=(u-.5)*U+.5}const h=new Qt(n[0],n[1]),f=new Qt(n[n.length-2],n[n.length-1]),p=s,g=Math.abs(h.x-f.x)<a&&Math.abs(h.y-f.y)<a;if(p){n=n.slice(),g&&(n.pop(),n.pop(),f.set(n[n.length-2],n[n.length-1]));const U=(h.x+f.x)*.5,Y=(f.y+h.y)*.5;n.unshift(U,Y),n.push(U,Y)}const y=r,x=n.length/2;let w=n.length;const v=y.length/2,S=c.width/2,T=S*S,C=c.miterLimit*c.miterLimit;let P=n[0],k=n[1],M=n[2],E=n[3],R=0,O=0,D=-(k-E),F=P-M,L=0,X=0,Z=Math.sqrt(D*D+F*F);D/=Z,F/=Z,D*=S,F*=S;const ne=u,W=(1-ne)*2,j=ne*2;p||(c.cap==="round"?w+=ui(P-D*(W-j)*.5,k-F*(W-j)*.5,P-D*W,k-F*W,P+D*j,k+F*j,y,!0)+2:c.cap==="square"&&(w+=Pw(P,k,D,F,W,j,!0,y))),y.push(P-D*W,k-F*W),y.push(P+D*j,k+F*j);for(let U=1;U<x-1;++U){P=n[(U-1)*2],k=n[(U-1)*2+1],M=n[U*2],E=n[U*2+1],R=n[(U+1)*2],O=n[(U+1)*2+1],D=-(k-E),F=P-M,Z=Math.sqrt(D*D+F*F),D/=Z,F/=Z,D*=S,F*=S,L=-(E-O),X=M-R,Z=Math.sqrt(L*L+X*X),L/=Z,X/=Z,L*=S,X*=S;const Y=M-P,I=k-E,$=M-R,le=O-E,ue=Y*$+I*le,oe=I*$-le*Y,ce=oe<0;if(Math.abs(oe)<.001*Math.abs(ue)){y.push(M-D*W,E-F*W),y.push(M+D*j,E+F*j),ue>=0&&(c.join==="round"?w+=ui(M,E,M-D*W,E-F*W,M-L*W,E-X*W,y,!1)+4:w+=2,y.push(M-L*j,E-X*j),y.push(M+L*W,E+X*W));continue}const ge=(-D+P)*(-F+E)-(-D+M)*(-F+k),re=(-L+R)*(-X+E)-(-L+M)*(-X+O),ke=(Y*re-$*ge)/oe,$e=(le*ge-I*re)/oe,tn=(ke-M)*(ke-M)+($e-E)*($e-E),zt=M+(ke-M)*W,dn=E+($e-E)*W,Tn=M-(ke-M)*j,ae=E-($e-E)*j,ye=Math.min(Y*Y+I*I,$*$+le*le),qe=ce?W:j,ze=ye+qe*qe*T;tn<=ze?c.join==="bevel"||tn/T>C?(ce?(y.push(zt,dn),y.push(M+D*j,E+F*j),y.push(zt,dn),y.push(M+L*j,E+X*j)):(y.push(M-D*W,E-F*W),y.push(Tn,ae),y.push(M-L*W,E-X*W),y.push(Tn,ae)),w+=2):c.join==="round"?ce?(y.push(zt,dn),y.push(M+D*j,E+F*j),w+=ui(M,E,M+D*j,E+F*j,M+L*j,E+X*j,y,!0)+4,y.push(zt,dn),y.push(M+L*j,E+X*j)):(y.push(M-D*W,E-F*W),y.push(Tn,ae),w+=ui(M,E,M-D*W,E-F*W,M-L*W,E-X*W,y,!1)+4,y.push(M-L*W,E-X*W),y.push(Tn,ae)):(y.push(zt,dn),y.push(Tn,ae)):(y.push(M-D*W,E-F*W),y.push(M+D*j,E+F*j),c.join==="round"?ce?w+=ui(M,E,M+D*j,E+F*j,M+L*j,E+X*j,y,!0)+2:w+=ui(M,E,M-D*W,E-F*W,M-L*W,E-X*W,y,!1)+2:c.join==="miter"&&tn/T<=C&&(ce?(y.push(Tn,ae),y.push(Tn,ae)):(y.push(zt,dn),y.push(zt,dn)),w+=2),y.push(M-L*W,E-X*W),y.push(M+L*j,E+X*j),w+=2)}P=n[(x-2)*2],k=n[(x-2)*2+1],M=n[(x-1)*2],E=n[(x-1)*2+1],D=-(k-E),F=P-M,Z=Math.sqrt(D*D+F*F),D/=Z,F/=Z,D*=S,F*=S,y.push(M-D*W,E-F*W),y.push(M+D*j,E+F*j),p||(c.cap==="round"?w+=ui(M-D*(W-j)*.5,E-F*(W-j)*.5,M-D*W,E-F*W,M+D*j,E+F*j,y,!1)+2:c.cap==="square"&&(w+=Pw(M,E,D,F,W,j,!1,y)));const H=Mw*Mw;for(let U=v;U<w+v-2;++U)P=y[U*2],k=y[U*2+1],M=y[(U+1)*2],E=y[(U+1)*2+1],R=y[(U+2)*2],O=y[(U+2)*2+1],!(Math.abs(P*(E-O)+M*(O-k)+R*(k-E))<H)&&i.push(U,U+1,U+2)}function XF(n,e,t,s){const r=AT;if(n.length===0)return;const i=n[0],a=n[1],c=n[n.length-2],u=n[n.length-1],h=e||Math.abs(i-c)<r&&Math.abs(a-u)<r,f=t,p=n.length/2,g=f.length/2;for(let y=0;y<p;y++)f.push(n[y*2]),f.push(n[y*2+1]);for(let y=0;y<p-1;y++)s.push(g+y,g+y+1);h&&s.push(g+p-1,g)}function MT(n,e,t,s,r,i,a){const c=LO(n,e,2);if(!c)return;for(let h=0;h<c.length;h+=3)i[a++]=c[h]+r,i[a++]=c[h+1]+r,i[a++]=c[h+2]+r;let u=r*s;for(let h=0;h<n.length;h+=2)t[u]=n[h],t[u+1]=n[h+1],u+=s}const KF=[],ZF={extension:{type:Pe.ShapeBuilder,name:"polygon"},build(n,e){for(let t=0;t<n.points.length;t++)e[t]=n.points[t];return!0},triangulate(n,e,t,s,r,i){MT(n,KF,e,t,s,r,i)}},QF={extension:{type:Pe.ShapeBuilder,name:"rectangle"},build(n,e){const t=n,s=t.x,r=t.y,i=t.width,a=t.height;return i>0&&a>0?(e[0]=s,e[1]=r,e[2]=s+i,e[3]=r,e[4]=s+i,e[5]=r+a,e[6]=s,e[7]=r+a,!0):!1},triangulate(n,e,t,s,r,i){let a=0;s*=t,e[s+a]=n[0],e[s+a+1]=n[1],a+=t,e[s+a]=n[2],e[s+a+1]=n[3],a+=t,e[s+a]=n[6],e[s+a+1]=n[7],a+=t,e[s+a]=n[4],e[s+a+1]=n[5],a+=t;const c=s/t;r[i++]=c,r[i++]=c+1,r[i++]=c+2,r[i++]=c+1,r[i++]=c+3,r[i++]=c+2}},JF={extension:{type:Pe.ShapeBuilder,name:"triangle"},build(n,e){return e[0]=n.x,e[1]=n.y,e[2]=n.x2,e[3]=n.y2,e[4]=n.x3,e[5]=n.y3,!0},triangulate(n,e,t,s,r,i){let a=0;s*=t,e[s+a]=n[0],e[s+a+1]=n[1],a+=t,e[s+a]=n[2],e[s+a+1]=n[3],a+=t,e[s+a]=n[4],e[s+a+1]=n[5];const c=s/t;r[i++]=c,r[i++]=c+1,r[i++]=c+2}},Ew=[{offset:0,color:"white"},{offset:1,color:"black"}],Cg=class dm{constructor(...e){this.uid=mt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=e3(e);t={...t.type==="radial"?dm.defaultRadialOptions:dm.defaultLinearOptions,...vS(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:Pt.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:s,y:r}=this.end,i=s-e,a=r-t;const c=i<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(i<0){const v=e;e=s,s=v,i*=-1}if(a<0){const v=t;t=r,r=v,a*=-1}}const u=this.colorStops.length?this.colorStops:Ew,h=this._textureSize,{canvas:f,context:p}=Iw(h,1),g=c?p.createLinearGradient(this._textureSize,0,0,0):p.createLinearGradient(0,0,this._textureSize,0);Rw(g,u),p.fillStyle=g,p.fillRect(0,0,h,1),this.texture=new Le({source:new Sl({resource:f,addressMode:this._wrapMode})});const y=Math.sqrt(i*i+a*a),x=Math.atan2(a,i),w=new De;w.scale(y/h,1),w.rotate(x),w.translate(e,t),this.textureSpace==="local"&&w.scale(h,h),this.transform=w}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:Ew,t=this._textureSize,{canvas:s,context:r}=Iw(t,t),{x:i,y:a}=this.center,{x:c,y:u}=this.outerCenter,h=this.innerRadius,f=this.outerRadius,p=c-f,g=u-f,y=t/(f*2),x=(i-p)*y,w=(a-g)*y,v=r.createRadialGradient(x,w,h*y,(c-p)*y,(u-g)*y,f*y);Rw(v,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,t,t),r.fillStyle=v,r.translate(x,w),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-x,-w),r.fillRect(0,0,t,t),this.texture=new Le({source:new Sl({resource:s,addressMode:this._wrapMode})});const S=new De;S.scale(1/y,1/y),S.translate(p,g),this.textureSpace==="local"&&S.scale(t,t),this.transform=S}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Cg.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Cg.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ln=Cg;function Rw(n,e){for(let t=0;t<e.length;t++){const s=e[t];n.addColorStop(s.offset,s.color)}}function Iw(n,e){const t=Dn.get().createCanvas(n,e),s=t.getContext("2d");return{canvas:t,context:s}}function e3(n){let e=n[0]??{};return(typeof e=="number"||n[1])&&(Oe("8.5.2","use options object instead"),e={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??ln.defaultLinearOptions.textureSize}),e}const t3=new De,n3=new _t;function s3(n,e,t,s){const r=e.matrix?n.copyFrom(e.matrix).invert():n.identity();if(e.textureSpace==="local"){const a=t.getBounds(n3);e.width&&a.pad(e.width);const{x:c,y:u}=a,h=1/a.width,f=1/a.height,p=-c*h,g=-u*f,y=r.a,x=r.b,w=r.c,v=r.d;r.a*=h,r.b*=h,r.c*=f,r.d*=f,r.tx=p*y+g*w+r.tx,r.ty=p*x+g*v+r.ty}else r.translate(e.texture.frame.x,e.texture.frame.y),r.scale(1/e.texture.source.width,1/e.texture.source.height);const i=e.texture.source.style;return!(e.fill instanceof ln)&&i.addressMode==="clamp-to-edge"&&(i.addressMode="repeat",i.update()),s&&r.append(t3.copyFrom(s).invert()),r}const Ch={};xt.handleByMap(Pe.ShapeBuilder,Ch);xt.add(QF,ZF,JF,Pl,HF,$F);const r3=new _t,i3=new De;function o3(n,e){const{geometryData:t,batches:s}=e;s.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let r=0;r<n.instructions.length;r++){const i=n.instructions[r];if(i.action==="texture")a3(i.data,s,t);else if(i.action==="fill"||i.action==="stroke"){const a=i.action==="stroke",c=i.data.path.shapePath,u=i.data.style,h=i.data.hole;a&&h&&Nw(h.shapePath,u,!0,s,t),h&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),Nw(c,u,a,s,t)}}}function a3(n,e,t){const s=[],r=Ch.rectangle,i=r3;i.x=n.dx,i.y=n.dy,i.width=n.dw,i.height=n.dh;const a=n.transform;if(!r.build(i,s))return;const{vertices:c,uvs:u,indices:h}=t,f=h.length,p=c.length/2;a&&kT(s,a),r.triangulate(s,c,2,p,h,f);const g=n.image,y=g.uvs;u.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const x=bn.get(Tg);x.indexOffset=f,x.indexSize=h.length-f,x.attributeOffset=p,x.attributeSize=c.length/2-p,x.baseColor=n.style,x.alpha=n.alpha,x.texture=g,x.geometryData=t,e.push(x)}function Nw(n,e,t,s,r){const{vertices:i,uvs:a,indices:c}=r;n.shapePrimitives.forEach(({shape:u,transform:h,holes:f})=>{const p=[],g=Ch[u.type];if(!g.build(u,p))return;const y=c.length,x=i.length/2;let w="triangle-list";if(h&&kT(p,h),t){const C=u.closePath??!0,P=e;P.pixelLine?(XF(p,C,i,c),w="line-list"):YF(p,P,!1,C,i,c)}else if(f){const C=[],P=p.slice();l3(f).forEach(M=>{C.push(P.length/2),P.push(...M)}),MT(P,C,i,2,x,c,y)}else g.triangulate(p,i,2,x,c,y);const v=a.length/2,S=e.texture;if(S!==Le.WHITE){const C=s3(i3,e,u,h);UF(i,2,x,a,v,2,i.length/2-x,C)}else WF(a,v,2,i.length/2-x);const T=bn.get(Tg);T.indexOffset=y,T.indexSize=c.length-y,T.attributeOffset=x,T.attributeSize=i.length/2-x,T.baseColor=e.color,T.alpha=e.alpha,T.texture=S,T.geometryData=r,T.topology=w,s.push(T)})}function l3(n){const e=[];for(let t=0;t<n.length;t++){const s=n[t].shape,r=[];Ch[s.type].build(s,r)&&e.push(r)}return e}class c3{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{bn.return(e)}),this.graphicsData&&bn.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class u3{constructor(){this.instructions=new yg}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new jF({maxTextures:t}),this.instructions.reset()}get geometry(){return Oe(oD,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const kg=class fm{constructor(e){this._renderer=e,this._managedContexts=new Bl({renderer:e,type:"resource",name:"graphicsContext"})}init(e){fm.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??fm.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=!!e._gpuData[this._renderer.uid],s=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!t){t&&s.reset(),o3(e,s);const r=e.batchMode;e.customShader||r==="no-batch"?s.isBatchable=!1:r==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,e.dirty=!1}return s}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=bn.get(u3,{maxTextures:this._renderer.limits.maxBatchableTextures}),s=e._gpuData[this._renderer.uid],{batches:r,geometryData:i}=s;s.graphicsData=t;const a=i.vertices.length,c=i.indices.length;for(let p=0;p<r.length;p++)r[p].applyTransform=!1;const u=t.batcher;u.ensureAttributeBuffer(a),u.ensureIndexBuffer(c),u.begin();for(let p=0;p<r.length;p++){const g=r[p];u.add(g)}u.finish(t.instructions);const h=u.geometry;h.indexBuffer.setDataWithSize(u.indexBuffer,u.indexSize,!0),h.buffers[0].setDataWithSize(u.attributeBuffer.float32View,u.attributeSize,!0);const f=u.batches;for(let p=0;p<f.length;p++){const g=f[p];g.bindGroup=QO(g.textures.textures,g.textures.count,this._renderer.limits.maxBatchableTextures)}return t}_initContext(e){const t=new c3;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};kg.extension={type:[Pe.WebGLSystem,Pe.WebGPUSystem],name:"graphicsContext"};kg.defaultOptions={bezierSmoothness:.5};let Ag=kg;const h3=8,Ru=11920929e-14,d3=1;function PT(n,e,t,s,r,i,a,c,u,h){const p=Math.min(.99,Math.max(0,h??Ag.defaultOptions.bezierSmoothness));let g=(d3-p)/1;return g*=g,f3(e,t,s,r,i,a,c,u,n,g),n}function f3(n,e,t,s,r,i,a,c,u,h){pm(n,e,t,s,r,i,a,c,u,h,0),u.push(a,c)}function pm(n,e,t,s,r,i,a,c,u,h,f){if(f>h3)return;const p=(n+t)/2,g=(e+s)/2,y=(t+r)/2,x=(s+i)/2,w=(r+a)/2,v=(i+c)/2,S=(p+y)/2,T=(g+x)/2,C=(y+w)/2,P=(x+v)/2,k=(S+C)/2,M=(T+P)/2;if(f>0){let E=a-n,R=c-e;const O=Math.abs((t-a)*R-(s-c)*E),D=Math.abs((r-a)*R-(i-c)*E);if(O>Ru&&D>Ru){if((O+D)*(O+D)<=h*(E*E+R*R)){u.push(k,M);return}}else if(O>Ru){if(O*O<=h*(E*E+R*R)){u.push(k,M);return}}else if(D>Ru){if(D*D<=h*(E*E+R*R)){u.push(k,M);return}}else if(E=k-(n+a)/2,R=M-(e+c)/2,E*E+R*R<=h){u.push(k,M);return}}pm(n,e,p,g,S,T,k,M,u,h,f+1),pm(k,M,C,P,w,v,a,c,u,h,f+1)}const p3=8,m3=11920929e-14,g3=1;function y3(n,e,t,s,r,i,a,c){const h=Math.min(.99,Math.max(0,c??Ag.defaultOptions.bezierSmoothness));let f=(g3-h)/1;return f*=f,_3(e,t,s,r,i,a,n,f),n}function _3(n,e,t,s,r,i,a,c){mm(a,n,e,t,s,r,i,c,0),a.push(r,i)}function mm(n,e,t,s,r,i,a,c,u){if(u>p3)return;const h=(e+s)/2,f=(t+r)/2,p=(s+i)/2,g=(r+a)/2,y=(h+p)/2,x=(f+g)/2;let w=i-e,v=a-t;const S=Math.abs((s-i)*v-(r-a)*w);if(S>m3){if(S*S<=c*(w*w+v*v)){n.push(y,x);return}}else if(w=y-(e+i)/2,v=x-(t+a)/2,w*w+v*v<=c){n.push(y,x);return}mm(n,e,t,h,f,y,x,c,u+1),mm(n,y,x,p,g,i,a,c,u+1)}function ET(n,e,t,s,r,i,a,c){let u=Math.abs(r-i);(!a&&r>i||a&&i>r)&&(u=2*Math.PI-u),c||(c=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(u/Math.PI)))),c=Math.max(c,3);let h=u/c,f=r;h*=a?-1:1;for(let p=0;p<c+1;p++){const g=Math.cos(f),y=Math.sin(f),x=e+g*s,w=t+y*s;n.push(x,w),f+=h}}function x3(n,e,t,s,r,i){const a=n[n.length-2],u=n[n.length-1]-t,h=a-e,f=r-t,p=s-e,g=Math.abs(u*p-h*f);if(g<1e-8||i===0){(n[n.length-2]!==e||n[n.length-1]!==t)&&n.push(e,t);return}const y=u*u+h*h,x=f*f+p*p,w=u*f+h*p,v=i*Math.sqrt(y)/g,S=i*Math.sqrt(x)/g,T=v*w/y,C=S*w/x,P=v*p+S*h,k=v*f+S*u,M=h*(S+T),E=u*(S+T),R=p*(v+C),O=f*(v+C),D=Math.atan2(E-k,M-P),F=Math.atan2(O-k,R-P);ET(n,P+e,k+t,i,D,F,h*f>p*u)}const ml=Math.PI*2,Rp={centerX:0,centerY:0,ang1:0,ang2:0},Ip=({x:n,y:e},t,s,r,i,a,c,u)=>{n*=t,e*=s;const h=r*n-i*e,f=i*n+r*e;return u.x=h+a,u.y=f+c,u};function v3(n,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),s=e===1.5707963267948966?.551915024494:t,r=Math.cos(n),i=Math.sin(n),a=Math.cos(n+e),c=Math.sin(n+e);return[{x:r-i*s,y:i+r*s},{x:a+c*s,y:c-a*s},{x:a,y:c}]}const Dw=(n,e,t,s)=>{const r=n*s-e*t<0?-1:1;let i=n*t+e*s;return i>1&&(i=1),i<-1&&(i=-1),r*Math.acos(i)},w3=(n,e,t,s,r,i,a,c,u,h,f,p,g)=>{const y=Math.pow(r,2),x=Math.pow(i,2),w=Math.pow(f,2),v=Math.pow(p,2);let S=y*x-y*v-x*w;S<0&&(S=0),S/=y*v+x*w,S=Math.sqrt(S)*(a===c?-1:1);const T=S*r/i*p,C=S*-i/r*f,P=h*T-u*C+(n+t)/2,k=u*T+h*C+(e+s)/2,M=(f-T)/r,E=(p-C)/i,R=(-f-T)/r,O=(-p-C)/i,D=Dw(1,0,M,E);let F=Dw(M,E,R,O);c===0&&F>0&&(F-=ml),c===1&&F<0&&(F+=ml),g.centerX=P,g.centerY=k,g.ang1=D,g.ang2=F};function b3(n,e,t,s,r,i,a,c=0,u=0,h=0){if(i===0||a===0)return;const f=Math.sin(c*ml/360),p=Math.cos(c*ml/360),g=p*(e-s)/2+f*(t-r)/2,y=-f*(e-s)/2+p*(t-r)/2;if(g===0&&y===0)return;i=Math.abs(i),a=Math.abs(a);const x=Math.pow(g,2)/Math.pow(i,2)+Math.pow(y,2)/Math.pow(a,2);x>1&&(i*=Math.sqrt(x),a*=Math.sqrt(x)),w3(e,t,s,r,i,a,u,h,f,p,g,y,Rp);let{ang1:w,ang2:v}=Rp;const{centerX:S,centerY:T}=Rp;let C=Math.abs(v)/(ml/4);Math.abs(1-C)<1e-7&&(C=1);const P=Math.max(Math.ceil(C),1);v/=P;let k=n[n.length-2],M=n[n.length-1];const E={x:0,y:0};for(let R=0;R<P;R++){const O=v3(w,v),{x:D,y:F}=Ip(O[0],i,a,p,f,S,T,E),{x:L,y:X}=Ip(O[1],i,a,p,f,S,T,E),{x:Z,y:ne}=Ip(O[2],i,a,p,f,S,T,E);PT(n,k,M,D,F,L,X,Z,ne),k=Z,M=ne,w+=v}}function S3(n,e,t){const s=(a,c)=>{const u=c.x-a.x,h=c.y-a.y,f=Math.sqrt(u*u+h*h),p=u/f,g=h/f;return{len:f,nx:p,ny:g}},r=(a,c)=>{a===0?n.moveTo(c.x,c.y):n.lineTo(c.x,c.y)};let i=e[e.length-1];for(let a=0;a<e.length;a++){const c=e[a%e.length],u=c.radius??t;if(u<=0){r(a,c),i=c;continue}const h=e[(a+1)%e.length],f=s(c,i),p=s(c,h);if(f.len<1e-4||p.len<1e-4){r(a,c),i=c;continue}let g=Math.asin(f.nx*p.ny-f.ny*p.nx),y=1,x=!1;f.nx*p.nx-f.ny*-p.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,x=!0):g>0&&(y=-1,x=!0);const w=g/2;let v,S=Math.abs(Math.cos(w)*u/Math.sin(w));S>Math.min(f.len/2,p.len/2)?(S=Math.min(f.len/2,p.len/2),v=Math.abs(S*Math.sin(w)/Math.cos(w))):v=u;const T=c.x+p.nx*S+-p.ny*v*y,C=c.y+p.ny*S+p.nx*v*y,P=Math.atan2(f.ny,f.nx)+Math.PI/2*y,k=Math.atan2(p.ny,p.nx)-Math.PI/2*y;a===0&&n.moveTo(T+Math.cos(P)*v,C+Math.sin(P)*v),n.arc(T,C,v,P,k,x),i=c}}function T3(n,e,t,s){const r=(c,u)=>Math.sqrt((c.x-u.x)**2+(c.y-u.y)**2),i=(c,u,h)=>({x:c.x+(u.x-c.x)*h,y:c.y+(u.y-c.y)*h}),a=e.length;for(let c=0;c<a;c++){const u=e[(c+1)%a],h=u.radius??t;if(h<=0){c===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y);continue}const f=e[c],p=e[(c+2)%a],g=r(f,u);let y;if(g<1e-4)y=u;else{const v=Math.min(g/2,h);y=i(u,f,v/g)}const x=r(p,u);let w;if(x<1e-4)w=u;else{const v=Math.min(x/2,h);w=i(u,p,v/x)}c===0?n.moveTo(y.x,y.y):n.lineTo(y.x,y.y),n.quadraticCurveTo(u.x,u.y,w.x,w.y,s)}}const C3=new _t;class k3{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Qn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const s=this._currentPoly.points,r=s[s.length-2],i=s[s.length-1];return(r!==e||i!==t)&&s.push(e,t),this}arc(e,t,s,r,i,a){this._ensurePoly(!1);const c=this._currentPoly.points;return ET(c,e,t,s,r,i,a),this}arcTo(e,t,s,r,i){this._ensurePoly();const a=this._currentPoly.points;return x3(a,e,t,s,r,i),this}arcToSvg(e,t,s,r,i,a,c){const u=this._currentPoly.points;return b3(u,this._currentPoly.lastX,this._currentPoly.lastY,a,c,e,t,s,r,i),this}bezierCurveTo(e,t,s,r,i,a,c){this._ensurePoly();const u=this._currentPoly;return PT(this._currentPoly.points,u.lastX,u.lastY,e,t,s,r,i,a,c),this}quadraticCurveTo(e,t,s,r,i){this._ensurePoly();const a=this._currentPoly;return y3(this._currentPoly.points,a.lastX,a.lastY,e,t,s,r,i),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const s=this.shapePrimitives,r=s.length;for(let i=0;i<e.instructions.length;i++){const a=e.instructions[i];this[a.action](...a.data)}if(e.checkForHoles&&s.length-r>1){let i=null;for(let a=r;a<s.length;a++){const c=s[a];if(c.shape.type==="polygon"){const u=c.shape,h=i==null?void 0:i.shape;h&&h.containsPolygon(u)?(i.holes||(i.holes=[]),i.holes.push(c),s.copyWithin(a,a+1),s.length--,a--):i=c}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,s,r,i){return this.drawShape(new _t(e,t,s,r),i),this}circle(e,t,s,r){return this.drawShape(new wg(e,t,s),r),this}poly(e,t,s){const r=new fl(e);return r.closePath=t,this.drawShape(r,s),this}regularPoly(e,t,s,r,i=0,a){r=Math.max(r|0,3);const c=-1*Math.PI/2+i,u=Math.PI*2/r,h=[];for(let f=0;f<r;f++){const p=c-f*u;h.push(e+s*Math.cos(p),t+s*Math.sin(p))}return this.poly(h,!0,a),this}roundPoly(e,t,s,r,i,a=0,c){if(r=Math.max(r|0,3),i<=0)return this.regularPoly(e,t,s,r,a);const u=s*Math.sin(Math.PI/r)-.001;i=Math.min(i,u);const h=-1*Math.PI/2+a,f=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let g=0;g<r;g++){const y=g*f+h,x=e+s*Math.cos(y),w=t+s*Math.sin(y),v=y+Math.PI+p,S=y-Math.PI-p,T=x+i*Math.cos(v),C=w+i*Math.sin(v),P=x+i*Math.cos(S),k=w+i*Math.sin(S);g===0?this.moveTo(T,C):this.lineTo(T,C),this.quadraticCurveTo(x,w,P,k,c)}return this.closePath()}roundShape(e,t,s=!1,r){return e.length<3?this:(s?T3(this,e,t,r):S3(this,e,t),this.closePath())}filletRect(e,t,s,r,i){if(i===0)return this.rect(e,t,s,r);const a=Math.min(s,r)/2,c=Math.min(a,Math.max(-a,i)),u=e+s,h=t+r,f=c<0?-c:0,p=Math.abs(c);return this.moveTo(e,t+p).arcTo(e+f,t+f,e+p,t,p).lineTo(u-p,t).arcTo(u-f,t+f,u,t+p,p).lineTo(u,h-p).arcTo(u-f,h-f,e+s-p,h,p).lineTo(e+p,h).arcTo(e+f,h-f,e,h-p,p).closePath()}chamferRect(e,t,s,r,i,a){if(i<=0)return this.rect(e,t,s,r);const c=Math.min(i,Math.min(s,r)/2),u=e+s,h=t+r,f=[e+c,t,u-c,t,u,t+c,u,h-c,u-c,h,e+c,h,e,h-c,e,t+c];for(let p=f.length-1;p>=2;p-=2)f[p]===f[p-2]&&f[p-1]===f[p-3]&&f.splice(p-1,2);return this.poly(f,!0,a)}ellipse(e,t,s,r,i){return this.drawShape(new bg(e,t,s,r),i),this}roundRect(e,t,s,r,i,a){return this.drawShape(new Sg(e,t,s,r,i),a),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let s=this._currentPoly;return s&&this.endPoly(),s=new fl,s.points.push(e,t),this._currentPoly=s,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new fl,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let s=t.shape.x,r=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const i=t.transform,a=s;s=i.a*s+i.c*r+i.tx,r=i.b*a+i.d*r+i.ty}this._currentPoly.points.push(s,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const s=e.instructions[t];this[s.action](...s.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let s=0;s<t.length;s++){const r=t[s],i=r.shape.getBounds(C3);r.transform?e.addRect(i,r.transform):e.addRect(i)}return e}}class Js{constructor(e,t=!1){this.instructions=[],this.uid=mt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?YO(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new k3(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,s,r,i){const a=this.instructions[this.instructions.length-1],c=this.getLastPoint(Qt.shared);let u=0,h=0;if(!a||a.action!=="bezierCurveTo")u=c.x,h=c.y;else{u=a.data[2],h=a.data[3];const f=c.x,p=c.y;u=f+(f-u),h=p+(p-h)}return this.instructions.push({action:"bezierCurveTo",data:[u,h,e,t,s,r,i]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,s){const r=this.instructions[this.instructions.length-1],i=this.getLastPoint(Qt.shared);let a=0,c=0;if(!r||r.action!=="quadraticCurveTo")a=i.x,c=i.y;else{a=r.data[0],c=r.data[1];const u=i.x,h=i.y;a=u+(u-a),c=h+(h-c)}return this.instructions.push({action:"quadraticCurveTo",data:[a,c,e,t,s]}),this._dirty=!0,this}rect(e,t,s,r,i){return this.instructions.push({action:"rect",data:[e,t,s,r,i]}),this._dirty=!0,this}circle(e,t,s,r){return this.instructions.push({action:"circle",data:[e,t,s,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,s,r,i,a,c){i||(i=r/2);const u=-1*Math.PI/2+a,h=s*2,f=Math.PI*2/h,p=[];for(let g=0;g<h;g++){const y=g%2?i:r,x=g*f+u;p.push(e+y*Math.cos(x),t+y*Math.sin(x))}return this.poly(p,!0,c),this}clone(e=!1){const t=new Js;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const r=this.instructions[s];t.instructions.push({action:r.action,data:r.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,s=e.b,r=e.c,i=e.d,a=e.tx,c=e.ty;let u=0,h=0,f=0,p=0,g=0,y=0,x=0,w=0;for(let v=0;v<this.instructions.length;v++){const S=this.instructions[v],T=S.data;switch(S.action){case"moveTo":case"lineTo":u=T[0],h=T[1],T[0]=t*u+r*h+a,T[1]=s*u+i*h+c;break;case"bezierCurveTo":f=T[0],p=T[1],g=T[2],y=T[3],u=T[4],h=T[5],T[0]=t*f+r*p+a,T[1]=s*f+i*p+c,T[2]=t*g+r*y+a,T[3]=s*g+i*y+c,T[4]=t*u+r*h+a,T[5]=s*u+i*h+c;break;case"quadraticCurveTo":f=T[0],p=T[1],u=T[2],h=T[3],T[0]=t*f+r*p+a,T[1]=s*f+i*p+c,T[2]=t*u+r*h+a,T[3]=s*u+i*h+c;break;case"arcToSvg":u=T[5],h=T[6],x=T[0],w=T[1],T[0]=t*x+r*w,T[1]=s*x+i*w,T[5]=t*u+r*h+a,T[6]=s*u+i*h+c;break;case"circle":T[4]=el(T[3],e);break;case"rect":T[4]=el(T[4],e);break;case"ellipse":T[8]=el(T[8],e);break;case"roundRect":T[5]=el(T[5],e);break;case"addPath":T[0].transform(e);break;case"poly":T[2]=el(T[2],e);break;default:un("unknown transform action",S.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,s=this.instructions[t];if(!s)return e.x=0,e.y=0,e;for(;s.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;s=this.instructions[t]}switch(s.action){case"moveTo":case"lineTo":e.x=s.data[0],e.y=s.data[1];break;case"quadraticCurveTo":e.x=s.data[2],e.y=s.data[3];break;case"bezierCurveTo":e.x=s.data[4],e.y=s.data[5];break;case"arc":case"arcToSvg":e.x=s.data[5],e.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(e);break}return e}}function el(n,e){return n?n.prepend(e):e.clone()}function ut(n,e,t){const s=n.getAttribute(e);return s?Number(s):t}function A3(n,e){const t=n.querySelectorAll("defs");for(let s=0;s<t.length;s++){const r=t[s];for(let i=0;i<r.children.length;i++){const a=r.children[i];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=M3(a);break;case"radialgradient":e.defs[a.id]=P3();break}}}}function M3(n){const e=ut(n,"x1",0),t=ut(n,"y1",0),s=ut(n,"x2",1),r=ut(n,"y2",0),i=n.getAttribute("gradientUnits")||"objectBoundingBox",a=new ln(e,t,s,r,i==="objectBoundingBox"?"local":"global");for(let c=0;c<n.children.length;c++){const u=n.children[c],h=ut(u,"offset",0),f=Pt.shared.setValue(u.getAttribute("stop-color")).toNumber();a.addColorStop(h,f)}return a}function P3(n){return un("[SVG Parser] Radial gradients are not yet supported"),new ln(0,0,1,0)}function Ow(n){const e=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const Fw={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function RT(n,e){const t=n.getAttribute("style"),s={},r={},i={strokeStyle:s,fillStyle:r,useFill:!1,useStroke:!1};for(const a in Fw){const c=n.getAttribute(a);c&&Vw(e,i,a,c.trim())}if(t){const a=t.split(";");for(let c=0;c<a.length;c++){const u=a[c].trim(),[h,f]=u.split(":");Fw[h]&&Vw(e,i,h,f.trim())}}return{strokeStyle:i.useStroke?s:null,fillStyle:i.useFill?r:null,useFill:i.useFill,useStroke:i.useStroke}}function Vw(n,e,t,s){switch(t){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const r=Ow(s);e.strokeStyle.fill=n.defs[r]}else e.strokeStyle.color=Pt.shared.setValue(s).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const r=Ow(s);e.fillStyle.fill=n.defs[r]}else e.fillStyle.color=Pt.shared.setValue(s).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(s);break;case"stroke-opacity":e.strokeStyle.alpha=Number(s);break;case"opacity":e.fillStyle.alpha=Number(s),e.strokeStyle.alpha=Number(s);break}}function E3(n){if(n.length<=2)return!0;const e=n.map(c=>c.area).sort((c,u)=>u-c),[t,s]=e,r=e[e.length-1],i=t/s,a=s/r;return!(i>3&&a<2)}function R3(n){return n.split(/(?=[Mm])/).filter(s=>s.trim().length>0)}function I3(n){const e=n.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),s=[],r=[];for(let f=0;f<t.length;f+=2)f+1<t.length&&(s.push(t[f]),r.push(t[f+1]));if(s.length===0||r.length===0)return 0;const i=Math.min(...s),a=Math.max(...s),c=Math.min(...r),u=Math.max(...r);return(a-i)*(u-c)}function Lw(n,e){const t=new Js(n,!1);for(const s of t.instructions)e.instructions.push(s)}function N3(n,e){if(typeof n=="string"){const a=document.createElement("div");a.innerHTML=n.trim(),n=a.querySelector("svg")}const t={context:e,defs:{},path:new Js};A3(n,t);const s=n.children,{fillStyle:r,strokeStyle:i}=RT(n,t);for(let a=0;a<s.length;a++){const c=s[a];c.nodeName.toLowerCase()!=="defs"&&IT(c,t,r,i)}return e}function IT(n,e,t,s){const r=n.children,{fillStyle:i,strokeStyle:a}=RT(n,e);i&&t?t={...t,...i}:i&&(t=i),a&&s?s={...s,...a}:a&&(s=a);const c=!t&&!s;c&&(t={color:0});let u,h,f,p,g,y,x,w,v,S,T,C,P,k,M,E,R;switch(n.nodeName.toLowerCase()){case"path":{k=n.getAttribute("d");const O=n.getAttribute("fill-rule"),D=R3(k),F=O==="evenodd",L=D.length>1;if(F&&L){const Z=D.map(W=>({path:W,area:I3(W)}));if(Z.sort((W,j)=>j.area-W.area),D.length>3||!E3(Z))for(let W=0;W<Z.length;W++){const j=Z[W],H=W===0;e.context.beginPath();const U=new Js(void 0,!0);Lw(j.path,U),e.context.path(U),H?(t&&e.context.fill(t),s&&e.context.stroke(s)):e.context.cut()}else for(let W=0;W<Z.length;W++){const j=Z[W],H=W%2===1;e.context.beginPath();const U=new Js(void 0,!0);Lw(j.path,U),e.context.path(U),H?e.context.cut():(t&&e.context.fill(t),s&&e.context.stroke(s))}}else{const Z=O?O==="evenodd":!0;M=new Js(k,Z),e.context.path(M),t&&e.context.fill(t),s&&e.context.stroke(s)}break}case"circle":x=ut(n,"cx",0),w=ut(n,"cy",0),v=ut(n,"r",0),e.context.ellipse(x,w,v,v),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"rect":u=ut(n,"x",0),h=ut(n,"y",0),E=ut(n,"width",0),R=ut(n,"height",0),S=ut(n,"rx",0),T=ut(n,"ry",0),S||T?e.context.roundRect(u,h,E,R,S||T):e.context.rect(u,h,E,R),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"ellipse":x=ut(n,"cx",0),w=ut(n,"cy",0),S=ut(n,"rx",0),T=ut(n,"ry",0),e.context.beginPath(),e.context.ellipse(x,w,S,T),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"line":f=ut(n,"x1",0),p=ut(n,"y1",0),g=ut(n,"x2",0),y=ut(n,"y2",0),e.context.beginPath(),e.context.moveTo(f,p),e.context.lineTo(g,y),s&&e.context.stroke(s);break;case"polygon":P=n.getAttribute("points"),C=P.match(/-?\d+/g).map(O=>parseInt(O,10)),e.context.poly(C,!0),t&&e.context.fill(t),s&&e.context.stroke(s);break;case"polyline":P=n.getAttribute("points"),C=P.match(/-?\d+/g).map(O=>parseInt(O,10)),e.context.poly(C,!1),s&&e.context.stroke(s);break;case"g":case"svg":break;default:{un(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}c&&(t=null);for(let O=0;O<r.length;O++)IT(r[O],e,t,s)}const Bw={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class kh{constructor(e,t){this.uid=mt("fillPattern"),this._tick=0,this.transform=new De,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=Bw[t].addressModeU,e.source.style.addressModeV=Bw[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}function D3(n){return Pt.isColorLike(n)}function zw(n){return n instanceof kh}function jw(n){return n instanceof ln}function O3(n){return n instanceof Le}function F3(n,e,t){const s=Pt.shared.setValue(e??0);return n.color=s.toNumber(),n.alpha=s.alpha===1?t.alpha:s.alpha,n.texture=Le.WHITE,{...t,...n}}function V3(n,e,t){return n.texture=e,{...t,...n}}function Uw(n,e,t){return n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,{...t,...n}}function Ww(n,e,t){return e.buildGradient(),n.fill=e,n.color=16777215,n.texture=e.texture,n.matrix=e.transform,n.textureSpace=e.textureSpace,{...t,...n}}function L3(n,e){const t={...e,...n},s=Pt.shared.setValue(t.color);return t.alpha*=s.alpha,t.color=s.toNumber(),t}function Ci(n,e){if(n==null)return null;const t={},s=n;return D3(n)?F3(t,n,e):O3(n)?V3(t,n,e):zw(n)?Uw(t,n,e):jw(n)?Ww(t,n,e):s.fill&&zw(s.fill)?Uw(s,s.fill,e):s.fill&&jw(s.fill)?Ww(s,s.fill,e):L3(s,e)}function th(n,e){const{width:t,alignment:s,miterLimit:r,cap:i,join:a,pixelLine:c,...u}=e,h=Ci(n,u);return h?{width:t,alignment:s,miterLimit:r,cap:i,join:a,pixelLine:c,...h}:null}const B3=new Qt,Gw=new De,Mg=class ks extends Os{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=mt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new Js,this._transform=new De,this._fillStyle={...ks.defaultFillStyle},this._strokeStyle={...ks.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Qn,this._boundsDirty=!0}clone(){const e=new ks;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ci(e,ks.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=th(e,ks.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ci(e,ks.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ci(e,ks.defaultStrokeStyle),this}texture(e,t,s,r,i,a){return this.instructions.push({action:"texture",data:{image:e,dx:s||0,dy:r||0,dw:i||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t||t===0?Pt.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Js,this}fill(e,t){let s;const r=this.instructions[this.instructions.length-1];return this._tick===0&&(r==null?void 0:r.action)==="stroke"?s=r.data.path:s=this._activePath.clone(),s?(e!=null&&(t!==void 0&&typeof e=="number"&&(Oe(ft,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Ci(e,ks.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Qt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const s=this.instructions[this.instructions.length-1];return this._tick===0&&(s==null?void 0:s.action)==="fill"?t=s.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=th(e,ks.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],s=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(s);else{t.data.hole=s;break}}return this._initNextPathLocation(),this}arc(e,t,s,r,i,a){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,s,r,i,a),this}arcTo(e,t,s,r,i){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*s+a.c*r+a.tx,a.b*s+a.d*r+a.ty,i),this}arcToSvg(e,t,s,r,i,a,c){this._tick++;const u=this._transform;return this._activePath.arcToSvg(e,t,s,r,i,u.a*a+u.c*c+u.tx,u.b*a+u.d*c+u.ty),this}bezierCurveTo(e,t,s,r,i,a,c){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*e+u.c*t+u.tx,u.b*e+u.d*t+u.ty,u.a*s+u.c*r+u.tx,u.b*s+u.d*r+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,s,r){return this._tick++,this._activePath.ellipse(e,t,s,r,this._transform.clone()),this}circle(e,t,s){return this._tick++,this._activePath.circle(e,t,s,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty),this}moveTo(e,t){this._tick++;const s=this._transform,r=this._activePath.instructions,i=s.a*e+s.c*t+s.tx,a=s.b*e+s.d*t+s.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=i,r[0].data[1]=a,this):(this._activePath.moveTo(i,a),this)}quadraticCurveTo(e,t,s,r,i){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*s+a.c*r+a.tx,a.b*s+a.d*r+a.ty,i),this}rect(e,t,s,r){return this._tick++,this._activePath.rect(e,t,s,r,this._transform.clone()),this}roundRect(e,t,s,r,i){return this._tick++,this._activePath.roundRect(e,t,s,r,i,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,s,r,i=0,a){return this._tick++,this._activePath.regularPoly(e,t,s,r,i,a),this}roundPoly(e,t,s,r,i,a){return this._tick++,this._activePath.roundPoly(e,t,s,r,i,a),this}roundShape(e,t,s,r){return this._tick++,this._activePath.roundShape(e,t,s,r),this}filletRect(e,t,s,r,i){return this._tick++,this._activePath.filletRect(e,t,s,r,i),this}chamferRect(e,t,s,r,i,a){return this._tick++,this._activePath.chamferRect(e,t,s,r,i,a),this}star(e,t,s,r,i=0,a=0){return this._tick++,this._activePath.star(e,t,s,r,i,a,this._transform.clone()),this}svg(e){return this._tick++,N3(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,s,r,i,a){return e instanceof De?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,s,r,i,a),this)}transform(e,t,s,r,i,a){return e instanceof De?(this._transform.append(e),this):(Gw.set(e,t,s,r,i,a),this._transform.append(Gw),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const s=this.instructions[t],r=s.action;if(r==="fill"){const i=s.data;e.addBounds(i.path.bounds)}else if(r==="texture"){const i=s.data;e.addFrame(i.dx,i.dy,i.dx+i.dw,i.dy+i.dh,i.transform)}if(r==="stroke"){const i=s.data,a=i.style.alignment,c=i.style.width*(1-a),u=i.path.bounds;e.addFrame(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c)}}return e}containsPoint(e){var r;if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let s=!1;for(let i=0;i<t.length;i++){const a=t[i],c=a.data,u=c.path;if(!a.action||!u)continue;const h=c.style,f=u.shapePath.shapePrimitives;for(let p=0;p<f.length;p++){const g=f[p].shape;if(!h||!g)continue;const y=f[p].transform,x=y?y.applyInverse(e,B3):e;if(a.action==="fill")s=g.contains(x.x,x.y);else{const v=h;s=g.strokeContains(x.x,x.y,v.width,v.alignment)}const w=c.hole;if(w){const v=(r=w.shapePath)==null?void 0:r.shapePrimitives;if(v)for(let S=0;S<v.length;S++)v[S].shape.contains(x.x,x.y)&&(s=!1)}if(s)return!0}}return s}unload(){var e;this.emit("unload",this);for(const t in this._gpuData)(e=this._gpuData[t])==null||e.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(s)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(s))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Mg.defaultFillStyle={color:16777215,alpha:1,texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local"};Mg.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Le.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let cs=Mg;class z3{constructor(){this.isBatchable=!1}reset(){this.isBatchable=!1,this.context=null,this.graphicsData&&(this.graphicsData.destroy(),this.graphicsData=null)}destroy(){this.reset()}}class j3{constructor(){this.instructions=new yg}init(){this.instructions.reset()}destroy(){this.instructions.destroy(),this.instructions=null}}const Pg=class gm{constructor(e){this._renderer=e,this._managedContexts=new Bl({renderer:e,type:"resource",name:"graphicsContext"})}init(e){gm.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??gm.defaultOptions.bezierSmoothness}getContextRenderData(e){return this.getGpuContext(e).graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=e._gpuData,s=!!t[this._renderer.uid],r=t[this._renderer.uid]||this._initContext(e);return(e.dirty||!s)&&(s&&r.reset(),r.isBatchable=!1,e.dirty=!1),r}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=new j3,s=this.getGpuContext(e);return s.graphicsData=t,t.init(),t}_initContext(e){const t=new z3;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};Pg.extension={type:[Pe.CanvasSystem],name:"graphicsContext"};Pg.defaultOptions={bezierSmoothness:.5};let U3=Pg;class NT{constructor(e,t){this.state=vg.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Bl({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){return!1}addRenderable(e,t){this._managedGraphics.add(e),this.renderer.renderPipes.batch.break(t),t.add(e)}updateRenderable(e){}execute(e){e.isRenderable&&this._adaptor.execute(this,e)}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null}}NT.extension={type:[Pe.CanvasPipes],name:"graphics"};function W3(n,e,t){const s=(n>>24&255)/255;e[t++]=(n&255)/255*s,e[t++]=(n>>8&255)/255*s,e[t++]=(n>>16&255)/255*s,e[t++]=s}class G3{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{bn.return(e)}),this.batches.length=0}}class DT{constructor(e,t){this.state=vg.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Bl({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const t=e.context,s=!!e._gpuData,i=this.renderer.graphicsContext.updateGpuContext(t);return!!(i.isBatchable||s!==i.isBatchable)}addRenderable(e,t){const r=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),r.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){const s=this._getGpuDataForRenderable(e).batches;for(let r=0;r<s.length;r++){const i=s[r];i._batcher.updateElement(i)}}execute(e){if(!e.isRenderable)return;const t=this.renderer,s=e.context;if(!t.graphicsContext.getGpuContext(s).batches.length)return;const i=s.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const a=i.resources.localUniforms.uniforms;a.uTransformMatrix=e.groupTransform,a.uRound=t._roundPixels|e._roundPixels,W3(e.groupColorAlpha,a.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const t=this._getGpuDataForRenderable(e),r=this.renderer.graphicsContext.updateGpuContext(e.context);t.destroy(),r.isBatchable&&this._updateBatchesForRenderable(e,t)}_addToBatcher(e,t){const s=this.renderer.renderPipes.batch,r=this._getGpuDataForRenderable(e).batches;for(let i=0;i<r.length;i++){const a=r[i];s.addToBatch(a,t)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const t=new G3;return e._gpuData[this.renderer.uid]=t,this._managedGraphics.add(e),t}_updateBatchesForRenderable(e,t){const s=e.context,i=this.renderer.graphicsContext.getGpuContext(s),a=this.renderer._roundPixels|e._roundPixels;t.batches=i.batches.map(c=>{const u=bn.get(Tg);return c.copyTo(u),u.renderable=e,u.roundPixels=a,u})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}DT.extension={type:[Pe.WebGLPipes,Pe.WebGPUPipes],name:"graphics"};xt.add(NT);xt.add(DT);xt.add(U3);xt.add(Ag);class Mt extends _g{constructor(e){e instanceof cs&&(e={context:e});const{context:t,roundPixels:s,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",t?this.context=t:(this.context=this._ownedContext=new cs,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Mt(this._context.clone()):(this._ownedContext=null,new Mt(this._context))}lineStyle(e,t,s){Oe(ft,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),t&&(r.color=t),s&&(r.alpha=s),this.context.strokeStyle=r,this}beginFill(e,t){Oe(ft,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return e!==void 0&&(s.color=e),t!==void 0&&(s.alpha=t),this.context.fillStyle=s,this}endFill(){Oe(ft,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==cs.defaultStrokeStyle.width||e.color!==cs.defaultStrokeStyle.color||e.alpha!==cs.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Oe(ft,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Oe(ft,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Oe(ft,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Oe(ft,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Oe(ft,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Oe(ft,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class H3 extends _g{constructor(e,t){const{text:s,resolution:r,style:i,anchor:a,width:c,height:u,roundPixels:h,...f}=e;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=i,this.resolution=r??null,this.allowChildren=!1,this._anchor=new Gt({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,c!==void 0&&(this.width=c),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,r=-t*this.anchor.x;let i=0;return e.x>=r&&e.x<=r+t&&(i=-s*this.anchor.y,e.y>=i&&e.y<=i+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function $3(n,e){let t=n[0]??{};return(typeof t=="string"||n[1])&&(Oe(ft,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:n[1]}),t}class q3{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const s=Dn.get().createCanvas();s.width=e,s.height=t;const r=s.getContext("2d");return{canvas:s,context:r}}getOptimalCanvasAndContext(e,t,s=1){e=Math.ceil(e*s-1e-6),t=Math.ceil(t*s-1e-6),e=Fo(e),t=Fo(t);const r=(e<<17)+(t<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let i=this._canvasPool[r].pop();return i||(i=this._createCanvasAndContext(e,t)),i}returnCanvasAndContext(e){const t=e.canvas,{width:s,height:r}=t,i=(s<<17)+(r<<1);e.context.resetTransform(),e.context.clearRect(0,0,s,r),this._canvasPool[i].push(e)}clear(){this._canvasPool={}}}const ym=new q3;Ll.register(ym);let hi=null,Zs=null;function Y3(n,e){hi||(hi=Dn.get().createCanvas(256,128),Zs=hi.getContext("2d",{willReadFrequently:!0}),Zs.globalCompositeOperation="copy",Zs.globalAlpha=1),(hi.width<n||hi.height<e)&&(hi.width=Fo(n),hi.height=Fo(e))}function Hw(n,e,t){for(let s=0,r=4*t*e;s<e;++s,r+=4)if(n[r+3]!==0)return!1;return!0}function $w(n,e,t,s,r){const i=4*e;for(let a=s,c=s*i+4*t;a<=r;++a,c+=i)if(n[c+3]!==0)return!1;return!0}function X3(...n){let e=n[0];e.canvas||(e={canvas:n[0],resolution:n[1]});const{canvas:t}=e,s=Math.min(e.resolution??1,1),r=e.width??t.width,i=e.height??t.height;let a=e.output;if(Y3(r,i),!Zs)throw new TypeError("Failed to get canvas 2D context");Zs.drawImage(t,0,0,r,i,0,0,r*s,i*s);const u=Zs.getImageData(0,0,r,i).data;let h=0,f=0,p=r-1,g=i-1;for(;f<i&&Hw(u,r,f);)++f;if(f===i)return _t.EMPTY;for(;Hw(u,r,g);)--g;for(;$w(u,r,h,f,g);)++h;for(;$w(u,r,p,f,g);)--p;return++p,++g,Zs.globalCompositeOperation="source-over",Zs.strokeRect(h,f,p-h,g-f),Zs.globalCompositeOperation="copy",a??(a=new _t),a.set(h/s,f/s,(p-h)/s,(g-f)/s),a}/**
 * tiny-lru
 *
 * @copyright 2026 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.7
 */class K3{constructor(e=0,t=0,s=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=s,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){const t=new Array(e.length);for(let s=0;s<e.length;s++){const r=e[s];t[s]=[r,this.get(r)]}return t}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=new Array(this.size);let t=this.first,s=0;for(;t!==null;)e[s++]=t.key,t=t.next;return e}setWithEvicted(e,t,s=this.resetTtl){let r=null;if(this.has(e))this.set(e,t,!0,s);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=i:this.last.next=i,this.last=i}return r}set(e,t,s=!1,r=this.resetTtl){let i=this.items[e];return s||i!==void 0?(i.value=t,s===!1&&r&&(i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(i)):(this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=i:this.last.next=i,this.last=i),this}values(e=this.keys()){const t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=this.get(e[s]);return t}}function Z3(n=1e3,e=0,t=!1){if(isNaN(n)||n<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new K3(n,e,t)}function OT(n){return!!n.tagStyles&&Object.keys(n.tagStyles).length>0}function FT(n){return n.includes("<")}function Q3(n,e){return n.clone().assign(e)}function J3(n,e){const t=[],s=e.tagStyles;if(!OT(e)||!FT(n))return t.push({text:n,style:e}),t;const r=[e],i=[];let a="",c=0;for(;c<n.length;){const u=n[c];if(u==="<"){const h=n.indexOf(">",c);if(h===-1){a+=u,c++;continue}const f=n.slice(c+1,h);if(f.startsWith("/")){const p=f.slice(1).trim();if(i.length>0&&i[i.length-1]===p){a.length>0&&(t.push({text:a,style:r[r.length-1]}),a=""),r.pop(),i.pop(),c=h+1;continue}else{a+=n.slice(c,h+1),c=h+1;continue}}else{const p=f.trim();if(s[p]){a.length>0&&(t.push({text:a,style:r[r.length-1]}),a="");const g=r[r.length-1],y=Q3(g,s[p]);r.push(y),i.push(p),c=h+1;continue}else{a+=n.slice(c,h+1),c=h+1;continue}}}else a+=u,c++}return a.length>0&&t.push({text:a,style:r[r.length-1]}),t}const eV=[10,13],tV=new Set(eV),nV=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],sV=new Set(nV),rV=/(\r\n|\r|\n)/,iV=/(?:\r\n|\r|\n)/;function Eg(n){return typeof n!="string"?!1:tV.has(n.charCodeAt(0))}function ds(n,e){return typeof n!="string"?!1:sV.has(n.charCodeAt(0))}function VT(n){return n==="normal"||n==="pre-line"}function LT(n){return n==="normal"}function Xs(n){if(typeof n!="string")return"";let e=n.length-1;for(;e>=0&&ds(n[e]);)e--;return e<n.length-1?n.slice(0,e+1):n}function BT(n){const e=[],t=[];if(typeof n!="string")return e;for(let s=0;s<n.length;s++){const r=n[s],i=n[s+1];if(ds(r)||Eg(r)){t.length>0&&(e.push(t.join("")),t.length=0),r==="\r"&&i===`
`?(e.push(`\r
`),s++):e.push(r);continue}t.push(r)}return t.length>0&&e.push(t.join("")),e}function zT(n,e,t,s){const r=t(n),i=[];for(let a=0;a<r.length;a++){let c=r[a],u=c,h=1;for(;r[a+h];){const f=r[a+h];if(!s(u,f,n,a,e))c+=f,u=f,h++;else break}a+=h-1,i.push(c)}return i}const oV=/\r\n|\r|\n/g;function aV(n,e,t,s,r,i,a,c){var Z;const u=J3(n,e);if(LT(e.whiteSpace))for(let ne=0;ne<u.length;ne++){const W=u[ne];u[ne]={text:W.text.replace(oV," "),style:W.style}}const f=[];let p=[];for(const ne of u){const W=ne.text.split(rV);for(let j=0;j<W.length;j++){const H=W[j];H===`\r
`||H==="\r"||H===`
`?(f.push(p),p=[]):H.length>0&&p.push({text:H,style:ne.style})}}(p.length>0||f.length===0)&&f.push(p);const g=t?lV(f,e,s,r,a,c):f,y=[],x=[],w=[],v=[],S=[];let T=0;const C=e._fontString,P=i(C);P.fontSize===0&&(P.fontSize=e.fontSize,P.ascent=e.fontSize);let k="",M=!!e.dropShadow;for(const ne of g){let W=0,j=P.ascent,H=P.descent,U="";for(const I of ne){const $=I.style._fontString,le=i($);$!==k&&(s.font=$,k=$);const ue=r(I.text,I.style.letterSpacing,s);W+=ue,j=Math.max(j,le.ascent),H=Math.max(H,le.descent),U+=I.text,!M&&I.style.dropShadow&&(M=!0)}ne.length===0&&(j=P.ascent,H=P.descent),y.push(W),x.push(j),w.push(H),S.push(U);const Y=e.lineHeight||j+H;v.push(Y+e.leading),T=Math.max(T,W)}const E=((Z=e._stroke)==null?void 0:Z.width)||0,D=(t&&e.align!=="left"&&e.align!=="justify"?Math.max(T,e.wordWrapWidth):T)+E+(e.dropShadow?e.dropShadow.distance:0);let F=0;for(let ne=0;ne<v.length;ne++)F+=v[ne];F=Math.max(F,v[0]+E);const L=F+(e.dropShadow?e.dropShadow.distance:0),X=e.lineHeight||P.fontSize;return{width:D,height:L,lines:S,lineWidths:y,lineHeight:X+e.leading,maxLineWidth:T,fontProperties:P,runsByLine:g,lineAscents:x,lineDescents:w,lineHeights:v,hasDropShadow:M}}function lV(n,e,t,s,r,i){var v;const{letterSpacing:a,whiteSpace:c,wordWrapWidth:u,breakWords:h}=e,f=VT(c),p=u+a,g={};let y="";const x=(S,T)=>{const C=`${S}|${T.styleKey}`;let P=g[C];if(P===void 0){const k=T._fontString;k!==y&&(t.font=k,y=k),P=s(S,T.letterSpacing,t)+T.letterSpacing,g[C]=P}return P},w=[];for(const S of n){const T=cV(S),C=w.length,P=L=>{let X=0,Z=L;do{const{token:ne,style:W}=T[Z];X+=x(ne,W),Z++}while(Z<T.length&&T[Z].continuesFromPrevious);return X},k=L=>{const X=[];let Z=L;do X.push({token:T[Z].token,style:T[Z].style}),Z++;while(Z<T.length&&T[Z].continuesFromPrevious);return X};let M=[],E=0,R=!f,O=null;const D=()=>{O&&O.text.length>0&&M.push(O),O=null},F=()=>{if(D(),M.length>0){const L=M[M.length-1];L.text=Xs(L.text),L.text.length===0&&M.pop()}w.push(M),M=[],E=0,R=!1};for(let L=0;L<T.length;L++){const{token:X,style:Z,continuesFromPrevious:ne}=T[L],W=x(X,Z);if(f){const U=ds(X),Y=(O==null?void 0:O.text[O.text.length-1])??((v=M[M.length-1])==null?void 0:v.text.slice(-1))??"",I=Y?ds(Y):!1;if(U&&I)continue}const j=!ne,H=j?P(L):W;if(H>p&&j)if(E>0&&F(),h){const U=k(L);for(let Y=0;Y<U.length;Y++){const I=U[Y].token,$=U[Y].style,le=zT(I,h,i,r);for(const ue of le){const oe=x(ue,$);oe+E>p&&F(),!O||O.style!==$?(D(),O={text:ue,style:$}):O.text+=ue,E+=oe}}L+=U.length-1}else{const U=k(L);D(),w.push(U.map(Y=>({text:Y.token,style:Y.style}))),R=!1,L+=U.length-1}else if(H+E>p&&j){if(ds(X)){R=!1;continue}F(),O={text:X,style:Z},E=W}else if(ne&&!h)!O||O.style!==Z?(D(),O={text:X,style:Z}):O.text+=X,E+=W;else{const U=ds(X);if(E===0&&U&&!R)continue;!O||O.style!==Z?(D(),O={text:X,style:Z}):O.text+=X,E+=W}}if(D(),M.length>0){const L=M[M.length-1];L.text=Xs(L.text),L.text.length===0&&M.pop()}(M.length>0||w.length===C)&&w.push(M)}return w}function cV(n){const e=[];let t=!1;for(const s of n){const r=BT(s.text);let i=!0;for(const a of r){const c=ds(a)||Eg(a),u=i&&t&&!c;e.push({token:a,style:s.style,continuesFromPrevious:u}),t=!c,i=!1}}return e}const uV={willReadFrequently:!0};function qw(n,e,t,s,r){let i=t[n];return typeof i!="number"&&(i=r(n,e,s)+e,t[n]=i),i}function hV(n,e,t,s,r,i,a){const c=t.getContext("2d",uV);c.font=e._fontString;let u=0,h="";const f=[],p=Object.create(null),{letterSpacing:g,whiteSpace:y}=e,x=VT(y),w=LT(y);let v=!x;const S=e.wordWrapWidth+g,T=BT(n);for(let P=0;P<T.length;P++){let k=T[P];if(Eg(k)){if(!w){f.push(Xs(h)),v=!x,h="",u=0;continue}k=" "}if(x){const E=ds(k),R=ds(h[h.length-1]);if(E&&R)continue}const M=qw(k,g,p,c,s);if(M>S)if(h!==""&&(f.push(Xs(h)),h="",u=0),r(k,e.breakWords)){const E=zT(k,e.breakWords,a,i);for(const R of E){const O=qw(R,g,p,c,s);O+u>S&&(f.push(Xs(h)),v=!1,h="",u=0),h+=R,u+=O}}else h.length>0&&(f.push(Xs(h)),h="",u=0),f.push(Xs(k)),v=!1,h="",u=0;else M+u>S&&(v=!1,f.push(Xs(h)),h="",u=0),(h.length>0||!ds(k)||v)&&(h+=k,u+=M)}const C=Xs(h);return C.length>0&&f.push(C),f.join(`
`)}const Yw={willReadFrequently:!0},ir=class be{static get experimentalLetterSpacingSupported(){let e=be._experimentalLetterSpacingSupported;if(e===void 0){const t=Dn.get().getCanvasRenderingContext2D().prototype;e=be._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,s,r,i,a,c,u,h,f){this.text=e,this.style=t,this.width=s,this.height=r,this.lines=i,this.lineWidths=a,this.lineHeight=c,this.maxLineWidth=u,this.fontProperties=h,f&&(this.runsByLine=f.runsByLine,this.lineAscents=f.lineAscents,this.lineDescents=f.lineDescents,this.lineHeights=f.lineHeights,this.hasDropShadow=f.hasDropShadow)}static measureText(e=" ",t,s=be._canvas,r=t.wordWrap){var k;const i=`${e}-${t.styleKey}-wordWrap-${r}`;if(be._measurementCache.has(i))return be._measurementCache.get(i);if(OT(t)&&FT(e)){const M=aV(e,t,r,be._context,be._measureText,be.measureFont,be.canBreakChars,be.wordWrapSplit),E=new be(e,t,M.width,M.height,M.lines,M.lineWidths,M.lineHeight,M.maxLineWidth,M.fontProperties,{runsByLine:M.runsByLine,lineAscents:M.lineAscents,lineDescents:M.lineDescents,lineHeights:M.lineHeights,hasDropShadow:M.hasDropShadow});return be._measurementCache.set(i,E),E}const c=t._fontString,u=be.measureFont(c);u.fontSize===0&&(u.fontSize=t.fontSize,u.ascent=t.fontSize,u.descent=0);const h=be._context;h.font=c;const p=(r?be._wordWrap(e,t,s):e).split(iV),g=new Array(p.length);let y=0;for(let M=0;M<p.length;M++){const E=be._measureText(p[M],t.letterSpacing,h);g[M]=E,y=Math.max(y,E)}const x=((k=t._stroke)==null?void 0:k.width)??0,w=t.lineHeight||u.fontSize,v=be._getAlignWidth(y,t,r),S=be._adjustWidthForStyle(v,t),T=Math.max(w,u.fontSize+x)+(p.length-1)*(w+t.leading),C=be._adjustHeightForStyle(T,t),P=new be(e,t,S,C,p,g,w+t.leading,y,u);return be._measurementCache.set(i,P),P}static _adjustWidthForStyle(e,t){var i;const s=((i=t._stroke)==null?void 0:i.width)||0;let r=e+s;return t.dropShadow&&(r+=t.dropShadow.distance),r}static _adjustHeightForStyle(e,t){let s=e;return t.dropShadow&&(s+=t.dropShadow.distance),s}static _getAlignWidth(e,t,s){return s&&t.align!=="left"&&t.align!=="justify"?Math.max(e,t.wordWrapWidth):e}static _measureText(e,t,s){let r=!1;be.experimentalLetterSpacingSupported&&(be.experimentalLetterSpacing?(s.letterSpacing=`${t}px`,s.textLetterSpacing=`${t}px`,r=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const i=s.measureText(e);let a=i.width;const c=-(i.actualBoundingBoxLeft??0);let h=(i.actualBoundingBoxRight??0)-c;if(a>0)if(r)a-=t,h-=t;else{const f=(be.graphemeSegmenter(e).length-1)*t;a+=f,h+=f}return Math.max(a,h)}static _wordWrap(e,t,s=be._canvas){return hV(e,t,s,be._measureText,be.canBreakWords,be.canBreakChars,be.wordWrapSplit)}static isBreakingSpace(e,t){return ds(e)}static canBreakWords(e,t){return t}static canBreakChars(e,t,s,r,i){return!0}static wordWrapSplit(e){return be.graphemeSegmenter(e)}static measureFont(e){if(be._fonts[e])return be._fonts[e];const t=be._context;t.font=e;const s=t.measureText(be.METRICS_STRING+be.BASELINE_SYMBOL),r=s.actualBoundingBoxAscent??0,i=s.actualBoundingBoxDescent??0,a={ascent:r,descent:i,fontSize:r+i};return be._fonts[e]=a,a}static clearMetrics(e=""){e?delete be._fonts[e]:be._fonts={}}static get _canvas(){if(!be.__canvas){let e;try{const t=new OffscreenCanvas(0,0),s=t.getContext("2d",Yw);if(s!=null&&s.measureText)return be.__canvas=t,t;e=Dn.get().createCanvas()}catch{e=Dn.get().createCanvas()}e.width=e.height=10,be.__canvas=e}return be.__canvas}static get _context(){return be.__context||(be.__context=be._canvas.getContext("2d",Yw)),be.__context}};ir.METRICS_STRING="|Ã‰qÃ…";ir.BASELINE_SYMBOL="M";ir.BASELINE_MULTIPLIER=1.4;ir.HEIGHT_MULTIPLIER=2;ir.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return e=>{const t=n.segment(e),s=[];let r=0;for(const i of t)s[r++]=i.segment;return s}}return n=>[...n]})();ir.experimentalLetterSpacing=!1;ir._fonts={};ir._measurementCache=Z3(1e3);let Nr=ir;const dV=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function _m(n){const e=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let t=n.fontFamily;Array.isArray(n.fontFamily)||(t=n.fontFamily.split(","));for(let s=t.length-1;s>=0;s--){let r=t[s].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!dV.includes(r)&&(r=`"${r}"`),t[s]=r}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${e} ${t.join(",")}`}const Xw=1e5;function Iu(n,e,t,s=0,r=0,i=0){if(n.texture===Le.WHITE&&!n.fill)return Pt.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof kh){const a=n.fill,c=e.createPattern(a.texture.source.resource,"repeat"),u=a.transform.copyTo(De.shared);return u.scale(a.texture.source.pixelWidth,a.texture.source.pixelHeight),c.setTransform(u),c}else if(n.fill instanceof ln){const a=n.fill,c=a.type==="linear",u=a.textureSpace==="local";let h=1,f=1;u&&t&&(h=t.width+s,f=t.height+s);let p,g=!1;if(c){const{start:y,end:x}=a;p=e.createLinearGradient(y.x*h+r,y.y*f+i,x.x*h+r,x.y*f+i),g=Math.abs(x.x-y.x)<Math.abs((x.y-y.y)*.1)}else{const{center:y,innerRadius:x,outerCenter:w,outerRadius:v}=a;p=e.createRadialGradient(y.x*h+r,y.y*f+i,x*h,w.x*h+r,w.y*f+i,v*h)}if(g&&u&&t){const y=t.lineHeight/f;for(let x=0;x<t.lines.length;x++){const w=(x*t.lineHeight+s/2)/f;a.colorStops.forEach(v=>{let S=w+v.offset*y;S=Math.max(0,Math.min(1,S)),p.addColorStop(Math.floor(S*Xw)/Xw,Pt.shared.setValue(v.color).toHex())})}}else a.colorStops.forEach(y=>{p.addColorStop(y.offset,Pt.shared.setValue(y.color).toHex())});return p}}else{const a=e.createPattern(n.texture.source.resource,"repeat"),c=n.matrix.copyTo(De.shared);return c.scale(n.texture.source.pixelWidth,n.texture.source.pixelHeight),a.setTransform(c),a}return un("FillStyle not recognised",n),"red"}const Kw=new _t;class fV{getCanvasAndContext(e){const{text:t,style:s,resolution:r=1}=e,i=s._getFinalPadding(),a=Nr.measureText(t||" ",s),c=Math.ceil(Math.ceil(Math.max(1,a.width)+i*2)*r),u=Math.ceil(Math.ceil(Math.max(1,a.height)+i*2)*r),h=ym.getOptimalCanvasAndContext(c,u);this._renderTextToCanvas(s,i,r,h,a);const f=s.trim?X3({canvas:h.canvas,width:c,height:u,resolution:1,output:Kw}):Kw.set(0,0,c,u);return{canvasAndContext:h,frame:f}}returnCanvasAndContext(e){ym.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,s,r,i){var M,E,R;if(i.runsByLine&&i.runsByLine.length>0){this._renderTaggedTextToCanvas(i,e,t,s,r);return}const{canvas:a,context:c}=r,u=_m(e),h=i.lines,f=i.lineHeight,p=i.lineWidths,g=i.maxLineWidth,y=i.fontProperties,x=a.height;if(c.resetTransform(),c.scale(s,s),c.textBaseline=e.textBaseline,(M=e._stroke)!=null&&M.width){const O=e._stroke;c.lineWidth=O.width,c.miterLimit=O.miterLimit,c.lineJoin=O.join,c.lineCap=O.cap}c.font=u;let w,v;const S=e.dropShadow?2:1,T=e.wordWrap?e.wordWrapWidth:g,P=(((E=e._stroke)==null?void 0:E.width)??0)/2;let k=(f-y.fontSize)/2;f-y.fontSize<0&&(k=0);for(let O=0;O<S;++O){const D=e.dropShadow&&O===0,F=D?Math.ceil(Math.max(1,x)+t*2):0,L=F*s;if(D)this._setupDropShadow(c,e,s,L);else{const X=e._gradientBounds,Z=e._gradientOffset;if(X){const ne={width:X.width,height:X.height,lineHeight:X.height,lines:i.lines};this._setFillAndStrokeStyles(c,e,ne,t,P,(Z==null?void 0:Z.x)??0,(Z==null?void 0:Z.y)??0)}else Z?this._setFillAndStrokeStyles(c,e,i,t,P,Z.x,Z.y):this._setFillAndStrokeStyles(c,e,i,t,P);c.shadowColor="black"}for(let X=0;X<h.length;X++)w=P,v=P+X*f+y.ascent+k,w+=this._getAlignmentOffset(p[X],T,e.align),(R=e._stroke)!=null&&R.width&&this._drawLetterSpacing(h[X],e,r,w+t,v+t-F,!0),e._fill!==void 0&&this._drawLetterSpacing(h[X],e,r,w+t,v+t-F)}}_renderTaggedTextToCanvas(e,t,s,r,i){var P,k;const{canvas:a,context:c}=i,{runsByLine:u,lineWidths:h,maxLineWidth:f,lineAscents:p,lineHeights:g,hasDropShadow:y}=e,x=a.height;c.resetTransform(),c.scale(r,r),c.textBaseline=t.textBaseline;const w=y?2:1,v=t.wordWrap?t.wordWrapWidth:f,T=(((P=t._stroke)==null?void 0:P.width)??0)/2,C=[];for(let M=0;M<u.length;M++){const E=u[M],R=[];for(const O of E){const D=_m(O.style);c.font=D,R.push({width:Nr._measureText(O.text,O.style.letterSpacing,c),font:D})}C.push(R)}for(let M=0;M<w;++M){const E=y&&M===0,R=E?Math.ceil(Math.max(1,x)+s*2):0,O=R*r;E||(c.shadowColor="black");let D=T;for(let F=0;F<u.length;F++){const L=u[F],X=h[F],Z=p[F],ne=g[F],W=C[F];let j=T;j+=this._getAlignmentOffset(X,v,t.align);const H=D+Z;let U=j+s;for(let Y=0;Y<L.length;Y++){const I=L[Y],{width:$,font:le}=W[Y];if(c.font=le,c.textBaseline=I.style.textBaseline,(k=I.style._stroke)!=null&&k.width){const ue=I.style._stroke;if(c.lineWidth=ue.width,c.miterLimit=ue.miterLimit,c.lineJoin=ue.join,c.lineCap=ue.cap,E)if(I.style.dropShadow)this._setupDropShadow(c,I.style,r,O);else{U+=$;continue}else{const oe=Nr.measureFont(le),ce=I.style.lineHeight||oe.fontSize,ge={width:$,height:ce,lineHeight:ce,lines:[I.text]};c.strokeStyle=Iu(ue,c,ge,s*2,U-s,D)}this._drawLetterSpacing(I.text,I.style,i,U,H+s-R,!0)}U+=$}U=j+s;for(let Y=0;Y<L.length;Y++){const I=L[Y],{width:$,font:le}=W[Y];if(c.font=le,c.textBaseline=I.style.textBaseline,I.style._fill!==void 0){if(E)if(I.style.dropShadow)this._setupDropShadow(c,I.style,r,O);else{U+=$;continue}else{const ue=Nr.measureFont(le),oe=I.style.lineHeight||ue.fontSize,ce={width:$,height:oe,lineHeight:oe,lines:[I.text]};c.fillStyle=Iu(I.style._fill,c,ce,s*2,U-s,D)}this._drawLetterSpacing(I.text,I.style,i,U,H+s-R,!1)}U+=$}D+=ne}}}_setFillAndStrokeStyles(e,t,s,r,i,a=0,c=0){var u;if(e.fillStyle=t._fill?Iu(t._fill,e,s,r*2,a,c):null,(u=t._stroke)!=null&&u.width){const h=i+r*2;e.strokeStyle=Iu(t._stroke,e,s,h,a,c)}}_setupDropShadow(e,t,s,r){e.fillStyle="black",e.strokeStyle="black";const i=t.dropShadow,a=i.color,c=i.alpha;e.shadowColor=Pt.shared.setValue(a).setAlpha(c).toRgbaString();const u=i.blur*s,h=i.distance*s;e.shadowBlur=u,e.shadowOffsetX=Math.cos(i.angle)*h,e.shadowOffsetY=Math.sin(i.angle)*h+r}_getAlignmentOffset(e,t,s){return s==="right"?t-e:s==="center"?(t-e)/2:0}_drawLetterSpacing(e,t,s,r,i,a=!1){const{context:c}=s,u=t.letterSpacing;let h=!1;if(Nr.experimentalLetterSpacingSupported&&(Nr.experimentalLetterSpacing?(c.letterSpacing=`${u}px`,c.textLetterSpacing=`${u}px`,h=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px")),u===0||h){a?c.strokeText(e,r,i):c.fillText(e,r,i);return}let f=r;const p=Nr.graphemeSegmenter(e);let g=c.measureText(e).width,y=0;for(let x=0;x<p.length;++x){const w=p[x];a?c.strokeText(w,f,i):c.fillText(w,f,i);let v="";for(let S=x+1;S<p.length;++S)v+=p[S];y=c.measureText(v).width,f+=g-y+u,g=y}}}const Co=new fV,Rg=class vi extends Os{constructor(e={}){super(),this.uid=mt("textStyle"),this._tick=0,this._cachedFontString=null,pV(e),e instanceof vi&&(e=e._toObject());const r={...vi.defaultTextStyle,...e};for(const i in r){const a=i;this[a]=r[i]}this._tagStyles=e.tagStyles??void 0,this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...vi.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...vi.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...cs.defaultFillStyle,...e},()=>{this._fill=Ci({...this._originalFill},cs.defaultFillStyle)})),this._fill=Ci(e===0?"black":e,cs.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...cs.defaultStrokeStyle,...e},()=>{this._stroke=th({...this._originalStroke},cs.defaultStrokeStyle)})),this._stroke=th(e,cs.defaultStrokeStyle),this.update())}get tagStyles(){return this._tagStyles}set tagStyles(e){this._tagStyles!==e&&(this._tagStyles=e??void 0,this.update())}update(){this._tick++,this._cachedFontString=null,this.emit("update",this)}reset(){const e=vi.defaultTextStyle;for(const t in e)this[t]=e[t]}assign(e){for(const t in e){const s=t;this[s]=e[t]}return this}get styleKey(){return`${this.uid}-${this._tick}`}get _fontString(){return this._cachedFontString===null&&(this._cachedFontString=_m(this)),this._cachedFontString}_toObject(){return{align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill?{...this._fill}:void 0,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke?{...this._stroke}:void 0,textBaseline:this.textBaseline,trim:this.trim,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0,tagStyles:this._tagStyles?{...this._tagStyles}:void 0}}clone(){return new vi(this._toObject())}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){var s,r,i,a;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const c=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(c),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(c),(i=this._stroke)!=null&&i.texture&&this._stroke.texture.destroy(c),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(s,r,i)=>(s[r]===i||(s[r]=i,t==null||t(r,i),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Pt.isColorLike(e)||e instanceof ln||e instanceof kh)}};Rg.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Rg.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ot=Rg;function pV(n){const e=n;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=Ot.defaultDropShadow;n.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Oe(ft,"strokeThickness is now a part of stroke");const t=e.stroke;let s={};if(Pt.isColorLike(t))s.color=t;else if(t instanceof ln||t instanceof kh)s.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))s=t;else throw new Error("Invalid stroke value.");n.stroke={...s,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Oe(ft,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&un("The number of fill colors must match the number of fill gradient stops.");const t=new ln({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),s=e.fillGradientStops.slice(),r=e.fill.map(i=>Pt.shared.setValue(i).toNumber());s.forEach((i,a)=>{t.addColorStop(i,r[a])}),n.fill={fill:t}}}function mV(n,e){const{texture:t,bounds:s}=n,r=e._style._getFinalPadding();CS(s,e._anchor,t);const i=e._anchor._x*r*2,a=e._anchor._y*r*2;s.minX-=r-i,s.minY-=r-a,s.maxX-=r-i,s.maxY-=r-a}class gV{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}class yV extends gV{}class jT{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new Bl({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"canvasText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t!=null&&t._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),s=e.styleKey;return t.currentKey!==s?!0:e._didTextUpdate}addRenderable(e,t){const s=this._getGpuText(e);if(e._didTextUpdate){const r=e._autoResolution?this._renderer.resolution:e.resolution;(s.currentKey!==e.styleKey||e._resolution!==r)&&this._updateGpuText(e),e._didTextUpdate=!1,mV(s,e)}this._renderer.renderPipes.batch.addToBatch(s,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}_updateGpuText(e){const t=this._getGpuText(e);t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,t.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new yV;return t.currentKey="--",t.renderable=e,t.transform=e.groupTransform,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{canvasText:s}=this._renderer;s.getReferenceCount(t.currentKey)>0?s.decreaseReferenceCount(t.currentKey):t.texture&&s.returnTexture(t.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}}jT.extension={type:[Pe.WebGLPipes,Pe.WebGPUPipes,Pe.CanvasPipes],name:"text"};const _V=new Qn;function xV(n,e,t,s){const r=_V;r.minX=0,r.minY=0,r.maxX=n.width/s|0,r.maxY=n.height/s|0;const i=Ps.getOptimalTexture(r.width,r.height,s,!1);return i.source.uploadMethodId="image",i.source.resource=n,i.source.alphaMode="premultiply-alpha-on-upload",i.frame.width=e/s,i.frame.height=t/s,i.source.emit("update",i.source),i.updateUvs(),i}class UT{constructor(e,t){this._activeTextures={},this._renderer=e,this._retainCanvasContext=t}getTexture(e,t,s,r){typeof e=="string"&&(Oe("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:s,resolution:t}),e.style instanceof Ot||(e.style=new Ot(e.style)),e.textureStyle instanceof Vo||(e.textureStyle=new Vo(e.textureStyle)),typeof e.text!="string"&&(e.text=e.text.toString());const{text:i,style:a,textureStyle:c}=e,u=e.resolution??this._renderer.resolution,{frame:h,canvasAndContext:f}=Co.getCanvasAndContext({text:i,style:a,resolution:u}),p=xV(f.canvas,h.width,h.height,u);if(c&&(p.source.style=c),a.trim&&(h.pad(a.padding),p.frame.copyFrom(h),p.frame.scale(1/u),p.updateUvs()),a.filters){const g=this._applyFilters(p,a.filters);return this.returnTexture(p),Co.returnCanvasAndContext(f),g}return this._renderer.texture.initSource(p._source),this._retainCanvasContext||Co.returnCanvasAndContext(f),p}returnTexture(e){const t=e.source,s=t.resource;if(this._retainCanvasContext&&(s!=null&&s.getContext)){const r=s.getContext("2d");r&&Co.returnCanvasAndContext({canvas:s,context:r})}t.resource=null,t.uploadMethodId="unknown",t.alphaMode="no-premultiply-alpha",Ps.returnTexture(e,!0)}renderTextToCanvas(){Oe("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;const s=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[t]={texture:s,usageCount:1},s}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(this.returnTexture(t.texture),this._activeTextures[e]=null))}getReferenceCount(e){var t;return((t=this._activeTextures[e])==null?void 0:t.usageCount)??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,t){const s=this._renderer.renderTarget.renderTarget,r=this._renderer.filter.generateFilteredTexture({texture:e,filters:t});return this._renderer.renderTarget.bind(s,!1),r}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}}class WT extends UT{constructor(e){super(e,!0)}}WT.extension={type:[Pe.CanvasSystem],name:"canvasText"};class GT extends UT{constructor(e){super(e,!1)}}GT.extension={type:[Pe.WebGLSystem,Pe.WebGPUSystem],name:"canvasText"};xt.add(WT);xt.add(GT);xt.add(jT);class Fr extends H3{constructor(...e){const t=$3(e,"Text");super(t,Ot),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Vo?t.textureStyle:new Vo(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let s=0,r=0;if(this._style.trim){const{frame:i,canvasAndContext:a}=Co.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Co.returnCanvasAndContext(a),s=i.width,r=i.height}else{const i=Nr.measureText(this._text,this._style);s=i.width,r=i.height}e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*r,e.maxY=e.minY+r}}xt.add(ZN,QN);async function vV(n){const e=new yT,t=typeof navigator<"u"&&navigator.maxTouchPoints>0,s=window.devicePixelRatio||1,r=t?Math.min(s,2):s;await e.init({canvas:n,width:800,height:600,antialias:!1,backgroundColor:657946,resolution:r,autoDensity:!0});const i=()=>{const a=n.parentElement;if(a){const c=a.clientWidth,u=a.clientHeight;e.renderer.resize(c,u)}};return window.addEventListener("resize",i),i(),{app:e,cleanup:()=>window.removeEventListener("resize",i)}}function wV(){const n=J.useRef(null),[e,t]=J.useState(null);return J.useEffect(()=>{if(!n.current)return;let s=!1,r=null;const i=document.createElement("canvas");i.style.width="100%",i.style.height="100%",i.style.display="block",n.current.appendChild(i);let a=null;return vV(i).then(({app:c,cleanup:u})=>{if(s){u(),c.destroy(!0,{children:!0,texture:!1});return}r=c,a=u,t(c)}),()=>{s=!0,a&&a(),r?r.destroy(!0,{children:!0,texture:!1}):i.parentElement&&i.remove()}},[]),{containerRef:n,app:e}}class bV{calculateScore(e,t){return DN[e]*t}calculateFinalScore(e,t,s,r,i,a){let c=0,u=0,h=0,f=0,p=0;r.forEach(w=>{switch(w.judgment){case"perfect":c++,p+=1;break;case"great":u++,p+=.75;break;case"good":h++,p+=.5;break;case"miss":f++,p+=0;break}});const g=Math.max(0,s-r.length);g>0&&(f+=g);const y=Math.min(100,Math.max(0,s>0?p/s*100:0));r.length>s&&ph("scoring.hit_result.overflow",{hitResults:r.length,totalNotes:s,delta:r.length-s});let x="C";return y>=sp.S?x="S":y>=sp.A?x="A":y>=sp.B&&(x="B"),{songId:e,songName:t,totalNotes:s,perfects:c,greats:u,goods:h,misses:f,maxCombo:i,score:a,accuracy:y,grade:x,date:Date.now()}}}const SV=[...gS].sort((n,e)=>n.combo-e.combo);class TV{constructor(){Q(this,"_combo",0);Q(this,"_maxCombo",0);Q(this,"_multiplier",1)}get combo(){return this._combo}get maxCombo(){return this._maxCombo}get multiplier(){return this._multiplier}hit(e){let t=!1,s=!1;return e==="miss"?(t=this._combo>0,this._combo=0,this.updateMultiplier(),{combo:this._combo,multiplier:this._multiplier,isMilestone:s,isBreak:t}):(this._combo++,this._combo>this._maxCombo&&(this._maxCombo=this._combo),this.updateMultiplier(),gS.some(i=>i.combo===this._combo)&&this._combo>=10&&(s=!0),{combo:this._combo,multiplier:this._multiplier,isMilestone:s,isBreak:t})}updateMultiplier(){let e=1;for(const t of SV)this._combo>=t.combo&&(e=t.multiplier);this._multiplier=e}reset(){this._combo=0,this._maxCombo=0,this._multiplier=1}}class CV{constructor(){Q(this,"listeners",new Map)}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){const s=this.listeners.get(e);s&&s.delete(t)}emit(e,t){const s=this.listeners.get(e);if(s)for(const r of Array.from(s))r(t)}clear(){this.listeners.clear()}}class kV{constructor(e,t,s,r,i,a,c){Q(this,"playback");Q(this,"state");Q(this,"scheduler");Q(this,"tracker");Q(this,"hitSounds");Q(this,"timeProvider");Q(this,"scoring");Q(this,"combo");Q(this,"_score",0);Q(this,"hitResults",[]);Q(this,"beatMap");Q(this,"_isRunning",!1);Q(this,"_hasStarted",!1);Q(this,"_lastScoreLogTime",0);Q(this,"events");this.playback=t,this.state=s,this.beatMap=e,this.scheduler=r,this.hitSounds=i,this.timeProvider=a,this.tracker=c,this.tracker.setOnMiss(this.handleAutoMiss.bind(this)),this.scoring=new bV,this.combo=new TV,this.events=new CV}get isRunning(){return this._isRunning}get score(){return this._score}get currentCombo(){return this.combo.combo}get currentMultiplier(){return this.combo.multiplier}get currentTime(){return this.timeProvider.getCurrentTime()}async start(){if(this._hasStarted){this.resume();return}this.scheduler.scheduleAll(this.beatMap.notes,e=>{this.tracker.spawnNote(e)}),await this.playback.start(),this._isRunning=!0,this._hasStarted=!0,Re("game.start",{noteCount:this.beatMap.notes.length,bpm:this.beatMap.bpm}),di({phase:"playing"})}update(e){if(!this._isRunning)return;const{holdTicks:t}=this.tracker.update(e);this.state.setCurrentTime(e);const s=performance.now();s-this._lastScoreLogTime>250&&(Re("game.score.updated",{score:this._score,combo:this.combo.combo,multiplier:this.combo.multiplier}),di({score:this._score,maxCombo:this.combo.maxCombo,phase:"playing"}),this._lastScoreLogTime=s),t>0&&(this._score+=t*10*this.combo.multiplier,this.state.updateScoreAndCombo(this._score,this.combo.combo,this.combo.multiplier));const r=this.state.song;r&&e>=r.duration+.5&&this.endGame()}handleInput(e,t){if(!this._isRunning)return;const s=this.tracker.judgeHit(e,t);if(s){const r=this.combo.hit(s.judgment);s.comboAtHit=r.combo,this.events.emit("hit",{judgment:s.judgment,lane:e,combo:r.combo,multiplier:r.multiplier}),r.isMilestone&&this.events.emit("combo-milestone",{combo:r.combo}),this.hitSounds.playHit(s.judgment,r.combo);const i=this.scoring.calculateScore(s.judgment,this.combo.multiplier);this._score+=i,this.state.updateScoreAndCombo(this._score,this.combo.combo,this.combo.multiplier),this.hitResults.push(s),this.state.addHitResult(s)}else{const r=this.tracker.getNearestNoteDelta(e,t);r!==null&&Math.abs(r)<=FN?this.events.emit("near-miss",{lane:e}):this.events.emit("ghost-press",{lane:e})}}handleInputUp(e,t){if(!this._isRunning)return;this.tracker.judgeRelease(e,t)==="miss"&&this.handleAutoMiss("hold-release",e)}handleAutoMiss(e,t){const s=this.combo.combo;this.combo.hit("miss"),s>0&&this.events.emit("combo-break",{previousCombo:s}),this.events.emit("miss",{lane:t}),this.state.updateScoreAndCombo(this._score,0,1);const r={noteId:e,judgment:"miss",delta:0,comboAtHit:s};this.hitResults.push(r),this.state.addHitResult(r)}pause(){this._isRunning=!1,this.playback.pause(),this.state.setPhase("paused"),Re("game.pause",{score:this._score,combo:this.combo.combo}),di({phase:"paused"})}resume(){this.state.setPhase("playing"),this._isRunning=!0,this.playback.resume(),Re("game.resume",{}),di({phase:"playing"})}retry(){this._isRunning=!1,this._hasStarted=!1,this.playback.stop(),this.scheduler.clear(),this.tracker.reset(),this.combo.reset(),this._score=0,this.hitResults=[],this.state.updateScoreAndCombo(0,0,1),this.playback.seek(0),this.state.setPhase("countdown"),Re("game.retry",{}),di({score:0,maxCombo:0,phase:"countdown"})}endGame(){this._isRunning=!1,this.playback.stop(),this.scheduler.clear();const e=this.state.song;if(!e)return;const t=this.scoring.calculateFinalScore(e.id,e.name,this.beatMap.notes.length,this.hitResults,this.combo.maxCombo,this._score);this.state.setFinalScore(t),this.state.setPhase("results"),Re("game.end",{score:this._score,maxCombo:this.combo.maxCombo,hits:this.hitResults.filter(s=>s.judgment!=="miss").length,misses:this.hitResults.filter(s=>s.judgment==="miss").length}),di({score:this._score,maxCombo:this.combo.maxCombo,phase:"results"})}destroy(){Re("game.engine.destroy",{score:this._score,activeNotes:this.tracker.getActiveNotes().length}),this._isRunning=!1,this.scheduler.clear(),this.playback.destroy()}getActiveNotes(){return this.tracker.getActiveNotes()}}const HT="15.1.22",Zw=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Qw=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),xm=(n,e)=>({startTime:e,type:"setValue",value:n}),$T=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),qT=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),ko=n=>n.type==="exponentialRampToValue",nh=n=>n.type==="linearRampToValue",Or=n=>ko(n)||nh(n),Ig=n=>n.type==="setValue",Ks=n=>n.type==="setValueCurve",sh=(n,e,t,s)=>{const r=n[e];return r===void 0?s:Or(r)||Ig(r)?r.value:Ks(r)?r.values[r.values.length-1]:qT(t,sh(n,e-1,r.startTime,s),r)},Jw=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:Or(t)?[t.endTime,t.value]:Ig(t)?[t.startTime,t.value]:Ks(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,sh(n,e-1,t.startTime,r)],vm=n=>n.type==="cancelAndHold",wm=n=>n.type==="cancelScheduledValues",Rr=n=>vm(n)||wm(n)?n.cancelTime:ko(n)||nh(n)?n.endTime:n.startTime,e1=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,t1=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),AV=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},MV=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return AV(s,r)},Nu=n=>n.type==="setTarget";class PV{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Rr(e);if(vm(e)||wm(e)){const s=this._automationEvents.findIndex(i=>wm(e)&&Ks(i)?i.startTime+i.duration>=t:Rr(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),vm(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Or(r)){if(i!==void 0&&Nu(i))throw new Error("The internal list is malformed.");const a=i===void 0?r.insertTime:Ks(i)?i.startTime+i.duration:Rr(i),c=i===void 0?this._defaultValue:Ks(i)?i.values[i.values.length-1]:i.value,u=ko(r)?e1(t,a,c,r):t1(t,a,c,r),h=ko(r)?Zw(u,t,this._currenTime):Qw(u,t,this._currenTime);this._automationEvents.push(h)}if(i!==void 0&&Nu(i)&&this._automationEvents.push(xm(this.getValue(t),t)),i!==void 0&&Ks(i)&&i.startTime+i.duration>t){const a=t-i.startTime,c=(i.values.length-1)/i.duration,u=Math.max(2,1+Math.ceil(a*c)),h=a/(u-1)*c,f=i.values.slice(0,u);if(h<1)for(let p=1;p<u;p+=1){const g=h*p%1;f[p]=i.values[p-1]*(1-g)+i.values[p]*g}this._automationEvents[this._automationEvents.length-1]=$T(f,i.startTime,a)}}}else{const s=this._automationEvents.findIndex(a=>Rr(a)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Ks(r)&&Rr(r)+r.duration>t)return!1;const i=ko(e)?Zw(e.value,e.endTime,this._currenTime):nh(e)?Qw(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(Ks(e)&&t+e.duration>Rr(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>Rr(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];Nu(r)&&s.unshift(xm(sh(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(a=>Rr(a)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Nu(i)&&(s===void 0||!Or(s)||s.insertTime>e))return qT(e,sh(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Ig(i)&&(s===void 0||!Or(s)))return i.value;if(i!==void 0&&Ks(i)&&(s===void 0||!Or(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?MV(e,i):i.values[i.values.length-1];if(i!==void 0&&Or(i)&&(s===void 0||!Or(s)))return i.value;if(s!==void 0&&ko(s)){const[a,c]=Jw(this._automationEvents,r,i,s,this._defaultValue);return e1(e,a,c,s)}if(s!==void 0&&nh(s)){const[a,c]=Jw(this._automationEvents,r,i,s,this._defaultValue);return t1(e,a,c,s)}return this._defaultValue}}const EV=n=>({cancelTime:n,type:"cancelAndHold"}),RV=n=>({cancelTime:n,type:"cancelScheduledValues"}),IV=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),NV=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),DV=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),OV=()=>new DOMException("","AbortError"),FV=n=>(e,t,[s,r,i],a)=>{n(e[r],[t,s,i],c=>c[0]===t&&c[1]===s,a)},VV=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},LV=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},zo=new WeakSet,YT=new WeakMap,Ng=new WeakMap,XT=new WeakMap,Dg=new WeakMap,Ah=new WeakMap,KT=new WeakMap,bm=new WeakMap,Sm=new WeakMap,Tm=new WeakMap,ZT={construct(){return ZT}},BV=n=>{try{const e=new Proxy(n,ZT);new e}catch{return!1}return!0},n1=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,s1=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(n1);for(;r!==null;){const i=r[1].slice(1,-1),a=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(a),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(n1)}return[t.join(";"),s]},r1=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},i1=n=>{if(!BV(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},zV=(n,e,t,s,r,i,a,c,u,h,f,p,g)=>{let y=0;return(x,w,v={credentials:"omit"})=>{const S=f.get(x);if(S!==void 0&&S.has(w))return Promise.resolve();const T=h.get(x);if(T!==void 0){const k=T.get(w);if(k!==void 0)return k}const C=i(x),P=C.audioWorklet===void 0?r(w).then(([k,M])=>{const[E,R]=s1(k,M),O=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${R}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const k=g._AWGS.pop();if(k===void 0)throw new SyntaxError;s(C.currentTime,C.sampleRate,()=>k(class{},void 0,(M,E)=>{if(M.trim()==="")throw e();const R=Sm.get(C);if(R!==void 0){if(R.has(M))throw e();i1(E),r1(E.parameterDescriptors),R.set(M,E)}else i1(E),r1(E.parameterDescriptors),Sm.set(C,new Map([[M,E]]))},C.sampleRate,void 0,void 0))}):Promise.all([r(w),Promise.resolve(n(p,p))]).then(([[k,M],E])=>{const R=y+1;y=R;const[O,D]=s1(k,M),Z=`${O};((AudioWorkletProcessor,registerProcessor)=>{${D}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${R}',class extends AudioWorkletProcessor{process(){return !1}})`,ne=new Blob([Z],{type:"application/javascript; charset=utf-8"}),W=URL.createObjectURL(ne);return C.audioWorklet.addModule(W,v).then(()=>{if(c(C))return C;const j=a(C);return j.audioWorklet.addModule(W,v).then(()=>j)}).then(j=>{if(u===null)throw new SyntaxError;try{new u(j,`__sac${R}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(W))});return T===void 0?h.set(x,new Map([[w,P]])):T.set(w,P),P.then(()=>{const k=f.get(x);k===void 0?f.set(x,new Set([w])):k.add(w)}).finally(()=>{const k=h.get(x);k!==void 0&&k.delete(w)}),P}},ps=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Mh=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},QT=(n,e,t,s)=>{const r=ps(n,e),i=Mh(r,a=>a[0]===t&&a[1]===s);return r.size===0&&n.delete(e),i},zl=n=>ps(KT,n),jo=n=>{if(zo.has(n))throw new Error("The AudioNode is already stored.");zo.add(n),zl(n).forEach(e=>e(!0))},JT=n=>"port"in n,jl=n=>{if(!zo.has(n))throw new Error("The AudioNode is not stored.");zo.delete(n),zl(n).forEach(e=>e(!1))},Cm=(n,e)=>{!JT(n)&&e.every(t=>t.size===0)&&jl(n)},jV=(n,e,t,s,r,i,a,c,u,h,f,p,g)=>{const y=new WeakMap;return(x,w,v,S,T)=>{const{activeInputs:C,passiveInputs:P}=i(w),{outputs:k}=i(x),M=c(x),E=R=>{const O=u(w),D=u(x);if(R){const F=QT(P,x,v,S);n(C,x,F,!1),!T&&!p(x)&&t(D,O,v,S),g(w)&&jo(w)}else{const F=s(C,x,v,S);e(P,S,F,!1),!T&&!p(x)&&r(D,O,v,S);const L=a(w);if(L===0)f(w)&&Cm(w,C);else{const X=y.get(w);X!==void 0&&clearTimeout(X),y.set(w,setTimeout(()=>{f(w)&&Cm(w,C)},L*1e3))}}};return h(k,[w,v,S],R=>R[0]===w&&R[1]===v&&R[2]===S,!0)?(M.add(E),f(x)?n(C,x,[v,S,E],!0):e(P,S,[x,v,E],!0),!0):!1}},UV=n=>(e,t,[s,r,i],a)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[r,t,i]])):n(c,[r,t,i],u=>u[0]===r&&u[1]===t,a)},WV=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},GV=n=>(e,t)=>{n(e).add(t)},HV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},$V=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=r(c),f={...HV,...u},p=s(h,f),g=i(h)?e():null;super(c,!1,p,g),this._nativeAnalyserNode=p}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const u=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=u,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const u=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=u,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},en=(n,e)=>n.context===e,qV=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,a)=>{let c=e(i);if(!en(c,a)){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(a,h)}return s.set(a,c),await t(i,a,c),c};return{render(i,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):r(i,a)}}},rh=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fs=()=>new DOMException("","IndexSizeError"),Og=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Fs():s}})(n.getChannelData)},YV={numberOfChannels:1},XV=(n,e,t,s,r,i,a,c)=>{let u=null;return class eC{constructor(f){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:p,numberOfChannels:g,sampleRate:y}={...YV,...f};u===null&&(u=new r(1,1,44100));const x=s!==null&&e(i,i)?new s({length:p,numberOfChannels:g,sampleRate:y}):u.createBuffer(g,p,y);if(x.numberOfChannels===0)throw t();return typeof x.copyFromChannel!="function"?(a(x),Og(x)):e(rh,()=>rh(x))||c(x),n.add(x),x}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===eC.prototype||n.has(f)}}},vn=-34028234663852886e22,on=-vn,er=n=>zo.has(n),KV={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ZV=(n,e,t,s,r,i,a,c)=>class extends n{constructor(h,f){const p=i(h),g={...KV,...f},y=r(p,g),x=a(p),w=x?e():null;super(h,!1,y,w),this._audioBufferSourceNodeRenderer=w,this._isBufferNullified=!1,this._isBufferSet=g.buffer!==null,this._nativeAudioBufferSourceNode=y,this._onended=null,this._playbackRate=t(this,x,y.playbackRate,on,vn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?c(this,h):null;this._nativeAudioBufferSourceNode.onended=f;const p=this._nativeAudioBufferSourceNode.onended;this._onended=p!==null&&p===f?h:p}get playbackRate(){return this._playbackRate}start(h=0,f=0,p){if(this._nativeAudioBufferSourceNode.start(h,f,p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=p===void 0?[h,f]:[h,f,p]),this.context.state!=="closed"){jo(this);const g=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",g),er(this)&&jl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",g)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},QV=(n,e,t,s,r)=>()=>{const i=new WeakMap;let a=null,c=null;const u=async(h,f)=>{let p=t(h);const g=en(p,f);if(!g){const y={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value};p=e(f,y),a!==null&&p.start(...a),c!==null&&p.stop(c)}return i.set(f,p),g?await n(f,h.playbackRate,p.playbackRate):await s(f,h.playbackRate,p.playbackRate),await r(h,f,p),p};return{set start(h){a=h},set stop(h){c=h},render(h,f){const p=i.get(f);return p!==void 0?Promise.resolve(p):u(h,f)}}},JV=n=>"playbackRate"in n,eL=n=>"frequency"in n&&"gain"in n,tL=n=>"offset"in n,nL=n=>!("frequency"in n)&&"gain"in n,sL=n=>"detune"in n&&"frequency"in n&&!("gain"in n),rL=n=>"pan"in n,cn=n=>ps(YT,n),Ul=n=>ps(XT,n),km=(n,e)=>{const{activeInputs:t}=cn(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||km(i,[...e,n])}));const s=JV(n)?[n.playbackRate]:JT(n)?Array.from(n.parameters.values()):eL(n)?[n.Q,n.detune,n.frequency,n.gain]:tL(n)?[n.offset]:nL(n)?[n.gain]:sL(n)?[n.detune,n.frequency]:rL(n)?[n.pan]:[];for(const r of s){const i=Ul(r);i!==void 0&&i.activeInputs.forEach(([a])=>km(a,e))}er(n)&&jl(n)},tC=n=>{km(n.destination,[])},iL=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),oL=(n,e,t,s,r,i,a,c,u)=>class extends n{constructor(f={}){if(u===null)throw new Error("Missing the native AudioContext constructor.");let p;try{p=new u(f)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?t():x}if(p===null)throw s();if(!iL(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&p.sampleRate!==f.sampleRate)throw t();super(p,2);const{latencyHint:g}=f,{sampleRate:y}=p;if(this._baseLatency=typeof p.baseLatency=="number"?p.baseLatency:g==="balanced"?512/y:g==="interactive"||g===void 0?256/y:g==="playback"?1024/y:Math.max(2,Math.min(128,Math.round(g*y/128)))*128/y,this._nativeAudioContext=p,u.name==="webkitAudioContext"?(this._nativeGainNode=p.createGain(),this._nativeOscillatorNode=p.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(p.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,p.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),p.removeEventListener("statechange",x)};p.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),tC(this)}))}createMediaElementSource(f){return new r(this,{mediaElement:f})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(f){return new a(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new c(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,p)=>{const g=()=>{this._nativeAudioContext.removeEventListener("statechange",g),this._nativeAudioContext.state==="running"?f():this.resume().then(f,p)};this._nativeAudioContext.addEventListener("statechange",g)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?e():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?e():f})}},aL=(n,e,t,s,r,i,a,c)=>class extends n{constructor(h,f){const p=i(h),g=a(p),y=r(p,f,g),x=g?e(c):null;super(h,!1,y,x),this._isNodeOfNativeOfflineAudioContext=g,this._nativeAudioDestinationNode=y}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},lL=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},cL=(n,e,t,s,r,i,a,c)=>(u,h)=>{const f=h.listener,p=()=>{const k=new Float32Array(1),M=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=a(h);let R=!1,O=[0,0,-1,0,1,0],D=[0,0,0];const F=()=>{if(R)return;R=!0;const ne=s(h,256,9,0);ne.onaudioprocess=({inputBuffer:W})=>{const j=[i(W,k,0),i(W,k,1),i(W,k,2),i(W,k,3),i(W,k,4),i(W,k,5)];j.some((U,Y)=>U!==O[Y])&&(f.setOrientation(...j),O=j);const H=[i(W,k,6),i(W,k,7),i(W,k,8)];H.some((U,Y)=>U!==D[Y])&&(f.setPosition(...H),D=H)},M.connect(ne)},L=ne=>W=>{W!==O[ne]&&(O[ne]=W,f.setOrientation(...O))},X=ne=>W=>{W!==D[ne]&&(D[ne]=W,f.setPosition(...D))},Z=(ne,W,j)=>{const H=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W});H.connect(M,0,ne),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return W}});const U=n({context:u},E,H.offset,on,vn);return c(U,"value",Y=>()=>Y.call(U),Y=>I=>{try{Y.call(U,I)}catch($){if($.code!==9)throw $}F(),E&&j(I)}),U.cancelAndHoldAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.cancelAndHoldAtTime),U.cancelScheduledValues=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.cancelScheduledValues),U.exponentialRampToValueAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.exponentialRampToValueAtTime),U.linearRampToValueAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.linearRampToValueAtTime),U.setTargetAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.setTargetAtTime),U.setValueAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.setValueAtTime),U.setValueCurveAtTime=(Y=>E?()=>{throw r()}:(...I)=>{const $=Y.apply(U,I);return F(),$})(U.setValueCurveAtTime),U};return{forwardX:Z(0,0,L(0)),forwardY:Z(1,0,L(1)),forwardZ:Z(2,-1,L(2)),positionX:Z(6,0,X(0)),positionY:Z(7,0,X(1)),positionZ:Z(8,0,X(2)),upX:Z(3,0,L(3)),upY:Z(4,1,L(4)),upZ:Z(5,0,L(5))}},{forwardX:g,forwardY:y,forwardZ:x,positionX:w,positionY:v,positionZ:S,upX:T,upY:C,upZ:P}=f.forwardX===void 0?p():f;return{get forwardX(){return g},get forwardY(){return y},get forwardZ(){return x},get positionX(){return w},get positionY(){return v},get positionZ(){return S},get upX(){return T},get upY(){return C},get upZ(){return P}}},ih=n=>"context"in n,Wl=n=>ih(n[0]),Vi=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},o1=(n,e,[t,s],r)=>{Vi(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},a1=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):Vi(i,[t,s],a=>a[0]===t,r)},Zo=n=>"inputs"in n,oh=(n,e,t,s)=>{if(Zo(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},nC=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},uL=(n,e,t)=>Mh(n,s=>s[0]===e&&s[1]===t),sC=(n,e)=>{if(!zl(n).delete(e))throw new Error("Missing the expected event listener.")},rC=(n,e,t)=>{const s=ps(n,e),r=Mh(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},ah=(n,e,t,s)=>{Zo(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},tt=n=>ps(Ng,n),El=n=>ps(Dg,n),Ni=n=>bm.has(n),Uu=n=>!zo.has(n),l1=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),a=i.getChannelData(0);a[0]=1,a[1]=1;const c=n.createBufferSource();c.buffer=i,c.loop=!0,c.connect(s).connect(n.destination),c.connect(r),c.disconnect(r),s.onaudioprocess=u=>{const h=u.inputBuffer.getChannelData(0);Array.prototype.some.call(h,f=>f===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(n.destination)},c.start()}}),Np=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},lh=n=>"context"in n,hL=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const a=lh(s)?t(s,r,i):t(s,r),c=e.get(s);return c===void 0?e.set(s,[{input:i,output:r}]):c.every(u=>u.input!==i||u.output!==r)&&c.push({input:i,output:r}),a})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[a,c]of e){const u=c.filter(h=>h.output!==s);u.length===0?e.delete(a):e.set(a,u)}else if(e.has(s))if(r===void 0)e.delete(s);else{const a=e.get(s);if(a!==void 0){const c=a.filter(u=>u.output!==r&&(u.input!==i||i===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[a,c]of e)c.forEach(u=>{lh(a)?n.connect(a,u.output,u.input):n.connect(a,u.output)})})(n.disconnect)},dL=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Ul(e),{outputs:a}=cn(n),c=zl(n),u=h=>{const f=tt(n),p=El(e);if(h){const g=rC(i,n,t);o1(r,n,g,!1),!s&&!Ni(n)&&f.connect(p,t)}else{const g=uL(r,n,t);a1(i,g,!1),!s&&!Ni(n)&&f.disconnect(p,t)}};return Vi(a,[e,t],h=>h[0]===e&&h[1]===t,!0)?(c.add(u),er(n)?o1(r,n,[t,u],!0):a1(i,[n,t,u],!0),!0):!1},fL=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=cn(e),a=nC(r[s],n,t);return a===null?[QT(i,n,t,s)[2],!1]:[a[2],!0]},pL=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Ul(e),i=nC(s,n,t);return i===null?[rC(r,n,t)[1],!1]:[i[2],!0]},Fg=(n,e,t,s,r)=>{const[i,a]=fL(n,t,s,r);if(i!==null&&(sC(n,i),a&&!e&&!Ni(n)&&ah(tt(n),tt(t),s,r)),er(t)){const{activeInputs:c}=cn(t);Cm(t,c)}},Vg=(n,e,t,s)=>{const[r,i]=pL(n,t,s);r!==null&&(sC(n,r),i&&!e&&!Ni(n)&&tt(n).disconnect(El(t),s))},mL=(n,e)=>{const t=cn(n),s=[];for(const r of t.outputs)Wl(r)?Fg(n,e,...r):Vg(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},gL=(n,e,t)=>{const s=cn(n),r=[];for(const i of s.outputs)i[1]===t&&(Wl(i)?Fg(n,e,...i):Vg(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},yL=(n,e,t,s,r)=>{const i=cn(n);return Array.from(i.outputs).filter(a=>a[0]===t&&(s===void 0||a[1]===s)&&(r===void 0||a[2]===r)).map(a=>(Wl(a)?Fg(n,e,...a):Vg(n,e,...a),i.outputs.delete(a),a[0]))},_L=(n,e,t,s,r,i,a,c,u,h,f,p,g,y,x,w)=>class extends h{constructor(S,T,C,P){super(C),this._context=S,this._nativeAudioNode=C;const k=f(S);p(k)&&t(l1,()=>l1(k,w))!==!0&&hL(C),Ng.set(this,C),KT.set(this,new Set),S.state!=="closed"&&T&&jo(this),n(this,P,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(S){this._nativeAudioNode.channelCount=S}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(S){this._nativeAudioNode.channelCountMode=S}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(S){this._nativeAudioNode.channelInterpretation=S}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(S,T=0,C=0){if(T<0||T>=this._nativeAudioNode.numberOfOutputs)throw r();const P=f(this._context),k=x(P);if(g(S)||y(S))throw i();if(ih(S)){const R=tt(S);try{const D=oh(this._nativeAudioNode,R,T,C),F=Uu(this);(k||F)&&this._nativeAudioNode.disconnect(...D),this.context.state!=="closed"&&!F&&Uu(S)&&jo(S)}catch(D){throw D.code===12?i():D}if(e(this,S,T,C,k)){const D=u([this],S);Np(D,s(k))}return S}const M=El(S);if(M.name==="playbackRate"&&M.maxValue===1024)throw a();try{this._nativeAudioNode.connect(M,T),(k||Uu(this))&&this._nativeAudioNode.disconnect(M,T)}catch(R){throw R.code===12?i():R}if(dL(this,S,T,k)){const R=u([this],S);Np(R,s(k))}}disconnect(S,T,C){let P;const k=f(this._context),M=x(k);if(S===void 0)P=mL(this,M);else if(typeof S=="number"){if(S<0||S>=this.numberOfOutputs)throw r();P=gL(this,M,S)}else{if(T!==void 0&&(T<0||T>=this.numberOfOutputs)||ih(S)&&C!==void 0&&(C<0||C>=S.numberOfInputs))throw r();if(P=yL(this,M,S,T,C),P.length===0)throw i()}for(const E of P){const R=u([this],E);Np(R,c)}}},xL=(n,e,t,s,r,i,a,c,u,h,f,p,g)=>(y,x,w,v=null,S=null)=>{const T=w.value,C=new PV(T),P=x?s(C):null,k={get defaultValue(){return T},get maxValue(){return v===null?w.maxValue:v},get minValue(){return S===null?w.minValue:S},get value(){return w.value},set value(M){w.value=M,k.setValueAtTime(M,y.context.currentTime)},cancelAndHoldAtTime(M){if(typeof w.cancelAndHoldAtTime=="function")P===null&&C.flush(y.context.currentTime),C.add(r(M)),w.cancelAndHoldAtTime(M);else{const E=Array.from(C).pop();P===null&&C.flush(y.context.currentTime),C.add(r(M));const R=Array.from(C).pop();w.cancelScheduledValues(M),E!==R&&R!==void 0&&(R.type==="exponentialRampToValue"?w.exponentialRampToValueAtTime(R.value,R.endTime):R.type==="linearRampToValue"?w.linearRampToValueAtTime(R.value,R.endTime):R.type==="setValue"?w.setValueAtTime(R.value,R.startTime):R.type==="setValueCurve"&&w.setValueCurveAtTime(R.values,R.startTime,R.duration))}return k},cancelScheduledValues(M){return P===null&&C.flush(y.context.currentTime),C.add(i(M)),w.cancelScheduledValues(M),k},exponentialRampToValueAtTime(M,E){if(M===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const R=y.context.currentTime;return P===null&&C.flush(R),Array.from(C).length===0&&(C.add(h(T,R)),w.setValueAtTime(T,R)),C.add(a(M,E)),w.exponentialRampToValueAtTime(M,E),k},linearRampToValueAtTime(M,E){const R=y.context.currentTime;return P===null&&C.flush(R),Array.from(C).length===0&&(C.add(h(T,R)),w.setValueAtTime(T,R)),C.add(c(M,E)),w.linearRampToValueAtTime(M,E),k},setTargetAtTime(M,E,R){return P===null&&C.flush(y.context.currentTime),C.add(u(M,E,R)),w.setTargetAtTime(M,E,R),k},setValueAtTime(M,E){return P===null&&C.flush(y.context.currentTime),C.add(h(M,E)),w.setValueAtTime(M,E),k},setValueCurveAtTime(M,E,R){const O=M instanceof Float32Array?M:new Float32Array(M);if(p!==null&&p.name==="webkitAudioContext"){const D=E+R,F=y.context.sampleRate,L=Math.ceil(E*F),X=Math.floor(D*F),Z=X-L,ne=new Float32Array(Z);for(let j=0;j<Z;j+=1){const H=(O.length-1)/R*((L+j)/F-E),U=Math.floor(H),Y=Math.ceil(H);ne[j]=U===Y?O[U]:(1-(H-U))*O[U]+(1-(Y-H))*O[Y]}P===null&&C.flush(y.context.currentTime),C.add(f(ne,E,R)),w.setValueCurveAtTime(ne,E,R);const W=X/F;W<D&&g(k,ne[ne.length-1],W),g(k,O[O.length-1],D)}else P===null&&C.flush(y.context.currentTime),C.add(f(O,E,R)),w.setValueCurveAtTime(O,E,R);return k}};return t.set(k,w),e.set(k,y),n(k,P),k},vL=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class iC{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const wL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},bL=(n,e,t,s,r,i,a,c,u,h,f,p,g,y)=>class extends e{constructor(w,v,S){var T;const C=c(w),P=u(C),k=f({...wL,...S});g(k);const M=Sm.get(C),E=M==null?void 0:M.get(v),R=P||C.state!=="closed"?C:(T=a(C))!==null&&T!==void 0?T:C,O=r(R,P?null:w.baseLatency,h,v,E,k),D=P?s(v,k,E):null;super(w,!0,O,D);const F=[];O.parameters.forEach((X,Z)=>{const ne=t(this,P,X);F.push([Z,ne])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new iC(F),P&&n(C,this);const{activeInputs:L}=i(this);p(O,L)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){const v=typeof w=="function"?y(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=v;const S=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=S!==null&&S===v?w:S}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ch(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const a=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(a)}}}const oC=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},uh=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let a=0;a<i;a+=1)r.push(new Float32Array(128));t.push(r)}return t},SL=(n,e)=>{const t=ps(Tm,n),s=tt(e);return ps(t,s)},TL=async(n,e,t,s,r,i,a)=>{const c=e===null?Math.ceil(n.context.length/128)*128:e.length,u=s.channelCount*s.numberOfInputs,h=r.reduce((v,S)=>v+S,0),f=h===0?null:t.createBuffer(h,c,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const p=cn(n),g=await SL(t,n),y=uh(s.numberOfInputs,s.channelCount),x=uh(s.numberOfOutputs,r),w=Array.from(n.parameters.keys()).reduce((v,S)=>({...v,[S]:new Float32Array(128)}),{});for(let v=0;v<c;v+=128){if(s.numberOfInputs>0&&e!==null)for(let S=0;S<s.numberOfInputs;S+=1)for(let T=0;T<s.channelCount;T+=1)ch(e,y[S],T,T,v);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:S},T)=>{ch(e,w,S,u+T,v)});for(let S=0;S<s.numberOfInputs;S+=1)for(let T=0;T<r[S];T+=1)x[S][T].byteLength===0&&(x[S][T]=new Float32Array(128));try{const S=y.map((C,P)=>p.activeInputs[P].size===0?[]:C),T=a(v/t.sampleRate,t.sampleRate,()=>g.process(S,x,w));if(f!==null)for(let C=0,P=0;C<s.numberOfOutputs;C+=1){for(let k=0;k<r[C];k+=1)oC(f,x[C],k,P+k,v);P+=r[C]}if(!T)break}catch(S){n.dispatchEvent(new ErrorEvent("processorerror",{colno:S.colno,filename:S.filename,lineno:S.lineno,message:S.message}));break}}return f},CL=(n,e,t,s,r,i,a,c,u,h,f,p,g,y,x,w)=>(v,S,T)=>{const C=new WeakMap;let P=null;const k=async(M,E)=>{let R=f(M),O=null;const D=en(R,E),F=Array.isArray(S.outputChannelCount)?S.outputChannelCount:Array.from(S.outputChannelCount);if(p===null){const L=F.reduce((W,j)=>W+j,0),X=r(E,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),Z=[];for(let W=0;W<M.numberOfOutputs;W+=1)Z.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:F[W]}));const ne=a(E,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1});ne.connect=e.bind(null,Z),ne.disconnect=u.bind(null,Z),O=[X,Z,ne]}else D||(R=new p(E,v));if(C.set(E,O===null?R:O[2]),O!==null){if(P===null){if(T===void 0)throw new Error("Missing the processor constructor.");if(g===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=M.channelCount*M.numberOfInputs,H=T.parameterDescriptors===void 0?0:T.parameterDescriptors.length,U=j+H;P=TL(M,U===0?null:await(async()=>{const I=new g(U,Math.ceil(M.context.length/128)*128,E.sampleRate),$=[],le=[];for(let ce=0;ce<S.numberOfInputs;ce+=1)$.push(a(I,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1})),le.push(r(I,{channelCount:S.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:S.channelCount}));const ue=await Promise.all(Array.from(M.parameters.values()).map(async ce=>{const ge=i(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ce.value});return await y(I,ce,ge.offset),ge})),oe=s(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,j+H)});for(let ce=0;ce<S.numberOfInputs;ce+=1){$[ce].connect(le[ce]);for(let ge=0;ge<S.channelCount;ge+=1)le[ce].connect(oe,ge,ce*S.channelCount+ge)}for(const[ce,ge]of ue.entries())ge.connect(oe,0,j+ce),ge.start(0);return oe.connect(I.destination),await Promise.all($.map(ce=>x(M,I,ce))),w(I)})(),E,S,F,T,h)}const L=await P,X=t(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Z,ne,W]=O;L!==null&&(X.buffer=L,X.start(0)),X.connect(Z);for(let j=0,H=0;j<M.numberOfOutputs;j+=1){const U=ne[j];for(let Y=0;Y<F[j];Y+=1)Z.connect(U,H+Y,Y);H+=F[j]}return W}if(D)for(const[L,X]of M.parameters.entries())await n(E,X,R.parameters.get(L));else for(const[L,X]of M.parameters.entries())await y(E,X,R.parameters.get(L));return await x(M,E,R),R};return{render(M,E){c(E,M);const R=C.get(E);return R!==void 0?Promise.resolve(R):k(M,E)}}},kL=(n,e,t,s,r,i,a,c,u,h,f,p,g,y,x,w,v,S,T,C)=>class extends x{constructor(k,M){super(k,M),this._nativeContext=k,this._audioWorklet=n===void 0?void 0:{addModule:(E,R)=>n(this,E,R)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(k,M,E){return new t({length:M,numberOfChannels:k,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(k=6){return new i(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new a(this,{numberOfOutputs:k})}createConstantSource(){return new c(this)}createConvolver(){return new u(this)}createDelay(k=1){return new f(this,{maxDelayTime:k})}createDynamicsCompressor(){return new p(this)}createGain(){return new g(this)}createIIRFilter(k,M){return new y(this,{feedback:M,feedforward:k})}createOscillator(){return new w(this)}createPanner(){return new v(this)}createPeriodicWave(k,M,E={disableNormalization:!1}){return new S(this,{...E,imag:M,real:k})}createStereoPanner(){return new T(this)}createWaveShaper(){return new C(this)}decodeAudioData(k,M,E){return h(this._nativeContext,k).then(R=>(typeof M=="function"&&M(R),R),R=>{throw typeof E=="function"&&E(R),R})}},AL={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ML=(n,e,t,s,r,i,a,c)=>class extends n{constructor(h,f){const p=i(h),g={...AL,...f},y=r(p,g),x=a(p),w=x?t():null;super(h,!1,y,w),this._Q=e(this,x,y.Q,on,vn),this._detune=e(this,x,y.detune,1200*Math.log2(on),-1200*Math.log2(on)),this._frequency=e(this,x,y.frequency,h.sampleRate/2,0),this._gain=e(this,x,y.gain,40*Math.log10(on),vn),this._nativeBiquadFilterNode=y,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,f,p){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,f,p)}catch(g){throw g.code===11?s():g}if(h.length!==f.length||f.length!==p.length)throw s()}},PL=(n,e,t,s,r)=>()=>{const i=new WeakMap,a=async(c,u)=>{let h=t(c);const f=en(h,u);if(!f){const p={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(u,p)}return i.set(u,h),f?(await n(u,c.Q,h.Q),await n(u,c.detune,h.detune),await n(u,c.frequency,h.frequency),await n(u,c.gain,h.gain)):(await s(u,c.Q,h.Q),await s(u,c.detune,h.detune),await s(u,c.frequency,h.frequency),await s(u,c.gain,h.gain)),await r(c,u,h),h};return{render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(c,u)}}},EL=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const a=s();return a instanceof Promise?(n.set(t,a),a.catch(()=>!1).then(c=>(n.delete(t),e.set(t,c),c))):(e.set(t,a),a)}catch{return e.set(t,!1),!1}},RL={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},IL=(n,e,t,s,r)=>class extends n{constructor(a,c){const u=s(a),h={...RL,...c},f=t(u,h),p=r(u)?e():null;super(a,!1,f,p)}},NL=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,a)=>{let c=e(i);if(!en(c,a)){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=n(a,h)}return s.set(a,c),await t(i,a,c),c};return{render(i,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):r(i,a)}}},DL={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},OL=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=s(c),f=i({...DL,...u}),p=t(h,f),g=r(h)?e():null;super(c,!1,p,g)}},FL=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,a)=>{let c=e(i);if(!en(c,a)){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=n(a,h)}return s.set(a,c),await t(i,a,c),c};return{render(i,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):r(i,a)}}},VL=n=>(e,t,s)=>n(t,e,s),LL=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return lh(t)?i.connect(t,0,r):i.connect(t,0)},BL=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},zL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},jL=(n,e,t,s,r,i,a)=>class extends n{constructor(u,h){const f=r(u),p={...zL,...h},g=s(f,p),y=i(f),x=y?t():null;super(u,!1,g,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=g,this._offset=e(this,y,g.offset,on,vn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(u){const h=typeof u=="function"?a(this,u):null;this._nativeConstantSourceNode.onended=h;const f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===h?u:f}start(u=0){if(this._nativeConstantSourceNode.start(u),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=u),this.context.state!=="closed"){jo(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),er(this)&&jl(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeConstantSourceNode.stop(u),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=u)}},UL=(n,e,t,s,r)=>()=>{const i=new WeakMap;let a=null,c=null;const u=async(h,f)=>{let p=t(h);const g=en(p,f);if(!g){const y={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value};p=e(f,y),a!==null&&p.start(a),c!==null&&p.stop(c)}return i.set(f,p),g?await n(f,h.offset,p.offset):await s(f,h.offset,p.offset),await r(h,f,p),p};return{set start(h){a=h},set stop(h){c=h},render(h,f){const p=i.get(f);return p!==void 0?Promise.resolve(p):u(h,f)}}},WL=n=>e=>(n[0]=e,n[0]),GL={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},HL=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=s(c),f={...GL,...u},p=t(h,f),y=r(h)?e():null;super(c,!1,p,y),this._isBufferNullified=!1,this._nativeConvolverNode=p,f.buffer!==null&&i(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const u=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=u.createBuffer(1,1,u.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},$L=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,a)=>{let c=e(i);if(!en(c,a)){const h={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=n(a,h)}return s.set(a,c),Zo(c)?await t(i,a,c.inputs[0]):await t(i,a,c),c};return{render(i,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):r(i,a)}}},qL=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},YL=()=>new DOMException("","DataCloneError"),c1=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}catch{}finally{r()}})},XL=(n,e,t,s,r,i,a,c,u,h,f)=>(p,g)=>{const y=a(p)?p:i(p);if(r.has(g)){const x=t();return Promise.reject(x)}try{r.add(g)}catch{}return e(u,()=>u(y))?y.decodeAudioData(g).then(x=>(c1(g).catch(()=>{}),e(c,()=>c(x))||f(x),n.add(x),x)):new Promise((x,w)=>{const v=async()=>{try{await c1(g)}catch{}},S=T=>{w(T),v()};try{y.decodeAudioData(g,T=>{typeof T.copyFromChannel!="function"&&(h(T),Og(T)),n.add(T),v().then(()=>x(T))},T=>{S(T===null?s():T)})}catch(T){S(T)}})},KL=(n,e,t,s,r,i,a,c)=>(u,h)=>{const f=e.get(u);if(f===void 0)throw new Error("Missing the expected cycle count.");const p=i(u.context),g=c(p);if(f===h){if(e.delete(u),!g&&a(u)){const y=s(u),{outputs:x}=t(u);for(const w of x)if(Wl(w)){const v=s(w[0]);n(y,v,w[1],w[2])}else{const v=r(w[0]);y.connect(v,w[1])}}}else e.set(u,f-h)},ZL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},QL=(n,e,t,s,r,i,a)=>class extends n{constructor(u,h){const f=r(u),p={...ZL,...h},g=s(f,p),y=i(f),x=y?t(p.maxDelayTime):null;super(u,!1,g,x),this._delayTime=e(this,y,g.delayTime),a(this,p.maxDelayTime)}get delayTime(){return this._delayTime}},JL=(n,e,t,s,r)=>i=>{const a=new WeakMap,c=async(u,h)=>{let f=t(u);const p=en(f,h);if(!p){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:i};f=e(h,g)}return a.set(h,f),p?await n(h,u.delayTime,f.delayTime):await s(h,u.delayTime,f.delayTime),await r(u,h,f),f};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},e5=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),t5=n=>(e,t)=>{n(e).delete(t)},n5=n=>"delayTime"in n,s5=(n,e,t)=>function s(r,i){const a=ih(i)?i:t(n,i);if(n5(a))return[];if(r[0]===a)return[r];if(r.includes(a))return[];const{outputs:c}=e(a);return Array.from(c).map(u=>s([...r,a],u[0])).reduce((u,h)=>u.concat(h),[])},Du=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},r5=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Du(n,e,t).disconnect():lh(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Du(n,e,s).disconnect(t,0):Du(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Du(n,e,s).disconnect(t,0),i5={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},o5=(n,e,t,s,r,i,a,c)=>class extends n{constructor(h,f){const p=i(h),g={...i5,...f},y=s(p,g),x=a(p),w=x?t():null;super(h,!1,y,w),this._attack=e(this,x,y.attack),this._knee=e(this,x,y.knee),this._nativeDynamicsCompressorNode=y,this._ratio=e(this,x,y.ratio),this._release=e(this,x,y.release),this._threshold=e(this,x,y.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=f,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},a5=(n,e,t,s,r)=>()=>{const i=new WeakMap,a=async(c,u)=>{let h=t(c);const f=en(h,u);if(!f){const p={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(u,p)}return i.set(u,h),f?(await n(u,c.attack,h.attack),await n(u,c.knee,h.knee),await n(u,c.ratio,h.ratio),await n(u,c.release,h.release),await n(u,c.threshold,h.threshold)):(await s(u,c.attack,h.attack),await s(u,c.knee,h.knee),await s(u,c.ratio,h.ratio),await s(u,c.release,h.release),await s(u,c.threshold,h.threshold)),await r(c,u,h),h};return{render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(c,u)}}},l5=()=>new DOMException("","EncodingError"),c5=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(a),u=n.onerror,h=()=>{n.onerror=u,URL.revokeObjectURL(c)};n.onerror=(f,p,g,y,x)=>{if(p===c||p===n.location.href&&g===1&&y===1)return h(),s(x),!1;if(u!==null)return u(f,p,g,y,x)},i.onerror=()=>{h(),s(new SyntaxError)},i.onload=()=>{h(),t()},i.src=c,i.type="module",r.appendChild(i)}}),u5=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},h5=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},d5=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},f5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},p5=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=r(c),f={...f5,...u},p=s(h,f),g=i(h),y=g?t():null;super(c,!1,p,y),this._gain=e(this,g,p.gain,on,vn)}get gain(){return this._gain}},m5=(n,e,t,s,r)=>()=>{const i=new WeakMap,a=async(c,u)=>{let h=t(c);const f=en(h,u);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(u,p)}return i.set(u,h),f?await n(u,c.gain,h.gain):await s(u,c.gain,h.gain),await r(c,u,h),h};return{render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(c,u)}}},g5=(n,e)=>t=>e(n,t),y5=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},_5=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},x5=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},v5=n=>e=>n.get(e),Lt=()=>new DOMException("","InvalidStateError"),w5=n=>e=>{const t=n.get(e);if(t===void 0)throw Lt();return t},b5=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},S5=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Ph=()=>new DOMException("","InvalidAccessError"),T5=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw Ph();return e.call(n,t,s,r)})(n.getFrequencyResponse)},C5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},k5=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=s(c),f=r(h),p={...C5,...u},g=e(h,f?null:c.baseLatency,p),y=f?t(p.feedback,p.feedforward):null;super(c,!1,g,y),T5(g),this._nativeIIRFilterNode=g,i(this,1)}getFrequencyResponse(c,u,h){return this._nativeIIRFilterNode.getFrequencyResponse(c,u,h)}},aC=(n,e,t,s,r,i,a,c,u,h,f)=>{const p=h.length;let g=c;for(let y=0;y<p;y+=1){let x=t[0]*h[y];for(let w=1;w<r;w+=1){const v=g-w&u-1;x+=t[w]*i[v],x-=n[w]*a[v]}for(let w=r;w<s;w+=1)x+=t[w]*i[g-w&u-1];for(let w=r;w<e;w+=1)x-=n[w]*a[g-w&u-1];i[g]=h[y],a[g]=x,g=g+1&u-1,f[y]=x}return g},A5=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),a=r.length,c=i.length,u=Math.min(a,c);if(r[0]!==1){for(let x=0;x<a;x+=1)i[x]/=r[0];for(let x=1;x<c;x+=1)r[x]/=r[0]}const h=32,f=new Float32Array(h),p=new Float32Array(h),g=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),y=n.numberOfChannels;for(let x=0;x<y;x+=1){const w=n.getChannelData(x),v=g.getChannelData(x);f.fill(0),p.fill(0),aC(r,a,i,c,u,f,p,0,h,w,v)}return g},M5=(n,e,t,s,r)=>(i,a)=>{const c=new WeakMap;let u=null;const h=async(f,p)=>{let g=null,y=e(f);const x=en(y,p);if(p.createIIRFilter===void 0?g=n(p,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(y=p.createIIRFilter(a,i)),c.set(p,g===null?y:g),g!==null){if(u===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new t(f.context.destination.channelCount,f.context.length,p.sampleRate);u=(async()=>{await s(f,v,v.destination);const S=await r(v);return A5(S,p,i,a)})()}const w=await u;return g.buffer=w,g.start(0),g}return await s(f,p,y),y};return{render(f,p){const g=c.get(p);return g!==void 0?Promise.resolve(g):h(f,p)}}},P5=(n,e,t,s,r,i)=>a=>(c,u)=>{const h=n.get(c);if(h===void 0){if(!a&&i(c)){const f=s(c),{outputs:p}=t(c);for(const g of p)if(Wl(g)){const y=s(g[0]);e(f,y,g[1],g[2])}else{const y=r(g[0]);f.disconnect(y,g[1])}}n.set(c,u)}else n.set(c,h+u)},E5=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},R5=(n,e)=>t=>n.has(t)||e(t),I5=(n,e)=>t=>n.has(t)||e(t),N5=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},D5=n=>e=>n!==null&&e instanceof n,O5=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,F5=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,V5=(n,e)=>t=>n(t)||e(t),L5=n=>e=>n!==null&&e instanceof n,B5=n=>n!==null&&n.isSecureContext,z5=(n,e,t,s)=>class extends n{constructor(i,a){const c=t(i),u=e(c,a);if(s(c))throw TypeError();super(i,!0,u,null),this._nativeMediaElementAudioSourceNode=u}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},j5={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},U5=(n,e,t,s)=>class extends n{constructor(i,a){const c=t(i);if(s(c))throw new TypeError;const u={...j5,...a},h=e(c,u);super(i,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},W5=(n,e,t,s)=>class extends n{constructor(i,a){const c=t(i),u=e(c,a);if(s(c))throw new TypeError;super(i,!0,u,null),this._nativeMediaStreamAudioSourceNode=u}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},G5=(n,e,t)=>class extends n{constructor(r,i){const a=t(r),c=e(a,i);super(r,!0,c,null)}},H5=(n,e,t,s,r,i)=>class extends t{constructor(c,u){super(c),this._nativeContext=c,Ah.set(this,c),s(c)&&r.set(c,new Set),this._destination=new n(this,u),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const u=typeof c=="function"?i(this,c):null;this._nativeContext.onstatechange=u;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===u?c:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Rl=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},$5=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(a=>(c,u=0,h=0)=>{const f=i.size===0;if(e(c))return a.call(t,c,u,h),n(i,[c,u,h],p=>p[0]===c&&p[1]===u&&p[2]===h,!0),f&&s(),c;a.call(t,c,u),n(i,[c,u],p=>p[0]===c&&p[1]===u,!0),f&&s()})(t.connect),t.disconnect=(a=>(c,u,h)=>{const f=i.size>0;if(c===void 0)a.apply(t),i.clear();else if(typeof c=="number"){a.call(t,c);for(const g of i)g[1]===c&&i.delete(g)}else{e(c)?a.call(t,c,u,h):a.call(t,c,u);for(const g of i)g[0]===c&&(u===void 0||g[1]===u)&&(h===void 0||g[2]===h)&&i.delete(g)}const p=i.size===0;f&&p&&r()})(t.disconnect),t},st=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},Et=(n,e)=>{st(n,e,"channelCount"),st(n,e,"channelCountMode"),st(n,e,"channelInterpretation")},u1=n=>typeof n.getFloatTimeDomainData=="function",q5=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},Y5=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(Et(r,s),!(s.maxDecibels>s.minDecibels))throw e();return st(r,s,"fftSize"),st(r,s,"maxDecibels"),st(r,s,"minDecibels"),st(r,s,"smoothingTimeConstant"),n(u1,()=>u1(r))||q5(r),r},X5=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,pt=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},K5=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw Lt();e.call(n,s,r,i),t=!0}})(n.start)},Lg=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Bg=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},Z5=(n,e,t,s,r,i,a,c,u,h,f)=>(p,g)=>{const y=p.createBufferSource();return Et(y,g),pt(y,g,"playbackRate"),st(y,g,"buffer"),st(y,g,"loop"),st(y,g,"loopEnd"),st(y,g,"loopStart"),e(t,()=>t(p))||K5(y),e(s,()=>s(p))||u(y),e(r,()=>r(p))||h(y,p),e(i,()=>i(p))||Lg(y),e(a,()=>a(p))||f(y,p),e(c,()=>c(p))||Bg(y),n(p,y),y},Q5=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,J5=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const a=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(a,"channelCount",c=>()=>c.call(a),c=>u=>{c.call(a,u);try{i.channelCount=u}catch(h){if(u>i.maxChannelCount)throw h}}),e(a,"channelCountMode",c=>()=>c.call(a),c=>u=>{c.call(a,u),i.channelCountMode=u}),e(a,"channelInterpretation",c=>()=>c.call(a),c=>u=>{c.call(a,u),i.channelInterpretation=u}),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a},eB=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,tB=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},nB=(n,e,t,s,r)=>(i,a,c,u,h,f)=>{if(c!==null)try{const p=new c(i,u,f),g=new Map;let y=null;if(Object.defineProperties(p,{channelCount:{get:()=>f.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>y,set:x=>{typeof y=="function"&&p.removeEventListener("processorerror",y),y=typeof x=="function"?x:null,typeof y=="function"&&p.addEventListener("processorerror",y)}}}),p.addEventListener=(x=>(...w)=>{if(w[0]==="processorerror"){const v=typeof w[1]=="function"?w[1]:typeof w[1]=="object"&&w[1]!==null&&typeof w[1].handleEvent=="function"?w[1].handleEvent:null;if(v!==null){const S=g.get(w[1]);S!==void 0?w[1]=S:(w[1]=T=>{T.type==="error"?(Object.defineProperties(T,{type:{value:"processorerror"}}),v(T)):v(new ErrorEvent(w[0],{...T}))},g.set(v,w[1]))}}return x.call(p,"error",w[1],w[2]),x.call(p,...w)})(p.addEventListener),p.removeEventListener=(x=>(...w)=>{if(w[0]==="processorerror"){const v=g.get(w[1]);v!==void 0&&(g.delete(w[1]),w[1]=v)}return x.call(p,"error",w[1],w[2]),x.call(p,w[0],w[1],w[2])})(p.removeEventListener),f.numberOfOutputs!==0){const x=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return p.connect(x).connect(i.destination),r(p,()=>x.disconnect(),()=>x.connect(i.destination))}return p}catch(p){throw p.code===11?s():p}if(h===void 0)throw s();return tB(f),e(i,a,h,f)},lC=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),sB=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),rB=async(n,e)=>{const t=await sB(e);return new n(t)},iB=(n,e,t,s)=>{let r=Tm.get(n);r===void 0&&(r=new WeakMap,Tm.set(n,r));const i=rB(t,s);return r.set(e,i),i},oB=(n,e,t,s,r,i,a,c,u,h,f,p,g)=>(y,x,w,v)=>{if(v.numberOfInputs===0&&v.numberOfOutputs===0)throw u();const S=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(S.some(ae=>ae<1))throw u();if(S.length!==v.numberOfOutputs)throw e();if(v.channelCountMode!=="explicit")throw u();const T=v.channelCount*v.numberOfInputs,C=S.reduce((ae,ye)=>ae+ye,0),P=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length;if(T+P>6||C>6)throw u();const k=new MessageChannel,M=[],E=[];for(let ae=0;ae<v.numberOfInputs;ae+=1)M.push(a(y,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),E.push(r(y,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const R=[];if(w.parameterDescriptors!==void 0)for(const{defaultValue:ae,maxValue:ye,minValue:qe,name:ze}of w.parameterDescriptors){const Ie=i(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v.parameterData[ze]!==void 0?v.parameterData[ze]:ae===void 0?0:ae});Object.defineProperties(Ie.offset,{defaultValue:{get:()=>ae===void 0?0:ae},maxValue:{get:()=>ye===void 0?on:ye},minValue:{get:()=>qe===void 0?vn:qe}}),R.push(Ie)}const O=s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,T+P)}),D=lC(x,y.sampleRate),F=c(y,D,T+P,Math.max(1,C)),L=r(y,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),X=[];for(let ae=0;ae<v.numberOfOutputs;ae+=1)X.push(s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:S[ae]}));for(let ae=0;ae<v.numberOfInputs;ae+=1){M[ae].connect(E[ae]);for(let ye=0;ye<v.channelCount;ye+=1)E[ae].connect(O,ye,ae*v.channelCount+ye)}const Z=new iC(w.parameterDescriptors===void 0?[]:w.parameterDescriptors.map(({name:ae},ye)=>{const qe=R[ye];return qe.connect(O,0,T+ye),qe.start(0),[ae,qe.offset]}));O.connect(F);let ne=v.channelInterpretation,W=null;const j=v.numberOfOutputs===0?[F]:X,H={get bufferSize(){return D},get channelCount(){return v.channelCount},set channelCount(ae){throw t()},get channelCountMode(){return v.channelCountMode},set channelCountMode(ae){throw t()},get channelInterpretation(){return ne},set channelInterpretation(ae){for(const ye of M)ye.channelInterpretation=ae;ne=ae},get context(){return F.context},get inputs(){return M},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(ae){typeof W=="function"&&H.removeEventListener("processorerror",W),W=typeof ae=="function"?ae:null,typeof W=="function"&&H.addEventListener("processorerror",W)},get parameters(){return Z},get port(){return k.port2},addEventListener(...ae){return F.addEventListener(ae[0],ae[1],ae[2])},connect:n.bind(null,j),disconnect:h.bind(null,j),dispatchEvent(...ae){return F.dispatchEvent(ae[0])},removeEventListener(...ae){return F.removeEventListener(ae[0],ae[1],ae[2])}},U=new Map;k.port1.addEventListener=(ae=>(...ye)=>{if(ye[0]==="message"){const qe=typeof ye[1]=="function"?ye[1]:typeof ye[1]=="object"&&ye[1]!==null&&typeof ye[1].handleEvent=="function"?ye[1].handleEvent:null;if(qe!==null){const ze=U.get(ye[1]);ze!==void 0?ye[1]=ze:(ye[1]=Ie=>{f(y.currentTime,y.sampleRate,()=>qe(Ie))},U.set(qe,ye[1]))}}return ae.call(k.port1,ye[0],ye[1],ye[2])})(k.port1.addEventListener),k.port1.removeEventListener=(ae=>(...ye)=>{if(ye[0]==="message"){const qe=U.get(ye[1]);qe!==void 0&&(U.delete(ye[1]),ye[1]=qe)}return ae.call(k.port1,ye[0],ye[1],ye[2])})(k.port1.removeEventListener);let Y=null;Object.defineProperty(k.port1,"onmessage",{get:()=>Y,set:ae=>{typeof Y=="function"&&k.port1.removeEventListener("message",Y),Y=typeof ae=="function"?ae:null,typeof Y=="function"&&(k.port1.addEventListener("message",Y),k.port1.start())}}),w.prototype.port=k.port1;let I=null;iB(y,H,w,v).then(ae=>I=ae);const le=uh(v.numberOfInputs,v.channelCount),ue=uh(v.numberOfOutputs,S),oe=w.parameterDescriptors===void 0?[]:w.parameterDescriptors.reduce((ae,{name:ye})=>({...ae,[ye]:new Float32Array(128)}),{});let ce=!0;const ge=()=>{v.numberOfOutputs>0&&F.disconnect(L);for(let ae=0,ye=0;ae<v.numberOfOutputs;ae+=1){const qe=X[ae];for(let ze=0;ze<S[ae];ze+=1)L.disconnect(qe,ye+ze,ze);ye+=S[ae]}},re=new Map;F.onaudioprocess=({inputBuffer:ae,outputBuffer:ye})=>{if(I!==null){const qe=p(H);for(let ze=0;ze<D;ze+=128){for(let Ie=0;Ie<v.numberOfInputs;Ie+=1)for(let je=0;je<v.channelCount;je+=1)ch(ae,le[Ie],je,je,ze);w.parameterDescriptors!==void 0&&w.parameterDescriptors.forEach(({name:Ie},je)=>{ch(ae,oe,Ie,T+je,ze)});for(let Ie=0;Ie<v.numberOfInputs;Ie+=1)for(let je=0;je<S[Ie];je+=1)ue[Ie][je].byteLength===0&&(ue[Ie][je]=new Float32Array(128));try{const Ie=le.map((Ct,Ln)=>{if(qe[Ln].size>0)return re.set(Ln,D/128),Ct;const zi=re.get(Ln);return zi===void 0?[]:(Ct.every(ec=>ec.every(tc=>tc===0))&&(zi===1?re.delete(Ln):re.set(Ln,zi-1)),Ct)});ce=f(y.currentTime+ze/y.sampleRate,y.sampleRate,()=>I.process(Ie,ue,oe));for(let Ct=0,Ln=0;Ct<v.numberOfOutputs;Ct+=1){for(let cr=0;cr<S[Ct];cr+=1)oC(ye,ue[Ct],cr,Ln+cr,ze);Ln+=S[Ct]}}catch(Ie){ce=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:Ie.colno,filename:Ie.filename,lineno:Ie.lineno,message:Ie.message}))}if(!ce){for(let Ie=0;Ie<v.numberOfInputs;Ie+=1){M[Ie].disconnect(E[Ie]);for(let je=0;je<v.channelCount;je+=1)E[ze].disconnect(O,je,Ie*v.channelCount+je)}if(w.parameterDescriptors!==void 0){const Ie=w.parameterDescriptors.length;for(let je=0;je<Ie;je+=1){const Ct=R[je];Ct.disconnect(O,0,T+je),Ct.stop()}}O.disconnect(F),F.onaudioprocess=null,ke?ge():zt();break}}}};let ke=!1;const $e=a(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),tn=()=>F.connect($e).connect(y.destination),zt=()=>{F.disconnect($e),$e.disconnect()},dn=()=>{if(ce){zt(),v.numberOfOutputs>0&&F.connect(L);for(let ae=0,ye=0;ae<v.numberOfOutputs;ae+=1){const qe=X[ae];for(let ze=0;ze<S[ae];ze+=1)L.connect(qe,ye+ze,ze);ye+=S[ae]}}ke=!0},Tn=()=>{ce&&(tn(),ge()),ke=!1};return tn(),g(H,dn,Tn)},cC=(n,e)=>{const t=n.createBiquadFilter();return Et(t,e),pt(t,e,"Q"),pt(t,e,"detune"),pt(t,e,"frequency"),pt(t,e,"gain"),st(t,e,"type"),t},aB=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),Et(r,s),r},lB=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Lt()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Lt()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Lt()}})},Gl=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Et(t,e),lB(t),t},cB=(n,e,t,s,r)=>(i,a)=>{if(i.createConstantSource===void 0)return t(i,a);const c=i.createConstantSource();return Et(c,a),pt(c,a,"offset"),e(s,()=>s(i))||Lg(c),e(r,()=>r(i))||Bg(c),n(i,c),c},Qo=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),uB=(n,e,t,s)=>(r,{offset:i,...a})=>{const c=r.createBuffer(1,2,44100),u=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(r,{...a,gain:i}),f=c.getChannelData(0);f[0]=1,f[1]=1,u.buffer=c,u.loop=!0;const p={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(x){h.channelCount=x},get channelCountMode(){return h.channelCountMode},set channelCountMode(x){h.channelCountMode=x},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(x){h.channelInterpretation=x},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return u.onended},set onended(x){u.onended=x},addEventListener(...x){return u.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return u.dispatchEvent(x[0])},removeEventListener(...x){return u.removeEventListener(x[0],x[1],x[2])},start(x=0){u.start.call(u,x)},stop(x=0){u.stop.call(u,x)}},g=()=>u.connect(h),y=()=>u.disconnect(h);return n(r,u),s(Qo(p,h),g,y)},hB=(n,e)=>(t,s)=>{const r=t.createConvolver();if(Et(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),st(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>a=>{if(a>2)throw n();return i.call(r,a)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>a=>{if(a==="max")throw n();return i.call(r,a)}),r},uC=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Et(t,e),pt(t,e,"delayTime"),t},dB=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Et(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return pt(s,t,"attack"),pt(s,t,"knee"),pt(s,t,"ratio"),pt(s,t,"release"),pt(s,t,"threshold"),s},Sn=(n,e)=>{const t=n.createGain();return Et(t,e),pt(t,e,"gain"),t},fB=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return Et(r,s),r};function pB(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function mB(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function h1(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=mB(t,e),t[0]+=n[s];return t}const gB=(n,e,t,s)=>(r,i,{channelCount:a,channelCountMode:c,channelInterpretation:u,feedback:h,feedforward:f})=>{const p=lC(i,r.sampleRate),g=h instanceof Float64Array?h:new Float64Array(h),y=f instanceof Float64Array?f:new Float64Array(f),x=g.length,w=y.length,v=Math.min(x,w);if(x===0||x>20)throw s();if(g[0]===0)throw e();if(w===0||w>20)throw s();if(y[0]===0)throw e();if(g[0]!==1){for(let R=0;R<w;R+=1)y[R]/=g[0];for(let R=1;R<x;R+=1)g[R]/=g[0]}const S=t(r,p,a,a);S.channelCount=a,S.channelCountMode=c,S.channelInterpretation=u;const T=32,C=[],P=[],k=[];for(let R=0;R<a;R+=1){C.push(0);const O=new Float32Array(T),D=new Float32Array(T);O.fill(0),D.fill(0),P.push(O),k.push(D)}S.onaudioprocess=R=>{const O=R.inputBuffer,D=R.outputBuffer,F=O.numberOfChannels;for(let L=0;L<F;L+=1){const X=O.getChannelData(L),Z=D.getChannelData(L);C[L]=aC(g,x,y,w,v,P[L],k[L],C[L],T,X,Z)}};const M=r.sampleRate/2;return Qo({get bufferSize(){return p},get channelCount(){return S.channelCount},set channelCount(R){S.channelCount=R},get channelCountMode(){return S.channelCountMode},set channelCountMode(R){S.channelCountMode=R},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(R){S.channelInterpretation=R},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},addEventListener(...R){return S.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return S.dispatchEvent(R[0])},getFrequencyResponse(R,O,D){if(R.length!==O.length||O.length!==D.length)throw n();const F=R.length;for(let L=0;L<F;L+=1){const X=-Math.PI*(R[L]/M),Z=[Math.cos(X),Math.sin(X)],ne=h1(y,Z),W=h1(g,Z),j=pB(ne,W);O[L]=Math.sqrt(j[0]*j[0]+j[1]*j[1]),D[L]=Math.atan2(j[1],j[0])}},removeEventListener(...R){return S.removeEventListener(R[0],R[1],R[2])}},S)},yB=(n,e)=>n.createMediaElementSource(e.mediaElement),_B=(n,e)=>{const t=n.createMediaStreamDestination();return Et(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},xB=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,a)=>i.id<a.id?-1:i.id>a.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},vB=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},wB=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,bB=(n,e,t,s,r,i)=>(a,c)=>{const u=a.createOscillator();return Et(u,c),pt(u,c,"detune"),pt(u,c,"frequency"),c.periodicWave!==void 0?u.setPeriodicWave(c.periodicWave):st(u,c,"type"),e(t,()=>t(a))||Lg(u),e(s,()=>s(a))||i(u,a),e(r,()=>r(a))||Bg(u),n(a,u),u},SB=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(Et(s,t),pt(s,t,"orientationX"),pt(s,t,"orientationY"),pt(s,t,"orientationZ"),pt(s,t,"positionX"),pt(s,t,"positionY"),pt(s,t,"positionZ"),st(s,t,"coneInnerAngle"),st(s,t,"coneOuterAngle"),st(s,t,"coneOuterGain"),st(s,t,"distanceModel"),st(s,t,"maxDistance"),st(s,t,"panningModel"),st(s,t,"refDistance"),st(s,t,"rolloffFactor"),s)},TB=(n,e,t,s,r,i,a,c,u,h)=>(f,{coneInnerAngle:p,coneOuterAngle:g,coneOuterGain:y,distanceModel:x,maxDistance:w,orientationX:v,orientationY:S,orientationZ:T,panningModel:C,positionX:P,positionY:k,positionZ:M,refDistance:E,rolloffFactor:R,...O})=>{const D=f.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw a();Et(D,O);const F={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L=t(f,{...F,channelInterpretation:"speakers",numberOfInputs:6}),X=s(f,{...O,gain:1}),Z=s(f,{...F,gain:1}),ne=s(f,{...F,gain:0}),W=s(f,{...F,gain:0}),j=s(f,{...F,gain:0}),H=s(f,{...F,gain:0}),U=s(f,{...F,gain:0}),Y=r(f,256,6,1),I=i(f,{...F,curve:new Float32Array([1,1]),oversample:"none"});let $=[v,S,T],le=[P,k,M];const ue=new Float32Array(1);Y.onaudioprocess=({inputBuffer:re})=>{const ke=[u(re,ue,0),u(re,ue,1),u(re,ue,2)];ke.some((tn,zt)=>tn!==$[zt])&&(D.setOrientation(...ke),$=ke);const $e=[u(re,ue,3),u(re,ue,4),u(re,ue,5)];$e.some((tn,zt)=>tn!==le[zt])&&(D.setPosition(...$e),le=$e)},Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0});const oe={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(re){if(re>2)throw a();X.channelCount=re,D.channelCount=re},get channelCountMode(){return D.channelCountMode},set channelCountMode(re){if(re==="max")throw a();X.channelCountMode=re,D.channelCountMode=re},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(re){X.channelInterpretation=re,D.channelInterpretation=re},get coneInnerAngle(){return D.coneInnerAngle},set coneInnerAngle(re){D.coneInnerAngle=re},get coneOuterAngle(){return D.coneOuterAngle},set coneOuterAngle(re){D.coneOuterAngle=re},get coneOuterGain(){return D.coneOuterGain},set coneOuterGain(re){if(re<0||re>1)throw e();D.coneOuterGain=re},get context(){return D.context},get distanceModel(){return D.distanceModel},set distanceModel(re){D.distanceModel=re},get inputs(){return[X]},get maxDistance(){return D.maxDistance},set maxDistance(re){if(re<0)throw new RangeError;D.maxDistance=re},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get orientationX(){return Z.gain},get orientationY(){return ne.gain},get orientationZ(){return W.gain},get panningModel(){return D.panningModel},set panningModel(re){D.panningModel=re},get positionX(){return j.gain},get positionY(){return H.gain},get positionZ(){return U.gain},get refDistance(){return D.refDistance},set refDistance(re){if(re<0)throw new RangeError;D.refDistance=re},get rolloffFactor(){return D.rolloffFactor},set rolloffFactor(re){if(re<0)throw new RangeError;D.rolloffFactor=re},addEventListener(...re){return X.addEventListener(re[0],re[1],re[2])},dispatchEvent(...re){return X.dispatchEvent(re[0])},removeEventListener(...re){return X.removeEventListener(re[0],re[1],re[2])}};p!==oe.coneInnerAngle&&(oe.coneInnerAngle=p),g!==oe.coneOuterAngle&&(oe.coneOuterAngle=g),y!==oe.coneOuterGain&&(oe.coneOuterGain=y),x!==oe.distanceModel&&(oe.distanceModel=x),w!==oe.maxDistance&&(oe.maxDistance=w),v!==oe.orientationX.value&&(oe.orientationX.value=v),S!==oe.orientationY.value&&(oe.orientationY.value=S),T!==oe.orientationZ.value&&(oe.orientationZ.value=T),C!==oe.panningModel&&(oe.panningModel=C),P!==oe.positionX.value&&(oe.positionX.value=P),k!==oe.positionY.value&&(oe.positionY.value=k),M!==oe.positionZ.value&&(oe.positionZ.value=M),E!==oe.refDistance&&(oe.refDistance=E),R!==oe.rolloffFactor&&(oe.rolloffFactor=R),($[0]!==1||$[1]!==0||$[2]!==0)&&D.setOrientation(...$),(le[0]!==0||le[1]!==0||le[2]!==0)&&D.setPosition(...le);const ce=()=>{X.connect(D),n(X,I,0,0),I.connect(Z).connect(L,0,0),I.connect(ne).connect(L,0,1),I.connect(W).connect(L,0,2),I.connect(j).connect(L,0,3),I.connect(H).connect(L,0,4),I.connect(U).connect(L,0,5),L.connect(Y).connect(f.destination)},ge=()=>{X.disconnect(D),c(X,I,0,0),I.disconnect(Z),Z.disconnect(L),I.disconnect(ne),ne.disconnect(L),I.disconnect(W),W.disconnect(L),I.disconnect(j),j.disconnect(L),I.disconnect(H),H.disconnect(L),I.disconnect(U),U.disconnect(L),L.disconnect(Y),Y.disconnect(f.destination)};return h(Qo(oe,D),ce,ge)},CB=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),a=r instanceof Float32Array?r:new Float32Array(r),c=e.createPeriodicWave(a,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return c},Hl=(n,e,t,s)=>n.createScriptProcessor(e,t,s),kB=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return Et(i,s),pt(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:a=>{if(a!==r)throw e()}}),i},AB=(n,e,t,s,r,i)=>{const c=new Float32Array([1,1]),u=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...h,oversample:"none"},p=(x,w,v,S)=>{const T=new Float32Array(16385),C=new Float32Array(16385);for(let O=0;O<16385;O+=1){const D=O/16384*u;T[O]=Math.cos(D),C[O]=Math.sin(D)}const P=t(x,{...h,gain:0}),k=s(x,{...f,curve:T}),M=s(x,{...f,curve:c}),E=t(x,{...h,gain:0}),R=s(x,{...f,curve:C});return{connectGraph(){w.connect(P),w.connect(M.inputs===void 0?M:M.inputs[0]),w.connect(E),M.connect(v),v.connect(k.inputs===void 0?k:k.inputs[0]),v.connect(R.inputs===void 0?R:R.inputs[0]),k.connect(P.gain),R.connect(E.gain),P.connect(S,0,0),E.connect(S,0,1)},disconnectGraph(){w.disconnect(P),w.disconnect(M.inputs===void 0?M:M.inputs[0]),w.disconnect(E),M.disconnect(v),v.disconnect(k.inputs===void 0?k:k.inputs[0]),v.disconnect(R.inputs===void 0?R:R.inputs[0]),k.disconnect(P.gain),R.disconnect(E.gain),P.disconnect(S,0,0),E.disconnect(S,0,1)}}},g=(x,w,v,S)=>{const T=new Float32Array(16385),C=new Float32Array(16385),P=new Float32Array(16385),k=new Float32Array(16385),M=Math.floor(16385/2);for(let j=0;j<16385;j+=1)if(j>M){const H=(j-M)/(16384-M)*u;T[j]=Math.cos(H),C[j]=Math.sin(H),P[j]=0,k[j]=1}else{const H=j/(16384-M)*u;T[j]=1,C[j]=0,P[j]=Math.cos(H),k[j]=Math.sin(H)}const E=e(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),R=t(x,{...h,gain:0}),O=s(x,{...f,curve:T}),D=t(x,{...h,gain:0}),F=s(x,{...f,curve:C}),L=s(x,{...f,curve:c}),X=t(x,{...h,gain:0}),Z=s(x,{...f,curve:P}),ne=t(x,{...h,gain:0}),W=s(x,{...f,curve:k});return{connectGraph(){w.connect(E),w.connect(L.inputs===void 0?L:L.inputs[0]),E.connect(R,0),E.connect(D,0),E.connect(X,1),E.connect(ne,1),L.connect(v),v.connect(O.inputs===void 0?O:O.inputs[0]),v.connect(F.inputs===void 0?F:F.inputs[0]),v.connect(Z.inputs===void 0?Z:Z.inputs[0]),v.connect(W.inputs===void 0?W:W.inputs[0]),O.connect(R.gain),F.connect(D.gain),Z.connect(X.gain),W.connect(ne.gain),R.connect(S,0,0),X.connect(S,0,0),D.connect(S,0,1),ne.connect(S,0,1)},disconnectGraph(){w.disconnect(E),w.disconnect(L.inputs===void 0?L:L.inputs[0]),E.disconnect(R,0),E.disconnect(D,0),E.disconnect(X,1),E.disconnect(ne,1),L.disconnect(v),v.disconnect(O.inputs===void 0?O:O.inputs[0]),v.disconnect(F.inputs===void 0?F:F.inputs[0]),v.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),v.disconnect(W.inputs===void 0?W:W.inputs[0]),O.disconnect(R.gain),F.disconnect(D.gain),Z.disconnect(X.gain),W.disconnect(ne.gain),R.disconnect(S,0,0),X.disconnect(S,0,0),D.disconnect(S,0,1),ne.disconnect(S,0,1)}}},y=(x,w,v,S,T)=>{if(w===1)return p(x,v,S,T);if(w===2)return g(x,v,S,T);throw r()};return(x,{channelCount:w,channelCountMode:v,pan:S,...T})=>{if(v==="max")throw r();const C=n(x,{...T,channelCount:1,channelCountMode:v,numberOfInputs:2}),P=t(x,{...T,channelCount:w,channelCountMode:v,gain:1}),k=t(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:S});let{connectGraph:M,disconnectGraph:E}=y(x,w,P,k,C);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const R={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(L){P.channelCount!==L&&(O&&E(),{connectGraph:M,disconnectGraph:E}=y(x,L,P,k,C),O&&M()),P.channelCount=L},get channelCountMode(){return P.channelCountMode},set channelCountMode(L){if(L==="clamped-max"||L==="max")throw r();P.channelCountMode=L},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(L){P.channelInterpretation=L},get context(){return P.context},get inputs(){return[P]},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get pan(){return k.gain},addEventListener(...L){return P.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return P.dispatchEvent(L[0])},removeEventListener(...L){return P.removeEventListener(L[0],L[1],L[2])}};let O=!1;const D=()=>{M(),O=!0},F=()=>{E(),O=!1};return i(Qo(R,C),D,F)}},MB=(n,e,t,s,r,i,a)=>(c,u)=>{const h=c.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,u);Et(h,u);const f=u.curve===null||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(f!==null&&f.length<2)throw e();st(h,{curve:f},"curve"),st(h,u,"oversample");let p=null,g=!1;return a(h,"curve",w=>()=>w.call(h),w=>v=>(w.call(h,v),g&&(s(v)&&p===null?p=n(c,h):!s(v)&&p!==null&&(p(),p=null)),v)),r(h,()=>{g=!0,s(h.curve)&&(p=n(c,h))},()=>{g=!1,p!==null&&(p(),p=null)})},PB=(n,e,t,s,r)=>(i,{curve:a,oversample:c,...u})=>{const h=i.createWaveShaper(),f=i.createWaveShaper();Et(h,u),Et(f,u);const p=t(i,{...u,gain:1}),g=t(i,{...u,gain:-1}),y=t(i,{...u,gain:1}),x=t(i,{...u,gain:-1});let w=null,v=!1,S=null;const T={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(k){p.channelCount=k,g.channelCount=k,h.channelCount=k,y.channelCount=k,f.channelCount=k,x.channelCount=k},get channelCountMode(){return h.channelCountMode},set channelCountMode(k){p.channelCountMode=k,g.channelCountMode=k,h.channelCountMode=k,y.channelCountMode=k,f.channelCountMode=k,x.channelCountMode=k},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(k){p.channelInterpretation=k,g.channelInterpretation=k,h.channelInterpretation=k,y.channelInterpretation=k,f.channelInterpretation=k,x.channelInterpretation=k},get context(){return h.context},get curve(){return S},set curve(k){if(k!==null&&k.length<2)throw e();if(k===null)h.curve=k,f.curve=k;else{const M=k.length,E=new Float32Array(M+2-M%2),R=new Float32Array(M+2-M%2);E[0]=k[0],R[0]=-k[M-1];const O=Math.ceil((M+1)/2),D=(M+1)/2-1;for(let F=1;F<O;F+=1){const L=F/O*D,X=Math.floor(L),Z=Math.ceil(L);E[F]=X===Z?k[X]:(1-(L-X))*k[X]+(1-(Z-L))*k[Z],R[F]=X===Z?-k[M-1-X]:-((1-(L-X))*k[M-1-X])-(1-(Z-L))*k[M-1-Z]}E[O]=M%2===1?k[O-1]:(k[O-2]+k[O-1])/2,h.curve=E,f.curve=R}S=k,v&&(s(S)&&w===null?w=n(i,p):w!==null&&(w(),w=null))},get inputs(){return[p]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(k){h.oversample=k,f.oversample=k},addEventListener(...k){return p.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return p.dispatchEvent(k[0])},removeEventListener(...k){return p.removeEventListener(k[0],k[1],k[2])}};a!==null&&(T.curve=a instanceof Float32Array?a:new Float32Array(a)),c!==T.oversample&&(T.oversample=c);const C=()=>{p.connect(h).connect(y),p.connect(g).connect(f).connect(x).connect(y),v=!0,s(S)&&(w=n(i,p))},P=()=>{p.disconnect(h),h.disconnect(y),p.disconnect(g),g.disconnect(f),f.disconnect(x),x.disconnect(y),v=!1,w!==null&&(w(),w=null)};return r(Qo(T,y),C,P)},hn=()=>new DOMException("","NotSupportedError"),EB={numberOfChannels:1},RB=(n,e,t,s,r)=>class extends n{constructor(a,c,u){let h;if(typeof a=="number"&&c!==void 0&&u!==void 0)h={length:c,numberOfChannels:a,sampleRate:u};else if(typeof a=="object")h=a;else throw new Error("The given parameters are not valid.");const{length:f,numberOfChannels:p,sampleRate:g}={...EB,...h},y=s(p,f,g);e(Rl,()=>Rl(y))||y.addEventListener("statechange",(()=>{let x=0;const w=v=>{this._state==="running"&&(x>0?(y.removeEventListener("statechange",w),v.stopImmediatePropagation(),this._waitForThePromiseToSettle(v)):x+=1)};return w})()),super(y,p),this._length=f,this._nativeOfflineAudioContext=y,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,tC(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},IB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},NB=(n,e,t,s,r,i,a)=>class extends n{constructor(u,h){const f=r(u),p={...IB,...h},g=t(f,p),y=i(f),x=y?s():null,w=u.sampleRate/2;super(u,!1,g,x),this._detune=e(this,y,g.detune,153600,-153600),this._frequency=e(this,y,g.frequency,w,-w),this._nativeOscillatorNode=g,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&p.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=p.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(u){const h=typeof u=="function"?a(this,u):null;this._nativeOscillatorNode.onended=h;const f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===h?u:f}get type(){return this._nativeOscillatorNode.type}set type(u){this._nativeOscillatorNode.type=u,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(u){this._nativeOscillatorNode.setPeriodicWave(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=u)}start(u=0){if(this._nativeOscillatorNode.start(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=u),this.context.state!=="closed"){jo(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),er(this)&&jl(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(u=0){this._nativeOscillatorNode.stop(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=u)}},DB=(n,e,t,s,r)=>()=>{const i=new WeakMap;let a=null,c=null,u=null;const h=async(f,p)=>{let g=t(f);const y=en(g,p);if(!y){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,detune:g.detune.value,frequency:g.frequency.value,periodicWave:a===null?void 0:a,type:g.type};g=e(p,x),c!==null&&g.start(c),u!==null&&g.stop(u)}return i.set(p,g),y?(await n(p,f.detune,g.detune),await n(p,f.frequency,g.frequency)):(await s(p,f.detune,g.detune),await s(p,f.frequency,g.frequency)),await r(f,p,g),g};return{set periodicWave(f){a=f},set start(f){c=f},set stop(f){u=f},render(f,p){const g=i.get(p);return g!==void 0?Promise.resolve(g):h(f,p)}}},OB={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},FB=(n,e,t,s,r,i,a)=>class extends n{constructor(u,h){const f=r(u),p={...OB,...h},g=t(f,p),y=i(f),x=y?s():null;super(u,!1,g,x),this._nativePannerNode=g,this._orientationX=e(this,y,g.orientationX,on,vn),this._orientationY=e(this,y,g.orientationY,on,vn),this._orientationZ=e(this,y,g.orientationZ,on,vn),this._positionX=e(this,y,g.positionX,on,vn),this._positionY=e(this,y,g.positionY,on,vn),this._positionZ=e(this,y,g.positionZ,on,vn),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(u){this._nativePannerNode.coneInnerAngle=u}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(u){this._nativePannerNode.coneOuterAngle=u}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(u){this._nativePannerNode.coneOuterGain=u}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(u){this._nativePannerNode.distanceModel=u}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(u){this._nativePannerNode.maxDistance=u}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(u){this._nativePannerNode.panningModel=u}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(u){this._nativePannerNode.refDistance=u}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(u){this._nativePannerNode.rolloffFactor=u}},VB=(n,e,t,s,r,i,a,c,u,h)=>()=>{const f=new WeakMap;let p=null;const g=async(y,x)=>{let w=null,v=i(y);const S={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},T={...S,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},C=en(v,x);if("bufferSize"in v)w=s(x,{...S,gain:1});else if(!C){const P={...T,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=r(x,P)}if(f.set(x,w===null?v:w),w!==null){if(p===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const F=new a(6,y.context.length,x.sampleRate),L=e(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});L.connect(F.destination),p=(async()=>{const X=await Promise.all([y.orientationX,y.orientationY,y.orientationZ,y.positionX,y.positionY,y.positionZ].map(async(Z,ne)=>{const W=t(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ne===0?1:0});return await c(F,Z,W.offset),W}));for(let Z=0;Z<6;Z+=1)X[Z].connect(L,0,Z),X[Z].start(0);return h(F)})()}const P=await p,k=s(x,{...S,gain:1});await u(y,x,k);const M=[];for(let F=0;F<P.numberOfChannels;F+=1)M.push(P.getChannelData(F));let E=[M[0][0],M[1][0],M[2][0]],R=[M[3][0],M[4][0],M[5][0]],O=s(x,{...S,gain:1}),D=r(x,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:R[0],positionY:R[1],positionZ:R[2]});k.connect(O).connect(D.inputs[0]),D.connect(w);for(let F=128;F<P.length;F+=128){const L=[M[0][F],M[1][F],M[2][F]],X=[M[3][F],M[4][F],M[5][F]];if(L.some((Z,ne)=>Z!==E[ne])||X.some((Z,ne)=>Z!==R[ne])){E=L,R=X;const Z=F/x.sampleRate;O.gain.setValueAtTime(0,Z),O=s(x,{...S,gain:0}),D=r(x,{...T,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:R[0],positionY:R[1],positionZ:R[2]}),O.gain.setValueAtTime(1,Z),k.connect(O).connect(D.inputs[0]),D.connect(w)}}return w}return C?(await n(x,y.orientationX,v.orientationX),await n(x,y.orientationY,v.orientationY),await n(x,y.orientationZ,v.orientationZ),await n(x,y.positionX,v.positionX),await n(x,y.positionY,v.positionY),await n(x,y.positionZ,v.positionZ)):(await c(x,y.orientationX,v.orientationX),await c(x,y.orientationY,v.orientationY),await c(x,y.orientationZ,v.orientationZ),await c(x,y.positionX,v.positionX),await c(x,y.positionY,v.positionY),await c(x,y.positionZ,v.positionZ)),Zo(v)?await u(y,x,v.inputs[0]):await u(y,x,v),v};return{render(y,x){const w=f.get(x);return w!==void 0?Promise.resolve(w):g(y,x)}}},LB={disableNormalization:!1},BB=(n,e,t,s)=>class hC{constructor(i,a){const c=e(i),u=s({...LB,...a}),h=n(c,u);return t.add(h),h}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===hC.prototype||t.has(i)}},zB=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),jB=(n,e,t)=>async(s,r,i)=>{const a=n(s);await Promise.all(a.activeInputs.map((c,u)=>Array.from(c).map(async([h,f])=>{const g=await e(h).render(h,r),y=s.context.destination;!t(h)&&(s!==y||!t(s))&&g.connect(i,f,u)})).reduce((c,u)=>[...c,...u],[]))},UB=(n,e,t)=>async(s,r,i)=>{const a=e(s);await Promise.all(Array.from(a.activeInputs).map(async([c,u])=>{const f=await n(c).render(c,r);t(c)||f.connect(i,u)}))},WB=(n,e,t,s)=>r=>n(Rl,()=>Rl(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const a=t(r,512,0,1);r.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>r.currentTime,a.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const a=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=c=>{a.disconnect(),i(c.renderedBuffer)},a.connect(r.destination),r.startRendering()}),GB=n=>(e,t)=>{n.set(e,t)},HB=n=>(e,t)=>n.set(e,t),$B=(n,e,t,s,r,i,a,c)=>(u,h)=>t(u).render(u,h).then(()=>Promise.all(Array.from(s(h)).map(f=>t(f).render(f,h)))).then(()=>r(h)).then(f=>(typeof f.copyFromChannel!="function"?(a(f),Og(f)):e(i,()=>i(f))||c(f),n.add(f),f)),qB={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},YB=(n,e,t,s,r,i)=>class extends n{constructor(c,u){const h=r(c),f={...qB,...u},p=t(h,f),g=i(h),y=g?s():null;super(c,!1,p,y),this._pan=e(this,g,p.pan)}get pan(){return this._pan}},XB=(n,e,t,s,r)=>()=>{const i=new WeakMap,a=async(c,u)=>{let h=t(c);const f=en(h,u);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(u,p)}return i.set(u,h),f?await n(u,c.pan,h.pan):await s(u,c.pan,h.pan),Zo(h)?await r(c,u,h.inputs[0]):await r(c,u,h),h};return{render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(c,u)}}},KB=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},ZB=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,a=!1;try{await s.audioWorklet.addModule(r);const c=new n(s,"a",{numberOfOutputs:0}),u=s.createOscillator();c.port.onmessage=()=>i=!0,c.onprocessorerror=()=>a=!0,u.connect(c),u.start(0),await s.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(r)}return i&&!a},QB=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},JB=()=>new DOMException("","UnknownError"),e4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},t4=(n,e,t,s,r,i,a)=>class extends n{constructor(u,h){const f=r(u),p={...e4,...h},g=t(f,p),x=i(f)?s():null;super(u,!0,g,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=g,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(u){if(u===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(u.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=u}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(u){this._nativeWaveShaperNode.oversample=u}},n4=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,a)=>{let c=e(i);if(!en(c,a)){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=n(a,h)}return s.set(a,c),Zo(c)?await t(i,a,c.inputs[0]):await t(i,a,c),c};return{render(i,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):r(i,a)}}},s4=()=>typeof window>"u"?null:window,r4=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const a=n(i),c=n(r);if(c>=t.numberOfChannels)throw e();const u=t.length,h=t.getChannelData(c),f=s.length;for(let p=a<0?-a:0;p+a<u&&p<f;p+=1)s[p]=h[p+a]},t.copyToChannel=(s,r,i=0)=>{const a=n(i),c=n(r);if(c>=t.numberOfChannels)throw e();const u=t.length,h=t.getChannelData(c),f=s.length;for(let p=a<0?-a:0;p+a<u&&p<f;p+=1)h[p+a]=s[p]}},i4=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const a=n(i),c=n(r);if(a<e.length)return t.call(e,s,c,a)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const a=n(i),c=n(r);if(a<e.length)return t.call(e,s,c,a)})(e.copyToChannel)},o4=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},a4=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let u=0;u<c;u+=1)r.connect(s,0,u)},()=>r.disconnect(s))},dC=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),fC=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},$l=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:a}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(a)})},l4=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),c4=n=>({...n,channelCount:n.numberOfOutputs}),u4=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},pC=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;pC(n,e,t+1e-7)}},h4=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},d4=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},f4=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},zg=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},mC=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},jg=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},p4=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},m4=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,a=i===null?s:Math.min(i.duration,s);i!==null&&a>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,a,r)})(n.start)},gC=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Qo(n,t),n.stop=(r=>{let i=!1;return(a=0)=>{if(i)try{r.call(n,a)}catch{t.gain.setValueAtTime(0,a)}else r.call(n,a),i=!0}})(n.stop)},Jo=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},g4=FV(Vi),y4=UV(Vi),_4=e5(Mh),yC=new WeakMap,x4=_5(yC),_s=EL(new Map,new WeakMap),Ds=s4(),_C=Y5(_s,Fs),Ug=y5(cn),$t=jB(cn,Ug,Ni),v4=qV(_C,tt,$t),Xe=w5(Ah),or=wB(Ds),Ge=L5(or),xC=new WeakMap,vC=u5(Jo),ql=Q5(Ds),Wg=D5(ql),Gg=O5(Ds),wC=F5(Ds),Il=eB(Ds),vt=_L(VV(YT),jV(g4,y4,oh,_4,ah,cn,x4,zl,tt,Vi,er,Ni,Uu),_s,P5(bm,ah,cn,tt,El,er),Fs,Ph,hn,KL(oh,bm,cn,tt,El,Xe,er,Ge),s5(xC,cn,ps),vC,Xe,Wg,Gg,wC,Ge,Il),w4=$V(vt,v4,Fs,_C,Xe,Ge),Hg=new WeakSet,d1=X5(Ds),bC=WL(new Uint32Array(1)),$g=r4(bC,Fs),qg=i4(bC),SC=XV(Hg,_s,hn,d1,or,KB(d1),$g,qg),Eh=WV(Sn),TC=UB(Ug,Ul,Ni),Vs=VL(TC),ea=Z5(Eh,_s,h4,d4,f4,zg,mC,jg,m4,o4($l),gC),Ls=zB(x5(Ul),TC),b4=QV(Vs,ea,tt,Ls,$t),xs=xL(LV(XT),xC,Dg,vL,EV,RV,IV,NV,DV,xm,$T,ql,pC),S4=ZV(vt,b4,xs,Lt,ea,Xe,Ge,Jo),T4=aL(vt,lL,Fs,Lt,J5(Sn,$l),Xe,Ge,$t),C4=PL(Vs,cC,tt,Ls,$t),Li=HB(yC),k4=ML(vt,xs,C4,Ph,cC,Xe,Ge,Li),qr=$5(Vi,Gg),A4=a4(Lt,qr),Yr=aB(ql,A4),M4=NL(Yr,tt,$t),P4=IL(vt,M4,Yr,Xe,Ge),E4=FL(Gl,tt,$t),R4=OL(vt,E4,Gl,Xe,Ge,c4),I4=uB(Eh,ea,Sn,qr),ta=cB(Eh,_s,I4,zg,jg),N4=UL(Vs,ta,tt,Ls,$t),D4=jL(vt,xs,N4,ta,Xe,Ge,Jo),CC=hB(hn,$l),O4=$L(CC,tt,$t),F4=HL(vt,O4,CC,Xe,Ge,Li),V4=JL(Vs,uC,tt,Ls,$t),L4=QL(vt,xs,V4,uC,Xe,Ge,Li),kC=dB(hn),B4=a5(Vs,kC,tt,Ls,$t),z4=o5(vt,xs,B4,kC,hn,Xe,Ge,Li),j4=m5(Vs,Sn,tt,Ls,$t),U4=p5(vt,xs,j4,Sn,Xe,Ge),W4=gB(Ph,Lt,Hl,hn),Rh=WB(_s,Sn,Hl,QB(Sn,or)),G4=M5(ea,tt,or,$t,Rh),H4=fB(W4),$4=k5(vt,H4,G4,Xe,Ge,Li),q4=cL(xs,Yr,ta,Hl,hn,dC,Ge,$l),AC=new WeakMap,Y4=H5(T4,q4,vC,Ge,AC,Jo),MC=bB(Eh,_s,zg,mC,jg,gC),X4=DB(Vs,MC,tt,Ls,$t),K4=NB(vt,xs,MC,X4,Xe,Ge,Jo),PC=BL(ea),Z4=PB(PC,Lt,Sn,fC,qr),Ih=MB(PC,Lt,Z4,fC,qr,ql,$l),Q4=TB(oh,Lt,Yr,Sn,Hl,Ih,hn,ah,dC,qr),EC=SB(Q4),J4=VB(Vs,Yr,ta,Sn,EC,tt,or,Ls,$t,Rh),ez=FB(vt,xs,EC,J4,Xe,Ge,Li),tz=CB(Fs),nz=BB(tz,Xe,new WeakSet,u4),sz=AB(Yr,Gl,Sn,Ih,hn,qr),RC=kB(sz,hn),rz=XB(Vs,RC,tt,Ls,$t),iz=YB(vt,xs,RC,rz,Xe,Ge),oz=n4(Ih,tt,$t),az=t4(vt,Lt,Ih,oz,Xe,Ge,Li),IC=B5(Ds),Yg=h5(Ds),NC=new WeakMap,lz=b5(NC,or),cz=IC?zV(_s,hn,c5(Ds),Yg,d5(OV),Xe,lz,Ge,Il,new WeakMap,new WeakMap,ZB(Il,or),Ds):void 0,uz=V5(Wg,Ge),hz=XL(Hg,_s,YL,l5,new WeakSet,Xe,uz,rh,Rl,$g,qg),DC=kL(cz,w4,SC,S4,k4,P4,R4,D4,F4,hz,L4,z4,U4,$4,Y4,K4,ez,nz,iz,az),dz=z5(vt,yB,Xe,Ge),fz=U5(vt,_B,Xe,Ge),pz=W5(vt,xB,Xe,Ge),mz=vB(Lt,Ge),gz=G5(vt,mz,Xe),yz=oL(DC,Lt,hn,JB,dz,fz,pz,gz,ql),Xg=S5(AC),_z=GV(Xg),OC=LL(Fs),xz=t5(Xg),FC=r5(Fs),VC=new WeakMap,vz=g5(VC,ps),wz=oB(OC,Fs,Lt,Yr,Gl,ta,Sn,Hl,hn,FC,Yg,vz,qr),bz=nB(Lt,wz,Sn,hn,qr),Sz=CL(Vs,OC,ea,Yr,Gl,ta,Sn,xz,FC,Yg,tt,Il,or,Ls,$t,Rh),Tz=v5(NC),Cz=GB(VC),f1=IC?bL(_z,vt,xs,Sz,bz,cn,Tz,Xe,Ge,Il,l4,Cz,p4,Jo):void 0,kz=qL(hn,or),Az=$B(Hg,_s,Ug,Xg,Rh,rh,$g,qg),Mz=RB(DC,_s,Lt,kz,Az),Pz=E5(Ah,Wg),Ez=R5(Ng,Gg),Rz=I5(Dg,wC),Iz=N5(Ah,Ge);function Kn(n){return n===void 0}function Ne(n){return n!==void 0}function Nz(n){return typeof n=="function"}function jr(n){return typeof n=="number"}function Pi(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Dz(n){return typeof n=="boolean"}function On(n){return Array.isArray(n)}function sr(n){return typeof n=="string"}function Ou(n){return sr(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Te(n,e){if(!n)throw new Error(e)}function Ur(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function LC(n){!n.isOffline&&n.state!=="running"&&Nh('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let BC=!1,p1=!1;function m1(n){BC=n}function Oz(n){Kn(n)&&BC&&!p1&&(p1=!0,Nh("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let zC=console;function Fz(...n){zC.log(...n)}function Nh(...n){zC.warn(...n)}function Vz(n){return new yz(n)}function Lz(n,e,t){return new Mz(n,e,t)}const En=typeof self=="object"?self:null,Bz=En&&(En.hasOwnProperty("AudioContext")||En.hasOwnProperty("webkitAudioContext"));function zz(n,e,t){return Te(Ne(f1),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(En==null?void 0:En.BaseAudioContext)?En==null?void 0:En.AudioWorkletNode:f1)(n,e,t)}class jz{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Di(n){return Rz(n)}function Lr(n){return Ez(n)}function Wu(n){return Iz(n)}function go(n){return Pz(n)}function Uz(n){return n instanceof SC}function Wz(n,e){return n==="value"||Di(e)||Lr(e)||Uz(e)}function Ei(n,...e){if(!e.length)return n;const t=e.shift();if(Pi(n)&&Pi(t))for(const s in t)Wz(s,t[s])?n[s]=t[s]:Pi(t[s])?(n[s]||Object.assign(n,{[s]:{}}),Ei(n[s],t[s])):Object.assign(n,{[s]:t[s]});return Ei(n,...e)}function Gz(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Ce(n,e,t=[],s){const r={},i=Array.from(e);if(Pi(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(c=>Reflect.has(n,c))||(Ei(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&Pi(i[0]))Ei(r,i[0]);else for(let a=0;a<t.length;a++)Ne(i[a])&&(r[t[a]]=i[a]);return Ei(n,r)}function Hz(n){return n.constructor.getDefaults()}function Eo(n,e){return Kn(n)?e:n}function Am(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class ar{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||En&&this.toString()===En.TONE_DEBUG_CLASS)&&Fz(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ar.version=HT;const Kg=1e-6;function Uo(n,e){return n>e+Kg}function Mm(n,e){return Uo(n,e)||us(n,e)}function hh(n,e){return n+Kg<e}function us(n,e){return Math.abs(n-e)<Kg}function $z(n,e,t){return Math.max(Math.min(n,t),e)}class Zn extends ar{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Ce(Zn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Te(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Te(Mm(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(us(this._timeline[t].time,e)){for(let s=t;s>=0&&us(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Mm(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let a=Math.floor(s+(i-s)/2);const c=this._timeline[a],u=this._timeline[a+1];if(us(c[t],e)){for(let h=a;h<this._timeline.length;h++){const f=this._timeline[h];if(us(f[t],e))a=h;else break}return a}else{if(hh(c[t],e)&&Uo(u[t],e))return a;Uo(c[t],e)?i=a:s=a+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&us(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&us(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const jC=[];function Dh(n){jC.push(n)}function qz(n){jC.forEach(e=>e(n))}const UC=[];function Oh(n){UC.push(n)}function Yz(n){UC.forEach(e=>e(n))}class Yl extends ar{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Kn(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Kn(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Kn(t))this._events[r]=[];else{const i=this._events[r];for(let a=i.length-1;a>=0;a--)i[a]===t&&i.splice(a,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Yl.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class WC extends Yl{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Xl extends WC{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Zn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Ce(Xl.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=Vz({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new jz(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(qz(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Te(go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Te(go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Te(go(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Te(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Te(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Te(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Te(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return zz(this.rawContext,e,t)}addAudioWorkletModule(e){return Tt(this,void 0,void 0,function*(){Te(Ne(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Tt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return go(this._context)?this._context.resume():Promise.resolve()}close(){return Tt(this,void 0,void 0,function*(){go(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Yz(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class Xz extends WC{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Tt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function it(n,e){On(e)?e.forEach(t=>it(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function GC(n,e){On(e)?e.forEach(t=>GC(n,t)):Object.defineProperty(n,e,{writable:!0})}const We=()=>{};class Je extends ar{constructor(){super(),this.name="ToneAudioBuffer",this.onload=We;const e=Ce(Je.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,sr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:We,onload:We,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Rn().sampleRate}set(e){return e instanceof Je?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Tt(this,void 0,void 0,function*(){const t=Je.load(e).then(s=>{this.set(s),this.onload(this)});Je.downloads.push(t);try{yield t}finally{const s=Je.downloads.indexOf(t);Je.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=On(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=Rn(),a=i.createBuffer(s,r,i.sampleRate),c=!t&&s===1?[e]:e;for(let u=0;u<s;u++)a.copyToChannel(c[u],u);return this._buffer=a,this}toMono(e){if(jr(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let a=0;a<i.length;a++)t[a]+=i[a]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(jr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Te(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);Te(s<r,"The start time must be less than the end time");const i=r-s,a=Rn().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(s,r),c);return new Je(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Je().fromArray(e)}static fromUrl(e){return Tt(this,void 0,void 0,function*(){return yield new Je().load(e)})}static load(e){return Tt(this,void 0,void 0,function*(){const t=Je.baseUrl===""||Je.baseUrl.endsWith("/")?Je.baseUrl:Je.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const r=yield s.arrayBuffer();return yield Rn().decodeAudioData(r)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Tt(this,void 0,void 0,function*(){for(yield Promise.resolve();Je.downloads.length;)yield Je.downloads[0]})}}Je.baseUrl="";Je.downloads=[];class Zg extends Xl{constructor(){super({clockSource:"offline",context:Wu(arguments[0])?arguments[0]:Lz(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Wu(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Wu(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Tt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return Tt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Je(t)})}close(){return Promise.resolve()}}const HC=new Xz;let ki=HC;function Rn(){return ki===HC&&Bz&&Kz(new Xl),ki}function Kz(n,e=!1){e&&ki.dispose(),go(n)?ki=new Xl(n):Wu(n)?ki=new Zg(n):ki=n}function Nl(){return ki.resume()}if(En&&!En.TONE_SILENCE_LOGGING){const e=` * Tone.js v${HT} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Zz(n){return Math.pow(10,n/20)}function Qz(n){return 20*(Math.log(n)/Math.LN10)}function $C(n){return Math.pow(2,n/12)}let Fh=440;function Jz(){return Fh}function ej(n){Fh=n}function Ai(n){return Math.round(qC(n))}function qC(n){return 69+12*Math.log2(n/Fh)}function YC(n){return Fh*Math.pow(2,(n-69)/12)}class Qg extends ar{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qg&&this.fromType(this._val),Kn(this._val))return this._noArg();if(sr(this._val)&&Kn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Pi(this._val)){let e=0;for(const t in this._val)if(Ne(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(Ne(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return sr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class fs extends Qg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new fs(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),c=Math.round(r/s)*s-r;return r+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const a=Math.pow(2,i);t.push(a+"n."),t.push(a+"n"),t.push(a+"t")}t.push("0");let s=t[0],r=new fs(this.context,t[0]).toSeconds();return t.forEach(i=>{const a=new fs(this.context,i).toSeconds();Math.abs(a-e)<Math.abs(r-e)&&(s=i,r=a)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ai(this.toFrequency())}_now(){return this.context.now()}}class In extends fs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Jz()}static set A4(e){ej(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:In.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=tj[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:In.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new In(this.context,this.valueOf()*$C(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Ai(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/In.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),nj[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return YC(e)}static ftom(e){return Ai(e)}}const tj={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nj=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class gl extends fs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class wn extends ar{constructor(){super();const e=Ce(wn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Rn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return Oz(e),new fs(this.context,e).toSeconds()}toFrequency(e){return new In(this.context,e).toFrequency()}toTicks(e){return new gl(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Kn(e[s])&&delete t[s]}),t}get(){const e=Hz(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Ne(s)&&Ne(s.value)&&Ne(s.setValueAtTime)?e[t]=s.value:s instanceof wn?e[t]=s._getPartialProperties(e[t]):On(s)||jr(s)||sr(s)||Dz(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ne(this[t])&&(this[t]&&Ne(this[t].value)&&Ne(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof wn?this[t].set(e[t]):this[t]=e[t])}),this}}class Jg extends Zn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Ur(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Ue extends wn{constructor(){const e=Ce(Ue.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Te(Ne(e.param)&&(Di(e.param)||e.param instanceof Ue),"param must be an AudioParam");!Di(e.param);)e.param=e.param._param;this._swappable=Ne(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Zn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ne(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(wn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ne(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ne(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ne(this.maxValue)&&Ne(this.minValue)&&Ur(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Zz(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Qz(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return Te(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const a=this._events.getBefore(r.time);let c;a===null?c=this._initialValue:c=a.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,c,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let a=r.value;if(r.type==="setTargetAtTime"){const c=this._events.getBefore(r.time);c===null?a=this._initialValue:a=c.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,a,s.time,s.value,t):i=this._exponentialInterpolate(r.time,a,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return Te(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=us(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return Te(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);Te(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),Te(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const a=s/(e.length-1);for(let c=1;c<e.length;c++){const u=this._fromType(e[c])*r;this.linearRampToValueAtTime(this._toType(u),t+c*a)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Te(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Te(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&us(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,a=(i-t)/10;for(let c=t;c<i;c+=a)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){Te(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class Me extends wn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ne(this.input)?Di(this.input)||this.input instanceof Ue?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ne(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ne(e)&&(e instanceof Me||Lr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Te(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return na(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Nh("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return sj(this,e,t,s),this}chain(...e){return Pm(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ne(this.input)&&(this.input instanceof Me?this.input.dispose():Lr(this.input)&&this.input.disconnect()),Ne(this.output)&&(this.output instanceof Me?this.output.dispose():Lr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Pm(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof Me?t.connect(s):Lr(t)&&na(t,s),s),e)}function na(n,e,t=0,s=0){for(Te(Ne(n),"Cannot connect from undefined node"),Te(Ne(e),"Cannot connect to undefined node"),(e instanceof Me||Lr(e))&&Te(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Te(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Me||e instanceof Ue;)Ne(e.input)&&(e=e.input);for(;n instanceof Me;)Ne(n.output)&&(n=n.output);Di(e)?n.connect(e,t):n.connect(e,t,s)}function sj(n,e,t=0,s=0){if(Ne(e))for(;e instanceof Me;)e=e.input;for(;!Lr(n);)Ne(n.output)&&(n=n.output);Di(e)?n.disconnect(e,t):Lr(e)?n.disconnect(e,t,s):n.disconnect()}class Jt extends Me{constructor(){const e=Ce(Jt.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ue({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),it(this,"gain")}static getDefaults(){return Object.assign(Me.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Wo extends Me{constructor(e){super(e),this.onended=We,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Jt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Me.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:We})}_startGain(e,t=1){Te(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Te(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==We&&(this.onended(this),this.onended=We,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Te(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=We,this}}class ey extends Wo{constructor(){const e=Ce(ey.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),na(this._source,this._gainNode),this.offset=new Ue({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Wo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Bt extends Me{constructor(){const e=Ce(Bt.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new ey({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Me.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return ty(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ty(n,e,t,s){(e instanceof Ue||Di(e)||e instanceof Bt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Bt&&(e.overridden=!0)),na(n,e,t,s)}class ny extends Ue{constructor(){const e=Ce(ny.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Zn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),a=Math.round(Math.max(1/s,1));for(let c=0;c<=a;c++){const u=s*c+t,h=this._exponentialApproach(i.time,i.value,r,s,u);this.linearRampToValueAtTime(this._toType(h),u)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),a=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),a=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),a=(t-r.time)/i;for(let c=0;c<=i;c++){const u=a*c+r.time,h=this._exponentialInterpolate(r.time,r.value,t,s,u);this.linearRampToValueAtTime(this._toType(h),u)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Kn(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),a=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),c=Math.sqrt(Math.pow(r,2)-2*a*(t.ticks-e)),u=(-r+c)/a,h=(-r-c)/a;return(u>0?u:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class sy extends Bt{constructor(){const e=Ce(sy.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new ny({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Bt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class ry extends wn{constructor(){const e=Ce(ry.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Jg,this._tickOffset=new Zn,this._ticksAtTime=new Zn,this._secondsAtTime=new Zn,this.frequency=new sy({context:this.context,units:e.units,value:e.frequency}),it(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},wn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Ne(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let a=r||s,c=r?r.ticks:0,u=null;return this._state.forEachBetween(a.time,t+this.sampleTime,h=>{let f=a.time;const p=this._tickOffset.get(h.time);p&&p.time>=a.time&&(c=p.ticks,f=p.time),a.state==="started"&&h.state!=="started"&&(c+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(f),h.time!==i.time&&(u={state:h.state,time:h.time,ticks:c})),a=h}),this._state.remove(i),u&&this._ticksAtTime.add(u),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,a=r?r.seconds:0,c=null;return this._state.forEachBetween(i.time,e+this.sampleTime,u=>{let h=i.time;const f=this._tickOffset.get(u.time);f&&f.time>=i.time&&(a=f.seconds,h=f.time),i.state==="started"&&u.state!=="started"&&(a+=u.time-h,u.time!==s.time&&(c={state:u.state,time:u.time,seconds:a})),i=u}),this._state.remove(s),c&&this._secondsAtTime.add(c),a}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),a=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,a=>{r&&r.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),a.time-this.sampleTime,s),r=a});let i=null;if(r&&r.state==="started"){const a=Math.max(r.time,e),c=this.frequency.getTicksAtTime(a),u=this.frequency.getTicksAtTime(r.time),h=c-u;let f=Math.ceil(h)-h;f=us(f,1)?0:f;let p=this.frequency.getTimeOfTick(c+f);for(;p<t;){try{s(p,Math.round(this.getTicksAtTime(p)))}catch(g){i=g;break}p+=this.frequency.getDurationOfTicks(1,p)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Vh extends wn{constructor(){const e=Ce(Vh.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=We,this._lastUpdate=0,this._state=new Jg("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new ry({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,it(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(wn.getDefaults(),{callback:We,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){LC(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Yl.mixin(Vh);class tr extends Me{constructor(){const e=Ce(tr.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Jt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,it(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class iy extends Me{constructor(){const e=Ce(iy.getDefaults(),arguments);super(e),this.name="Destination",this.input=new tr({context:this.context}),this.output=new Jt({context:this.context}),this.volume=this.input.volume,Pm(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Pm(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Dh(n=>{n.destination=new iy({context:n})});Oh(n=>{n.destination.dispose()});class rj extends Me{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ue({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ue({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ue({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ue({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ue({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ue({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ue({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ue({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ue({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Me.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Dh(n=>{n.listener=new rj({context:n})});Oh(n=>{n.listener.dispose()});class oy extends ar{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Ce(oy.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:We,onload:We,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Te(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=We,r=We){return sr(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Je(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new Je(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class dh extends In{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Ai(super._frequencyToUnits(e))}_ticksToUnits(e){return Ai(super._ticksToUnits(e))}_beatsToUnits(e){return Ai(super._beatsToUnits(e))}_secondsToUnits(e){return Ai(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return YC(this.toMidi())}transpose(e){return new dh(this.context,this.toMidi()+e)}}class Ao extends gl{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class ij extends wn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Zn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Dh(n=>{n.draw=new ij({context:n})});Oh(n=>{n.draw.dispose()});class oj extends ar{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Te(Ne(e.time),"Events must have a time property"),Te(Ne(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new aj(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class aj{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class lj extends ar{constructor(e){super(),this.name="TimelineValue",this._timeline=new Zn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Go extends Me{constructor(){super(Ce(Go.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return ty(this,e,t,s),this}}class Kl extends Go{constructor(){const e=Ce(Kl.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,On(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Nz(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Bt.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const a=r/(i-1)*2-1;s[r]=e(a,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Te(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ay extends Go{constructor(){const e=Ce(ay.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Kl({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Go.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Wr{constructor(e,t){this.id=Wr._eventId++,this._remainderTime=0;const s=Object.assign(Wr.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:We,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Wr._eventId=0;class ly extends Wr{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(ly.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Wr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return hh(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ao(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){hh(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ao(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Uo(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Lh extends wn{constructor(){const e=Ce(Lh.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new lj(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Zn,this._repeatedEvents=new oj,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Vh({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),it(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(wn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Ao(this.context,this._swingTicks*2/3).toSeconds()*r}m1(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),m1(!1)}schedule(e,t){const s=new Wr(this,{callback:e,time:new gl(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new ly(this,{callback:e,duration:new fs(this.context,r).toTicks(),interval:new fs(this.context,t).toTicks(),time:new gl(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Wr(this,{callback:e,once:!0,time:new gl(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Ao(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Ne(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){On(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new fs(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new fs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ao(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Ao(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),a=[];if(e.units==="time"){const u=.015625/i,h=new Jt(u),f=new ay(-1),p=new Jt(u);r.chain(h,f,p),r=p,i=1/i,a=[h,f,p]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/i:t=0);const c=new Jt(t);return r.connect(c),c.connect(e._param),a.push(c),this._syncedSignals.push({initial:e.value,nodes:a,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),GC(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Yl.mixin(Lh);Dh(n=>{n.transport=new Lh({context:n})});Oh(n=>{n.transport.dispose()});class Vn extends Me{constructor(e){super(e),this.input=void 0,this._state=new Jg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=We,this._syncedStop=We,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new tr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,it(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Me.getDefaults(),{mute:!1,onstop:We,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Kn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Te(Uo(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Eo(t,0)),i.duration=s?this.toSeconds(s):void 0);const a=this.context.transport.schedule(c=>{this._start(c,t,s)},r);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else LC(this.context),this._start(r,t,s);return this}stop(e){let t=Kn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ne(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Uo(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=We,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bh extends Wo{constructor(){const e=Ce(Bh.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,na(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ue({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Je(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Wo.getDefaults(),{url:new Je,loop:!1,loopEnd:0,loopStart:0,onload:We,onerror:We,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){Te(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Eo(t,this.loopStart):t=Eo(t,0);let a=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,u=this.toSeconds(this.loopStart),h=c-u;Mm(a,c)&&(a=(a-u)%h+u),us(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,hh(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,a)),Ne(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(i+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Bi(n,e){return Tt(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Zg(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class cy extends Wo{constructor(){const e=Ce(cy.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],na(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ue({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ue({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),it(this,["frequency","detune"])}static getDefaults(){return Object.assign(Wo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class St extends Vn{constructor(){const e=Ce(St.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Bt({context:this.context,units:"frequency",value:e.frequency}),it(this,"frequency"),this.detune=new Bt({context:this.context,units:"cents",value:e.detune}),it(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Vn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new cy({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return St._periodicWaveCache.find(t=>t.phase===this._phase&&Gz(t.partials,this._partials));{const e=St._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Ne(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(r,i);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),St._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),St._periodicWaveCache.length>100&&St._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ur(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,a)=>r[a]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),a=new Float32Array(r);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,r=c,this._partials.length===0)return[i,a]}else{const u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);u?(c=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),e=u[1],c=Math.max(c,2),r=c):this._partialCount=0,this._partials=[]}for(let u=1;u<r;++u){const h=2/(u*Math.PI);let f;switch(e){case"sine":f=u<=c?1:0,this._partials[u-1]=f;break;case"square":f=u&1?2*h:0,this._partials[u-1]=f;break;case"sawtooth":f=h*(u&1?1:-1),this._partials[u-1]=f;break;case"triangle":u&1?f=2*(h*h)*(u-1>>1&1?-1:1):f=0,this._partials[u-1]=f;break;case"custom":f=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}f!==0?(i[u]=-f*Math.sin(t*u),a[u]=f*Math.cos(t*u)):(i[u]=0,a[u]=0)}return[i,a]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let a=0;a<i;a++)r+=e[a]*Math.cos(a*s)+t[a]*Math.sin(a*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let a=0;a<i;a++)s=Math.max(this._inverseFFT(e,t,a/i*r),s);return $z(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}St._periodicWaveCache=[];class cj extends Go{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Kl({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ho extends Bt{constructor(){const e=Ce(Ho.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Jt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Bt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class zh extends Vn{constructor(){const e=Ce(zh.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new cj({context:this.context}),this._modulationNode=new Jt({context:this.context}),this._carrier=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new St({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ho({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),it(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(St.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class jh extends Vn{constructor(){const e=Ce(jh.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Jt({context:this.context,gain:0}),this._carrier=new St({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Bt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new St({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ho({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ho({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),it(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(St.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Zl extends Vn{constructor(){const e=Ce(Zl.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Jt({context:this.context,gain:0}),this._thresh=new Kl({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new Bt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),it(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Vn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Uh extends Vn{constructor(){const e=Ce(Uh.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Bt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Bt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,it(this,["frequency","detune"])}static getDefaults(){return Object.assign(St.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Ur(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new St({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):We});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Wh extends Vn{constructor(){const e=Ce(Wh.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ho({context:this.context,value:2}),this._pulse=new Zl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),it(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Vn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const g1={am:zh,fat:Uh,fm:jh,oscillator:St,pulse:Zl,pwm:Wh};class fh extends Vn{constructor(){const e=Ce(fh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Bt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Bt({context:this.context,units:"cents",value:e.detune}),it(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(St.getDefaults(),jh.getDefaults(),zh.getDefaults(),Uh.getDefaults(),Zl.getDefaults(),Wh.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=g1[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof g1[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&jr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&jr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&sr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Tt(this,arguments,void 0,function*(e=1024){return Bi(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function XC(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Ur(i,n,e),t.set(this,i)}})}}function lr(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Ur(this.toSeconds(i),n,e),t.set(this,i)}})}}class Ql extends Vn{constructor(){const e=Ce(Ql.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Je({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Vn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:We,onerror:We,playbackRate:1,reverse:!1})}load(e){return Tt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=We){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Eo(t,this._loopStart):t=Eo(t,0);const r=this.toSeconds(t),i=s;s=Eo(s,Math.max(this._buffer.duration-r,0));let a=this.toSeconds(s);a=a/this._playbackRate,e=this.toSeconds(e);const c=new Bh({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Kn(i)?c.start(e,r):c.start(e,r,a-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ur(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ur(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ms([lr(0)],Ql.prototype,"fadeIn",void 0);ms([lr(0)],Ql.prototype,"fadeOut",void 0);class Xr extends Me{constructor(){const e=Ce(Xr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Bt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Me.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(sr(e))return e;{let s;for(s in Fu)if(Fu[s][t]===e)return s;return e}}_setCurve(e,t,s){if(sr(s)&&Reflect.has(Fu,s)){const r=Fu[s];Pi(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(On(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const c=1/r;r=(1-a)/c}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let u=1;u<c.length;u++)if(c[u-1]<=a&&a<=c[u]){c=this._attackCurve.slice(u),c[0]=a;break}this._sig.setValueCurveAtTime(c,e,r,t)}if(i&&this.sustain<1){const c=t*this.sustain,u=e+r;this.log("decay",u),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,i+u):this._sig.exponentialApproachValueAtTime(c,u,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Te(On(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return ty(this,e,t,s),this}asArray(){return Tt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Zg(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),a=i*.1,c=i+a,u=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return u._sig.toDestination(),u.triggerAttackRelease(t*(r+a)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ms([lr(0)],Xr.prototype,"attack",void 0);ms([lr(0)],Xr.prototype,"decay",void 0);ms([XC(0,1)],Xr.prototype,"sustain",void 0);ms([lr(0)],Xr.prototype,"release",void 0);const Fu=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){t=e/127;const g=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=g/10+t*.83}r[127]=1;const a=[],c=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/127*c)/c;const u=[];for(e=0;e<128;e++)t=e/127,u[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/127;const g=Math.pow(t,3)*4+.2,y=Math.cos(g*Math.PI*2*t);h[e]=Math.abs(y*(1-t))}function f(g){const y=new Array(g.length);for(let x=0;x<g.length;x++)y[x]=1-g[x];return y}function p(g){return g.slice(0).reverse()}return{bounce:{In:f(h),Out:h},cosine:{In:s,Out:p(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:f(r)},sine:{In:u,Out:f(u)},step:{In:a,Out:f(a)}}})();class Gr extends Me{constructor(){const e=Ce(Gr.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new tr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,it(this,"volume")}static getDefaults(){return Object.assign(Me.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],a=this.context.transport.schedule(c=>{r[t]=c,s.apply(this,r)},i);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),a=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Oi extends Gr{constructor(){const e=Ce(Oi.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Gr.getDefaults(),{detune:0,onsilence:We,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof In?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}ms([lr(0)],Oi.prototype,"portamento",void 0);class uy extends Xr{constructor(){super(Ce(uy.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Jt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ms extends Oi{constructor(){const e=Ce(Ms.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new fh(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new uy(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),it(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Oi.getDefaults(),{envelope:Object.assign(Am(Xr.getDefaults(),Object.keys(Me.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Am(fh.getDefaults(),[...Object.keys(Vn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Jl extends Ms{constructor(){const e=Ce(Jl.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,it(this,["oscillator","envelope"])}static getDefaults(){return Ei(Oi.getDefaults(),Ms.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof In?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ms([XC(0)],Jl.prototype,"octaves",void 0);ms([lr(0)],Jl.prototype,"pitchDecay",void 0);const KC=new Set;function hy(n){KC.add(n)}function ZC(n,e){const t=`registerProcessor("${n}", ${e})`;KC.add(t)}const uj=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;hy(uj);const hj=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;hy(hj);const dj=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;hy(dj);const fj="feedback-comb-filter",pj=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ZC(fj,pj);class dy extends Gr{constructor(){const e=Ce(dy.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r),Te(!jr(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Gr.getDefaults(),{maxPolyphony:32,options:{},voice:Ms})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Te(e instanceof Oi,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Nh("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(r=>{const i=new dh(this.context,r).toMidi(),a=this._getNextAvailableVoice();a&&(a.triggerAttack(r,t,s),this._activeVoices.push({midi:i,voice:a,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(s=>{const r=new dh(this.context,s).toMidi(),i=this._activeVoices.find(({midi:a,released:c})=>a===r&&!c);i&&(i.voice.triggerRelease(t),i.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,r){Te(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,r):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,r)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s);if(this.triggerAttack(e,i,r),On(t)){Te(On(e),"If the duration is an array, the notes must also be an array"),e=e;for(let a=0;a<e.length;a++){const c=t[Math.min(a,t.length-1)],u=this.toSeconds(c);Te(u>0,"The duration must be greater than 0"),this.triggerRelease(e[a],i+u)}}else{const a=this.toSeconds(t);Te(a>0,"The duration must be greater than 0"),this.triggerRelease(e,i+a)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Am(e,["onsilence","context"]);return this.options=Ei(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Gh extends Gr{constructor(){const e=Ce(Gh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(Te(Ou(s)||jr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ou(s)){const i=new In(this.context,s).toMidi();t[i]=e.urls[s]}else jr(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new oy({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Gr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:We,onerror:We,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=qC(new In(this.context,r).toFrequency()),a=Math.round(i),c=i-a,u=this._findClosest(a),h=a-u,f=this._buffers.get(h),p=$C(u+c),g=new Bh({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:p}).connect(this.output);g.start(t,0,f.duration/p,s),On(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(g),g.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const y=this._activeSources.get(a),x=y.indexOf(g);x!==-1&&y.splice(x,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new In(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(a=>{a.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),On(t)?(Te(On(e),"notes must be an array when duration is array"),e.forEach((a,c)=>{const u=t[Math.min(c,t.length-1)];this.triggerRelease(a,i+this.toSeconds(u))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(Te(Ou(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ou(e)){const r=new In(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}ms([lr(0)],Gh.prototype,"attack",void 0);ms([lr(0)],Gh.prototype,"release",void 0);class fy extends Me{constructor(){const e=Ce(fy.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ue({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",it(this,"pan")}static getDefaults(){return Object.assign(Me.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const mj="bit-crusher",gj=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ZC(mj,gj);class bt extends Me{constructor(){const e=Ce(bt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Jt({context:this.context}),bt._allSolos.has(this.context)||bt._allSolos.set(this.context,new Set),bt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Me.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),bt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){bt._soloed.has(this.context)||bt._soloed.set(this.context,new Set),bt._soloed.get(this.context).add(this)}_removeSolo(){bt._soloed.has(this.context)&&bt._soloed.get(this.context).delete(this)}_isSoloed(){return bt._soloed.has(this.context)&&bt._soloed.get(this.context).has(this)}_noSolos(){return!bt._soloed.has(this.context)||bt._soloed.has(this.context)&&bt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),bt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}bt._allSolos=new Map;bt._soloed=new Map;class py extends Me{constructor(){const e=Ce(py.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new fy({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new tr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,it(this,["pan","volume"])}static getDefaults(){return Object.assign(Me.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Mo extends Me{constructor(){const e=Ce(Mo.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new bt({solo:e.solo,context:this.context}),this._panVol=this.output=new py({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),it(this,["pan","volume"])}static getDefaults(){return Object.assign(Me.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Mo.buses.has(e)||Mo.buses.set(e,new Jt({context:this.context})),Mo.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new Jt({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Mo.buses=new Map;class Hh extends Me{constructor(){const e=Ce(Hh.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Ue({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Ue({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Ue({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Ue({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Ue({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),it(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(Me.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class $h extends Me{constructor(){const e=Ce($h.getDefaults(),arguments,["threshold"]);super(e),this.name="Limiter",this._compressor=this.input=this.output=new Hh({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,it(this,"threshold")}static getDefaults(){return Object.assign(Me.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}function yj(){return Rn().now()}const _j=Rn().transport;function rn(){return Rn().transport}Rn().destination;Rn().destination;Rn().listener;const y1=Rn().draw,hs=Rn();class xj{constructor(e){Q(this,"player",null);Q(this,"toneBuffer",null);Q(this,"isDestroyed",!1);this.mixer=e}async load(e){if(this.toneBuffer=new Je(e),this.isDestroyed){this.toneBuffer.dispose();return}this.player=new Ql(this.toneBuffer),this.player.fadeIn=.05,this.player.fadeOut=.3,this.player.connect(this.mixer.musicOutput),this.player.sync().start(0)}async warmUp(){hs.state!=="running"&&await Nl()}async start(){hs.state!=="running"&&await Nl(),rn().start()}pause(){rn().pause()}resume(){rn().start()}stop(){if(rn().stop(),this.player)try{this.player.stop()}catch(e){console.warn("[AudioPlaybackService] Ignored error during player stop:",e)}}get currentTime(){return rn().seconds}get duration(){return this.toneBuffer?this.toneBuffer.duration:0}get isPlaying(){return rn().state==="started"}seek(e){rn().seconds=Math.max(0,Math.min(e,this.duration))}destroy(){this.isDestroyed=!0,this.stop(),this.player&&(this.player.dispose(),this.player=null),this.toneBuffer&&(this.toneBuffer.dispose(),this.toneBuffer=null)}}class vj{constructor(){Q(this,"musicBus");Q(this,"sfxBus");Q(this,"masterBus");Q(this,"masterLimiter");this.masterLimiter=new $h(-.5).toDestination(),this.masterBus=new tr(0).connect(this.masterLimiter),this.musicBus=new tr(-6).connect(this.masterBus),this.sfxBus=new tr(-8).connect(this.masterBus)}get musicOutput(){return this.musicBus}get sfxOutput(){return this.sfxBus}setMusicVolume(e){this.musicBus.volume.value=e}setSfxVolume(e){this.sfxBus.volume.value=e}setMasterVolume(e){this.masterBus.volume.value=e}destroy(){this.musicBus.dispose(),this.sfxBus.dispose(),this.masterBus.dispose(),this.masterLimiter.dispose()}}class wj{constructor(){Q(this,"events",[])}scheduleAll(e,t){this.clear(),e.forEach(s=>{const r=s.time-Ti;if(r<0){const i=Math.min(1,-r/Ti),a=rn().schedule(c=>{y1.schedule(()=>t(s,i),c)},0);this.events.push(a)}else{const i=rn().schedule(a=>{y1.schedule(()=>{t(s)},a)},r);this.events.push(i)}})}clear(){this.events.forEach(e=>rn().clear(e)),this.events=[]}}class bj{constructor(e){Q(this,"perfectSynth");Q(this,"greatSynth");Q(this,"goodSynth");Q(this,"missSynth");Q(this,"milestoneSynth");Q(this,"breakSynth");Q(this,"compressor");Q(this,"limiter");Q(this,"isInitialized",!1);Q(this,"lastPlayTime",0);this.mixer=e}getSafeTime(){const e=yj();return e<=this.lastPlayTime?this.lastPlayTime+=.001:this.lastPlayTime=e,this.lastPlayTime}async init(){if(!this.isInitialized){try{hs.state!=="running"&&await Nl()}catch(e){ph("audio.context.start.failed",{service:"HitSoundService"},e)}this.compressor=new Hh({threshold:-20,ratio:4,attack:.003,release:.1}),this.limiter=new $h(-1),this.compressor.connect(this.limiter),this.limiter.connect(this.mixer.sfxOutput),this.perfectSynth=new Ms({oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:0,release:.1}}).connect(this.compressor),this.greatSynth=new Ms({oscillator:{type:"square"},envelope:{attack:.01,decay:.05,sustain:0,release:.05}}).connect(this.compressor),this.goodSynth=new Ms({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.05,sustain:0,release:.05}}).connect(this.compressor),this.missSynth=new Jl({pitchDecay:.05,octaves:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:.2,sustain:0,release:.2}}).connect(this.compressor),this.milestoneSynth=new dy(Ms,{oscillator:{type:"sawtooth"},envelope:{attack:.05,decay:.2,sustain:.2,release:1}}).connect(this.compressor),this.breakSynth=new Ms({oscillator:{type:"pwm",modulationFrequency:.2},envelope:{attack:.05,decay:.3,sustain:0,release:.2}}).connect(this.compressor),this.isInitialized=!0}}playHit(e,t=0){if(!this.isInitialized)return;const s=this.getSafeTime(),r=Math.min(1.5,1+t*.002),i=1200*Math.log2(r);switch(e){case"perfect":this.perfectSynth.detune.setValueAtTime(i,s),this.perfectSynth.triggerAttackRelease("C6","16n",s);break;case"great":this.greatSynth.detune.setValueAtTime(i,s),this.greatSynth.triggerAttackRelease("G5","32n",s);break;case"good":this.goodSynth.detune.setValueAtTime(i,s),this.goodSynth.triggerAttackRelease("E5","32n",s,.5);break;case"miss":this.missSynth.triggerAttackRelease("C2","8n",s);break}}playMilestone(e){if(!this.isInitialized)return;const t=this.getSafeTime();e===10?(this.perfectSynth.triggerAttackRelease("C5","32n",t),this.perfectSynth.triggerAttackRelease("E5","32n",t+.1),this.perfectSynth.triggerAttackRelease("G5","16n",t+.2)):e===30?this.milestoneSynth.triggerAttackRelease(["C4","E4","G4","C5"],"8n",t):e===50?this.milestoneSynth.triggerAttackRelease(["C3","G3","C4","E4","G4"],"4n",t):e>=100&&e%50===0&&this.milestoneSynth.triggerAttackRelease(["C3","G3","C4","E4","G4","C5"],"2n",t)}playComboBreak(){if(!this.isInitialized)return;const e=this.getSafeTime();this.breakSynth.triggerAttackRelease("G2","8n",e),this.breakSynth.triggerAttackRelease("C2","4n",e+.15)}destroy(){this.isInitialized&&(this.perfectSynth.dispose(),this.greatSynth.dispose(),this.goodSynth.dispose(),this.missSynth.dispose(),this.milestoneSynth.dispose(),this.breakSynth.dispose(),this.compressor.dispose(),this.limiter.dispose(),this.isInitialized=!1)}}class Sj{getCurrentTime(){return rn().seconds}}class Tj{constructor(e){Q(this,"active",new Map);Q(this,"maxMissTime",_u.good/1e3);Q(this,"onMissCallback");this.onMissCallback=e}setOnMiss(e){this.onMissCallback=e}spawnNote(e,t){this.active.set(e.id,{...e,isHit:!1,isMissed:!1,spawnTime:e.time-Ti,initialProgress:t})}update(e){let t=0;for(const[s,r]of this.active.entries())if(r.isHeld){if(r.holdStartTime===void 0)continue;const i=r.time+(r.duration||0);if(e>=i)r.isHit=!0,this.active.delete(s);else{const a=Math.floor((e-r.holdStartTime)/.1),c=a-(r.lastTickIndex||0);c>0&&(t+=c,r.lastTickIndex=a)}}else!r.isHit&&!r.isMissed&&e>r.time+this.maxMissTime&&(r.isMissed=!0,this.onMissCallback&&this.onMissCallback(r.id,r.lane),this.active.delete(s));return{holdTicks:t}}judgeHit(e,t){let s=null,r=1/0;for(const a of this.active.values())if(!a.isHit&&!a.isMissed&&a.lane===e){const c=t-a.time;Math.abs(c)<Math.abs(r)&&(r=c,s=a)}if(!s)return null;const i=Math.abs(r)*1e3;if(i<=_u.good){let a="miss";return i<=_u.perfect?a="perfect":i<=_u.great?a="great":a="good",s.type==="hold"?(s.isHeld=!0,s.holdStartTime=t,s.lastTickIndex=0):(s.isHit=!0,this.active.delete(s.id)),{noteId:s.id,judgment:a,delta:r*1e3,comboAtHit:0}}return null}judgeRelease(e,t){for(const[s,r]of this.active.entries())if(r.lane===e&&r.isHeld)return r.time+(r.duration||0)-t>.2?(r.isMissed=!0,this.active.delete(s),"miss"):(r.isHit=!0,this.active.delete(s),"complete");return null}getNearestNoteDelta(e,t){let s=1/0;for(const r of this.active.values())if(!r.isHit&&!r.isMissed&&r.lane===e){const i=t-r.time;Math.abs(i)<Math.abs(s)&&(s=i)}return s===1/0?null:s*1e3}getActiveNotes(){return Array.from(this.active.values())}reset(){this.active.clear()}}function Cj(){const n=Se(h=>h.phase),e=Se(h=>h.musicVolume),t=Se(h=>h.sfxVolume),s=Se(h=>h.masterVolume),r=J.useRef(null),i=J.useRef(null),a=J.useRef(!1),[c,u]=J.useState(null);return J.useEffect(()=>{let h=!0;const f=Se.getState().song,p=Se.getState().beatMap;if(!r.current&&!a.current&&(f!=null&&f.audioBuffer)&&p){a.current=!0,Re("game.useengine.init.started",{songId:f.id});const g=new vj;i.current=g,g.setMusicVolume(Se.getState().musicVolume),g.setSfxVolume(Se.getState().sfxVolume),g.setMasterVolume(Se.getState().masterVolume);const y=new xj(g),x={get song(){return Se.getState().song},setCurrentTime:v=>Se.getState().setCurrentTime(v),setPhase:v=>Se.getState().setPhase(v),updateScoreAndCombo:(v,S,T)=>Se.getState().updateScoreAndCombo(v,S,T),addHitResult:v=>Se.getState().addHitResult(v),setFinalScore:v=>Se.getState().setFinalScore(v)};(async()=>{try{if(await y.load(f.audioBuffer),Se.getState().clearAudioBuffer(),Se.getState().phase==="countdown"&&await y.warmUp(),!h){y.destroy();return}const v=new bj(g);await v.init();const S=new kV(p,y,x,new wj,v,new Sj,new Tj);r.current=S,S.events.on("hit",T=>{Re("game.input.hit",{judgment:T.judgment,lane:T.lane,combo:T.combo})}),S.events.on("miss",T=>{Re("game.input.miss",{lane:T.lane})}),S.events.on("combo-break",T=>{ph("game.combo.break",{previousCombo:T.previousCombo})}),u(S),Re("game.useengine.init.success",{})}catch(v){Xn("game.engine.init.failed",{},v),y.destroy(),h&&Se.getState().setPhase("idle")}})()}return()=>{Re("game.useengine.unmounted",{hadEngine:!!r.current}),h=!1,r.current&&(r.current.destroy(),r.current=null,u(null)),i.current&&(i.current.destroy(),i.current=null),a.current=!1}},[]),J.useEffect(()=>{n==="playing"&&c&&!c.isRunning&&c.start().catch(h=>{h.message!=="disposed"&&Xn("game.engine.start.failed",{},h)})},[n,c]),J.useEffect(()=>{i.current&&(i.current.setMusicVolume(e),i.current.setSfxVolume(t),i.current.setMasterVolume(s))},[e,t,s]),c}class kj extends Ht{constructor(t,s,r=Si){super();Q(this,"laneWidth");Q(this,"renderHeight");Q(this,"laneCount");Q(this,"laneGlows",[]);Q(this,"laneTensions",[]);Q(this,"keyLabels",[]);Q(this,"dividerContainer",new Ht);Q(this,"scrollOffset",0);this.laneCount=r,this.laneWidth=t/r,this.renderHeight=s,this.buildLanes(t)}buildLanes(t){const s=new Mt;s.rect(0,0,t,this.renderHeight),s.fill({color:657946,alpha:.8}),this.addChild(s),this.addChild(this.dividerContainer);const r=new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:10,fill:6710886});for(let i=0;i<this.laneCount;i++){const a=i*this.laneWidth;if(i>0){const x=new Mt;for(let w=-80;w<this.renderHeight+80;w+=40)x.rect(a-1,w,2,20);x.fill({color:16777215,alpha:.15}),this.dividerContainer.addChild(x)}const c=new Mt;c.rect(a+2,0,this.laneWidth-4,this.renderHeight),c.fill({color:qn[i%qn.length],alpha:1}),c.alpha=0,this.addChild(c),this.laneTensions.push(c);const u=new Mt,h=new ln(0,0,0,this.renderHeight),f=qn[i%qn.length]>>16&255,p=qn[i%qn.length]>>8&255,g=qn[i%qn.length]&255;h.addColorStop(0,"rgba(255, 255, 255, 0)"),h.addColorStop(.5,`rgba(${f}, ${p}, ${g}, 0.2)`),h.addColorStop(1,`rgba(${f}, ${p}, ${g}, 1)`),u.rect(a+2,0,this.laneWidth-4,this.renderHeight),u.fill(h),u.alpha=0,this.addChild(u),this.laneGlows.push(u);const y=new Fr({text:ON[i].toUpperCase(),style:r});y.anchor.set(.5),y.x=a+this.laneWidth/2,y.y=this.renderHeight*.85+20,this.addChild(y),this.keyLabels.push(y)}}update(t){this.scrollOffset+=8*t,this.scrollOffset%=40,this.dividerContainer.y=this.scrollOffset;for(let s=0;s<this.laneGlows.length;s++){const r=this.laneGlows[s];r.alpha>0&&(r.alpha=Math.max(0,r.alpha-.08*t),r.alpha===0&&(this.keyLabels[s].style.fill=6710886));const i=this.laneTensions[s];i.alpha>0&&(i.alpha=Math.max(0,i.alpha-.05*t))}}flashLane(t){this.laneGlows[t]&&(this.laneGlows[t].alpha=.8,this.keyLabels[t].style.fill=16777215)}setLaneTension(t,s){this.laneTensions[t]&&(this.laneTensions[t].alpha=Math.min(.4,s*.4))}getLaneX(t){return t*this.laneWidth+this.laneWidth/2}getLaneWidth(){return this.laneWidth}}class _1 extends Ht{constructor(){super();Q(this,"body");Q(this,"glow");Q(this,"trail");Q(this,"isSpawned",!1);Q(this,"lifeTime",0);this.trail=new Mt,this.addChild(this.trail),this.glow=new Mt,this.addChild(this.glow),this.body=new Mt,this.addChild(this.body)}setup(t){this.glow.clear(),this.glow.circle(0,0,25),this.glow.fill({color:t,alpha:.3}),this.glow.circle(0,0,16),this.glow.fill({color:t,alpha:.6}),this.body.clear();const s=new ln(0,-10,0,10);s.addColorStop(0,16777215),s.addColorStop(.3,t),s.addColorStop(1,1118498),this.body.roundRect(-24,-10,48,20,10),this.body.fill(s),this.body.stroke({color:16777215,width:2,alpha:.8}),this.isSpawned=!0,this.lifeTime=0,this.scale.set(0)}updateTrail(t,s,r=!1){this.trail.clear(),!(s<=0)&&(r?(this.trail.moveTo(-15,0),this.trail.lineTo(15,0),this.trail.lineTo(15,-s),this.trail.lineTo(-15,-s),this.trail.fill({color:t,alpha:.6}),this.trail.rect(-20,-s-5,40,10),this.trail.fill({color:16777215,alpha:.8})):(this.trail.moveTo(-10,0),this.trail.lineTo(10,0),this.trail.lineTo(2,-s),this.trail.lineTo(-2,-s),this.trail.fill({color:t,alpha:.3})))}}class Aj extends Ht{constructor(t,s,r){super();Q(this,"pool",[]);Q(this,"activeSprites",new Map);Q(this,"laneXPositions");Q(this,"hitZoneY");Q(this,"spawnY");this.laneXPositions=t,this.hitZoneY=s,this.spawnY=r}init(){for(let t=0;t<50;t++)this.pool.push(new _1)}update(t,s){const r=new Set,i=1/60;for(const a of s){r.add(a.id);let c=this.activeSprites.get(a.id);const u=this.getLaneColor(a.lane);c||(this.pool.length>0?c=this.pool.pop():c=new _1,c.setup(u),c.x=this.laneXPositions[a.lane],a.initialProgress&&(c.lifeTime=a.initialProgress*Ti,c.scale.set(1)),this.addChild(c),this.activeSprites.set(a.id,c)),c.lifeTime+=i;const h=a.time-t,f=1-h/Ti;let p=this.spawnY+(this.hitZoneY-this.spawnY)*Math.max(0,Math.min(1,f));if(a.type==="hold"&&a.isHeld&&(p=this.hitZoneY),c.y=p,c.alpha=Math.min(1,.3+f*1.4),c.lifeTime<.04){const y=c.lifeTime/.04;c.scale.set(y*1.2)}else if(c.lifeTime<.08){const y=1.2-(c.lifeTime-.04)/.04*.2;c.scale.set(y)}else c.scale.set(1);if(c.glow.alpha=.4,h<.1&&h>-.15)Math.floor(t*20)%2===0?(c.glow.clear(),c.glow.circle(0,0,25),c.glow.fill({color:16711680,alpha:.8})):c.setup(u);else if(f>.8&&f<1){const y=1+Math.sin(f*Math.PI*10)*.1;c.scale.set(y)}let g=0;if(a.type==="hold"&&a.duration){const y=a.duration/Ti*(this.hitZoneY-this.spawnY);if(a.isHeld){const x=t-a.time;g=Math.max(0,a.duration-x)/Ti*(this.hitZoneY-this.spawnY)}else g=y}else g=60*f;c.updateTrail(u,g,a.type==="hold")}for(const[a,c]of Array.from(this.activeSprites.entries()))r.has(a)||(this.removeChild(c),this.pool.push(c),this.activeSprites.delete(a))}getLaneColor(t){return qn[t%qn.length]??16777215}}class Mj extends Ht{constructor(t,s,r=Si,i=120){super();Q(this,"bar");Q(this,"laneWidth");Q(this,"pads",[]);Q(this,"rings",[]);Q(this,"bpm");this.y=s,this.laneWidth=t/r,this.bpm=i,this.bar=new Mt,this.bar.rect(0,-5,t,10),this.bar.fill({color:16777215,alpha:.2}),this.bar.moveTo(0,-5),this.bar.lineTo(t,-5),this.bar.stroke({width:2,color:16777215,alpha:.8}),this.addChild(this.bar);const a=this.laneWidth*.8,c=12;for(let u=0;u<r;u++){const h=new Mt,f=u*this.laneWidth+(this.laneWidth-a)/2;h.roundRect(f,-c/2,a,c,4),h.fill({color:qn[u%qn.length],alpha:.4}),this.addChild(h),this.pads.push(h)}}update(t,s){const r=t*(this.bpm/60),i=Math.max(0,1-r%1*3);this.bar.alpha=.5+i*.5;for(let a=this.rings.length-1;a>=0;a--){const c=this.rings[a];c.scale+=.05*s,c.alpha-=.05*s,c.sprite.scale.set(c.scale),c.sprite.alpha=c.alpha,c.alpha<=0&&(this.removeChild(c.sprite),c.sprite.destroy(),this.rings.splice(a,1))}}flashPad(t,s){const r=this.pads[t];if(!r)return;r.alpha=1,r.scale.set(1.1);const i=new Mt;i.circle(0,0,this.laneWidth*.4),i.stroke({width:4,color:Dr[s]||16777215}),i.x=t*this.laneWidth+this.laneWidth/2,i.y=0,this.addChild(i),this.rings.push({sprite:i,scale:1,alpha:1,color:Dr[s]||16777215})}decayPads(t){for(let s=0;s<this.pads.length;s++){const r=this.pads[s];if(r.alpha>.4&&(r.alpha-=.05*t),r.scale.x>1){const i=r.scale.x-.02*t;r.scale.set(Math.max(1,i))}}}}class Pj extends Ht{constructor(t,s){super();Q(this,"grid");Q(this,"stars");Q(this,"vignette");Q(this,"bgWidth");Q(this,"bgHeight");Q(this,"offsetY",0);Q(this,"speed",100);Q(this,"isFever",!1);Q(this,"feverHue",0);this.bgWidth=t,this.bgHeight=s,this.stars=new Mt,this.addChild(this.stars),this.grid=new Mt,this.addChild(this.grid),this.vignette=new Mt,this.addChild(this.vignette),this.buildStars(),this.buildVignette()}buildStars(){this.stars.fill({color:16777215,alpha:.5});for(let t=0;t<150;t++){const s=Math.random()*this.bgWidth,r=Math.random()*this.bgHeight,i=Math.random()*2+1;this.stars.circle(s,r,i),this.stars.circle(s,r-this.bgHeight,i)}this.stars.fill()}buildVignette(){const t=this.bgWidth,s=this.bgHeight,r=new ln(0,0,t*.25,0);r.addColorStop(0,"rgba(0,0,0,0.85)"),r.addColorStop(1,"rgba(0,0,0,0)"),this.vignette.rect(0,0,t*.25,s).fill(r);const i=new ln(t,0,t*.75,0);i.addColorStop(0,"rgba(0,0,0,0.85)"),i.addColorStop(1,"rgba(0,0,0,0)"),this.vignette.rect(t*.75,0,t*.25,s).fill(i);const a=new ln(0,0,0,s*.2);a.addColorStop(0,"rgba(0,0,0,0.8)"),a.addColorStop(1,"rgba(0,0,0,0)"),this.vignette.rect(0,0,t,s*.2).fill(a);const c=new ln(0,s,0,s*.8);c.addColorStop(0,"rgba(0,0,0,0.9)"),c.addColorStop(1,"rgba(0,0,0,0)"),this.vignette.rect(0,s*.8,t,s*.2).fill(c)}setFever(t){!this.isFever&&t?(this.feverHue=0,this.speed=200):this.isFever&&!t&&(this.speed=100),this.isFever=t}update(t){this.offsetY=(this.offsetY+this.speed*t)%40,this.stars.y+=this.speed*.15*t,this.stars.y>=this.bgHeight&&(this.stars.y-=this.bgHeight),this.isFever&&(this.feverHue=(this.feverHue+t*180)%360),this.drawGrid()}hslToHex(t,s,r){r/=100;const i=s*Math.min(r,1-r)/100,a=c=>{const u=(c+t/30)%12,h=r-i*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*h).toString(16).padStart(2,"0")};return parseInt(`0x${a(0)}${a(8)}${a(4)}`)}drawGrid(){this.grid.clear();const t=this.isFever?this.hslToHex(this.feverHue,100,50):8913151,s=this.isFever?.6:.3;this.grid.stroke({width:this.isFever?2:1,color:t,alpha:s});for(let r=0;r<=this.bgWidth;r+=40)this.grid.moveTo(r,0),this.grid.lineTo(r,this.bgHeight);for(let r=this.offsetY;r<=this.bgHeight;r+=40)this.grid.moveTo(0,r),this.grid.lineTo(this.bgWidth,r)}}class Ej extends Ht{constructor(t,s,r){super();Q(this,"scoreText");Q(this,"comboText");Q(this,"multiplierBanner");Q(this,"multiplierText");Q(this,"fcBadge");Q(this,"bpmText");Q(this,"targetScore",0);Q(this,"displayedScore",0);Q(this,"currentCombo",0);Q(this,"comboPulse",0);Q(this,"hasMissed",!1);Q(this,"scoreBounce",0);const i={fontFamily:'"Press Start 2P", monospace',fill:16777215},a={alpha:1,angle:Math.PI/6,distance:0};this.scoreText=new Fr({text:"SCORE: 000000",style:new Ot({...i,fontSize:24,dropShadow:{color:16711935,blur:5,...a}})}),this.scoreText.anchor.set(1,0),this.scoreText.x=s-20,this.scoreText.y=20,this.addChild(this.scoreText),this.comboText=new Fr({text:"",style:new Ot({...i,fontSize:36,dropShadow:{color:65535,blur:10,...a}})}),this.comboText.anchor.set(.5),this.comboText.x=s/2,this.comboText.y=100,this.addChild(this.comboText),this.fcBadge=new Fr({text:"FC",style:new Ot({...i,fontSize:16,fill:16766720,dropShadow:{color:16766720,blur:8,...a}})}),this.fcBadge.x=20,this.fcBadge.y=20,this.addChild(this.fcBadge),this.bpmText=new Fr({text:"BPM",style:new Ot({...i,fontSize:14,fill:16777215,dropShadow:{color:65535,blur:4,...a}})}),this.bpmText.x=20,this.bpmText.y=r-40,this.addChild(this.bpmText),this.multiplierBanner=new Mt,this.addChild(this.multiplierBanner),this.multiplierText=new Fr({text:"1X",style:new Ot({...i,fontSize:20,fill:657946})}),this.multiplierText.anchor.set(.5),this.addChild(this.multiplierText),t.on("miss",()=>{this.hasMissed||(this.hasMissed=!0,this.fcBadge.alpha=0)})}update(t,s,r,i,a,c,u){const h=c/60,f=u*h%1,p=Math.max(0,1-f*4)*.2;if(this.bpmText.text=`BPM: ${Math.round(c)}`,this.bpmText.scale.set(1+p),s>this.targetScore&&(this.targetScore=s,this.scoreBounce=.15),this.displayedScore<this.targetScore&&(this.displayedScore+=Math.max(1,(this.targetScore-this.displayedScore)*.2),this.targetScore-this.displayedScore<1&&(this.displayedScore=this.targetScore)),this.scoreText.text=`SCORE: ${Math.floor(this.displayedScore).toString().padStart(6,"0")}`,this.scoreBounce>0&&(this.scoreText.scale.set(1+this.scoreBounce),this.scoreBounce=Math.max(0,this.scoreBounce-.02*t)),r>=10){this.comboText.text=`${r} COMBO`,r!==this.currentCombo&&(this.comboPulse=.2);const g=r>=50?1.5:r>=30?1.2:1;this.comboText.scale.set(g+this.comboPulse),this.comboPulse=Math.max(0,this.comboPulse-.05*t),r>=100?this.comboText.style.fill=16777215:r>=50?this.comboText.style.fill=16766720:r>=30?this.comboText.style.fill=16711935:this.comboText.style.fill=65535,this.comboText.style.dropShadow={color:this.comboText.style.fill,blur:r>=50?20:10,distance:0,alpha:1,angle:Math.PI/6}}else this.comboText.text="";if(this.currentCombo=r,r>=10){this.multiplierText.alpha=1,this.multiplierBanner.alpha=1;const g=performance.now()/1e3,y=120+(r>=50?40:0),x=40+(r>=50?20:0),w=a/2+Math.cos(g*3)*y,v=100+Math.sin(g*3)*x;this.multiplierText.x=w,this.multiplierText.y=v;let S=16777215,T=60,C=`${i}X`;i===2&&(S=65280),i===4&&(S=65535),i===8&&(S=16711935),i>=16&&(S=16766720,T=100,C="FEVER!"),this.multiplierText.text=C,this.multiplierBanner.clear(),this.multiplierBanner.rect(w-T/2,v-15,T,30),this.multiplierBanner.fill({color:S})}else this.multiplierText.alpha=0,this.multiplierBanner.alpha=0}}class Rj extends Ht{constructor(t,s,r){super();Q(this,"events");Q(this,"laneXPositions");Q(this,"hitZoneY");Q(this,"particles",[]);Q(this,"texts",[]);Q(this,"particlePool",[]);Q(this,"textPool",[]);Q(this,"isMobile");Q(this,"styles",{perfect:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:24,fill:16766720,stroke:{color:16777215,width:2},dropShadow:{color:16766720,blur:5,distance:0}}),great:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:20,fill:65535,dropShadow:{color:65535,blur:4,distance:0}}),good:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:16,fill:65280}),miss:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:20,fill:16724787,dropShadow:{color:16711680,blur:8,distance:0}}),close:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:14,fill:16750848}),milestone:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:32,fill:16777215,letterSpacing:5,dropShadow:{color:16711935,blur:10,distance:0}}),scorePopup:new Ot({fontFamily:'"Press Start 2P", monospace',fontSize:14,fill:16777215})});Q(this,"onHit",t=>{const s=this.laneXPositions[t.lane],r=this.hitZoneY;let i="",a=this.styles[t.judgment],c=0;t.judgment==="perfect"?(i="PERFECT!",c=300,this.spawnParticles(s,r,40,Dr.perfect,18,"starburst"),t.combo>50&&this.spawnParticles(s,r,20,16777215,25,"upward_spark")):t.judgment==="great"?(i="GREAT",c=200,this.spawnParticles(s,r,25,Dr.great,14,"fountain")):t.judgment==="good"&&(i="GOOD",c=100,this.spawnParticles(s,r,15,Dr.good,10,"arc")),this.spawnText(s,r-20,i,a,-1,1.5,.8,.1);let u=`+${c}`;t.multiplier>1&&(u+=` x${t.multiplier}`);let h=new Ot({...this.styles.scorePopup,fill:Dr[t.judgment]});this.spawnText(s,r-50,u,h,-2,1,1.2,.1)});Q(this,"onMiss",t=>{const s=this.laneXPositions[t.lane],r=this.hitZoneY;this.spawnText(s,r,"MISS",this.styles.miss,0,.5,1,0),this.spawnParticles(s,r,6,Dr.miss,6,"down")});Q(this,"onNearMiss",t=>{const s=this.laneXPositions[t.lane],r=this.hitZoneY;this.spawnText(s,r-20,"CLOSE...",this.styles.close,-.5,1,1,0)});Q(this,"onMilestone",t=>{const s=this.parent?this.parent.width/2:400;this.spawnText(s,this.hitZoneY-150,`COMBO x${t.combo}!`,this.styles.milestone,-.2,2,1.5,.05)});Q(this,"onBreak",t=>{const s=this.parent?this.parent.width/2:400,r=t.previousCombo>20?2.5:1.5;this.spawnText(s,this.hitZoneY-100,"COMBO BROKEN",this.styles.miss,.5,1,r,-.1),t.previousCombo>20&&this.spawnParticles(s,this.hitZoneY-100,30,Dr.miss,15,"starburst")});this.events=t,this.laneXPositions=s,this.hitZoneY=r,this.isMobile=typeof navigator<"u"&&navigator.maxTouchPoints>0;for(let i=0;i<200;i++){const a=new Mt;a.rect(-6,-2,12,4),a.fill({color:16777215}),this.particlePool.push(a)}for(let i=0;i<30;i++){const a=new Fr({text:"",style:this.styles.good});a.anchor.set(.5),this.textPool.push(a)}this.events.on("hit",this.onHit),this.events.on("miss",this.onMiss),this.events.on("near-miss",this.onNearMiss),this.events.on("combo-milestone",this.onMilestone),this.events.on("combo-break",this.onBreak)}destroy(t){this.events.off("hit",this.onHit),this.events.off("miss",this.onMiss),this.events.off("near-miss",this.onNearMiss),this.events.off("combo-milestone",this.onMilestone),this.events.off("combo-break",this.onBreak),this.particlePool.forEach(s=>s.destroy()),this.particlePool=[],this.textPool.forEach(s=>s.destroy()),this.textPool=[],super.destroy(t)}spawnParticles(t,s,r,i,a,c){this.isMobile&&(r=Math.ceil(r/2));for(let u=0;u<r;u++){let h=this.particlePool.pop();h||(h=new Mt,h.rect(-6,-2,12,4),h.fill({color:16777215})),h.tint=i,h.x=t,h.y=s,h.alpha=1,this.addChild(h);let f=0,p=0,g=.2;const y=Math.random()*Math.PI*2,x=Math.random()*a+a*.5;if(c==="starburst")f=Math.cos(y)*x,p=Math.sin(y)*x;else if(c==="fountain"){const w=-Math.PI/2+(Math.random()-.5)*1.5;f=Math.cos(w)*x,p=Math.sin(w)*x,g=.4}else if(c==="arc"){const w=-Math.PI/2+(Math.random()-.5);f=Math.cos(w)*x,p=Math.sin(w)*x}else if(c==="down"){const w=Math.PI/2+(Math.random()-.5);f=Math.cos(w)*x,p=Math.sin(w)*x,g=.5}else if(c==="upward_spark"){const w=-Math.PI/2+(Math.random()-.3)*.5;f=Math.cos(w)*x,p=Math.sin(w)*x*1.5,g=.6}this.particles.push({sprite:h,vx:f,vy:p,life:1,maxLife:1,gravity:g})}}spawnText(t,s,r,i,a,c,u,h){let f=this.textPool.pop();f||(f=new Fr({text:"",style:i}),f.anchor.set(.5)),f.text=r,f.style=i,f.x=t,f.y=s,f.scale.set(u),f.rotation=(Math.random()-.5)*.1,f.alpha=1,this.addChild(f),this.texts.push({sprite:f,vy:a,life:c,maxLife:c,scaleTarget:1,scaleSpeed:h})}update(t){const s=t;for(let r=this.particles.length-1;r>=0;r--){const i=this.particles[r];i.vx*=.92,i.vy+=i.gravity,i.sprite.x+=i.vx*s,i.sprite.y+=i.vy*s,i.sprite.rotation=Math.atan2(i.vy,i.vx);const a=Math.sqrt(i.vx*i.vx+i.vy*i.vy);i.sprite.scale.x=Math.max(.5,a/5),i.sprite.scale.y=Math.min(1,5/Math.max(1,a)),i.life-=.02*s,i.sprite.alpha=Math.max(0,i.life/i.maxLife),i.life<=0&&(this.removeChild(i.sprite),this.particlePool.push(i.sprite),this.particles.splice(r,1))}for(let r=this.texts.length-1;r>=0;r--){const i=this.texts[r];if(i.sprite.y+=i.vy*s,i.scaleSpeed!==0){const a=i.scaleTarget-i.sprite.scale.x;i.sprite.scale.set(i.sprite.scale.x+a*i.scaleSpeed*s)}i.life-=.02*s,i.life<i.maxLife*.5&&(i.sprite.alpha=Math.max(0,i.life/(i.maxLife*.5))),i.life<=0&&(this.removeChild(i.sprite),this.textPool.push(i.sprite),this.texts.splice(r,1))}}}var sa=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ra=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,Ij=`
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    finalColor = color;
}`,Nj=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4<f32>(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y));
  // Average
  color *= 0.25;

  return color;
}`,Dj=`
precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

uniform vec4 uInputClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample top right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Average
    color *= 0.25;

    finalColor = color;
}
`,Oj=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Average
  color *= 0.25;
    
  return color;
}`,Fj=Object.defineProperty,Vj=(n,e,t)=>e in n?Fj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wi=(n,e,t)=>(Vj(n,typeof e!="symbol"?e+"":e,t),t);const QC=class JC extends Ko{constructor(...e){let t=e[0]??{};(typeof t=="number"||Array.isArray(t))&&(Oe("6.0.0","KawaseBlurFilter constructor params are now options object. See params: { strength, quality, clamp, pixelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.clamp=e[2])),t={...JC.DEFAULT_OPTIONS,...t};const s=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:t!=null&&t.clamp?Oj:Nj,entryPoint:"mainFragment"}}),r=rr.from({vertex:sa,fragment:t!=null&&t.clamp?Dj:Ij,name:"kawase-blur-filter"});super({gpuProgram:s,glProgram:r,resources:{kawaseBlurUniforms:{uOffset:{value:new Float32Array(2),type:"vec2<f32>"}}}}),wi(this,"uniforms"),wi(this,"_pixelSize",{x:0,y:0}),wi(this,"_clamp"),wi(this,"_kernels",[]),wi(this,"_blur"),wi(this,"_quality"),this.uniforms=this.resources.kawaseBlurUniforms.uniforms,this.pixelSize=t.pixelSize??{x:1,y:1},Array.isArray(t.strength)?this.kernels=t.strength:typeof t.strength=="number"&&(this._blur=t.strength,this.quality=t.quality??3),this._clamp=!!t.clamp}apply(e,t,s,r){const i=this.pixelSizeX/t.source.width,a=this.pixelSizeY/t.source.height;let c;if(this._quality===1||this._blur===0)c=this._kernels[0]+.5,this.uniforms.uOffset[0]=c*i,this.uniforms.uOffset[1]=c*a,e.applyFilter(this,t,s,r);else{const u=Ps.getSameSizeTexture(t);let h=t,f=u,p;const g=this._quality-1;for(let y=0;y<g;y++)c=this._kernels[y]+.5,this.uniforms.uOffset[0]=c*i,this.uniforms.uOffset[1]=c*a,e.applyFilter(this,h,f,!0),p=h,h=f,f=p;c=this._kernels[g]+.5,this.uniforms.uOffset[0]=c*i,this.uniforms.uOffset[1]=c*a,e.applyFilter(this,h,s,r),Ps.returnTexture(u)}}get strength(){return this._blur}set strength(e){this._blur=e,this._generateKernels()}get quality(){return this._quality}set quality(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()}get kernels(){return this._kernels}set kernels(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max(...e)):(this._kernels=[0],this._quality=1)}get pixelSize(){return this._pixelSize}set pixelSize(e){if(typeof e=="number"){this.pixelSizeX=this.pixelSizeY=e;return}if(Array.isArray(e)){this.pixelSizeX=e[0],this.pixelSizeY=e[1];return}this._pixelSize=e}get pixelSizeX(){return this.pixelSize.x}set pixelSizeX(e){this.pixelSize.x=e}get pixelSizeY(){return this.pixelSize.y}set pixelSizeY(e){this.pixelSize.y=e}get clamp(){return this._clamp}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((e,t)=>e+t+.5,0))}_generateKernels(){const e=this._blur,t=this._quality,s=[e];if(e>0){let r=e;const i=e/t;for(let a=1;a<t;a++)r-=i,s.push(r)}this._kernels=s,this._updatePadding()}};wi(QC,"DEFAULT_OPTIONS",{strength:4,quality:3,clamp:!1,pixelSize:{x:1,y:1}});let Lj=QC;var Bj=`in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;
uniform float uBloomScale;
uniform float uBrightness;

void main() {
    vec4 color = texture(uTexture, vTextureCoord);
    color.rgb *= uBrightness;
    vec4 bloomColor = vec4(texture(uMapTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= uBloomScale;
    finalColor = color + bloomColor;
}
`,zj=`struct AdvancedBloomUniforms {
  uBloomScale: f32,
  uBrightness: f32,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> advancedBloomUniforms : AdvancedBloomUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  var color = textureSample(uTexture, uSampler, uv);
  color = vec4<f32>(color.rgb * advancedBloomUniforms.uBrightness, color.a);

  var bloomColor = vec4<f32>(textureSample(uMapTexture, uSampler, uv).rgb, 0.0);
  bloomColor = vec4<f32>(bloomColor.rgb * advancedBloomUniforms.uBloomScale, bloomColor.a);
  
  return color + bloomColor;
}
`,jj=`
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uThreshold;

void main() {
    vec4 color = texture(uTexture, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > uThreshold) {
        finalColor = color;
    } else {
        finalColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,Uj=`struct ExtractBrightnessUniforms {
  uThreshold: f32,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> extractBrightnessUniforms : ExtractBrightnessUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let color: vec4<f32> = textureSample(uTexture, uSampler, uv);

  // A simple & fast algorithm for getting brightness.
  // It's inaccurate, but good enough for this feature.
  let max: f32 = max(max(color.r, color.g), color.b);
  let min: f32 = min(min(color.r, color.g), color.b);
  let brightness: f32 = (max + min) * 0.5;

  return select(vec4<f32>(0.), color, brightness > extractBrightnessUniforms.uThreshold);
}
`,Wj=Object.defineProperty,Gj=(n,e,t)=>e in n?Wj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ek=(n,e,t)=>(Gj(n,typeof e!="symbol"?e+"":e,t),t);const tk=class nk extends Ko{constructor(e){e={...nk.DEFAULT_OPTIONS,...e};const t=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:Uj,entryPoint:"mainFragment"}}),s=rr.from({vertex:sa,fragment:jj,name:"extract-brightness-filter"});super({gpuProgram:t,glProgram:s,resources:{extractBrightnessUniforms:{uThreshold:{value:e.threshold,type:"f32"}}}}),ek(this,"uniforms"),this.uniforms=this.resources.extractBrightnessUniforms.uniforms}get threshold(){return this.uniforms.uThreshold}set threshold(e){this.uniforms.uThreshold=e}};ek(tk,"DEFAULT_OPTIONS",{threshold:.5});let Hj=tk;var $j=Object.defineProperty,qj=(n,e,t)=>e in n?$j(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yo=(n,e,t)=>(qj(n,typeof e!="symbol"?e+"":e,t),t);const sk=class rk extends Ko{constructor(e){e={...rk.DEFAULT_OPTIONS,...e};const t=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:zj,entryPoint:"mainFragment"}}),s=rr.from({vertex:sa,fragment:Bj,name:"advanced-bloom-filter"});super({gpuProgram:t,glProgram:s,resources:{advancedBloomUniforms:{uBloomScale:{value:e.bloomScale,type:"f32"},uBrightness:{value:e.brightness,type:"f32"}},uMapTexture:Le.WHITE}}),yo(this,"uniforms"),yo(this,"bloomScale",1),yo(this,"brightness",1),yo(this,"_extractFilter"),yo(this,"_blurFilter"),this.uniforms=this.resources.advancedBloomUniforms.uniforms,this._extractFilter=new Hj({threshold:e.threshold}),this._blurFilter=new Lj({strength:e.kernels??e.blur,quality:e.kernels?void 0:e.quality}),Object.assign(this,e)}apply(e,t,s,r){const i=Ps.getSameSizeTexture(t);this._extractFilter.apply(e,t,i,!0);const a=Ps.getSameSizeTexture(t);this._blurFilter.apply(e,i,a,!0),this.uniforms.uBloomScale=this.bloomScale,this.uniforms.uBrightness=this.brightness,this.resources.uMapTexture=a.source,e.applyFilter(this,t,s,r),Ps.returnTexture(a),Ps.returnTexture(i)}get threshold(){return this._extractFilter.threshold}set threshold(e){this._extractFilter.threshold=e}get kernels(){return this._blurFilter.kernels}set kernels(e){this._blurFilter.kernels=e}get blur(){return this._blurFilter.strength}set blur(e){this._blurFilter.strength=e}get quality(){return this._blurFilter.quality}set quality(e){this._blurFilter.quality=e}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(e){typeof e=="number"&&(e={x:e,y:e}),Array.isArray(e)&&(e={x:e[0],y:e[1]}),this._blurFilter.pixelSize=e}get pixelSizeX(){return this._blurFilter.pixelSizeX}set pixelSizeX(e){this._blurFilter.pixelSizeX=e}get pixelSizeY(){return this._blurFilter.pixelSizeY}set pixelSizeY(e){this._blurFilter.pixelSizeY=e}};yo(sk,"DEFAULT_OPTIONS",{threshold:.5,bloomScale:1,brightness:1,blur:8,quality:4,pixelSize:{x:1,y:1}});let Yj=sk;var Xj=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec4 uLine;
uniform vec2 uNoise;
uniform vec3 uVignette;
uniform float uSeed;
uniform float uTime;
uniform vec2 uDimensions;

uniform vec4 uInputSize;

const float SQRT_2 = 1.414213;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float vignette(vec3 co, vec2 coord)
{
    float outter = SQRT_2 - uVignette[0] * SQRT_2;
    vec2 dir = vec2(0.5) - coord;
    dir.y *= uDimensions.y / uDimensions.x;
    float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);
    return darker + (1.0 - darker) * (1.0 - uVignette[1]);
}

float noise(vec2 coord)
{
    vec2 pixelCoord = coord * uInputSize.xy;
    pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
    pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
    return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}

vec3 interlaceLines(vec3 co, vec2 coord)
{
    vec3 color = co;

    float curvature = uLine[0];
    float lineWidth = uLine[1];
    float lineContrast = uLine[2];
    float verticalLine = uLine[3];

    vec2 dir = vec2(coord * uInputSize.xy / uDimensions - 0.5);

    float _c = curvature > 0. ? curvature : 1.;
    float k = curvature > 0. ? (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
    vec2 uv = dir * k;
    float v = verticalLine > 0.5 ? uv.x * uDimensions.x : uv.y * uDimensions.y;
    v *= min(1.0, 2.0 / lineWidth ) / _c;
    float j = 1. + cos(v * 1.2 - uTime) * 0.5 * lineContrast;
    color *= j;

    float segment = verticalLine > 0.5 ? mod((dir.x + .5) * uDimensions.x, 4.) : mod((dir.y + .5) * uDimensions.y, 4.);
    color *= 0.99 + ceil(segment) * 0.015;

    return color;
}

void main(void)
{
    finalColor = texture(uTexture, vTextureCoord);
    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions;

    if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
    {
        float n = noise(vTextureCoord);
        finalColor += vec4(n, n, n, finalColor.a);
    }

    if (uVignette[0] > 0.)
    {
        float v = vignette(finalColor.rgb, coord);
        finalColor *= vec4(v, v, v, finalColor.a);
    }

    if (uLine[1] > 0.0)
    {
        finalColor = vec4(interlaceLines(finalColor.rgb, vTextureCoord), finalColor.a);  
    }
}
`,Kj=`struct CRTUniforms {
    uLine: vec4<f32>,
    uNoise: vec2<f32>,
    uVignette: vec3<f32>,
    uSeed: f32,
    uTime: f32,
    uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> crtUniforms : CRTUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let coord: vec2<f32> = uv * gfu.uInputSize.xy / crtUniforms.uDimensions;

  let uNoise = crtUniforms.uNoise;

  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
  {
    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);
  }

  if (crtUniforms.uVignette[0] > 0.)
  {
    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);
  }

  if (crtUniforms.uLine[1] > 0.0)
  {
    color = vec4<f32>(vec3<f32>(interlaceLines(color.rgb, uv)), color.a);  
  }

  return color;
}

const SQRT_2: f32 = 1.414213;

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

fn rand(co: vec2<f32>) -> f32
{
  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);
}

fn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32
{
  let uVignette = crtUniforms.uVignette;
  let uDimensions = crtUniforms.uDimensions;
  
  let outter: f32 = SQRT_2 - uVignette[0] * SQRT_2;
  var dir: vec2<f32> = vec2<f32>(0.5) - coord;
  dir.y *= uDimensions.y / uDimensions.x;
  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);
  return darker + (1.0 - darker) * (1.0 - uVignette[1]);
}

fn noise(coord: vec2<f32>) -> f32
{
  let uNoise = crtUniforms.uNoise;
  let uSeed = crtUniforms.uSeed;

  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;
  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}

fn interlaceLines(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>
{
  var color = co;

  let uDimensions = crtUniforms.uDimensions;

  let curvature: f32 = crtUniforms.uLine[0];
  let lineWidth: f32 = crtUniforms.uLine[1];
  let lineContrast: f32 = crtUniforms.uLine[2];
  let verticalLine: f32 = crtUniforms.uLine[3];

  let dir: vec2<f32> = vec2<f32>(coord * gfu.uInputSize.xy / uDimensions - 0.5);

  let _c: f32 = select(1., curvature, curvature > 0.);
  let k: f32 = select(1., (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c), curvature > 0.);
  let uv: vec2<f32> = dir * k;
  let v: f32 = select(uv.y * uDimensions.y, uv.x * uDimensions.x, verticalLine > 0.5) * min(1.0, 2.0 / lineWidth ) / _c;
  let j: f32 = 1. + cos(v * 1.2 - crtUniforms.uTime) * 0.5 * lineContrast;
  color *= j;

  let segment: f32 = select(modulo((dir.y + .5) * uDimensions.y, 4.), modulo((dir.x + .5) * uDimensions.x, 4.), verticalLine > 0.5);
  color *= 0.99 + ceil(segment) * 0.015;

  return color;
}`,Zj=Object.defineProperty,Qj=(n,e,t)=>e in n?Zj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gu=(n,e,t)=>(Qj(n,typeof e!="symbol"?e+"":e,t),t);const ik=class ok extends Ko{constructor(e){e={...ok.DEFAULT_OPTIONS,...e};const t=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:Kj,entryPoint:"mainFragment"}}),s=rr.from({vertex:sa,fragment:Xj,name:"crt-filter"});super({gpuProgram:t,glProgram:s,resources:{crtUniforms:{uLine:{value:new Float32Array(4),type:"vec4<f32>"},uNoise:{value:new Float32Array(2),type:"vec2<f32>"},uVignette:{value:new Float32Array(3),type:"vec3<f32>"},uSeed:{value:e.seed,type:"f32"},uTime:{value:e.time,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),Gu(this,"uniforms"),Gu(this,"seed"),Gu(this,"time"),this.uniforms=this.resources.crtUniforms.uniforms,Object.assign(this,e)}apply(e,t,s,r){this.uniforms.uDimensions[0]=t.frame.width,this.uniforms.uDimensions[1]=t.frame.height,this.uniforms.uSeed=this.seed,this.uniforms.uTime=this.time,e.applyFilter(this,t,s,r)}get curvature(){return this.uniforms.uLine[0]}set curvature(e){this.uniforms.uLine[0]=e}get lineWidth(){return this.uniforms.uLine[1]}set lineWidth(e){this.uniforms.uLine[1]=e}get lineContrast(){return this.uniforms.uLine[2]}set lineContrast(e){this.uniforms.uLine[2]=e}get verticalLine(){return this.uniforms.uLine[3]>.5}set verticalLine(e){this.uniforms.uLine[3]=e?1:0}get noise(){return this.uniforms.uNoise[0]}set noise(e){this.uniforms.uNoise[0]=e}get noiseSize(){return this.uniforms.uNoise[1]}set noiseSize(e){this.uniforms.uNoise[1]=e}get vignetting(){return this.uniforms.uVignette[0]}set vignetting(e){this.uniforms.uVignette[0]=e}get vignettingAlpha(){return this.uniforms.uVignette[1]}set vignettingAlpha(e){this.uniforms.uVignette[1]=e}get vignettingBlur(){return this.uniforms.uVignette[2]}set vignettingBlur(e){this.uniforms.uVignette[2]=e}};Gu(ik,"DEFAULT_OPTIONS",{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0,seed:0});let Jj=ik;var eU=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uDisplacementMap;
uniform float uSeed;
uniform vec2 uDimensions;
uniform float uAspect;
uniform float uFillMode;
uniform float uOffset;
uniform float uDirection;
uniform vec2 uRed;
uniform vec2 uGreen;
uniform vec2 uBlue;

uniform vec4 uInputSize;
uniform vec4 uInputClamp;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * uInputSize.xy) / uDimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float sinDir = sin(uDirection);
    float cosDir = cos(uDirection);

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * uAspect;
    float ny = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture(uDisplacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (uOffset / uInputSize.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * uAspect);

    int fillMode = int(uFillMode);

    if (fillMode == CLAMP) {
        coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);
    } else {
        if( coord.x > uInputClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= uInputClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = uInputClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < uInputClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += uInputClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -uInputClamp.z;
            }
        }

        if( coord.y > uInputClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= uInputClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = uInputClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < uInputClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += uInputClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -uInputClamp.w;
            }
        }
    }

    finalColor.r = texture(uTexture, coord + uRed * (1.0 - uSeed * 0.4) / uInputSize.xy).r;
    finalColor.g = texture(uTexture, coord + uGreen * (1.0 - uSeed * 0.3) / uInputSize.xy).g;
    finalColor.b = texture(uTexture, coord + uBlue * (1.0 - uSeed * 0.2) / uInputSize.xy).b;
    finalColor.a = texture(uTexture, coord).a;
}
`,tU=`struct GlitchUniforms {
  uSeed: f32,
  uDimensions: vec2<f32>,
  uAspect: f32,
  uFillMode: f32,
  uOffset: f32,
  uDirection: f32,
  uRed: vec2<f32>,
  uGreen: vec2<f32>,
  uBlue: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> glitchUniforms : GlitchUniforms;
@group(1) @binding(1) var uDisplacementMap: texture_2d<f32>; 
@group(1) @binding(2) var uDisplacementSampler: sampler; 

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uSeed: f32 = glitchUniforms.uSeed;
  let uDimensions: vec2<f32> = glitchUniforms.uDimensions;
  let uAspect: f32 = glitchUniforms.uAspect;
  let uOffset: f32 = glitchUniforms.uOffset;
  let uDirection: f32 = glitchUniforms.uDirection;
  let uRed: vec2<f32> = glitchUniforms.uRed;
  let uGreen: vec2<f32> = glitchUniforms.uGreen;
  let uBlue: vec2<f32> = glitchUniforms.uBlue;

  let uInputSize: vec4<f32> = gfu.uInputSize;
  let uInputClamp: vec4<f32> = gfu.uInputClamp;

  var discarded: bool = false;
  var coord: vec2<f32> = (uv * uInputSize.xy) / uDimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
      discarded = true;
    }

    let sinDir: f32 = sin(uDirection);
    let cosDir: f32 = cos(uDirection);

    let cx: f32 = coord.x - 0.5;
    let cy: f32 = (coord.y - 0.5) * uAspect;
    var ny: f32 = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;

    ny = select(select(ny, -ny, ny < 0.0), 2.0 - ny, ny > 1.0);

    let dc: vec4<f32> = textureSample(uDisplacementMap, uDisplacementSampler, vec2<f32>(0.5, ny));

    let displacement: f32 = (dc.r - dc.g) * (uOffset / uInputSize.x);

    coord = uv + vec2<f32>(cosDir * displacement, sinDir * displacement * uAspect);

    let fillMode: i32 = i32(glitchUniforms.uFillMode);

    if (fillMode == CLAMP) {
      coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);
    } else {
      if (coord.x > uInputClamp.z) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.x = coord.x - uInputClamp.z;
        } else if (fillMode == MIRROR) {
          coord.x = uInputClamp.z * 2.0 - coord.x;
        }
      } else if (coord.x < uInputClamp.x) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.x = coord.x + uInputClamp.z;
        } else if (fillMode == MIRROR) {
          coord.x = coord.x * -uInputClamp.z;
        }
      }

      if (coord.y > uInputClamp.w) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.y = coord.y - uInputClamp.w;
        } else if (fillMode == MIRROR) {
          coord.y = uInputClamp.w * 2.0 - coord.y;
        }
      } else if (coord.y < uInputClamp.y) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.y = coord.y + uInputClamp.w;
        } else if (fillMode == MIRROR) {
          coord.y = coord.y * -uInputClamp.w;
        }
      }
    }

    let seedR: f32 = 1.0 - uSeed * 0.4;
    let seedG: f32 = 1.0 - uSeed * 0.3;
    let seedB: f32 = 1.0 - uSeed * 0.2;

    let offsetR: vec2<f32> = vec2(uRed.x * seedR / uInputSize.x, uRed.y * seedR / uInputSize.y);
    let offsetG: vec2<f32> = vec2(uGreen.x * seedG / uInputSize.x, uGreen.y * seedG / uInputSize.y);
    let offsetB: vec2<f32> = vec2(uBlue.x * seedB / uInputSize.x, uBlue.y * seedB / uInputSize.y);

    let r = textureSample(uTexture, uSampler, coord + offsetR).r;
    let g = textureSample(uTexture, uSampler, coord + offsetG).g;
    let b = textureSample(uTexture, uSampler, coord + offsetB).b;
    let a = textureSample(uTexture, uSampler, coord).a;

    return select(vec4<f32>(r, g, b, a), vec4<f32>(0.0,0.0,0.0,0.0), discarded);
}

const TRANSPARENT: i32 = 0;
const ORIGINAL: i32 = 1;
const LOOP: i32 = 2;
const CLAMP: i32 = 3;
const MIRROR: i32 = 4;`,nU=Object.defineProperty,sU=(n,e,t)=>e in n?nU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,As=(n,e,t)=>(sU(n,typeof e!="symbol"?e+"":e,t),t);const ak=class lk extends Ko{constructor(e){e={...lk.defaults,...e};const t=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:tU,entryPoint:"mainFragment"}}),s=rr.from({vertex:sa,fragment:eU,name:"glitch-filter"}),r=document.createElement("canvas");r.width=4,r.height=e.sampleSize??512;const i=new Le({source:new Sl({resource:r})});super({gpuProgram:t,glProgram:s,resources:{glitchUniforms:{uSeed:{value:(e==null?void 0:e.seed)??0,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"},uAspect:{value:1,type:"f32"},uFillMode:{value:(e==null?void 0:e.fillMode)??0,type:"f32"},uOffset:{value:(e==null?void 0:e.offset)??100,type:"f32"},uDirection:{value:(e==null?void 0:e.direction)??0,type:"f32"},uRed:{value:{x:0,y:0},type:"vec2<f32>"},uGreen:{value:{x:0,y:0},type:"vec2<f32>"},uBlue:{value:{x:0,y:0},type:"vec2<f32>"}},uDisplacementMap:i.source,uDisplacementSampler:i.source.style}}),As(this,"uniforms"),As(this,"average",!1),As(this,"minSize",8),As(this,"sampleSize",512),As(this,"_canvas"),As(this,"texture"),As(this,"_slices",0),As(this,"_sizes",new Float32Array(1)),As(this,"_offsets",new Float32Array(1)),this.uniforms=this.resources.glitchUniforms.uniforms,this._canvas=r,this.texture=i,Object.assign(this,e)}apply(e,t,s,r){const{width:i,height:a}=t.frame;this.uniforms.uDimensions[0]=i,this.uniforms.uDimensions[1]=a,this.uniforms.uAspect=a/i,e.applyFilter(this,t,s,r)}_randomizeSizes(){const e=this._sizes,t=this._slices-1,s=this.sampleSize,r=Math.min(this.minSize/s,.9/this._slices);if(this.average){const i=this._slices;let a=1;for(let c=0;c<t;c++){const u=a/(i-c),h=Math.max(u*(1-Math.random()*.6),r);e[c]=h,a-=h}e[t]=a}else{let i=1;const a=Math.sqrt(1/this._slices);for(let c=0;c<t;c++){const u=Math.max(a*i*Math.random(),r);e[c]=u,i-=u}e[t]=i}this.shuffle()}shuffle(){const e=this._sizes,t=this._slices-1;for(let s=t;s>0;s--){const r=Math.random()*s>>0,i=e[s];e[s]=e[r],e[r]=i}}_randomizeOffsets(){for(let e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const e=this.sampleSize,t=this.texture,s=this._canvas.getContext("2d");s.clearRect(0,0,8,e);let r,i=0;for(let a=0;a<this._slices;a++){r=Math.floor(this._offsets[a]*256);const c=this._sizes[a]*e,u=r>0?r:0,h=r<0?-r:0;s.fillStyle=`rgba(${u}, ${h}, 0, 1)`,s.fillRect(0,i>>0,e,c+1>>0),i+=c}t.source.update()}set sizes(e){const t=Math.min(this._slices,e.length);for(let s=0;s<t;s++)this._sizes[s]=e[s]}get sizes(){return this._sizes}set offsets(e){const t=Math.min(this._slices,e.length);for(let s=0;s<t;s++)this._offsets[s]=e[s]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(e){this._slices!==e&&(this._slices=e,this._sizes=new Float32Array(e),this._offsets=new Float32Array(e),this.refresh())}get offset(){return this.uniforms.uOffset}set offset(e){this.uniforms.uOffset=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}get fillMode(){return this.uniforms.uFillMode}set fillMode(e){this.uniforms.uFillMode=e}get direction(){return this.uniforms.uDirection/Qp}set direction(e){this.uniforms.uDirection=e*Qp}get red(){return this.uniforms.uRed}set red(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uRed=e}get green(){return this.uniforms.uGreen}set green(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uGreen=e}get blue(){return this.uniforms.uBlue}set blue(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uBlue=e}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};As(ak,"defaults",{slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:{x:0,y:0},green:{x:0,y:0},blue:{x:0,y:0},minSize:8,sampleSize:512});let rU=ak;var iU=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec4 uInputSize;
uniform vec2 uRed;
uniform vec2 uGreen;
uniform vec2 uBlue;

void main(void)
{
   float r = texture(uTexture, vTextureCoord + uRed/uInputSize.xy).r;
   float g = texture(uTexture, vTextureCoord + uGreen/uInputSize.xy).g;
   float b = texture(uTexture, vTextureCoord + uBlue/uInputSize.xy).b;
   float a = texture(uTexture, vTextureCoord).a;
   finalColor = vec4(r, g, b, a);
}
`,oU=`struct RgbSplitUniforms {
    uRed: vec2<f32>,
    uGreen: vec2<f32>,
    uBlue: vec3<f32>,
};

struct GlobalFilterUniforms {
    uInputSize:vec4<f32>,
    uInputPixel:vec4<f32>,
    uInputClamp:vec4<f32>,
    uOutputFrame:vec4<f32>,
    uGlobalFrame:vec4<f32>,
    uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> rgbSplitUniforms : RgbSplitUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    let r = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uRed.x / gfu.uInputSize.x, rgbSplitUniforms.uRed.y / gfu.uInputSize.y)).r;
    let g = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uGreen.x / gfu.uInputSize.x, rgbSplitUniforms.uGreen.y / gfu.uInputSize.y)).g;
    let b = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uBlue.x / gfu.uInputSize.x, rgbSplitUniforms.uBlue.y / gfu.uInputSize.y)).b;
    let a = textureSample(uTexture, uSampler, uv).a;
    return vec4<f32>(r, g, b, a);
}
`,aU=Object.defineProperty,lU=(n,e,t)=>e in n?aU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ck=(n,e,t)=>(lU(n,typeof e!="symbol"?e+"":e,t),t);const uk=class hk extends Ko{constructor(...e){let t=e[0]??{};(Array.isArray(t)||"x"in t&&"y"in t)&&(Oe("6.0.0","RGBSplitFilter constructor params are now options object. See params: { red, green, blue }"),t={red:t},e[1]!==void 0&&(t.green=e[1]),e[2]!==void 0&&(t.blue=e[2])),t={...hk.DEFAULT_OPTIONS,...t};const s=ys.from({vertex:{source:ra,entryPoint:"mainVertex"},fragment:{source:oU,entryPoint:"mainFragment"}}),r=rr.from({vertex:sa,fragment:iU,name:"rgb-split-filter"});super({gpuProgram:s,glProgram:r,resources:{rgbSplitUniforms:{uRed:{value:{x:0,y:0},type:"vec2<f32>"},uGreen:{value:{x:0,y:0},type:"vec2<f32>"},uBlue:{value:{x:0,y:0},type:"vec2<f32>"}}}}),ck(this,"uniforms"),this.uniforms=this.resources.rgbSplitUniforms.uniforms,Object.assign(this,t)}get red(){return this.uniforms.uRed}set red(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uRed=e}get redX(){return this.red.x}set redX(e){this.red.x=e}get redY(){return this.red.y}set redY(e){this.red.y=e}get green(){return this.uniforms.uGreen}set green(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uGreen=e}get greenX(){return this.green.x}set greenX(e){this.green.x=e}get greenY(){return this.green.y}set greenY(e){this.green.y=e}get blue(){return this.uniforms.uBlue}set blue(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uBlue=e}get blueX(){return this.blue.x}set blueX(e){this.blue.x=e}get blueY(){return this.blue.y}set blueY(e){this.blue.y=e}};ck(uk,"DEFAULT_OPTIONS",{red:{x:-10,y:0},green:{x:0,y:10},blue:{x:0,y:0}});let cU=uk;function uU(n){const e=typeof navigator<"u"&&navigator.maxTouchPoints>0,t=new Yj({threshold:.5,bloomScale:1.5,brightness:1,blur:e?2:4}),s=new Jj({curvature:1,lineWidth:1,lineContrast:.25,noise:.1,noiseSize:1.5,vignetting:.3,vignettingAlpha:.8,vignettingBlur:.4,time:0}),r=new rU({slices:5,offset:2,direction:0,fillMode:2,average:!1});r.enabled=!1;const i=new cU({red:{x:0,y:0},green:{x:0,y:0},blue:{x:0,y:0}});return e?n.filters=[t]:n.filters=[t,s,r,i],{bloom:t,crt:s,glitch:r,aberration:i,isMobile:e}}class hU{constructor(e){Q(this,"target");Q(this,"bloomFilter");Q(this,"crtFilter");Q(this,"glitchFilter");Q(this,"aberrationFilter");Q(this,"glitchTimer",0);Q(this,"bloomSpike",0);Q(this,"aberrationSpike",0);Q(this,"shakeTime",0);Q(this,"shakeIntensity",0);Q(this,"baseShakeY",0);Q(this,"isMobile");Q(this,"baseBloom",1);this.target=e,this.baseShakeY=e.y;const{bloom:t,crt:s,glitch:r,aberration:i,isMobile:a}=uU(e);this.bloomFilter=t,this.crtFilter=s,this.glitchFilter=r,this.aberrationFilter=i,this.isMobile=a}setFever(e){this.baseBloom=e?2:1}update(e){if(this.isMobile||(this.crtFilter.time+=e*6),!this.isMobile&&this.glitchFilter.enabled?(this.glitchTimer+=e,this.glitchTimer>=WN&&(this.glitchFilter.enabled=!1,this.glitchTimer=0)):this.glitchTimer=0,this.bloomSpike>0?(this.bloomFilter.brightness=this.baseBloom+this.bloomSpike*2,this.bloomSpike=Math.max(0,this.bloomSpike-5*e)):this.bloomFilter.brightness=this.baseBloom,this.isMobile||(this.aberrationSpike>0?(this.aberrationFilter.red.x=-this.aberrationSpike,this.aberrationFilter.blue.x=this.aberrationSpike,this.aberrationSpike=Math.max(0,this.aberrationSpike-15*e)):this.aberrationFilter.red.x!==0&&(this.aberrationFilter.red.x=0,this.aberrationFilter.blue.x=0)),this.shakeTime>0){this.shakeTime-=e;const t=(Math.random()-.5)*2*this.shakeIntensity*(this.shakeTime/rp);this.target.y=this.baseShakeY+t}else this.target.y=this.baseShakeY}triggerHit(e){e==="perfect"&&(this.bloomSpike=UN,this.aberrationSpike=6)}triggerMiss(){this.isMobile||(this.glitchFilter.enabled=!0,this.glitchTimer=0,this.crtFilter.time+=5),this.shakeTime=rp,this.shakeIntensity=Vv}triggerHeavyMiss(){this.isMobile||(this.glitchFilter.enabled=!0,this.glitchTimer=-.3,this.crtFilter.time+=15,this.aberrationSpike=20),this.shakeTime=rp*1.5,this.shakeIntensity=Vv*2.5}}class dU{constructor(e,t,s,r,i){Q(this,"events");Q(this,"hitSounds");Q(this,"lanes");Q(this,"hitZone");Q(this,"effects");Q(this,"onHit",e=>{this.hitSounds.playHit(e.judgment),this.lanes.flashLane(e.lane),this.hitZone.flashPad(e.lane,e.judgment),this.effects.triggerHit(e.judgment)});Q(this,"onMiss",e=>{this.hitSounds.playHit("miss"),this.hitZone.flashPad(e.lane,"miss"),this.effects.triggerMiss()});Q(this,"onComboMilestone",e=>{this.hitSounds.playMilestone(e.combo)});Q(this,"onComboBreak",e=>{this.hitSounds.playComboBreak(),e.previousCombo>20&&this.effects.triggerHeavyMiss()});this.events=e,this.hitSounds=t,this.lanes=s,this.hitZone=r,this.effects=i,this.events.on("hit",this.onHit),this.events.on("miss",this.onMiss),this.events.on("combo-break",this.onComboBreak),this.events.on("combo-milestone",this.onComboMilestone)}destroy(){this.events.off("hit",this.onHit),this.events.off("miss",this.onMiss),this.events.off("combo-break",this.onComboBreak),this.events.off("combo-milestone",this.onComboMilestone)}}class fU extends Ht{constructor(t,s,r){super();Q(this,"app");Q(this,"engine");Q(this,"hud");Q(this,"lanes");Q(this,"notes");Q(this,"hitZone");Q(this,"bg");Q(this,"hitFeedback");Q(this,"effectsController");Q(this,"listener");Q(this,"update",()=>{const t=this.engine.currentTime;this.engine.update(t);const s=this.engine.getActiveNotes(),r=this.app.ticker.deltaMS/1e3,i=r*60,a=this.engine.currentMultiplier>=16;this.effectsController.setFever(a),this.bg.setFever(a),this.effectsController.update(r),this.bg.update(r),this.lanes.update(i),this.notes.update(t,s),this.hitFeedback.update(i),this.hud.update(i,this.engine.score,this.engine.currentCombo,this.engine.currentMultiplier,this.app.screen.width,this.engine.beatMap.bpm,_j.seconds),this.hitZone.update(t,i),this.hitZone.decayPads(i)});this.app=t,this.engine=s;const i=t.screen.width,a=t.screen.height,c=a>i,u=r==="trackpad"?1:Si;let h=r==="trackpad"?BN:LN;c&&(h=r==="trackpad"?jN:zN);const f=i*h,p=(i-f)/2;this.bg=new Pj(i,a),this.addChild(this.bg),this.lanes=new kj(f,a,u),this.lanes.x=p,this.addChild(this.lanes);const g=a*VN;this.hitZone=new Mj(f,g,u,s.beatMap.bpm),this.hitZone.x=p,this.addChild(this.hitZone);const y=[],x=this.lanes.getLaneWidth();for(let w=0;w<u;w++)y.push(p+w*x+x/2);this.notes=new Aj(y,g,-50),this.notes.init(),this.addChild(this.notes),this.hitFeedback=new Rj(s.events,y,g),this.addChild(this.hitFeedback),this.hud=new Ej(s.events,i,a),this.addChild(this.hud),this.effectsController=new hU(this),this.listener=new dU(this.engine.events,this.engine.hitSounds,this.lanes,this.hitZone,this.effectsController),this.app.ticker.add(this.update,this)}destroy(t){var s;this.listener.destroy(),(s=this.app.ticker)==null||s.remove(this.update,this),super.destroy(t)}}const x1={d:0,f:1,j:2,k:3};function pU(n){const e=Se(c=>c.phase)==="playing",t=Se(c=>c.mode),s=J.useCallback(c=>{if(!n)return;const u=c.key.toLowerCase();if(u==="escape"&&(e||Se.getState().phase==="paused")){c.preventDefault(),e?n.pause():Se.getState().phase==="paused"&&Se.getState().setPhase("countdown");return}if(!e)return;const f=t==="trackpad"?u===" "?0:void 0:x1[u];f!==void 0&&(c.preventDefault(),n.handleInput(f,rn().seconds),window.dispatchEvent(new CustomEvent("lane-hit",{detail:{lane:f}})))},[n,e,t]),r=J.useCallback(c=>{if(!n||!e)return;const u=c.key.toLowerCase(),f=t==="trackpad"?u===" "?0:void 0:x1[u];f!==void 0&&(c.preventDefault(),n.handleInputUp&&n.handleInputUp(f,rn().seconds),window.dispatchEvent(new CustomEvent("lane-release",{detail:{lane:f}})))},[n,e,t]),i=J.useCallback(c=>{if(!e||!n)return;c.cancelable&&c.preventDefault();const u=t==="trackpad";for(let h=0;h<c.changedTouches.length;h++){const f=c.changedTouches[h];let p;if(u)p=0;else{const y=window.innerWidth/4,x=Math.floor(f.clientX/y);p=Math.max(0,Math.min(3,x))}p!==void 0&&(n.handleInput(p,rn().seconds),window.dispatchEvent(new CustomEvent("lane-hit",{detail:{lane:p}})),navigator.vibrate&&navigator.vibrate(10))}},[n,e,t]),a=J.useCallback(c=>{if(!e||!n)return;c.cancelable&&c.preventDefault();const u=t==="trackpad";for(let h=0;h<c.changedTouches.length;h++){const f=c.changedTouches[h];let p;if(u)p=0;else{const y=window.innerWidth/4,x=Math.floor(f.clientX/y);p=Math.max(0,Math.min(3,x))}p!==void 0&&(n.handleInputUp&&n.handleInputUp(p,rn().seconds),window.dispatchEvent(new CustomEvent("lane-release",{detail:{lane:p}})))}},[n,e,t]);J.useEffect(()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",r),window.addEventListener("touchstart",i,{passive:!1}),window.addEventListener("touchend",a,{passive:!1}),window.addEventListener("touchcancel",a,{passive:!1}),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",r),window.removeEventListener("touchstart",i),window.removeEventListener("touchend",a),window.removeEventListener("touchcancel",a)}),[s,r,i,a])}function mU(){const{containerRef:n,app:e}=wV(),t=Cj(),s=Se(v=>v.phase),r=Se(v=>v.setPhase),[i,a]=J.useState(null),[c,u]=J.useState(!1);pU(t),J.useEffect(()=>{if(s==="countdown"){const v=document.documentElement,S=v.requestFullscreen||v.webkitRequestFullscreen;S&&S.call(v).catch(()=>{})}},[s]),J.useEffect(()=>{if(s==="countdown"){a(3);let v,S=hs.currentTime;const T=setTimeout(()=>{hs.state!=="running"&&u(!0)},100),C=()=>{(hs.state!=="running"||S===0)&&(S=hs.currentTime);const P=hs.currentTime-S;if(P>=2.8){a(null),r("playing");return}else P>=2.1?a("GO!"):P>=1.4?a(1):P>=.7&&a(2);v=requestAnimationFrame(C)};return v=requestAnimationFrame(C),()=>{cancelAnimationFrame(v),clearTimeout(T)}}},[s,r]);const h=Se(v=>v.mode);J.useEffect(()=>{if(!(!e||!t)){Re("scene.gamescene.creating",{});try{const v=new fU(e,t,h);return e.stage.addChild(v),Re("scene.gamescene.created",{}),()=>{var S;Re("scene.gamescene.destroying",{}),(S=e.stage)==null||S.removeChild(v),v.destroy(!0)}}catch(v){Xn("scene.gamescene.failed",{},v)}}},[e,t]);const f=async()=>{hs.state!=="running"&&await Nl(),u(!1)},p=()=>{t&&s==="playing"&&t.pause()},g=()=>{r("countdown")},y=()=>{t&&t.retry()},x=()=>{t&&t.endGame(),r("idle")};let w="text-white";return i===3&&(w="text-red-500 drop-shadow-[0_0_20px_rgba(255,0,0,0.8)]"),i===2&&(w="text-yellow-500 drop-shadow-[0_0_20px_rgba(255,255,0,0.8)]"),i===1&&(w="text-green-500 drop-shadow-[0_0_20px_rgba(0,255,0,0.8)]"),i==="GO!"&&(w="text-neon-cyan drop-shadow-[0_0_30px_rgba(0,255,255,0.8)]"),z.jsx(Oo,{fullscreen:!0,children:z.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",style:{touchAction:"none"},children:[z.jsx("div",{ref:n,className:"absolute inset-0 w-full h-full rounded-md overflow-hidden bg-black shadow-[0_0_30px_rgba(0,255,255,0.2)]"}),z.jsx(Ga,{children:s==="playing"&&z.jsx(Ft.button,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute z-40 p-3 bg-black/50 border border-neon-cyan/50 rounded-full text-neon-cyan hover:bg-neon-cyan/20 hover:scale-110 hover:shadow-[0_0_15px_rgba(0,255,255,0.6)] transition-all cursor-pointer backdrop-blur-md",style:{top:"calc(env(safe-area-inset-top, 0px) + 1rem)",right:"calc(env(safe-area-inset-right, 0px) + 1rem)"},onClick:p,children:z.jsx(CI,{className:"w-6 h-6"})})}),z.jsx(Ga,{children:i&&z.jsx(Ft.div,{initial:{scale:2.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{type:"spring",bounce:.6,duration:.5},className:`absolute font-bold text-8xl md:text-9xl z-50 pointer-events-none ${w}`,style:{fontFamily:'"Press Start 2P", monospace'},children:i},i)}),z.jsx(Ga,{children:i==="GO!"&&z.jsx(Ft.div,{className:"absolute inset-0 bg-white pointer-events-none z-40",initial:{opacity:.8},animate:{opacity:0},transition:{duration:.5,ease:"easeOut"}})}),z.jsx(Ga,{children:c&&z.jsxs(Ft.div,{className:"absolute inset-0 z-[60] bg-black/80 flex flex-col items-center justify-center backdrop-blur-sm p-4 cursor-pointer text-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f,onTouchStart:f,children:[z.jsx("h3",{className:"text-2xl text-neon-yellow mb-2",children:"Audio Blocked"}),z.jsx("p",{className:"text-white text-lg animate-pulse",children:"Tap anywhere to enable sound"})]})}),z.jsx(Ga,{children:s==="paused"&&z.jsxs(Ft.div,{className:"absolute inset-0 z-[60] bg-black/70 flex flex-col items-center justify-center backdrop-blur-md",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[z.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-neon-magenta mb-8 drop-shadow-[0_0_15px_rgba(255,0,255,0.8)]",style:{fontFamily:'"Press Start 2P", monospace'},children:"PAUSED"}),z.jsxs("div",{className:"flex flex-col gap-4 w-64",children:[z.jsxs("button",{className:"flex items-center justify-center gap-3 w-full py-4 bg-neon-cyan/20 border-2 border-neon-cyan text-neon-cyan font-bold hover:bg-neon-cyan hover:text-black hover:shadow-[0_0_20px_rgba(0,255,255,0.8)] transition-all rounded",onClick:g,children:[z.jsx(aS,{className:"w-5 h-5"})," RESUME"]}),z.jsxs("button",{className:"flex items-center justify-center gap-3 w-full py-4 bg-neon-yellow/20 border-2 border-neon-yellow text-neon-yellow font-bold hover:bg-neon-yellow hover:text-black hover:shadow-[0_0_20px_rgba(255,255,0,0.8)] transition-all rounded",onClick:y,children:[z.jsx(kI,{className:"w-5 h-5"})," RETRY"]}),z.jsxs("button",{className:"flex items-center justify-center gap-3 w-full py-4 bg-red-500/20 border-2 border-red-500 text-red-500 font-bold hover:bg-red-500 hover:text-black hover:shadow-[0_0_20px_rgba(255,0,0,0.8)] transition-all rounded",onClick:x,children:[z.jsx(SI,{className:"w-5 h-5"})," QUIT"]})]})]})})]})})}function gU(){const n=Se(h=>h.finalScore),e=Se(h=>h.reset);if(!n)return z.jsx(Oo,{children:z.jsxs("div",{className:"text-center",children:[z.jsx("h1",{className:"text-4xl text-red-500 mb-4",children:"NO SCORE DATA RED"}),z.jsx(ls,{onClick:e,className:"bg-red-900 border border-red-500 hover:bg-red-800 rounded-none px-6",children:"BACK TO MENU"})]})});const t=n.perfects+n.greats+n.goods,s=n.totalNotes>0?t/n.totalNotes*100:0,r=n.grade==="S"||n.grade==="A",i=["#ff00ff","#00ffff","#ffff00","#00ff00"],a=r?Array.from({length:50}).map((h,f)=>({id:f,x:Math.random()*100,y:-10-Math.random()*20,color:i[Math.floor(Math.random()*i.length)],delay:Math.random()*2,duration:2+Math.random()*3,scale:Math.random()*.5+.5})):[],[c,u]=J.useState(0);return J.useEffect(()=>_I(0,n.score,{duration:1.5,ease:"easeOut",onUpdate(f){u(Math.round(f))}}).stop,[n.score]),z.jsxs(Oo,{children:[z.jsxs(Ft.div,{className:"flex flex-col items-center justify-center space-y-5 sm:space-y-8 w-full max-w-4xl py-4",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[z.jsx("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-neon-cyan to-neon-magenta drop-shadow-[0_0_20px_rgba(255,0,255,0.6)]",children:"STAGE CLEAR"}),z.jsxs("div",{className:"bg-slate-900/80 p-8 pt-10 border-2 border-neon-cyan/50 shadow-[0_0_30px_rgba(0,255,255,0.2)] rounded-lg w-full relative",children:[z.jsx(Ft.div,{className:"absolute -top-14 right-2 sm:-top-16 sm:-right-8 w-28 h-28 sm:w-32 sm:h-32 md:w-48 md:h-48 flex items-center justify-center rounded-full border-4 border-neon-yellow shadow-[0_0_40px_rgba(255,255,0,0.5)] rotate-12 bg-slate-950/90 z-10",initial:{scale:5,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:12},transition:{delay:1.5,type:"spring",stiffness:300,damping:15},children:z.jsx("span",{className:`text-5xl sm:text-6xl md:text-9xl font-black ${n.grade==="S"?"text-neon-yellow drop-shadow-[0_0_20px_rgba(255,255,0,1)]":n.grade==="A"?"text-neon-green drop-shadow-[0_0_20px_rgba(0,255,0,1)]":n.grade==="B"?"text-neon-cyan drop-shadow-[0_0_20px_rgba(0,255,255,1)]":"text-red-500 drop-shadow-[0_0_20px_rgba(255,0,0,1)]"}`,children:n.grade})}),z.jsx("h2",{className:"text-2xl text-neon-green mb-6 truncate pr-24",children:n.songName}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[z.jsxs("div",{className:"space-y-4",children:[z.jsxs("div",{className:"flex justify-between border-b border-slate-700 pb-2",children:[z.jsx("span",{className:"text-slate-400",children:"SCORE"}),z.jsx("span",{className:"text-3xl text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.8)] tabular-nums",children:c.toLocaleString()})]}),z.jsxs("div",{className:"flex justify-between border-b border-slate-700 pb-2",children:[z.jsx("span",{className:"text-slate-400",children:"MAX COMBO"}),z.jsx("span",{className:"text-2xl text-neon-cyan",children:n.maxCombo})]}),z.jsxs("div",{className:"flex justify-between border-b border-slate-700 pb-2",children:[z.jsx("span",{className:"text-slate-400",children:"ACCURACY"}),z.jsxs("span",{className:"text-2xl text-neon-green",children:[n.accuracy.toFixed(2),"%"]})]}),z.jsxs("div",{className:"flex justify-between border-b border-slate-700 pb-2",children:[z.jsx("span",{className:"text-slate-400",children:"HIT RATE"}),z.jsxs("span",{className:"text-2xl text-neon-yellow",children:[s.toFixed(2),"%"]})]})]}),z.jsxs("div",{className:"space-y-3 bg-slate-950/50 p-4 rounded-md border border-slate-800",children:[z.jsxs("div",{className:"flex justify-between",children:[z.jsx("span",{className:"text-neon-cyan",children:"PERFECT"}),z.jsx("span",{className:"text-white",children:n.perfects})]}),z.jsxs("div",{className:"flex justify-between",children:[z.jsx("span",{className:"text-neon-green",children:"GREAT"}),z.jsx("span",{className:"text-white",children:n.greats})]}),z.jsxs("div",{className:"flex justify-between",children:[z.jsx("span",{className:"text-neon-yellow",children:"GOOD"}),z.jsx("span",{className:"text-white",children:n.goods})]}),z.jsxs("div",{className:"flex justify-between",children:[z.jsx("span",{className:"text-red-500",children:"MISS"}),z.jsx("span",{className:"text-white",children:n.misses})]})]})]})]}),z.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},children:z.jsx(ls,{size:"lg",onClick:e,className:"bg-neon-magenta hover:bg-neon-magenta/80 text-white font-bold text-xl px-12 py-8 rounded-none border-b-4 border-r-4 border-purple-950 active:border-0 active:translate-y-1 active:translate-x-1 transition-all shadow-[0_0_20px_rgba(255,0,255,0.4)]",children:"PLAY NEXT TRACK"})})]}),r&&z.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-50",children:a.map(h=>z.jsx(Ft.div,{className:"absolute w-3 h-6",style:{backgroundColor:h.color,left:`${h.x}%`,top:`${h.y}%`,rotate:Math.random()*360},initial:{y:0,rotateX:0,rotateY:0},animate:{y:"120vh",rotateX:360*2,rotateY:360*2},transition:{duration:h.duration,delay:h.delay+1.5,repeat:1/0,ease:"linear"}},h.id))})]})}function yU(){const n=Se(a=>a.phase),e=Se(a=>a.mode),t=Se(a=>a.difficulty),s=Se(a=>a.setPhase),r=async()=>{if(hs.state!=="running"){Re("audio.context.start.attempt",{contextState:hs.state});try{await Promise.race([Nl(),new Promise((a,c)=>setTimeout(()=>c(new Error("Audio context start timeout")),500))])}catch(a){ph("audio.context.start.failed",{reason:"timeout or user gesture required"},a)}}Re("app.phase.changed",{from:"ready",to:"countdown"}),s("countdown")};let i;switch(n){case"idle":i=z.jsx(CN,{});break;case"analyzing":i=z.jsx(YN,{});break;case"ready":i=z.jsx(Oo,{children:z.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[z.jsx("h2",{className:"text-4xl text-neon-green",children:"READY"}),z.jsx("p",{className:"text-slate-300 text-center px-4",children:e==="trackpad"?"Trackpad Only: tap/click anywhere.":"Classic: tap lanes or use D / F / J / K."}),z.jsxs("p",{className:"text-slate-400 uppercase tracking-wider",children:["Difficulty: ",t]}),z.jsx(ls,{size:"lg",onClick:r,className:"bg-neon-cyan hover:bg-neon-cyan/80 text-black",children:"PLAY NOW"})]})});break;case"countdown":case"playing":case"paused":i=z.jsx(mU,{});break;case"results":i=z.jsx(gU,{});break;default:i=z.jsx("div",{children:"Unknown Phase"})}return z.jsxs(z.Fragment,{children:[i,z.jsx("button",{onClick:()=>{v1()},style:{position:"fixed",bottom:12,right:12,zIndex:9999,background:"#00ffff",color:"#000",border:"none",padding:"6px 12px",fontSize:11,cursor:"pointer",fontFamily:"monospace",opacity:.8},children:"Copy Logs"})]})}function _U(){return z.jsx(yU,{})}window.onerror=(n,e,t,s,r)=>{Xn("app.uncaught.error",{message:typeof n=="string"?n:String(n),source:e,line:t,col:s},r)};window.addEventListener("unhandledrejection",n=>{Xn("app.unhandled.rejection",{reason:String(n.reason)},n.reason instanceof Error?n.reason:void 0)});Re("app.started",{userAgent:navigator.userAgent,screen:{w:window.innerWidth,h:window.innerHeight}});A2();D2.createRoot(document.getElementById("root")).render(z.jsx(J.StrictMode,{children:z.jsx(M2,{children:z.jsx(_U,{})})}));export{Qn as $,hT as A,Ml as B,Pt as C,Dn as D,Os as E,ln as F,Mt as G,tT as H,ym as I,PF as J,RF as K,LF as L,De as M,OF as N,Th as O,Qt as P,Ko as Q,im as R,tF as S,Le as T,Ju as U,lD as V,ys as W,rr as X,jF as Y,bn as Z,PS as _,xn as a,Ps as a0,Jv as a1,bl as a2,gV as a3,BD as a4,tw as a5,mp as a6,nw as a7,jD as a8,Vo as a9,_t as aa,IS as ab,W3 as ac,dT as ad,Oe as ae,Ll as af,ft as ag,GO as ah,BO as ai,hF as aj,rF as ak,EF as al,IF as am,BF as an,VF as ao,zF as ap,mt as b,He as c,zu as d,Pe as e,s3 as f,uO as g,YF as h,kh as i,jS as j,xt as k,To as l,RS as m,Ht as n,QO as o,vg as p,Bl as q,bD as r,Ch as s,gw as t,wO as u,ju as v,un as w,xg as x,lT as y,gs as z};
